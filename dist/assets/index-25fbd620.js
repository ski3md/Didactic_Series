import Wp from"openseadragon";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function Op(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Kc={exports:{}},ls={},Qc={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ui=Symbol.for("react.element"),Yp=Symbol.for("react.portal"),Kp=Symbol.for("react.fragment"),Qp=Symbol.for("react.strict_mode"),Xp=Symbol.for("react.profiler"),Zp=Symbol.for("react.provider"),em=Symbol.for("react.context"),tm=Symbol.for("react.forward_ref"),nm=Symbol.for("react.suspense"),im=Symbol.for("react.memo"),om=Symbol.for("react.lazy"),ma=Symbol.iterator;function sm(e){return e===null||typeof e!="object"?null:(e=ma&&e[ma]||e["@@iterator"],typeof e=="function"?e:null)}var Xc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zc=Object.assign,ed={};function Gn(e,t,n){this.props=e,this.context=t,this.refs=ed,this.updater=n||Xc}Gn.prototype.isReactComponent={};Gn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function td(){}td.prototype=Gn.prototype;function al(e,t,n){this.props=e,this.context=t,this.refs=ed,this.updater=n||Xc}var ul=al.prototype=new td;ul.constructor=al;Zc(ul,Gn.prototype);ul.isPureReactComponent=!0;var ha=Array.isArray,nd=Object.prototype.hasOwnProperty,cl={current:null},id={key:!0,ref:!0,__self:!0,__source:!0};function od(e,t,n){var i,o={},s=null,l=null;if(t!=null)for(i in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(s=""+t.key),t)nd.call(t,i)&&!id.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){for(var d=Array(c),f=0;f<c;f++)d[f]=arguments[f+2];o.children=d}if(e&&e.defaultProps)for(i in c=e.defaultProps,c)o[i]===void 0&&(o[i]=c[i]);return{$$typeof:Ui,type:e,key:s,ref:l,props:o,_owner:cl.current}}function rm(e,t){return{$$typeof:Ui,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function dl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ui}function lm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ga=/\/+/g;function ks(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lm(""+e.key):t.toString(36)}function go(e,t,n,i,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Ui:case Yp:l=!0}}if(l)return l=e,o=o(l),e=i===""?"."+ks(l,0):i,ha(o)?(n="",e!=null&&(n=e.replace(ga,"$&/")+"/"),go(o,t,n,"",function(f){return f})):o!=null&&(dl(o)&&(o=rm(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(ga,"$&/")+"/")+e)),t.push(o)),1;if(l=0,i=i===""?".":i+":",ha(e))for(var c=0;c<e.length;c++){s=e[c];var d=i+ks(s,c);l+=go(s,t,n,d,o)}else if(d=sm(e),typeof d=="function")for(e=d.call(e),c=0;!(s=e.next()).done;)s=s.value,d=i+ks(s,c++),l+=go(s,t,n,d,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Ji(e,t,n){if(e==null)return e;var i=[],o=0;return go(e,i,"","",function(s){return t.call(n,s,o++)}),i}function am(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ce={current:null},yo={transition:null},um={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:yo,ReactCurrentOwner:cl};function sd(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:Ji,forEach:function(e,t,n){Ji(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ji(e,function(){t++}),t},toArray:function(e){return Ji(e,function(t){return t})||[]},only:function(e){if(!dl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};V.Component=Gn;V.Fragment=Kp;V.Profiler=Xp;V.PureComponent=al;V.StrictMode=Qp;V.Suspense=nm;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=um;V.act=sd;V.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=Zc({},e.props),o=e.key,s=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,l=cl.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)nd.call(t,d)&&!id.hasOwnProperty(d)&&(i[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){c=Array(d);for(var f=0;f<d;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:Ui,type:e.type,key:o,ref:s,props:i,_owner:l}};V.createContext=function(e){return e={$$typeof:em,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Zp,_context:e},e.Consumer=e};V.createElement=od;V.createFactory=function(e){var t=od.bind(null,e);return t.type=e,t};V.createRef=function(){return{current:null}};V.forwardRef=function(e){return{$$typeof:tm,render:e}};V.isValidElement=dl;V.lazy=function(e){return{$$typeof:om,_payload:{_status:-1,_result:e},_init:am}};V.memo=function(e,t){return{$$typeof:im,type:e,compare:t===void 0?null:t}};V.startTransition=function(e){var t=yo.transition;yo.transition={};try{e()}finally{yo.transition=t}};V.unstable_act=sd;V.useCallback=function(e,t){return Ce.current.useCallback(e,t)};V.useContext=function(e){return Ce.current.useContext(e)};V.useDebugValue=function(){};V.useDeferredValue=function(e){return Ce.current.useDeferredValue(e)};V.useEffect=function(e,t){return Ce.current.useEffect(e,t)};V.useId=function(){return Ce.current.useId()};V.useImperativeHandle=function(e,t,n){return Ce.current.useImperativeHandle(e,t,n)};V.useInsertionEffect=function(e,t){return Ce.current.useInsertionEffect(e,t)};V.useLayoutEffect=function(e,t){return Ce.current.useLayoutEffect(e,t)};V.useMemo=function(e,t){return Ce.current.useMemo(e,t)};V.useReducer=function(e,t,n){return Ce.current.useReducer(e,t,n)};V.useRef=function(e){return Ce.current.useRef(e)};V.useState=function(e){return Ce.current.useState(e)};V.useSyncExternalStore=function(e,t,n){return Ce.current.useSyncExternalStore(e,t,n)};V.useTransition=function(){return Ce.current.useTransition()};V.version="18.3.1";Qc.exports=V;var I=Qc.exports;const rd=Op(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cm=I,dm=Symbol.for("react.element"),fm=Symbol.for("react.fragment"),pm=Object.prototype.hasOwnProperty,mm=cm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hm={key:!0,ref:!0,__self:!0,__source:!0};function ld(e,t,n){var i,o={},s=null,l=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(l=t.ref);for(i in t)pm.call(t,i)&&!hm.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)o[i]===void 0&&(o[i]=t[i]);return{$$typeof:dm,type:e,key:s,ref:l,props:o,_owner:mm.current}}ls.Fragment=fm;ls.jsx=ld;ls.jsxs=ld;Kc.exports=ls;var r=Kc.exports,rr={},ad={exports:{}},Le={},ud={exports:{}},cd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,b){var G=L.length;L.push(b);e:for(;0<G;){var ee=G-1>>>1,re=L[ee];if(0<o(re,b))L[ee]=b,L[G]=re,G=ee;else break e}}function n(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var b=L[0],G=L.pop();if(G!==b){L[0]=G;e:for(var ee=0,re=L.length,zi=re>>>1;ee<zi;){var Ft=2*(ee+1)-1,As=L[Ft],Gt=Ft+1,$i=L[Gt];if(0>o(As,G))Gt<re&&0>o($i,As)?(L[ee]=$i,L[Gt]=G,ee=Gt):(L[ee]=As,L[Ft]=G,ee=Ft);else if(Gt<re&&0>o($i,G))L[ee]=$i,L[Gt]=G,ee=Gt;else break e}}return b}function o(L,b){var G=L.sortIndex-b.sortIndex;return G!==0?G:L.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var d=[],f=[],p=1,m=null,h=3,g=!1,C=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(L){for(var b=n(f);b!==null;){if(b.callback===null)i(f);else if(b.startTime<=L)i(f),b.sortIndex=b.expirationTime,t(d,b);else break;b=n(f)}}function w(L){if(S=!1,x(L),!C)if(n(d)!==null)C=!0,Ae(T);else{var b=n(f);b!==null&&bt(w,b.startTime-L)}}function T(L,b){C=!1,S&&(S=!1,v(k),k=-1),g=!0;var G=h;try{for(x(b),m=n(d);m!==null&&(!(m.expirationTime>b)||L&&!B());){var ee=m.callback;if(typeof ee=="function"){m.callback=null,h=m.priorityLevel;var re=ee(m.expirationTime<=b);b=e.unstable_now(),typeof re=="function"?m.callback=re:m===n(d)&&i(d),x(b)}else i(d);m=n(d)}if(m!==null)var zi=!0;else{var Ft=n(f);Ft!==null&&bt(w,Ft.startTime-b),zi=!1}return zi}finally{m=null,h=G,g=!1}}var E=!1,_=null,k=-1,P=5,M=-1;function B(){return!(e.unstable_now()-M<P)}function z(){if(_!==null){var L=e.unstable_now();M=L;var b=!0;try{b=_(!0,L)}finally{b?pe():(E=!1,_=null)}}else E=!1}var pe;if(typeof y=="function")pe=function(){y(z)};else if(typeof MessageChannel<"u"){var $n=new MessageChannel,qi=$n.port2;$n.port1.onmessage=z,pe=function(){qi.postMessage(null)}}else pe=function(){N(z,0)};function Ae(L){_=L,E||(E=!0,pe())}function bt(L,b){k=N(function(){L(e.unstable_now())},b)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){C||g||(C=!0,Ae(T))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(L){switch(h){case 1:case 2:case 3:var b=3;break;default:b=h}var G=h;h=b;try{return L()}finally{h=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,b){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var G=h;h=L;try{return b()}finally{h=G}},e.unstable_scheduleCallback=function(L,b,G){var ee=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ee+G:ee):G=ee,L){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=G+re,L={id:p++,callback:b,priorityLevel:L,startTime:G,expirationTime:re,sortIndex:-1},G>ee?(L.sortIndex=G,t(f,L),n(d)===null&&L===n(f)&&(S?(v(k),k=-1):S=!0,bt(w,G-ee))):(L.sortIndex=re,t(d,L),C||g||(C=!0,Ae(T))),L},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(L){var b=h;return function(){var G=h;h=b;try{return L.apply(this,arguments)}finally{h=G}}}})(cd);ud.exports=cd;var gm=ud.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ym=I,Me=gm;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dd=new Set,yi={};function en(e,t){kn(e,t),kn(e+"Capture",t)}function kn(e,t){for(yi[e]=t,e=0;e<t.length;e++)dd.add(t[e])}var at=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lr=Object.prototype.hasOwnProperty,vm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ya={},va={};function xm(e){return lr.call(va,e)?!0:lr.call(ya,e)?!1:vm.test(e)?va[e]=!0:(ya[e]=!0,!1)}function wm(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Cm(e,t,n,i){if(t===null||typeof t>"u"||wm(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Se(e,t,n,i,o,s,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=l}var fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fe[e]=new Se(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fe[t]=new Se(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fe[e]=new Se(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fe[e]=new Se(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fe[e]=new Se(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fe[e]=new Se(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fe[e]=new Se(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fe[e]=new Se(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fe[e]=new Se(e,5,!1,e.toLowerCase(),null,!1,!1)});var fl=/[\-:]([a-z])/g;function pl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fl,pl);fe[t]=new Se(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fl,pl);fe[t]=new Se(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fl,pl);fe[t]=new Se(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fe[e]=new Se(e,1,!1,e.toLowerCase(),null,!1,!1)});fe.xlinkHref=new Se("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fe[e]=new Se(e,1,!1,e.toLowerCase(),null,!0,!0)});function ml(e,t,n,i){var o=fe.hasOwnProperty(t)?fe[t]:null;(o!==null?o.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Cm(t,n,o,i)&&(n=null),i||o===null?xm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,i=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var ft=ym.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wi=Symbol.for("react.element"),rn=Symbol.for("react.portal"),ln=Symbol.for("react.fragment"),hl=Symbol.for("react.strict_mode"),ar=Symbol.for("react.profiler"),fd=Symbol.for("react.provider"),pd=Symbol.for("react.context"),gl=Symbol.for("react.forward_ref"),ur=Symbol.for("react.suspense"),cr=Symbol.for("react.suspense_list"),yl=Symbol.for("react.memo"),ht=Symbol.for("react.lazy"),md=Symbol.for("react.offscreen"),xa=Symbol.iterator;function Jn(e){return e===null||typeof e!="object"?null:(e=xa&&e[xa]||e["@@iterator"],typeof e=="function"?e:null)}var X=Object.assign,Ps;function ii(e){if(Ps===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ps=t&&t[1]||""}return`
`+Ps+e}var Rs=!1;function Ms(e,t){if(!e||Rs)return"";Rs=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var i=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){i=f}e.call(t.prototype)}else{try{throw Error()}catch(f){i=f}e()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var o=f.stack.split(`
`),s=i.stack.split(`
`),l=o.length-1,c=s.length-1;1<=l&&0<=c&&o[l]!==s[c];)c--;for(;1<=l&&0<=c;l--,c--)if(o[l]!==s[c]){if(l!==1||c!==1)do if(l--,c--,0>c||o[l]!==s[c]){var d=`
`+o[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=c);break}}}finally{Rs=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ii(e):""}function Sm(e){switch(e.tag){case 5:return ii(e.type);case 16:return ii("Lazy");case 13:return ii("Suspense");case 19:return ii("SuspenseList");case 0:case 2:case 15:return e=Ms(e.type,!1),e;case 11:return e=Ms(e.type.render,!1),e;case 1:return e=Ms(e.type,!0),e;default:return""}}function dr(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ln:return"Fragment";case rn:return"Portal";case ar:return"Profiler";case hl:return"StrictMode";case ur:return"Suspense";case cr:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pd:return(e.displayName||"Context")+".Consumer";case fd:return(e._context.displayName||"Context")+".Provider";case gl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yl:return t=e.displayName||null,t!==null?t:dr(e.type)||"Memo";case ht:t=e._payload,e=e._init;try{return dr(e(t))}catch{}}return null}function Tm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dr(t);case 8:return t===hl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Em(e){var t=hd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(l){i=""+l,s.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Oi(e){e._valueTracker||(e._valueTracker=Em(e))}function gd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=hd(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Po(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function fr(e,t){var n=t.checked;return X({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function wa(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=Pt(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function yd(e,t){t=t.checked,t!=null&&ml(e,"checked",t,!1)}function pr(e,t){yd(e,t);var n=Pt(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?mr(e,t.type,n):t.hasOwnProperty("defaultValue")&&mr(e,t.type,Pt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ca(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function mr(e,t,n){(t!=="number"||Po(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var oi=Array.isArray;function xn(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Pt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function hr(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return X({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Sa(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(A(92));if(oi(n)){if(1<n.length)throw Error(A(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Pt(n)}}function vd(e,t){var n=Pt(t.value),i=Pt(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Ta(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gr(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yi,wd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yi=Yi||document.createElement("div"),Yi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_m=["Webkit","ms","Moz","O"];Object.keys(li).forEach(function(e){_m.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),li[t]=li[e]})});function Cd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||li.hasOwnProperty(e)&&li[e]?(""+t).trim():t+"px"}function Sd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=Cd(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,o):e[n]=o}}var Nm=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yr(e,t){if(t){if(Nm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function vr(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xr=null;function vl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wr=null,wn=null,Cn=null;function Ea(e){if(e=Gi(e)){if(typeof wr!="function")throw Error(A(280));var t=e.stateNode;t&&(t=fs(t),wr(e.stateNode,e.type,t))}}function Td(e){wn?Cn?Cn.push(e):Cn=[e]:wn=e}function Ed(){if(wn){var e=wn,t=Cn;if(Cn=wn=null,Ea(e),t)for(e=0;e<t.length;e++)Ea(t[e])}}function _d(e,t){return e(t)}function Nd(){}var Ls=!1;function Id(e,t,n){if(Ls)return e(t,n);Ls=!0;try{return _d(e,t,n)}finally{Ls=!1,(wn!==null||Cn!==null)&&(Nd(),Ed())}}function xi(e,t){var n=e.stateNode;if(n===null)return null;var i=fs(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(A(231,t,typeof n));return n}var Cr=!1;if(at)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){Cr=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{Cr=!1}function Im(e,t,n,i,o,s,l,c,d){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(p){this.onError(p)}}var ai=!1,Ro=null,Mo=!1,Sr=null,Am={onError:function(e){ai=!0,Ro=e}};function km(e,t,n,i,o,s,l,c,d){ai=!1,Ro=null,Im.apply(Am,arguments)}function Pm(e,t,n,i,o,s,l,c,d){if(km.apply(this,arguments),ai){if(ai){var f=Ro;ai=!1,Ro=null}else throw Error(A(198));Mo||(Mo=!0,Sr=f)}}function tn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ad(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _a(e){if(tn(e)!==e)throw Error(A(188))}function Rm(e){var t=e.alternate;if(!t){if(t=tn(e),t===null)throw Error(A(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return _a(o),e;if(s===i)return _a(o),t;s=s.sibling}throw Error(A(188))}if(n.return!==i.return)n=o,i=s;else{for(var l=!1,c=o.child;c;){if(c===n){l=!0,n=o,i=s;break}if(c===i){l=!0,i=o,n=s;break}c=c.sibling}if(!l){for(c=s.child;c;){if(c===n){l=!0,n=s,i=o;break}if(c===i){l=!0,i=s,n=o;break}c=c.sibling}if(!l)throw Error(A(189))}}if(n.alternate!==i)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?e:t}function kd(e){return e=Rm(e),e!==null?Pd(e):null}function Pd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Pd(e);if(t!==null)return t;e=e.sibling}return null}var Rd=Me.unstable_scheduleCallback,Na=Me.unstable_cancelCallback,Mm=Me.unstable_shouldYield,Lm=Me.unstable_requestPaint,te=Me.unstable_now,Dm=Me.unstable_getCurrentPriorityLevel,xl=Me.unstable_ImmediatePriority,Md=Me.unstable_UserBlockingPriority,Lo=Me.unstable_NormalPriority,Um=Me.unstable_LowPriority,Ld=Me.unstable_IdlePriority,as=null,tt=null;function bm(e){if(tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(as,e,void 0,(e.current.flags&128)===128)}catch{}}var Je=Math.clz32?Math.clz32:Vm,Fm=Math.log,Gm=Math.LN2;function Vm(e){return e>>>=0,e===0?32:31-(Fm(e)/Gm|0)|0}var Ki=64,Qi=4194304;function si(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Do(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,o=e.suspendedLanes,s=e.pingedLanes,l=n&268435455;if(l!==0){var c=l&~o;c!==0?i=si(c):(s&=l,s!==0&&(i=si(s)))}else l=n&~o,l!==0?i=si(l):s!==0&&(i=si(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&o)&&(o=i&-i,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Je(t),o=1<<n,i|=e[n],t&=~o;return i}function jm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hm(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Je(s),c=1<<l,d=o[l];d===-1?(!(c&n)||c&i)&&(o[l]=jm(c,t)):d<=t&&(e.expiredLanes|=c),s&=~c}}function Tr(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Dd(){var e=Ki;return Ki<<=1,!(Ki&4194240)&&(Ki=64),e}function Ds(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Je(t),e[t]=n}function Bm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Je(n),s=1<<o;t[o]=0,i[o]=-1,e[o]=-1,n&=~s}}function wl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Je(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}var q=0;function Ud(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var bd,Cl,Fd,Gd,Vd,Er=!1,Xi=[],St=null,Tt=null,Et=null,wi=new Map,Ci=new Map,yt=[],qm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ia(e,t){switch(e){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":wi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ci.delete(t.pointerId)}}function On(e,t,n,i,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[o]},t!==null&&(t=Gi(t),t!==null&&Cl(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function zm(e,t,n,i,o){switch(t){case"focusin":return St=On(St,e,t,n,i,o),!0;case"dragenter":return Tt=On(Tt,e,t,n,i,o),!0;case"mouseover":return Et=On(Et,e,t,n,i,o),!0;case"pointerover":var s=o.pointerId;return wi.set(s,On(wi.get(s)||null,e,t,n,i,o)),!0;case"gotpointercapture":return s=o.pointerId,Ci.set(s,On(Ci.get(s)||null,e,t,n,i,o)),!0}return!1}function jd(e){var t=qt(e.target);if(t!==null){var n=tn(t);if(n!==null){if(t=n.tag,t===13){if(t=Ad(n),t!==null){e.blockedOn=t,Vd(e.priority,function(){Fd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_r(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);xr=i,n.target.dispatchEvent(i),xr=null}else return t=Gi(n),t!==null&&Cl(t),e.blockedOn=n,!1;t.shift()}return!0}function Aa(e,t,n){vo(e)&&n.delete(t)}function $m(){Er=!1,St!==null&&vo(St)&&(St=null),Tt!==null&&vo(Tt)&&(Tt=null),Et!==null&&vo(Et)&&(Et=null),wi.forEach(Aa),Ci.forEach(Aa)}function Yn(e,t){e.blockedOn===t&&(e.blockedOn=null,Er||(Er=!0,Me.unstable_scheduleCallback(Me.unstable_NormalPriority,$m)))}function Si(e){function t(o){return Yn(o,e)}if(0<Xi.length){Yn(Xi[0],e);for(var n=1;n<Xi.length;n++){var i=Xi[n];i.blockedOn===e&&(i.blockedOn=null)}}for(St!==null&&Yn(St,e),Tt!==null&&Yn(Tt,e),Et!==null&&Yn(Et,e),wi.forEach(t),Ci.forEach(t),n=0;n<yt.length;n++)i=yt[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<yt.length&&(n=yt[0],n.blockedOn===null);)jd(n),n.blockedOn===null&&yt.shift()}var Sn=ft.ReactCurrentBatchConfig,Uo=!0;function Jm(e,t,n,i){var o=q,s=Sn.transition;Sn.transition=null;try{q=1,Sl(e,t,n,i)}finally{q=o,Sn.transition=s}}function Wm(e,t,n,i){var o=q,s=Sn.transition;Sn.transition=null;try{q=4,Sl(e,t,n,i)}finally{q=o,Sn.transition=s}}function Sl(e,t,n,i){if(Uo){var o=_r(e,t,n,i);if(o===null)zs(e,t,i,bo,n),Ia(e,i);else if(zm(o,e,t,n,i))i.stopPropagation();else if(Ia(e,i),t&4&&-1<qm.indexOf(e)){for(;o!==null;){var s=Gi(o);if(s!==null&&bd(s),s=_r(e,t,n,i),s===null&&zs(e,t,i,bo,n),s===o)break;o=s}o!==null&&i.stopPropagation()}else zs(e,t,i,null,n)}}var bo=null;function _r(e,t,n,i){if(bo=null,e=vl(i),e=qt(e),e!==null)if(t=tn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ad(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return bo=e,null}function Hd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dm()){case xl:return 1;case Md:return 4;case Lo:case Um:return 16;case Ld:return 536870912;default:return 16}default:return 16}}var xt=null,Tl=null,xo=null;function Bd(){if(xo)return xo;var e,t=Tl,n=t.length,i,o="value"in xt?xt.value:xt.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var l=n-e;for(i=1;i<=l&&t[n-i]===o[s-i];i++);return xo=o.slice(e,1<i?1-i:void 0)}function wo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zi(){return!0}function ka(){return!1}function De(e){function t(n,i,o,s,l){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zi:ka,this.isPropagationStopped=ka,this}return X(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zi)},persist:function(){},isPersistent:Zi}),t}var Vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},El=De(Vn),Fi=X({},Vn,{view:0,detail:0}),Om=De(Fi),Us,bs,Kn,us=X({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_l,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kn&&(Kn&&e.type==="mousemove"?(Us=e.screenX-Kn.screenX,bs=e.screenY-Kn.screenY):bs=Us=0,Kn=e),Us)},movementY:function(e){return"movementY"in e?e.movementY:bs}}),Pa=De(us),Ym=X({},us,{dataTransfer:0}),Km=De(Ym),Qm=X({},Fi,{relatedTarget:0}),Fs=De(Qm),Xm=X({},Vn,{animationName:0,elapsedTime:0,pseudoElement:0}),Zm=De(Xm),eh=X({},Vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),th=De(eh),nh=X({},Vn,{data:0}),Ra=De(nh),ih={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sh[e])?!!t[e]:!1}function _l(){return rh}var lh=X({},Fi,{key:function(e){if(e.key){var t=ih[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?oh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_l,charCode:function(e){return e.type==="keypress"?wo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ah=De(lh),uh=X({},us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ma=De(uh),ch=X({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_l}),dh=De(ch),fh=X({},Vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ph=De(fh),mh=X({},us,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hh=De(mh),gh=[9,13,27,32],Nl=at&&"CompositionEvent"in window,ui=null;at&&"documentMode"in document&&(ui=document.documentMode);var yh=at&&"TextEvent"in window&&!ui,qd=at&&(!Nl||ui&&8<ui&&11>=ui),La=String.fromCharCode(32),Da=!1;function zd(e,t){switch(e){case"keyup":return gh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $d(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var an=!1;function vh(e,t){switch(e){case"compositionend":return $d(t);case"keypress":return t.which!==32?null:(Da=!0,La);case"textInput":return e=t.data,e===La&&Da?null:e;default:return null}}function xh(e,t){if(an)return e==="compositionend"||!Nl&&zd(e,t)?(e=Bd(),xo=Tl=xt=null,an=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qd&&t.locale!=="ko"?null:t.data;default:return null}}var wh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ua(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wh[e.type]:t==="textarea"}function Jd(e,t,n,i){Td(i),t=Fo(t,"onChange"),0<t.length&&(n=new El("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var ci=null,Ti=null;function Ch(e){of(e,0)}function cs(e){var t=dn(e);if(gd(t))return e}function Sh(e,t){if(e==="change")return t}var Wd=!1;if(at){var Gs;if(at){var Vs="oninput"in document;if(!Vs){var ba=document.createElement("div");ba.setAttribute("oninput","return;"),Vs=typeof ba.oninput=="function"}Gs=Vs}else Gs=!1;Wd=Gs&&(!document.documentMode||9<document.documentMode)}function Fa(){ci&&(ci.detachEvent("onpropertychange",Od),Ti=ci=null)}function Od(e){if(e.propertyName==="value"&&cs(Ti)){var t=[];Jd(t,Ti,e,vl(e)),Id(Ch,t)}}function Th(e,t,n){e==="focusin"?(Fa(),ci=t,Ti=n,ci.attachEvent("onpropertychange",Od)):e==="focusout"&&Fa()}function Eh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cs(Ti)}function _h(e,t){if(e==="click")return cs(t)}function Nh(e,t){if(e==="input"||e==="change")return cs(t)}function Ih(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Oe=typeof Object.is=="function"?Object.is:Ih;function Ei(e,t){if(Oe(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!lr.call(t,o)||!Oe(e[o],t[o]))return!1}return!0}function Ga(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Va(e,t){var n=Ga(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ga(n)}}function Yd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Yd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Kd(){for(var e=window,t=Po();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Po(e.document)}return t}function Il(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ah(e){var t=Kd(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Yd(n.ownerDocument.documentElement,n)){if(i!==null&&Il(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(i.start,o);i=i.end===void 0?s:Math.min(i.end,o),!e.extend&&s>i&&(o=i,i=s,s=o),o=Va(n,s);var l=Va(n,i);o&&l&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kh=at&&"documentMode"in document&&11>=document.documentMode,un=null,Nr=null,di=null,Ir=!1;function ja(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ir||un==null||un!==Po(i)||(i=un,"selectionStart"in i&&Il(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),di&&Ei(di,i)||(di=i,i=Fo(Nr,"onSelect"),0<i.length&&(t=new El("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=un)))}function eo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cn={animationend:eo("Animation","AnimationEnd"),animationiteration:eo("Animation","AnimationIteration"),animationstart:eo("Animation","AnimationStart"),transitionend:eo("Transition","TransitionEnd")},js={},Qd={};at&&(Qd=document.createElement("div").style,"AnimationEvent"in window||(delete cn.animationend.animation,delete cn.animationiteration.animation,delete cn.animationstart.animation),"TransitionEvent"in window||delete cn.transitionend.transition);function ds(e){if(js[e])return js[e];if(!cn[e])return e;var t=cn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Qd)return js[e]=t[n];return e}var Xd=ds("animationend"),Zd=ds("animationiteration"),ef=ds("animationstart"),tf=ds("transitionend"),nf=new Map,Ha="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mt(e,t){nf.set(e,t),en(t,[e])}for(var Hs=0;Hs<Ha.length;Hs++){var Bs=Ha[Hs],Ph=Bs.toLowerCase(),Rh=Bs[0].toUpperCase()+Bs.slice(1);Mt(Ph,"on"+Rh)}Mt(Xd,"onAnimationEnd");Mt(Zd,"onAnimationIteration");Mt(ef,"onAnimationStart");Mt("dblclick","onDoubleClick");Mt("focusin","onFocus");Mt("focusout","onBlur");Mt(tf,"onTransitionEnd");kn("onMouseEnter",["mouseout","mouseover"]);kn("onMouseLeave",["mouseout","mouseover"]);kn("onPointerEnter",["pointerout","pointerover"]);kn("onPointerLeave",["pointerout","pointerover"]);en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));en("onBeforeInput",["compositionend","keypress","textInput","paste"]);en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mh=new Set("cancel close invalid load scroll toggle".split(" ").concat(ri));function Ba(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,Pm(i,t,void 0,e),e.currentTarget=null}function of(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var l=i.length-1;0<=l;l--){var c=i[l],d=c.instance,f=c.currentTarget;if(c=c.listener,d!==s&&o.isPropagationStopped())break e;Ba(o,c,f),s=d}else for(l=0;l<i.length;l++){if(c=i[l],d=c.instance,f=c.currentTarget,c=c.listener,d!==s&&o.isPropagationStopped())break e;Ba(o,c,f),s=d}}}if(Mo)throw e=Sr,Mo=!1,Sr=null,e}function J(e,t){var n=t[Mr];n===void 0&&(n=t[Mr]=new Set);var i=e+"__bubble";n.has(i)||(sf(t,e,2,!1),n.add(i))}function qs(e,t,n){var i=0;t&&(i|=4),sf(n,e,i,t)}var to="_reactListening"+Math.random().toString(36).slice(2);function _i(e){if(!e[to]){e[to]=!0,dd.forEach(function(n){n!=="selectionchange"&&(Mh.has(n)||qs(n,!1,e),qs(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[to]||(t[to]=!0,qs("selectionchange",!1,t))}}function sf(e,t,n,i){switch(Hd(t)){case 1:var o=Jm;break;case 4:o=Wm;break;default:o=Sl}n=o.bind(null,t,n,e),o=void 0,!Cr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function zs(e,t,n,i,o){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var c=i.stateNode.containerInfo;if(c===o||c.nodeType===8&&c.parentNode===o)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===o||d.nodeType===8&&d.parentNode===o))return;l=l.return}for(;c!==null;){if(l=qt(c),l===null)return;if(d=l.tag,d===5||d===6){i=s=l;continue e}c=c.parentNode}}i=i.return}Id(function(){var f=s,p=vl(n),m=[];e:{var h=nf.get(e);if(h!==void 0){var g=El,C=e;switch(e){case"keypress":if(wo(n)===0)break e;case"keydown":case"keyup":g=ah;break;case"focusin":C="focus",g=Fs;break;case"focusout":C="blur",g=Fs;break;case"beforeblur":case"afterblur":g=Fs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Pa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Km;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=dh;break;case Xd:case Zd:case ef:g=Zm;break;case tf:g=ph;break;case"scroll":g=Om;break;case"wheel":g=hh;break;case"copy":case"cut":case"paste":g=th;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ma}var S=(t&4)!==0,N=!S&&e==="scroll",v=S?h!==null?h+"Capture":null:h;S=[];for(var y=f,x;y!==null;){x=y;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,v!==null&&(w=xi(y,v),w!=null&&S.push(Ni(y,w,x)))),N)break;y=y.return}0<S.length&&(h=new g(h,C,null,n,p),m.push({event:h,listeners:S}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==xr&&(C=n.relatedTarget||n.fromElement)&&(qt(C)||C[ut]))break e;if((g||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,g?(C=n.relatedTarget||n.toElement,g=f,C=C?qt(C):null,C!==null&&(N=tn(C),C!==N||C.tag!==5&&C.tag!==6)&&(C=null)):(g=null,C=f),g!==C)){if(S=Pa,w="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(S=Ma,w="onPointerLeave",v="onPointerEnter",y="pointer"),N=g==null?h:dn(g),x=C==null?h:dn(C),h=new S(w,y+"leave",g,n,p),h.target=N,h.relatedTarget=x,w=null,qt(p)===f&&(S=new S(v,y+"enter",C,n,p),S.target=x,S.relatedTarget=N,w=S),N=w,g&&C)t:{for(S=g,v=C,y=0,x=S;x;x=sn(x))y++;for(x=0,w=v;w;w=sn(w))x++;for(;0<y-x;)S=sn(S),y--;for(;0<x-y;)v=sn(v),x--;for(;y--;){if(S===v||v!==null&&S===v.alternate)break t;S=sn(S),v=sn(v)}S=null}else S=null;g!==null&&qa(m,h,g,S,!1),C!==null&&N!==null&&qa(m,N,C,S,!0)}}e:{if(h=f?dn(f):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var T=Sh;else if(Ua(h))if(Wd)T=Nh;else{T=Eh;var E=Th}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=_h);if(T&&(T=T(e,f))){Jd(m,T,n,p);break e}E&&E(e,h,f),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&mr(h,"number",h.value)}switch(E=f?dn(f):window,e){case"focusin":(Ua(E)||E.contentEditable==="true")&&(un=E,Nr=f,di=null);break;case"focusout":di=Nr=un=null;break;case"mousedown":Ir=!0;break;case"contextmenu":case"mouseup":case"dragend":Ir=!1,ja(m,n,p);break;case"selectionchange":if(kh)break;case"keydown":case"keyup":ja(m,n,p)}var _;if(Nl)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else an?zd(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(qd&&n.locale!=="ko"&&(an||k!=="onCompositionStart"?k==="onCompositionEnd"&&an&&(_=Bd()):(xt=p,Tl="value"in xt?xt.value:xt.textContent,an=!0)),E=Fo(f,k),0<E.length&&(k=new Ra(k,e,null,n,p),m.push({event:k,listeners:E}),_?k.data=_:(_=$d(n),_!==null&&(k.data=_)))),(_=yh?vh(e,n):xh(e,n))&&(f=Fo(f,"onBeforeInput"),0<f.length&&(p=new Ra("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:f}),p.data=_))}of(m,t)})}function Ni(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fo(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=xi(e,n),s!=null&&i.unshift(Ni(e,s,o)),s=xi(e,t),s!=null&&i.push(Ni(e,s,o))),e=e.return}return i}function sn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function qa(e,t,n,i,o){for(var s=t._reactName,l=[];n!==null&&n!==i;){var c=n,d=c.alternate,f=c.stateNode;if(d!==null&&d===i)break;c.tag===5&&f!==null&&(c=f,o?(d=xi(n,s),d!=null&&l.unshift(Ni(n,d,c))):o||(d=xi(n,s),d!=null&&l.push(Ni(n,d,c)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var Lh=/\r\n?/g,Dh=/\u0000|\uFFFD/g;function za(e){return(typeof e=="string"?e:""+e).replace(Lh,`
`).replace(Dh,"")}function no(e,t,n){if(t=za(t),za(e)!==t&&n)throw Error(A(425))}function Go(){}var Ar=null,kr=null;function Pr(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Rr=typeof setTimeout=="function"?setTimeout:void 0,Uh=typeof clearTimeout=="function"?clearTimeout:void 0,$a=typeof Promise=="function"?Promise:void 0,bh=typeof queueMicrotask=="function"?queueMicrotask:typeof $a<"u"?function(e){return $a.resolve(null).then(e).catch(Fh)}:Rr;function Fh(e){setTimeout(function(){throw e})}function $s(e,t){var n=t,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){e.removeChild(o),Si(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);Si(t)}function _t(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ja(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var jn=Math.random().toString(36).slice(2),Ze="__reactFiber$"+jn,Ii="__reactProps$"+jn,ut="__reactContainer$"+jn,Mr="__reactEvents$"+jn,Gh="__reactListeners$"+jn,Vh="__reactHandles$"+jn;function qt(e){var t=e[Ze];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ut]||n[Ze]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ja(e);e!==null;){if(n=e[Ze])return n;e=Ja(e)}return t}e=n,n=e.parentNode}return null}function Gi(e){return e=e[Ze]||e[ut],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function fs(e){return e[Ii]||null}var Lr=[],fn=-1;function Lt(e){return{current:e}}function O(e){0>fn||(e.current=Lr[fn],Lr[fn]=null,fn--)}function $(e,t){fn++,Lr[fn]=e.current,e.current=t}var Rt={},ve=Lt(Rt),_e=Lt(!1),Ot=Rt;function Pn(e,t){var n=e.type.contextTypes;if(!n)return Rt;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ne(e){return e=e.childContextTypes,e!=null}function Vo(){O(_e),O(ve)}function Wa(e,t,n){if(ve.current!==Rt)throw Error(A(168));$(ve,t),$(_e,n)}function rf(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in t))throw Error(A(108,Tm(e)||"Unknown",o));return X({},n,i)}function jo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rt,Ot=ve.current,$(ve,e),$(_e,_e.current),!0}function Oa(e,t,n){var i=e.stateNode;if(!i)throw Error(A(169));n?(e=rf(e,t,Ot),i.__reactInternalMemoizedMergedChildContext=e,O(_e),O(ve),$(ve,e)):O(_e),$(_e,n)}var ot=null,ps=!1,Js=!1;function lf(e){ot===null?ot=[e]:ot.push(e)}function jh(e){ps=!0,lf(e)}function Dt(){if(!Js&&ot!==null){Js=!0;var e=0,t=q;try{var n=ot;for(q=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}ot=null,ps=!1}catch(o){throw ot!==null&&(ot=ot.slice(e+1)),Rd(xl,Dt),o}finally{q=t,Js=!1}}return null}var pn=[],mn=0,Ho=null,Bo=0,Ue=[],be=0,Yt=null,st=1,rt="";function Ht(e,t){pn[mn++]=Bo,pn[mn++]=Ho,Ho=e,Bo=t}function af(e,t,n){Ue[be++]=st,Ue[be++]=rt,Ue[be++]=Yt,Yt=e;var i=st;e=rt;var o=32-Je(i)-1;i&=~(1<<o),n+=1;var s=32-Je(t)+o;if(30<s){var l=o-o%5;s=(i&(1<<l)-1).toString(32),i>>=l,o-=l,st=1<<32-Je(t)+o|n<<o|i,rt=s+e}else st=1<<s|n<<o|i,rt=e}function Al(e){e.return!==null&&(Ht(e,1),af(e,1,0))}function kl(e){for(;e===Ho;)Ho=pn[--mn],pn[mn]=null,Bo=pn[--mn],pn[mn]=null;for(;e===Yt;)Yt=Ue[--be],Ue[be]=null,rt=Ue[--be],Ue[be]=null,st=Ue[--be],Ue[be]=null}var Re=null,Pe=null,Y=!1,$e=null;function uf(e,t){var n=Fe(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ya(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Re=e,Pe=_t(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Re=e,Pe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Yt!==null?{id:st,overflow:rt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Fe(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Re=e,Pe=null,!0):!1;default:return!1}}function Dr(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ur(e){if(Y){var t=Pe;if(t){var n=t;if(!Ya(e,t)){if(Dr(e))throw Error(A(418));t=_t(n.nextSibling);var i=Re;t&&Ya(e,t)?uf(i,n):(e.flags=e.flags&-4097|2,Y=!1,Re=e)}}else{if(Dr(e))throw Error(A(418));e.flags=e.flags&-4097|2,Y=!1,Re=e}}}function Ka(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Re=e}function io(e){if(e!==Re)return!1;if(!Y)return Ka(e),Y=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Pr(e.type,e.memoizedProps)),t&&(t=Pe)){if(Dr(e))throw cf(),Error(A(418));for(;t;)uf(e,t),t=_t(t.nextSibling)}if(Ka(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Pe=_t(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Pe=null}}else Pe=Re?_t(e.stateNode.nextSibling):null;return!0}function cf(){for(var e=Pe;e;)e=_t(e.nextSibling)}function Rn(){Pe=Re=null,Y=!1}function Pl(e){$e===null?$e=[e]:$e.push(e)}var Hh=ft.ReactCurrentBatchConfig;function Qn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var i=n.stateNode}if(!i)throw Error(A(147,e));var o=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(l){var c=o.refs;l===null?delete c[s]:c[s]=l},t._stringRef=s,t)}if(typeof e!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,e))}return e}function oo(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){var t=e._init;return t(e._payload)}function df(e){function t(v,y){if(e){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function n(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function o(v,y){return v=kt(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,e?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function l(v){return e&&v.alternate===null&&(v.flags|=2),v}function c(v,y,x,w){return y===null||y.tag!==6?(y=Zs(x,v.mode,w),y.return=v,y):(y=o(y,x),y.return=v,y)}function d(v,y,x,w){var T=x.type;return T===ln?p(v,y,x.props.children,w,x.key):y!==null&&(y.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ht&&Qa(T)===y.type)?(w=o(y,x.props),w.ref=Qn(v,y,x),w.return=v,w):(w=Io(x.type,x.key,x.props,null,v.mode,w),w.ref=Qn(v,y,x),w.return=v,w)}function f(v,y,x,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=er(x,v.mode,w),y.return=v,y):(y=o(y,x.children||[]),y.return=v,y)}function p(v,y,x,w,T){return y===null||y.tag!==7?(y=Wt(x,v.mode,w,T),y.return=v,y):(y=o(y,x),y.return=v,y)}function m(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Zs(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Wi:return x=Io(y.type,y.key,y.props,null,v.mode,x),x.ref=Qn(v,null,y),x.return=v,x;case rn:return y=er(y,v.mode,x),y.return=v,y;case ht:var w=y._init;return m(v,w(y._payload),x)}if(oi(y)||Jn(y))return y=Wt(y,v.mode,x,null),y.return=v,y;oo(v,y)}return null}function h(v,y,x,w){var T=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return T!==null?null:c(v,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Wi:return x.key===T?d(v,y,x,w):null;case rn:return x.key===T?f(v,y,x,w):null;case ht:return T=x._init,h(v,y,T(x._payload),w)}if(oi(x)||Jn(x))return T!==null?null:p(v,y,x,w,null);oo(v,x)}return null}function g(v,y,x,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(x)||null,c(y,v,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Wi:return v=v.get(w.key===null?x:w.key)||null,d(y,v,w,T);case rn:return v=v.get(w.key===null?x:w.key)||null,f(y,v,w,T);case ht:var E=w._init;return g(v,y,x,E(w._payload),T)}if(oi(w)||Jn(w))return v=v.get(x)||null,p(y,v,w,T,null);oo(y,w)}return null}function C(v,y,x,w){for(var T=null,E=null,_=y,k=y=0,P=null;_!==null&&k<x.length;k++){_.index>k?(P=_,_=null):P=_.sibling;var M=h(v,_,x[k],w);if(M===null){_===null&&(_=P);break}e&&_&&M.alternate===null&&t(v,_),y=s(M,y,k),E===null?T=M:E.sibling=M,E=M,_=P}if(k===x.length)return n(v,_),Y&&Ht(v,k),T;if(_===null){for(;k<x.length;k++)_=m(v,x[k],w),_!==null&&(y=s(_,y,k),E===null?T=_:E.sibling=_,E=_);return Y&&Ht(v,k),T}for(_=i(v,_);k<x.length;k++)P=g(_,v,k,x[k],w),P!==null&&(e&&P.alternate!==null&&_.delete(P.key===null?k:P.key),y=s(P,y,k),E===null?T=P:E.sibling=P,E=P);return e&&_.forEach(function(B){return t(v,B)}),Y&&Ht(v,k),T}function S(v,y,x,w){var T=Jn(x);if(typeof T!="function")throw Error(A(150));if(x=T.call(x),x==null)throw Error(A(151));for(var E=T=null,_=y,k=y=0,P=null,M=x.next();_!==null&&!M.done;k++,M=x.next()){_.index>k?(P=_,_=null):P=_.sibling;var B=h(v,_,M.value,w);if(B===null){_===null&&(_=P);break}e&&_&&B.alternate===null&&t(v,_),y=s(B,y,k),E===null?T=B:E.sibling=B,E=B,_=P}if(M.done)return n(v,_),Y&&Ht(v,k),T;if(_===null){for(;!M.done;k++,M=x.next())M=m(v,M.value,w),M!==null&&(y=s(M,y,k),E===null?T=M:E.sibling=M,E=M);return Y&&Ht(v,k),T}for(_=i(v,_);!M.done;k++,M=x.next())M=g(_,v,k,M.value,w),M!==null&&(e&&M.alternate!==null&&_.delete(M.key===null?k:M.key),y=s(M,y,k),E===null?T=M:E.sibling=M,E=M);return e&&_.forEach(function(z){return t(v,z)}),Y&&Ht(v,k),T}function N(v,y,x,w){if(typeof x=="object"&&x!==null&&x.type===ln&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Wi:e:{for(var T=x.key,E=y;E!==null;){if(E.key===T){if(T=x.type,T===ln){if(E.tag===7){n(v,E.sibling),y=o(E,x.props.children),y.return=v,v=y;break e}}else if(E.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ht&&Qa(T)===E.type){n(v,E.sibling),y=o(E,x.props),y.ref=Qn(v,E,x),y.return=v,v=y;break e}n(v,E);break}else t(v,E);E=E.sibling}x.type===ln?(y=Wt(x.props.children,v.mode,w,x.key),y.return=v,v=y):(w=Io(x.type,x.key,x.props,null,v.mode,w),w.ref=Qn(v,y,x),w.return=v,v=w)}return l(v);case rn:e:{for(E=x.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(v,y.sibling),y=o(y,x.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else t(v,y);y=y.sibling}y=er(x,v.mode,w),y.return=v,v=y}return l(v);case ht:return E=x._init,N(v,y,E(x._payload),w)}if(oi(x))return C(v,y,x,w);if(Jn(x))return S(v,y,x,w);oo(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(v,y.sibling),y=o(y,x),y.return=v,v=y):(n(v,y),y=Zs(x,v.mode,w),y.return=v,v=y),l(v)):n(v,y)}return N}var Mn=df(!0),ff=df(!1),qo=Lt(null),zo=null,hn=null,Rl=null;function Ml(){Rl=hn=zo=null}function Ll(e){var t=qo.current;O(qo),e._currentValue=t}function br(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Tn(e,t){zo=e,Rl=hn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ee=!0),e.firstContext=null)}function je(e){var t=e._currentValue;if(Rl!==e)if(e={context:e,memoizedValue:t,next:null},hn===null){if(zo===null)throw Error(A(308));hn=e,zo.dependencies={lanes:0,firstContext:e}}else hn=hn.next=e;return t}var zt=null;function Dl(e){zt===null?zt=[e]:zt.push(e)}function pf(e,t,n,i){var o=t.interleaved;return o===null?(n.next=n,Dl(t)):(n.next=o.next,o.next=n),t.interleaved=n,ct(e,i)}function ct(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var gt=!1;function Ul(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function lt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Nt(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,j&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,ct(e,n)}return o=i.interleaved,o===null?(t.next=t,Dl(i)):(t.next=o.next,o.next=t),i.interleaved=t,ct(e,n)}function Co(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,wl(e,n)}}function Xa(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $o(e,t,n,i){var o=e.updateQueue;gt=!1;var s=o.firstBaseUpdate,l=o.lastBaseUpdate,c=o.shared.pending;if(c!==null){o.shared.pending=null;var d=c,f=d.next;d.next=null,l===null?s=f:l.next=f,l=d;var p=e.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==l&&(c===null?p.firstBaseUpdate=f:c.next=f,p.lastBaseUpdate=d))}if(s!==null){var m=o.baseState;l=0,p=f=d=null,c=s;do{var h=c.lane,g=c.eventTime;if((i&h)===h){p!==null&&(p=p.next={eventTime:g,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var C=e,S=c;switch(h=t,g=n,S.tag){case 1:if(C=S.payload,typeof C=="function"){m=C.call(g,m,h);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=S.payload,h=typeof C=="function"?C.call(g,m,h):C,h==null)break e;m=X({},m,h);break e;case 2:gt=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[c]:h.push(c))}else g={eventTime:g,lane:h,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(f=p=g,d=m):p=p.next=g,l|=h;if(c=c.next,c===null){if(c=o.shared.pending,c===null)break;h=c,c=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);if(p===null&&(d=m),o.baseState=d,o.firstBaseUpdate=f,o.lastBaseUpdate=p,t=o.shared.interleaved,t!==null){o=t;do l|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);Qt|=l,e.lanes=l,e.memoizedState=m}}function Za(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(A(191,o));o.call(i)}}}var Vi={},nt=Lt(Vi),Ai=Lt(Vi),ki=Lt(Vi);function $t(e){if(e===Vi)throw Error(A(174));return e}function bl(e,t){switch($(ki,t),$(Ai,e),$(nt,Vi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:gr(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=gr(t,e)}O(nt),$(nt,t)}function Ln(){O(nt),O(Ai),O(ki)}function hf(e){$t(ki.current);var t=$t(nt.current),n=gr(t,e.type);t!==n&&($(Ai,e),$(nt,n))}function Fl(e){Ai.current===e&&(O(nt),O(Ai))}var K=Lt(0);function Jo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ws=[];function Gl(){for(var e=0;e<Ws.length;e++)Ws[e]._workInProgressVersionPrimary=null;Ws.length=0}var So=ft.ReactCurrentDispatcher,Os=ft.ReactCurrentBatchConfig,Kt=0,Q=null,oe=null,le=null,Wo=!1,fi=!1,Pi=0,Bh=0;function me(){throw Error(A(321))}function Vl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Oe(e[n],t[n]))return!1;return!0}function jl(e,t,n,i,o,s){if(Kt=s,Q=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,So.current=e===null||e.memoizedState===null?Jh:Wh,e=n(i,o),fi){s=0;do{if(fi=!1,Pi=0,25<=s)throw Error(A(301));s+=1,le=oe=null,t.updateQueue=null,So.current=Oh,e=n(i,o)}while(fi)}if(So.current=Oo,t=oe!==null&&oe.next!==null,Kt=0,le=oe=Q=null,Wo=!1,t)throw Error(A(300));return e}function Hl(){var e=Pi!==0;return Pi=0,e}function Xe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return le===null?Q.memoizedState=le=e:le=le.next=e,le}function He(){if(oe===null){var e=Q.alternate;e=e!==null?e.memoizedState:null}else e=oe.next;var t=le===null?Q.memoizedState:le.next;if(t!==null)le=t,oe=e;else{if(e===null)throw Error(A(310));oe=e,e={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},le===null?Q.memoizedState=le=e:le=le.next=e}return le}function Ri(e,t){return typeof t=="function"?t(e):t}function Ys(e){var t=He(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var i=oe,o=i.baseQueue,s=n.pending;if(s!==null){if(o!==null){var l=o.next;o.next=s.next,s.next=l}i.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,i=i.baseState;var c=l=null,d=null,f=s;do{var p=f.lane;if((Kt&p)===p)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:e(i,f.action);else{var m={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(c=d=m,l=i):d=d.next=m,Q.lanes|=p,Qt|=p}f=f.next}while(f!==null&&f!==s);d===null?l=i:d.next=c,Oe(i,t.memoizedState)||(Ee=!0),t.memoizedState=i,t.baseState=l,t.baseQueue=d,n.lastRenderedState=i}if(e=n.interleaved,e!==null){o=e;do s=o.lane,Q.lanes|=s,Qt|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ks(e){var t=He(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var l=o=o.next;do s=e(s,l.action),l=l.next;while(l!==o);Oe(s,t.memoizedState)||(Ee=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function gf(){}function yf(e,t){var n=Q,i=He(),o=t(),s=!Oe(i.memoizedState,o);if(s&&(i.memoizedState=o,Ee=!0),i=i.queue,Bl(wf.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||le!==null&&le.memoizedState.tag&1){if(n.flags|=2048,Mi(9,xf.bind(null,n,i,o,t),void 0,null),ue===null)throw Error(A(349));Kt&30||vf(n,t,o)}return o}function vf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Q.updateQueue,t===null?(t={lastEffect:null,stores:null},Q.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function xf(e,t,n,i){t.value=n,t.getSnapshot=i,Cf(t)&&Sf(e)}function wf(e,t,n){return n(function(){Cf(t)&&Sf(e)})}function Cf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Oe(e,n)}catch{return!0}}function Sf(e){var t=ct(e,1);t!==null&&We(t,e,1,-1)}function eu(e){var t=Xe();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:e},t.queue=e,e=e.dispatch=$h.bind(null,Q,e),[t.memoizedState,e]}function Mi(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Q.updateQueue,t===null?(t={lastEffect:null,stores:null},Q.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function Tf(){return He().memoizedState}function To(e,t,n,i){var o=Xe();Q.flags|=e,o.memoizedState=Mi(1|t,n,void 0,i===void 0?null:i)}function ms(e,t,n,i){var o=He();i=i===void 0?null:i;var s=void 0;if(oe!==null){var l=oe.memoizedState;if(s=l.destroy,i!==null&&Vl(i,l.deps)){o.memoizedState=Mi(t,n,s,i);return}}Q.flags|=e,o.memoizedState=Mi(1|t,n,s,i)}function tu(e,t){return To(8390656,8,e,t)}function Bl(e,t){return ms(2048,8,e,t)}function Ef(e,t){return ms(4,2,e,t)}function _f(e,t){return ms(4,4,e,t)}function Nf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function If(e,t,n){return n=n!=null?n.concat([e]):null,ms(4,4,Nf.bind(null,t,e),n)}function ql(){}function Af(e,t){var n=He();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Vl(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function kf(e,t){var n=He();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Vl(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Pf(e,t,n){return Kt&21?(Oe(n,t)||(n=Dd(),Q.lanes|=n,Qt|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ee=!0),e.memoizedState=n)}function qh(e,t){var n=q;q=n!==0&&4>n?n:4,e(!0);var i=Os.transition;Os.transition={};try{e(!1),t()}finally{q=n,Os.transition=i}}function Rf(){return He().memoizedState}function zh(e,t,n){var i=At(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Mf(e))Lf(t,n);else if(n=pf(e,t,n,i),n!==null){var o=we();We(n,e,i,o),Df(n,t,i)}}function $h(e,t,n){var i=At(e),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mf(e))Lf(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var l=t.lastRenderedState,c=s(l,n);if(o.hasEagerState=!0,o.eagerState=c,Oe(c,l)){var d=t.interleaved;d===null?(o.next=o,Dl(t)):(o.next=d.next,d.next=o),t.interleaved=o;return}}catch{}finally{}n=pf(e,t,o,i),n!==null&&(o=we(),We(n,e,i,o),Df(n,t,i))}}function Mf(e){var t=e.alternate;return e===Q||t!==null&&t===Q}function Lf(e,t){fi=Wo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Df(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,wl(e,n)}}var Oo={readContext:je,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useInsertionEffect:me,useLayoutEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useMutableSource:me,useSyncExternalStore:me,useId:me,unstable_isNewReconciler:!1},Jh={readContext:je,useCallback:function(e,t){return Xe().memoizedState=[e,t===void 0?null:t],e},useContext:je,useEffect:tu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,To(4194308,4,Nf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return To(4194308,4,e,t)},useInsertionEffect:function(e,t){return To(4,2,e,t)},useMemo:function(e,t){var n=Xe();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Xe();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=zh.bind(null,Q,e),[i.memoizedState,e]},useRef:function(e){var t=Xe();return e={current:e},t.memoizedState=e},useState:eu,useDebugValue:ql,useDeferredValue:function(e){return Xe().memoizedState=e},useTransition:function(){var e=eu(!1),t=e[0];return e=qh.bind(null,e[1]),Xe().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Q,o=Xe();if(Y){if(n===void 0)throw Error(A(407));n=n()}else{if(n=t(),ue===null)throw Error(A(349));Kt&30||vf(i,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,tu(wf.bind(null,i,s,e),[e]),i.flags|=2048,Mi(9,xf.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=Xe(),t=ue.identifierPrefix;if(Y){var n=rt,i=st;n=(i&~(1<<32-Je(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Pi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Bh++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wh={readContext:je,useCallback:Af,useContext:je,useEffect:Bl,useImperativeHandle:If,useInsertionEffect:Ef,useLayoutEffect:_f,useMemo:kf,useReducer:Ys,useRef:Tf,useState:function(){return Ys(Ri)},useDebugValue:ql,useDeferredValue:function(e){var t=He();return Pf(t,oe.memoizedState,e)},useTransition:function(){var e=Ys(Ri)[0],t=He().memoizedState;return[e,t]},useMutableSource:gf,useSyncExternalStore:yf,useId:Rf,unstable_isNewReconciler:!1},Oh={readContext:je,useCallback:Af,useContext:je,useEffect:Bl,useImperativeHandle:If,useInsertionEffect:Ef,useLayoutEffect:_f,useMemo:kf,useReducer:Ks,useRef:Tf,useState:function(){return Ks(Ri)},useDebugValue:ql,useDeferredValue:function(e){var t=He();return oe===null?t.memoizedState=e:Pf(t,oe.memoizedState,e)},useTransition:function(){var e=Ks(Ri)[0],t=He().memoizedState;return[e,t]},useMutableSource:gf,useSyncExternalStore:yf,useId:Rf,unstable_isNewReconciler:!1};function qe(e,t){if(e&&e.defaultProps){t=X({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Fr(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:X({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var hs={isMounted:function(e){return(e=e._reactInternals)?tn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=we(),o=At(e),s=lt(i,o);s.payload=t,n!=null&&(s.callback=n),t=Nt(e,s,o),t!==null&&(We(t,e,o,i),Co(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=we(),o=At(e),s=lt(i,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Nt(e,s,o),t!==null&&(We(t,e,o,i),Co(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=we(),i=At(e),o=lt(n,i);o.tag=2,t!=null&&(o.callback=t),t=Nt(e,o,i),t!==null&&(We(t,e,i,n),Co(t,e,i))}};function nu(e,t,n,i,o,s,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,l):t.prototype&&t.prototype.isPureReactComponent?!Ei(n,i)||!Ei(o,s):!0}function Uf(e,t,n){var i=!1,o=Rt,s=t.contextType;return typeof s=="object"&&s!==null?s=je(s):(o=Ne(t)?Ot:ve.current,i=t.contextTypes,s=(i=i!=null)?Pn(e,o):Rt),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=hs,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function iu(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&hs.enqueueReplaceState(t,t.state,null)}function Gr(e,t,n,i){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ul(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=je(s):(s=Ne(t)?Ot:ve.current,o.context=Pn(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Fr(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&hs.enqueueReplaceState(o,o.state,null),$o(e,n,o,i),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Dn(e,t){try{var n="",i=t;do n+=Sm(i),i=i.return;while(i);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function Qs(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Vr(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Yh=typeof WeakMap=="function"?WeakMap:Map;function bf(e,t,n){n=lt(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Ko||(Ko=!0,Yr=i),Vr(e,t)},n}function Ff(e,t,n){n=lt(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var o=t.value;n.payload=function(){return i(o)},n.callback=function(){Vr(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Vr(e,t),typeof i!="function"&&(It===null?It=new Set([this]):It.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function ou(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Yh;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(o.add(n),e=ug.bind(null,e,t,n),t.then(e,e))}function su(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ru(e,t,n,i,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=lt(-1,1),t.tag=2,Nt(n,t,1))),n.lanes|=1),e)}var Kh=ft.ReactCurrentOwner,Ee=!1;function xe(e,t,n,i){t.child=e===null?ff(t,null,n,i):Mn(t,e.child,n,i)}function lu(e,t,n,i,o){n=n.render;var s=t.ref;return Tn(t,o),i=jl(e,t,n,i,s,o),n=Hl(),e!==null&&!Ee?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,dt(e,t,o)):(Y&&n&&Al(t),t.flags|=1,xe(e,t,i,o),t.child)}function au(e,t,n,i,o){if(e===null){var s=n.type;return typeof s=="function"&&!Ql(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Gf(e,t,s,i,o)):(e=Io(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ei,n(l,i)&&e.ref===t.ref)return dt(e,t,o)}return t.flags|=1,e=kt(s,i),e.ref=t.ref,e.return=t,t.child=e}function Gf(e,t,n,i,o){if(e!==null){var s=e.memoizedProps;if(Ei(s,i)&&e.ref===t.ref)if(Ee=!1,t.pendingProps=i=s,(e.lanes&o)!==0)e.flags&131072&&(Ee=!0);else return t.lanes=e.lanes,dt(e,t,o)}return jr(e,t,n,i,o)}function Vf(e,t,n){var i=t.pendingProps,o=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$(yn,ke),ke|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$(yn,ke),ke|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,$(yn,ke),ke|=i}else s!==null?(i=s.baseLanes|n,t.memoizedState=null):i=n,$(yn,ke),ke|=i;return xe(e,t,o,n),t.child}function jf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function jr(e,t,n,i,o){var s=Ne(n)?Ot:ve.current;return s=Pn(t,s),Tn(t,o),n=jl(e,t,n,i,s,o),i=Hl(),e!==null&&!Ee?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,dt(e,t,o)):(Y&&i&&Al(t),t.flags|=1,xe(e,t,n,o),t.child)}function uu(e,t,n,i,o){if(Ne(n)){var s=!0;jo(t)}else s=!1;if(Tn(t,o),t.stateNode===null)Eo(e,t),Uf(t,n,i),Gr(t,n,i,o),i=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var d=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=je(f):(f=Ne(n)?Ot:ve.current,f=Pn(t,f));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==i||d!==f)&&iu(t,l,i,f),gt=!1;var h=t.memoizedState;l.state=h,$o(t,i,l,o),d=t.memoizedState,c!==i||h!==d||_e.current||gt?(typeof p=="function"&&(Fr(t,n,p,i),d=t.memoizedState),(c=gt||nu(t,n,c,i,h,d,f))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=d),l.props=i,l.state=d,l.context=f,i=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{l=t.stateNode,mf(e,t),c=t.memoizedProps,f=t.type===t.elementType?c:qe(t.type,c),l.props=f,m=t.pendingProps,h=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=je(d):(d=Ne(n)?Ot:ve.current,d=Pn(t,d));var g=n.getDerivedStateFromProps;(p=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==m||h!==d)&&iu(t,l,i,d),gt=!1,h=t.memoizedState,l.state=h,$o(t,i,l,o);var C=t.memoizedState;c!==m||h!==C||_e.current||gt?(typeof g=="function"&&(Fr(t,n,g,i),C=t.memoizedState),(f=gt||nu(t,n,f,i,h,C,d)||!1)?(p||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,C,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,C,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=C),l.props=i,l.state=C,l.context=d,i=f):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Hr(e,t,n,i,s,o)}function Hr(e,t,n,i,o,s){jf(e,t);var l=(t.flags&128)!==0;if(!i&&!l)return o&&Oa(t,n,!1),dt(e,t,s);i=t.stateNode,Kh.current=t;var c=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&l?(t.child=Mn(t,e.child,null,s),t.child=Mn(t,null,c,s)):xe(e,t,c,s),t.memoizedState=i.state,o&&Oa(t,n,!0),t.child}function Hf(e){var t=e.stateNode;t.pendingContext?Wa(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Wa(e,t.context,!1),bl(e,t.containerInfo)}function cu(e,t,n,i,o){return Rn(),Pl(o),t.flags|=256,xe(e,t,n,i),t.child}var Br={dehydrated:null,treeContext:null,retryLane:0};function qr(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bf(e,t,n){var i=t.pendingProps,o=K.current,s=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(o&2)!==0),c?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),$(K,o&1),e===null)return Ur(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=vs(l,i,0,null),e=Wt(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=qr(n),t.memoizedState=Br,e):zl(t,l));if(o=e.memoizedState,o!==null&&(c=o.dehydrated,c!==null))return Qh(e,t,l,i,c,o,n);if(s){s=i.fallback,l=t.mode,o=e.child,c=o.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&t.child!==o?(i=t.child,i.childLanes=0,i.pendingProps=d,t.deletions=null):(i=kt(o,d),i.subtreeFlags=o.subtreeFlags&14680064),c!==null?s=kt(c,s):(s=Wt(s,l,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=e.child.memoizedState,l=l===null?qr(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Br,i}return s=e.child,e=s.sibling,i=kt(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function zl(e,t){return t=vs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function so(e,t,n,i){return i!==null&&Pl(i),Mn(t,e.child,null,n),e=zl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qh(e,t,n,i,o,s,l){if(n)return t.flags&256?(t.flags&=-257,i=Qs(Error(A(422))),so(e,t,l,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,o=t.mode,i=vs({mode:"visible",children:i.children},o,0,null),s=Wt(s,o,l,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&Mn(t,e.child,null,l),t.child.memoizedState=qr(l),t.memoizedState=Br,s);if(!(t.mode&1))return so(e,t,l,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var c=i.dgst;return i=c,s=Error(A(419)),i=Qs(s,i,void 0),so(e,t,l,i)}if(c=(l&e.childLanes)!==0,Ee||c){if(i=ue,i!==null){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|l)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,ct(e,o),We(i,e,o,-1))}return Kl(),i=Qs(Error(A(421))),so(e,t,l,i)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=cg.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,Pe=_t(o.nextSibling),Re=t,Y=!0,$e=null,e!==null&&(Ue[be++]=st,Ue[be++]=rt,Ue[be++]=Yt,st=e.id,rt=e.overflow,Yt=t),t=zl(t,i.children),t.flags|=4096,t)}function du(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),br(e.return,t,n)}function Xs(e,t,n,i,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=o)}function qf(e,t,n){var i=t.pendingProps,o=i.revealOrder,s=i.tail;if(xe(e,t,i.children,n),i=K.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&du(e,n,t);else if(e.tag===19)du(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if($(K,i),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Jo(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Xs(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Jo(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Xs(t,!0,n,null,s);break;case"together":Xs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Eo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function dt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Qt|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,n=kt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=kt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Xh(e,t,n){switch(t.tag){case 3:Hf(t),Rn();break;case 5:hf(t);break;case 1:Ne(t.type)&&jo(t);break;case 4:bl(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,o=t.memoizedProps.value;$(qo,i._currentValue),i._currentValue=o;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?($(K,K.current&1),t.flags|=128,null):n&t.child.childLanes?Bf(e,t,n):($(K,K.current&1),e=dt(e,t,n),e!==null?e.sibling:null);$(K,K.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return qf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),$(K,K.current),i)break;return null;case 22:case 23:return t.lanes=0,Vf(e,t,n)}return dt(e,t,n)}var zf,zr,$f,Jf;zf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zr=function(){};$f=function(e,t,n,i){var o=e.memoizedProps;if(o!==i){e=t.stateNode,$t(nt.current);var s=null;switch(n){case"input":o=fr(e,o),i=fr(e,i),s=[];break;case"select":o=X({},o,{value:void 0}),i=X({},i,{value:void 0}),s=[];break;case"textarea":o=hr(e,o),i=hr(e,i),s=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Go)}yr(n,i);var l;n=null;for(f in o)if(!i.hasOwnProperty(f)&&o.hasOwnProperty(f)&&o[f]!=null)if(f==="style"){var c=o[f];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(yi.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in i){var d=i[f];if(c=o!=null?o[f]:void 0,i.hasOwnProperty(f)&&d!==c&&(d!=null||c!=null))if(f==="style")if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(s||(s=[]),s.push(f,n)),n=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(s=s||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(yi.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&J("scroll",e),s||c===d||(s=[])):(s=s||[]).push(f,d))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}};Jf=function(e,t,n,i){n!==i&&(t.flags|=4)};function Xn(e,t){if(!Y)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function he(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Zh(e,t,n){var i=t.pendingProps;switch(kl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(t),null;case 1:return Ne(t.type)&&Vo(),he(t),null;case 3:return i=t.stateNode,Ln(),O(_e),O(ve),Gl(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(io(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$e!==null&&(Xr($e),$e=null))),zr(e,t),he(t),null;case 5:Fl(t);var o=$t(ki.current);if(n=t.type,e!==null&&t.stateNode!=null)$f(e,t,n,i,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(A(166));return he(t),null}if(e=$t(nt.current),io(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[Ze]=t,i[Ii]=s,e=(t.mode&1)!==0,n){case"dialog":J("cancel",i),J("close",i);break;case"iframe":case"object":case"embed":J("load",i);break;case"video":case"audio":for(o=0;o<ri.length;o++)J(ri[o],i);break;case"source":J("error",i);break;case"img":case"image":case"link":J("error",i),J("load",i);break;case"details":J("toggle",i);break;case"input":wa(i,s),J("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},J("invalid",i);break;case"textarea":Sa(i,s),J("invalid",i)}yr(n,s),o=null;for(var l in s)if(s.hasOwnProperty(l)){var c=s[l];l==="children"?typeof c=="string"?i.textContent!==c&&(s.suppressHydrationWarning!==!0&&no(i.textContent,c,e),o=["children",c]):typeof c=="number"&&i.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&no(i.textContent,c,e),o=["children",""+c]):yi.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&J("scroll",i)}switch(n){case"input":Oi(i),Ca(i,s,!0);break;case"textarea":Oi(i),Ta(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Go)}i=o,t.updateQueue=i,i!==null&&(t.flags|=4)}else{l=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),n==="select"&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[Ze]=t,e[Ii]=i,zf(e,t,!1,!1),t.stateNode=e;e:{switch(l=vr(n,i),n){case"dialog":J("cancel",e),J("close",e),o=i;break;case"iframe":case"object":case"embed":J("load",e),o=i;break;case"video":case"audio":for(o=0;o<ri.length;o++)J(ri[o],e);o=i;break;case"source":J("error",e),o=i;break;case"img":case"image":case"link":J("error",e),J("load",e),o=i;break;case"details":J("toggle",e),o=i;break;case"input":wa(e,i),o=fr(e,i),J("invalid",e);break;case"option":o=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},o=X({},i,{value:void 0}),J("invalid",e);break;case"textarea":Sa(e,i),o=hr(e,i),J("invalid",e);break;default:o=i}yr(n,o),c=o;for(s in c)if(c.hasOwnProperty(s)){var d=c[s];s==="style"?Sd(e,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&wd(e,d)):s==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&vi(e,d):typeof d=="number"&&vi(e,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(yi.hasOwnProperty(s)?d!=null&&s==="onScroll"&&J("scroll",e):d!=null&&ml(e,s,d,l))}switch(n){case"input":Oi(e),Ca(e,i,!1);break;case"textarea":Oi(e),Ta(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Pt(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?xn(e,!!i.multiple,s,!1):i.defaultValue!=null&&xn(e,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Go)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return he(t),null;case 6:if(e&&t.stateNode!=null)Jf(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(A(166));if(n=$t(ki.current),$t(nt.current),io(t)){if(i=t.stateNode,n=t.memoizedProps,i[Ze]=t,(s=i.nodeValue!==n)&&(e=Re,e!==null))switch(e.tag){case 3:no(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&no(i.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ze]=t,t.stateNode=i}return he(t),null;case 13:if(O(K),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Y&&Pe!==null&&t.mode&1&&!(t.flags&128))cf(),Rn(),t.flags|=98560,s=!1;else if(s=io(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(A(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(A(317));s[Ze]=t}else Rn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;he(t),s=!1}else $e!==null&&(Xr($e),$e=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||K.current&1?se===0&&(se=3):Kl())),t.updateQueue!==null&&(t.flags|=4),he(t),null);case 4:return Ln(),zr(e,t),e===null&&_i(t.stateNode.containerInfo),he(t),null;case 10:return Ll(t.type._context),he(t),null;case 17:return Ne(t.type)&&Vo(),he(t),null;case 19:if(O(K),s=t.memoizedState,s===null)return he(t),null;if(i=(t.flags&128)!==0,l=s.rendering,l===null)if(i)Xn(s,!1);else{if(se!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Jo(e),l!==null){for(t.flags|=128,Xn(s,!1),i=l.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)s=n,e=i,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return $(K,K.current&1|2),t.child}e=e.sibling}s.tail!==null&&te()>Un&&(t.flags|=128,i=!0,Xn(s,!1),t.lanes=4194304)}else{if(!i)if(e=Jo(l),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Xn(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!Y)return he(t),null}else 2*te()-s.renderingStartTime>Un&&n!==1073741824&&(t.flags|=128,i=!0,Xn(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(n=s.last,n!==null?n.sibling=l:t.child=l,s.last=l)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,n=K.current,$(K,i?n&1|2:n&1),t):(he(t),null);case 22:case 23:return Yl(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?ke&1073741824&&(he(t),t.subtreeFlags&6&&(t.flags|=8192)):he(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function eg(e,t){switch(kl(t),t.tag){case 1:return Ne(t.type)&&Vo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ln(),O(_e),O(ve),Gl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Fl(t),null;case 13:if(O(K),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));Rn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return O(K),null;case 4:return Ln(),null;case 10:return Ll(t.type._context),null;case 22:case 23:return Yl(),null;case 24:return null;default:return null}}var ro=!1,ge=!1,tg=typeof WeakSet=="function"?WeakSet:Set,R=null;function gn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Z(e,t,i)}else n.current=null}function $r(e,t,n){try{n()}catch(i){Z(e,t,i)}}var fu=!1;function ng(e,t){if(Ar=Uo,e=Kd(),Il(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,c=-1,d=-1,f=0,p=0,m=e,h=null;t:for(;;){for(var g;m!==n||o!==0&&m.nodeType!==3||(c=l+o),m!==s||i!==0&&m.nodeType!==3||(d=l+i),m.nodeType===3&&(l+=m.nodeValue.length),(g=m.firstChild)!==null;)h=m,m=g;for(;;){if(m===e)break t;if(h===n&&++f===o&&(c=l),h===s&&++p===i&&(d=l),(g=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=g}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(kr={focusedElem:e,selectionRange:n},Uo=!1,R=t;R!==null;)if(t=R,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,R=e;else for(;R!==null;){t=R;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var S=C.memoizedProps,N=C.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?S:qe(t.type,S),N);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(w){Z(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,R=e;break}R=t.return}return C=fu,fu=!1,C}function pi(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&$r(t,n,s)}o=o.next}while(o!==i)}}function gs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Jr(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Wf(e){var t=e.alternate;t!==null&&(e.alternate=null,Wf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ze],delete t[Ii],delete t[Mr],delete t[Gh],delete t[Vh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Of(e){return e.tag===5||e.tag===3||e.tag===4}function pu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Of(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wr(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Go));else if(i!==4&&(e=e.child,e!==null))for(Wr(e,t,n),e=e.sibling;e!==null;)Wr(e,t,n),e=e.sibling}function Or(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Or(e,t,n),e=e.sibling;e!==null;)Or(e,t,n),e=e.sibling}var ce=null,ze=!1;function mt(e,t,n){for(n=n.child;n!==null;)Yf(e,t,n),n=n.sibling}function Yf(e,t,n){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(as,n)}catch{}switch(n.tag){case 5:ge||gn(n,t);case 6:var i=ce,o=ze;ce=null,mt(e,t,n),ce=i,ze=o,ce!==null&&(ze?(e=ce,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ce.removeChild(n.stateNode));break;case 18:ce!==null&&(ze?(e=ce,n=n.stateNode,e.nodeType===8?$s(e.parentNode,n):e.nodeType===1&&$s(e,n),Si(e)):$s(ce,n.stateNode));break;case 4:i=ce,o=ze,ce=n.stateNode.containerInfo,ze=!0,mt(e,t,n),ce=i,ze=o;break;case 0:case 11:case 14:case 15:if(!ge&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var s=o,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&$r(n,t,l),o=o.next}while(o!==i)}mt(e,t,n);break;case 1:if(!ge&&(gn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(c){Z(n,t,c)}mt(e,t,n);break;case 21:mt(e,t,n);break;case 22:n.mode&1?(ge=(i=ge)||n.memoizedState!==null,mt(e,t,n),ge=i):mt(e,t,n);break;default:mt(e,t,n)}}function mu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new tg),t.forEach(function(i){var o=dg.bind(null,e,i);n.has(i)||(n.add(i),i.then(o,o))})}}function Be(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var s=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:ce=c.stateNode,ze=!1;break e;case 3:ce=c.stateNode.containerInfo,ze=!0;break e;case 4:ce=c.stateNode.containerInfo,ze=!0;break e}c=c.return}if(ce===null)throw Error(A(160));Yf(s,l,o),ce=null,ze=!1;var d=o.alternate;d!==null&&(d.return=null),o.return=null}catch(f){Z(o,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Kf(t,e),t=t.sibling}function Kf(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Be(t,e),Qe(e),i&4){try{pi(3,e,e.return),gs(3,e)}catch(S){Z(e,e.return,S)}try{pi(5,e,e.return)}catch(S){Z(e,e.return,S)}}break;case 1:Be(t,e),Qe(e),i&512&&n!==null&&gn(n,n.return);break;case 5:if(Be(t,e),Qe(e),i&512&&n!==null&&gn(n,n.return),e.flags&32){var o=e.stateNode;try{vi(o,"")}catch(S){Z(e,e.return,S)}}if(i&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,l=n!==null?n.memoizedProps:s,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&yd(o,s),vr(c,l);var f=vr(c,s);for(l=0;l<d.length;l+=2){var p=d[l],m=d[l+1];p==="style"?Sd(o,m):p==="dangerouslySetInnerHTML"?wd(o,m):p==="children"?vi(o,m):ml(o,p,m,f)}switch(c){case"input":pr(o,s);break;case"textarea":vd(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?xn(o,!!s.multiple,g,!1):h!==!!s.multiple&&(s.defaultValue!=null?xn(o,!!s.multiple,s.defaultValue,!0):xn(o,!!s.multiple,s.multiple?[]:"",!1))}o[Ii]=s}catch(S){Z(e,e.return,S)}}break;case 6:if(Be(t,e),Qe(e),i&4){if(e.stateNode===null)throw Error(A(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(S){Z(e,e.return,S)}}break;case 3:if(Be(t,e),Qe(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Si(t.containerInfo)}catch(S){Z(e,e.return,S)}break;case 4:Be(t,e),Qe(e);break;case 13:Be(t,e),Qe(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Wl=te())),i&4&&mu(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(ge=(f=ge)||p,Be(t,e),ge=f):Be(t,e),Qe(e),i&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!p&&e.mode&1)for(R=e,p=e.child;p!==null;){for(m=R=p;R!==null;){switch(h=R,g=h.child,h.tag){case 0:case 11:case 14:case 15:pi(4,h,h.return);break;case 1:gn(h,h.return);var C=h.stateNode;if(typeof C.componentWillUnmount=="function"){i=h,n=h.return;try{t=i,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(S){Z(i,n,S)}}break;case 5:gn(h,h.return);break;case 22:if(h.memoizedState!==null){gu(m);continue}}g!==null?(g.return=h,R=g):gu(m)}p=p.sibling}e:for(p=null,m=e;;){if(m.tag===5){if(p===null){p=m;try{o=m.stateNode,f?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=m.stateNode,d=m.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=Cd("display",l))}catch(S){Z(e,e.return,S)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(S){Z(e,e.return,S)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Be(t,e),Qe(e),i&4&&mu(e);break;case 21:break;default:Be(t,e),Qe(e)}}function Qe(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Of(n)){var i=n;break e}n=n.return}throw Error(A(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(vi(o,""),i.flags&=-33);var s=pu(e);Or(e,s,o);break;case 3:case 4:var l=i.stateNode.containerInfo,c=pu(e);Wr(e,c,l);break;default:throw Error(A(161))}}catch(d){Z(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ig(e,t,n){R=e,Qf(e)}function Qf(e,t,n){for(var i=(e.mode&1)!==0;R!==null;){var o=R,s=o.child;if(o.tag===22&&i){var l=o.memoizedState!==null||ro;if(!l){var c=o.alternate,d=c!==null&&c.memoizedState!==null||ge;c=ro;var f=ge;if(ro=l,(ge=d)&&!f)for(R=o;R!==null;)l=R,d=l.child,l.tag===22&&l.memoizedState!==null?yu(o):d!==null?(d.return=l,R=d):yu(o);for(;s!==null;)R=s,Qf(s),s=s.sibling;R=o,ro=c,ge=f}hu(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,R=s):hu(e)}}function hu(e){for(;R!==null;){var t=R;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ge||gs(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!ge)if(n===null)i.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:qe(t.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Za(t,s,i);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Za(t,l,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Si(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}ge||t.flags&512&&Jr(t)}catch(h){Z(t,t.return,h)}}if(t===e){R=null;break}if(n=t.sibling,n!==null){n.return=t.return,R=n;break}R=t.return}}function gu(e){for(;R!==null;){var t=R;if(t===e){R=null;break}var n=t.sibling;if(n!==null){n.return=t.return,R=n;break}R=t.return}}function yu(e){for(;R!==null;){var t=R;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{gs(4,t)}catch(d){Z(t,n,d)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var o=t.return;try{i.componentDidMount()}catch(d){Z(t,o,d)}}var s=t.return;try{Jr(t)}catch(d){Z(t,s,d)}break;case 5:var l=t.return;try{Jr(t)}catch(d){Z(t,l,d)}}}catch(d){Z(t,t.return,d)}if(t===e){R=null;break}var c=t.sibling;if(c!==null){c.return=t.return,R=c;break}R=t.return}}var og=Math.ceil,Yo=ft.ReactCurrentDispatcher,$l=ft.ReactCurrentOwner,Ge=ft.ReactCurrentBatchConfig,j=0,ue=null,ne=null,de=0,ke=0,yn=Lt(0),se=0,Li=null,Qt=0,ys=0,Jl=0,mi=null,Te=null,Wl=0,Un=1/0,it=null,Ko=!1,Yr=null,It=null,lo=!1,wt=null,Qo=0,hi=0,Kr=null,_o=-1,No=0;function we(){return j&6?te():_o!==-1?_o:_o=te()}function At(e){return e.mode&1?j&2&&de!==0?de&-de:Hh.transition!==null?(No===0&&(No=Dd()),No):(e=q,e!==0||(e=window.event,e=e===void 0?16:Hd(e.type)),e):1}function We(e,t,n,i){if(50<hi)throw hi=0,Kr=null,Error(A(185));bi(e,n,i),(!(j&2)||e!==ue)&&(e===ue&&(!(j&2)&&(ys|=n),se===4&&vt(e,de)),Ie(e,i),n===1&&j===0&&!(t.mode&1)&&(Un=te()+500,ps&&Dt()))}function Ie(e,t){var n=e.callbackNode;Hm(e,t);var i=Do(e,e===ue?de:0);if(i===0)n!==null&&Na(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&Na(n),t===1)e.tag===0?jh(vu.bind(null,e)):lf(vu.bind(null,e)),bh(function(){!(j&6)&&Dt()}),n=null;else{switch(Ud(i)){case 1:n=xl;break;case 4:n=Md;break;case 16:n=Lo;break;case 536870912:n=Ld;break;default:n=Lo}n=sp(n,Xf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Xf(e,t){if(_o=-1,No=0,j&6)throw Error(A(327));var n=e.callbackNode;if(En()&&e.callbackNode!==n)return null;var i=Do(e,e===ue?de:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Xo(e,i);else{t=i;var o=j;j|=2;var s=ep();(ue!==e||de!==t)&&(it=null,Un=te()+500,Jt(e,t));do try{lg();break}catch(c){Zf(e,c)}while(1);Ml(),Yo.current=s,j=o,ne!==null?t=0:(ue=null,de=0,t=se)}if(t!==0){if(t===2&&(o=Tr(e),o!==0&&(i=o,t=Qr(e,o))),t===1)throw n=Li,Jt(e,0),vt(e,i),Ie(e,te()),n;if(t===6)vt(e,i);else{if(o=e.current.alternate,!(i&30)&&!sg(o)&&(t=Xo(e,i),t===2&&(s=Tr(e),s!==0&&(i=s,t=Qr(e,s))),t===1))throw n=Li,Jt(e,0),vt(e,i),Ie(e,te()),n;switch(e.finishedWork=o,e.finishedLanes=i,t){case 0:case 1:throw Error(A(345));case 2:Bt(e,Te,it);break;case 3:if(vt(e,i),(i&130023424)===i&&(t=Wl+500-te(),10<t)){if(Do(e,0)!==0)break;if(o=e.suspendedLanes,(o&i)!==i){we(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Rr(Bt.bind(null,e,Te,it),t);break}Bt(e,Te,it);break;case 4:if(vt(e,i),(i&4194240)===i)break;for(t=e.eventTimes,o=-1;0<i;){var l=31-Je(i);s=1<<l,l=t[l],l>o&&(o=l),i&=~s}if(i=o,i=te()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*og(i/1960))-i,10<i){e.timeoutHandle=Rr(Bt.bind(null,e,Te,it),i);break}Bt(e,Te,it);break;case 5:Bt(e,Te,it);break;default:throw Error(A(329))}}}return Ie(e,te()),e.callbackNode===n?Xf.bind(null,e):null}function Qr(e,t){var n=mi;return e.current.memoizedState.isDehydrated&&(Jt(e,t).flags|=256),e=Xo(e,t),e!==2&&(t=Te,Te=n,t!==null&&Xr(t)),e}function Xr(e){Te===null?Te=e:Te.push.apply(Te,e)}function sg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],s=o.getSnapshot;o=o.value;try{if(!Oe(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vt(e,t){for(t&=~Jl,t&=~ys,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Je(t),i=1<<n;e[n]=-1,t&=~i}}function vu(e){if(j&6)throw Error(A(327));En();var t=Do(e,0);if(!(t&1))return Ie(e,te()),null;var n=Xo(e,t);if(e.tag!==0&&n===2){var i=Tr(e);i!==0&&(t=i,n=Qr(e,i))}if(n===1)throw n=Li,Jt(e,0),vt(e,t),Ie(e,te()),n;if(n===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Bt(e,Te,it),Ie(e,te()),null}function Ol(e,t){var n=j;j|=1;try{return e(t)}finally{j=n,j===0&&(Un=te()+500,ps&&Dt())}}function Xt(e){wt!==null&&wt.tag===0&&!(j&6)&&En();var t=j;j|=1;var n=Ge.transition,i=q;try{if(Ge.transition=null,q=1,e)return e()}finally{q=i,Ge.transition=n,j=t,!(j&6)&&Dt()}}function Yl(){ke=yn.current,O(yn)}function Jt(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Uh(n)),ne!==null)for(n=ne.return;n!==null;){var i=n;switch(kl(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Vo();break;case 3:Ln(),O(_e),O(ve),Gl();break;case 5:Fl(i);break;case 4:Ln();break;case 13:O(K);break;case 19:O(K);break;case 10:Ll(i.type._context);break;case 22:case 23:Yl()}n=n.return}if(ue=e,ne=e=kt(e.current,null),de=ke=t,se=0,Li=null,Jl=ys=Qt=0,Te=mi=null,zt!==null){for(t=0;t<zt.length;t++)if(n=zt[t],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,s=n.pending;if(s!==null){var l=s.next;s.next=o,i.next=l}n.pending=i}zt=null}return e}function Zf(e,t){do{var n=ne;try{if(Ml(),So.current=Oo,Wo){for(var i=Q.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Wo=!1}if(Kt=0,le=oe=Q=null,fi=!1,Pi=0,$l.current=null,n===null||n.return===null){se=1,Li=t,ne=null;break}e:{var s=e,l=n.return,c=n,d=t;if(t=de,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,p=c,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var g=su(l);if(g!==null){g.flags&=-257,ru(g,l,c,s,t),g.mode&1&&ou(s,f,t),t=g,d=f;var C=t.updateQueue;if(C===null){var S=new Set;S.add(d),t.updateQueue=S}else C.add(d);break e}else{if(!(t&1)){ou(s,f,t),Kl();break e}d=Error(A(426))}}else if(Y&&c.mode&1){var N=su(l);if(N!==null){!(N.flags&65536)&&(N.flags|=256),ru(N,l,c,s,t),Pl(Dn(d,c));break e}}s=d=Dn(d,c),se!==4&&(se=2),mi===null?mi=[s]:mi.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=bf(s,d,t);Xa(s,v);break e;case 1:c=d;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(It===null||!It.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=Ff(s,c,t);Xa(s,w);break e}}s=s.return}while(s!==null)}np(n)}catch(T){t=T,ne===n&&n!==null&&(ne=n=n.return);continue}break}while(1)}function ep(){var e=Yo.current;return Yo.current=Oo,e===null?Oo:e}function Kl(){(se===0||se===3||se===2)&&(se=4),ue===null||!(Qt&268435455)&&!(ys&268435455)||vt(ue,de)}function Xo(e,t){var n=j;j|=2;var i=ep();(ue!==e||de!==t)&&(it=null,Jt(e,t));do try{rg();break}catch(o){Zf(e,o)}while(1);if(Ml(),j=n,Yo.current=i,ne!==null)throw Error(A(261));return ue=null,de=0,se}function rg(){for(;ne!==null;)tp(ne)}function lg(){for(;ne!==null&&!Mm();)tp(ne)}function tp(e){var t=op(e.alternate,e,ke);e.memoizedProps=e.pendingProps,t===null?np(e):ne=t,$l.current=null}function np(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=eg(n,t),n!==null){n.flags&=32767,ne=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{se=6,ne=null;return}}else if(n=Zh(n,t,ke),n!==null){ne=n;return}if(t=t.sibling,t!==null){ne=t;return}ne=t=e}while(t!==null);se===0&&(se=5)}function Bt(e,t,n){var i=q,o=Ge.transition;try{Ge.transition=null,q=1,ag(e,t,n,i)}finally{Ge.transition=o,q=i}return null}function ag(e,t,n,i){do En();while(wt!==null);if(j&6)throw Error(A(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Bm(e,s),e===ue&&(ne=ue=null,de=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lo||(lo=!0,sp(Lo,function(){return En(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ge.transition,Ge.transition=null;var l=q;q=1;var c=j;j|=4,$l.current=null,ng(e,n),Kf(n,e),Ah(kr),Uo=!!Ar,kr=Ar=null,e.current=n,ig(n),Lm(),j=c,q=l,Ge.transition=s}else e.current=n;if(lo&&(lo=!1,wt=e,Qo=o),s=e.pendingLanes,s===0&&(It=null),bm(n.stateNode),Ie(e,te()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(Ko)throw Ko=!1,e=Yr,Yr=null,e;return Qo&1&&e.tag!==0&&En(),s=e.pendingLanes,s&1?e===Kr?hi++:(hi=0,Kr=e):hi=0,Dt(),null}function En(){if(wt!==null){var e=Ud(Qo),t=Ge.transition,n=q;try{if(Ge.transition=null,q=16>e?16:e,wt===null)var i=!1;else{if(e=wt,wt=null,Qo=0,j&6)throw Error(A(331));var o=j;for(j|=4,R=e.current;R!==null;){var s=R,l=s.child;if(R.flags&16){var c=s.deletions;if(c!==null){for(var d=0;d<c.length;d++){var f=c[d];for(R=f;R!==null;){var p=R;switch(p.tag){case 0:case 11:case 15:pi(8,p,s)}var m=p.child;if(m!==null)m.return=p,R=m;else for(;R!==null;){p=R;var h=p.sibling,g=p.return;if(Wf(p),p===f){R=null;break}if(h!==null){h.return=g,R=h;break}R=g}}}var C=s.alternate;if(C!==null){var S=C.child;if(S!==null){C.child=null;do{var N=S.sibling;S.sibling=null,S=N}while(S!==null)}}R=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,R=l;else e:for(;R!==null;){if(s=R,s.flags&2048)switch(s.tag){case 0:case 11:case 15:pi(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,R=v;break e}R=s.return}}var y=e.current;for(R=y;R!==null;){l=R;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,R=x;else e:for(l=y;R!==null;){if(c=R,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:gs(9,c)}}catch(T){Z(c,c.return,T)}if(c===l){R=null;break e}var w=c.sibling;if(w!==null){w.return=c.return,R=w;break e}R=c.return}}if(j=o,Dt(),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(as,e)}catch{}i=!0}return i}finally{q=n,Ge.transition=t}}return!1}function xu(e,t,n){t=Dn(n,t),t=bf(e,t,1),e=Nt(e,t,1),t=we(),e!==null&&(bi(e,1,t),Ie(e,t))}function Z(e,t,n){if(e.tag===3)xu(e,e,n);else for(;t!==null;){if(t.tag===3){xu(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(It===null||!It.has(i))){e=Dn(n,e),e=Ff(t,e,1),t=Nt(t,e,1),e=we(),t!==null&&(bi(t,1,e),Ie(t,e));break}}t=t.return}}function ug(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=we(),e.pingedLanes|=e.suspendedLanes&n,ue===e&&(de&n)===n&&(se===4||se===3&&(de&130023424)===de&&500>te()-Wl?Jt(e,0):Jl|=n),Ie(e,t)}function ip(e,t){t===0&&(e.mode&1?(t=Qi,Qi<<=1,!(Qi&130023424)&&(Qi=4194304)):t=1);var n=we();e=ct(e,t),e!==null&&(bi(e,t,n),Ie(e,n))}function cg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ip(e,n)}function dg(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(A(314))}i!==null&&i.delete(t),ip(e,n)}var op;op=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_e.current)Ee=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ee=!1,Xh(e,t,n);Ee=!!(e.flags&131072)}else Ee=!1,Y&&t.flags&1048576&&af(t,Bo,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Eo(e,t),e=t.pendingProps;var o=Pn(t,ve.current);Tn(t,n),o=jl(null,t,i,e,o,n);var s=Hl();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ne(i)?(s=!0,jo(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ul(t),o.updater=hs,t.stateNode=o,o._reactInternals=t,Gr(t,i,e,n),t=Hr(null,t,i,!0,s,n)):(t.tag=0,Y&&s&&Al(t),xe(null,t,o,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Eo(e,t),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=pg(i),e=qe(i,e),o){case 0:t=jr(null,t,i,e,n);break e;case 1:t=uu(null,t,i,e,n);break e;case 11:t=lu(null,t,i,e,n);break e;case 14:t=au(null,t,i,qe(i.type,e),n);break e}throw Error(A(306,i,""))}return t;case 0:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:qe(i,o),jr(e,t,i,o,n);case 1:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:qe(i,o),uu(e,t,i,o,n);case 3:e:{if(Hf(t),e===null)throw Error(A(387));i=t.pendingProps,s=t.memoizedState,o=s.element,mf(e,t),$o(t,i,null,n);var l=t.memoizedState;if(i=l.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=Dn(Error(A(423)),t),t=cu(e,t,i,n,o);break e}else if(i!==o){o=Dn(Error(A(424)),t),t=cu(e,t,i,n,o);break e}else for(Pe=_t(t.stateNode.containerInfo.firstChild),Re=t,Y=!0,$e=null,n=ff(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rn(),i===o){t=dt(e,t,n);break e}xe(e,t,i,n)}t=t.child}return t;case 5:return hf(t),e===null&&Ur(t),i=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,l=o.children,Pr(i,o)?l=null:s!==null&&Pr(i,s)&&(t.flags|=32),jf(e,t),xe(e,t,l,n),t.child;case 6:return e===null&&Ur(t),null;case 13:return Bf(e,t,n);case 4:return bl(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Mn(t,null,i,n):xe(e,t,i,n),t.child;case 11:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:qe(i,o),lu(e,t,i,o,n);case 7:return xe(e,t,t.pendingProps,n),t.child;case 8:return xe(e,t,t.pendingProps.children,n),t.child;case 12:return xe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,o=t.pendingProps,s=t.memoizedProps,l=o.value,$(qo,i._currentValue),i._currentValue=l,s!==null)if(Oe(s.value,l)){if(s.children===o.children&&!_e.current){t=dt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var c=s.dependencies;if(c!==null){l=s.child;for(var d=c.firstContext;d!==null;){if(d.context===i){if(s.tag===1){d=lt(-1,n&-n),d.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?d.next=d:(d.next=p.next,p.next=d),f.pending=d}}s.lanes|=n,d=s.alternate,d!==null&&(d.lanes|=n),br(s.return,n,t),c.lanes|=n;break}d=d.next}}else if(s.tag===10)l=s.type===t.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(A(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),br(l,n,t),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===t){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}xe(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps.children,Tn(t,n),o=je(o),i=i(o),t.flags|=1,xe(e,t,i,n),t.child;case 14:return i=t.type,o=qe(i,t.pendingProps),o=qe(i.type,o),au(e,t,i,o,n);case 15:return Gf(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:qe(i,o),Eo(e,t),t.tag=1,Ne(i)?(e=!0,jo(t)):e=!1,Tn(t,n),Uf(t,i,o),Gr(t,i,o,n),Hr(null,t,i,!0,e,n);case 19:return qf(e,t,n);case 22:return Vf(e,t,n)}throw Error(A(156,t.tag))};function sp(e,t){return Rd(e,t)}function fg(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fe(e,t,n,i){return new fg(e,t,n,i)}function Ql(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pg(e){if(typeof e=="function")return Ql(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gl)return 11;if(e===yl)return 14}return 2}function kt(e,t){var n=e.alternate;return n===null?(n=Fe(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Io(e,t,n,i,o,s){var l=2;if(i=e,typeof e=="function")Ql(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case ln:return Wt(n.children,o,s,t);case hl:l=8,o|=8;break;case ar:return e=Fe(12,n,t,o|2),e.elementType=ar,e.lanes=s,e;case ur:return e=Fe(13,n,t,o),e.elementType=ur,e.lanes=s,e;case cr:return e=Fe(19,n,t,o),e.elementType=cr,e.lanes=s,e;case md:return vs(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fd:l=10;break e;case pd:l=9;break e;case gl:l=11;break e;case yl:l=14;break e;case ht:l=16,i=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=Fe(l,n,t,o),t.elementType=e,t.type=i,t.lanes=s,t}function Wt(e,t,n,i){return e=Fe(7,e,i,t),e.lanes=n,e}function vs(e,t,n,i){return e=Fe(22,e,i,t),e.elementType=md,e.lanes=n,e.stateNode={isHidden:!1},e}function Zs(e,t,n){return e=Fe(6,e,null,t),e.lanes=n,e}function er(e,t,n){return t=Fe(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mg(e,t,n,i,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ds(0),this.expirationTimes=Ds(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ds(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Xl(e,t,n,i,o,s,l,c,d){return e=new mg(e,t,n,c,d),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Fe(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ul(s),e}function hg(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rn,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function rp(e){if(!e)return Rt;e=e._reactInternals;e:{if(tn(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ne(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var n=e.type;if(Ne(n))return rf(e,n,t)}return t}function lp(e,t,n,i,o,s,l,c,d){return e=Xl(n,i,!0,e,o,s,l,c,d),e.context=rp(null),n=e.current,i=we(),o=At(n),s=lt(i,o),s.callback=t??null,Nt(n,s,o),e.current.lanes=o,bi(e,o,i),Ie(e,i),e}function xs(e,t,n,i){var o=t.current,s=we(),l=At(o);return n=rp(n),t.context===null?t.context=n:t.pendingContext=n,t=lt(s,l),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Nt(o,t,l),e!==null&&(We(e,o,l,s),Co(e,o,l)),l}function Zo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Zl(e,t){wu(e,t),(e=e.alternate)&&wu(e,t)}function gg(){return null}var ap=typeof reportError=="function"?reportError:function(e){console.error(e)};function ea(e){this._internalRoot=e}ws.prototype.render=ea.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));xs(e,t,null,null)};ws.prototype.unmount=ea.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xt(function(){xs(null,e,null,null)}),t[ut]=null}};function ws(e){this._internalRoot=e}ws.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yt.length&&t!==0&&t<yt[n].priority;n++);yt.splice(n,0,e),n===0&&jd(e)}};function ta(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Cs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cu(){}function yg(e,t,n,i,o){if(o){if(typeof i=="function"){var s=i;i=function(){var f=Zo(l);s.call(f)}}var l=lp(t,i,e,0,null,!1,!1,"",Cu);return e._reactRootContainer=l,e[ut]=l.current,_i(e.nodeType===8?e.parentNode:e),Xt(),l}for(;o=e.lastChild;)e.removeChild(o);if(typeof i=="function"){var c=i;i=function(){var f=Zo(d);c.call(f)}}var d=Xl(e,0,!1,null,null,!1,!1,"",Cu);return e._reactRootContainer=d,e[ut]=d.current,_i(e.nodeType===8?e.parentNode:e),Xt(function(){xs(t,d,n,i)}),d}function Ss(e,t,n,i,o){var s=n._reactRootContainer;if(s){var l=s;if(typeof o=="function"){var c=o;o=function(){var d=Zo(l);c.call(d)}}xs(t,l,e,o)}else l=yg(n,t,e,o,i);return Zo(l)}bd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=si(t.pendingLanes);n!==0&&(wl(t,n|1),Ie(t,te()),!(j&6)&&(Un=te()+500,Dt()))}break;case 13:Xt(function(){var i=ct(e,1);if(i!==null){var o=we();We(i,e,1,o)}}),Zl(e,1)}};Cl=function(e){if(e.tag===13){var t=ct(e,134217728);if(t!==null){var n=we();We(t,e,134217728,n)}Zl(e,134217728)}};Fd=function(e){if(e.tag===13){var t=At(e),n=ct(e,t);if(n!==null){var i=we();We(n,e,t,i)}Zl(e,t)}};Gd=function(){return q};Vd=function(e,t){var n=q;try{return q=e,t()}finally{q=n}};wr=function(e,t,n){switch(t){case"input":if(pr(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=fs(i);if(!o)throw Error(A(90));gd(i),pr(i,o)}}}break;case"textarea":vd(e,n);break;case"select":t=n.value,t!=null&&xn(e,!!n.multiple,t,!1)}};_d=Ol;Nd=Xt;var vg={usingClientEntryPoint:!1,Events:[Gi,dn,fs,Td,Ed,Ol]},Zn={findFiberByHostInstance:qt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xg={bundleType:Zn.bundleType,version:Zn.version,rendererPackageName:Zn.rendererPackageName,rendererConfig:Zn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ft.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=kd(e),e===null?null:e.stateNode},findFiberByHostInstance:Zn.findFiberByHostInstance||gg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ao=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ao.isDisabled&&ao.supportsFiber)try{as=ao.inject(xg),tt=ao}catch{}}Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vg;Le.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ta(t))throw Error(A(200));return hg(e,t,null,n)};Le.createRoot=function(e,t){if(!ta(e))throw Error(A(299));var n=!1,i="",o=ap;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Xl(e,1,!1,null,null,n,!1,i,o),e[ut]=t.current,_i(e.nodeType===8?e.parentNode:e),new ea(t)};Le.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=kd(t),e=e===null?null:e.stateNode,e};Le.flushSync=function(e){return Xt(e)};Le.hydrate=function(e,t,n){if(!Cs(t))throw Error(A(200));return Ss(null,e,t,!0,n)};Le.hydrateRoot=function(e,t,n){if(!ta(e))throw Error(A(405));var i=n!=null&&n.hydratedSources||null,o=!1,s="",l=ap;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=lp(t,null,e,1,n??null,o,!1,s,l),e[ut]=t.current,_i(e),i)for(e=0;e<i.length;e++)n=i[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new ws(t)};Le.render=function(e,t,n){if(!Cs(t))throw Error(A(200));return Ss(null,e,t,!1,n)};Le.unmountComponentAtNode=function(e){if(!Cs(e))throw Error(A(40));return e._reactRootContainer?(Xt(function(){Ss(null,null,e,!1,function(){e._reactRootContainer=null,e[ut]=null})}),!0):!1};Le.unstable_batchedUpdates=Ol;Le.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Cs(n))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return Ss(e,t,n,!1,i)};Le.version="18.3.1-next-f1338f8080-20240426";function up(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(up)}catch(e){console.error(e)}}up(),ad.exports=Le;var wg=ad.exports,Su=wg;rr.createRoot=Su.createRoot,rr.hydrateRoot=Su.hydrateRoot;var U=(e=>(e.HOME="Home",e.JOB_AID="Job Aid & Atlas",e.CASE_STUDY="Case Study",e.CASE_LIBRARY="Case Library",e.VISUAL_CHALLENGE="Visual Challenge",e.DIAGNOSTIC_PATHWAY="Diagnostic Pathway",e.AI_CASE_GENERATOR="AI Case Generator",e.IMAGE_GALLERIES="Image Galleries",e.ANALYSIS="Analysis Phase",e.DESIGN="Design Phase",e.DEVELOPMENT="Development Phase",e.EVALUATION="Evaluation & Assessment",e.ADMIN="Admin View",e))(U||{});const cp="pathology_module_users",ji=()=>{const e=localStorage.getItem(cp);return e?JSON.parse(e):{}},Ts=e=>{localStorage.setItem(cp,JSON.stringify(e))},Cg=(e,t,n)=>{if(e.toLowerCase()==="admin")throw new Error("This username is reserved.");const i=ji();if(i[e])throw new Error("Username is already taken.");if(Object.values(i).some(s=>s.email===n))throw new Error("Email is already in use.");const o={username:e,passwordHash:t,email:n};return i[e]=o,Ts(i),{username:e,email:n}},Sg=(e,t)=>{if(e.toLowerCase()==="admin"&&t==="admin")return{username:"admin",isAdmin:!0,email:"admin@system.local"};const i=ji()[e];if(!i)throw new Error("User not found.");if(i.passwordHash!==t)throw new Error("Incorrect password.");return{username:i.username,email:i.email}},Tg=(e,t,n)=>{const i=ji(),o=i[e];if(!o)throw new Error("User not found.");if(o.passwordHash!==t)throw new Error("Incorrect current password.");if(t===n)throw new Error("New password cannot be the same as the old password.");o.passwordHash=n,Ts(i)},Eg=e=>{const t=ji(),n=t[e];if(!n)throw new Error("No account found with that username.");const i=`reset-${Math.random().toString(36).substring(2,11)}`,o=Date.now()+36e5;return n.resetToken=i,n.resetTokenExpires=o,Ts(t),i},_g=(e,t)=>{const n=ji(),i=Object.values(n).find(o=>o.resetToken===e&&o.resetTokenExpires&&o.resetTokenExpires>Date.now());if(!i)throw new Error("Invalid or expired reset token.");i.passwordHash=t,delete i.resetToken,delete i.resetTokenExpires,n[i.username]=i,Ts(n)},ei="pathology_module_currentUser",Ng=()=>{const[e,t]=I.useState(null),[n,i]=I.useState(!0);I.useEffect(()=>{try{const c=localStorage.getItem(ei);c&&t(JSON.parse(c))}catch(c){console.error("Failed to parse stored user:",c),localStorage.removeItem(ei)}i(!1)},[]);const o=I.useCallback((c,d)=>{const f=Sg(c,d);return localStorage.setItem(ei,JSON.stringify(f)),t(f),f},[]),s=I.useCallback((c,d,f)=>{const p=Cg(c,d,f);return localStorage.setItem(ei,JSON.stringify(p)),t(p),p},[]),l=I.useCallback(()=>{localStorage.removeItem(ei),t(null)},[]);return{currentUser:e,login:o,signup:s,logout:l,isLoading:n,isAuthenticated:!!e}},Ig=e=>{const[t,n]=I.useState(U.HOME),[i,o]=I.useState(!0),s=I.useCallback(()=>e?`pathology_module_progress_${e}`:null,[e]);I.useEffect(()=>{const c=s();if(c)try{const d=localStorage.getItem(c);d&&Object.values(U).includes(d)?n(d):n(U.HOME)}catch(d){console.error("Failed to load user progress:",d),n(U.HOME)}o(!1)},[e,s]);const l=I.useCallback(c=>{n(c);const d=s();if(d)try{localStorage.setItem(d,c)}catch(f){console.error("Failed to save user progress:",f)}window.scrollTo(0,0)},[s]);return{currentSection:t,handleSectionChange:l,isLoading:i}},Ag=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),na=({className:e})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 10l-3 3"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 3.5v3m0 9.5V19m-3.5-6H4m12 0h-2.5"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 15l2.5 2.5"})]}),Hi=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),nn=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Di=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),kg=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A5.975 5.975 0 0112 15a5.975 5.975 0 012.454-4.638M15 21a6 6 0 00-9-5.197"})}),Pg=({className:e})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),Rg=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),ia=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),_n=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Mg=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Lg=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),dp=({className:e})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[r.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),r.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-5.998 12.078 12.078 0 01.665-6.479L12 14z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-5.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222 4 2.222V20"})]}),Ct=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),fp=({className:e})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547a2 2 0 00-.547 1.806l.443 2.216a2 2 0 001.022.547l2.387.477a6 6 0 003.86-.517l.318-.158a6 6 0 013.86-.517l2.387-.477a2 2 0 001.022-.547a2 2 0 00.547-1.806l-.443-2.216z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 01-6 0V6a3 3 0 016 0v6z"})]}),pp=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),bn=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),oa=({className:e})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),Dg=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-11.667-11.667l3.181 3.183m0 0l-3.181 3.183m0 0l3.181-3.183m0 0l-3.181-3.183"})}),Ug=({className:e})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),sa=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})}),ra=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),bg=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})}),Fg=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),Gg=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286Zm0 13.036h.008v.016h-.008v-.016Z"})}),Vg=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c.331 0 .658-.025.975-.072M12 15c-4.418 0-8-3.134-8-7s3.582-7 8-7 8 3.134 8 7-3.582 7-8 7Zm0 0v-4.5m0 4.5c.331 0 .658-.025.975-.072M12 3c-4.418 0-8 3.134-8 7s3.582 7 8 7 8 3.134 8 7m0 0c.331 0 .658-.025.975-.072M12 3a8.999 8.999 0 0 0-8.716 6.747M12 3c.331 0 .658-.025.975-.072"})}),uo=({className:e})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.06 1.94A10.5 10.5 0 0 1 22.5 12c0 5.798-4.703 10.5-10.5 10.5S1.5 17.798 1.5 12c0-3.35 1.56-6.326 3.94-8.25"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75V6zM6.75 3.75a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75V3.75zM9 6.75a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75V6.75z"})]}),co=({className:e})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8.25c-2.063 0-4.053.64-5.682 1.818l-1.06-1.06a.75.75 0 0 0-1.06 1.06l1.06 1.06C4.64 12.447 4 14.437 4 16.5 4 20.089 7.91 23 12 23s8-2.91 8-6.5c0-2.063-.64-4.053-1.818-5.682l1.06-1.06a.75.75 0 1 0-1.06-1.06l-1.06 1.06C16.053 8.89 14.063 8.25 12 8.25z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 1c0 4.625 3.5 6.5 3.5 6.5"})]}),jg=({className:e})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.25 2.25a.75.75 0 0 0-1.5 0v1.5a.75.75 0 0 0 1.5 0v-1.5zM13.75 2.25a.75.75 0 0 0-1.5 0v1.5a.75.75 0 0 0 1.5 0v-1.5zM10.25 20.25a.75.75 0 0 0-1.5 0v1.5a.75.75 0 0 0 1.5 0v-1.5zM13.75 20.25a.75.75 0 0 0-1.5 0v1.5a.75.75 0 0 0 1.5 0v-1.5zM21.75 10.25a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5h1.5zM21.75 13.75a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5h1.5zM3.75 10.25a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5h1.5zM3.75 13.75a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5h1.5z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12z"})]}),Hg=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zM9 9.56a1.5 1.5 0 0 1 0-2.12m6 2.12a1.5 1.5 0 0 0 0-2.12"})}),tr=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),Tu=({className:e})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5C7.5 4.5 4.5 7.5 4.5 12s3 7.5 7.5 7.5 7.5-3 7.5-7.5-3-7.5-7.5-7.5z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5v9m-4.5-4.5h9"})]}),Bg=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h.01M12 12h.01M19 12h.01"})}),la=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),qg={success:{icon:r.jsx(Hi,{className:"h-5 w-5"}),classes:"bg-green-50 border-green-400 text-green-800"},error:{icon:r.jsx(nn,{className:"h-5 w-5"}),classes:"bg-red-50 border-red-400 text-red-800"},info:{icon:r.jsx(Di,{className:"h-5 w-5"}),classes:"bg-sky-50 border-sky-400 text-sky-800"}},ie=({type:e,title:t,children:n,className:i=""})=>{const o=qg[e];return r.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg flex items-start space-x-3 ${o.classes} ${i}`,children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:o.icon}),r.jsxs("div",{children:[t&&r.jsx("h3",{className:"font-bold text-sm mb-1",children:t}),r.jsx("div",{className:"text-sm",children:n})]})]})},zg=({onSubmit:e,buttonText:t,isLoginView:n})=>{const[i,o]=I.useState(""),[s,l]=I.useState(""),[c,d]=I.useState(""),f=p=>{p.preventDefault(),n?e(i,s):e(i,s,c)};return r.jsxs("form",{onSubmit:f,className:"space-y-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),r.jsx(ia,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),r.jsx("input",{id:"username",name:"username",type:"text",value:i,onChange:p=>o(p.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-400 rounded-lg focus:ring-primary-500 focus:border-primary-500 transition shadow-sm bg-white",placeholder:"Username",autoComplete:"username",required:!0})]}),!n&&r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),r.jsx(Mg,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),r.jsx("input",{id:"email",name:"email",type:"email",value:c,onChange:p=>d(p.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-400 rounded-lg focus:ring-primary-500 focus:border-primary-500 transition shadow-sm bg-white",placeholder:"Email Address",autoComplete:"email",required:!0})]}),r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),r.jsx(_n,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),r.jsx("input",{id:"password",name:"password",type:"password",value:s,onChange:p=>l(p.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-400 rounded-lg focus:ring-primary-500 focus:border-primary-500 transition shadow-sm bg-white",placeholder:"Password",autoComplete:n?"current-password":"new-password",required:!0})]}),r.jsx("button",{type:"submit",className:"w-full bg-primary-300 text-slate-900 font-semibold py-3 px-5 rounded-lg hover:bg-primary-400 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 transition-all duration-200 shadow-md hover:shadow-lg",children:t})]})},$g=({onLogin:e,onSignup:t})=>{const[n,i]=I.useState("login_signup"),[o,s]=I.useState(!0),[l,c]=I.useState(null),[d,f]=I.useState(null),[p,m]=I.useState(""),[h,g]=I.useState(""),[C,S]=I.useState(""),[N,v]=I.useState(""),y=(E,_,k)=>{if(c(null),f(null),!E||!_){c("Username and password are required.");return}try{if(o)e(E,_);else{if(!k){c("Email is required for signup.");return}t(E,_,k)}}catch(P){c(P.message)}},x=E=>{E.preventDefault(),c(null),f(null);try{const _=Eg(p);f(`A password reset code has been generated. In a real application, this would be sent to your email. For this simulation, your code is: ${_}`),i("reset")}catch(_){c(_.message)}},w=E=>{if(E.preventDefault(),c(null),f(null),C!==N){c("Passwords do not match.");return}try{_g(h,C),f("Password has been reset successfully. Please log in with your new password."),i("login_signup"),s(!0),m(""),g(""),S(""),v("")}catch(_){c(_.message)}},T=()=>{switch(n){case"forgot":return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"text-left mb-10",children:[r.jsx("h1",{className:"text-3xl font-bold font-serif text-slate-900",children:"Forgot Password"}),r.jsx("p",{className:"mt-2 text-slate-600",children:"Enter your username to begin the reset process."})]}),r.jsxs("form",{onSubmit:x,className:"space-y-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"reset-username",className:"sr-only",children:"Username"}),r.jsx(ia,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),r.jsx("input",{id:"reset-username",type:"text",value:p,onChange:E=>m(E.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-400 rounded-lg focus:ring-primary-500 focus:border-primary-500 transition shadow-sm bg-white",placeholder:"Username",required:!0})]}),r.jsx("button",{type:"submit",className:"w-full bg-primary-300 text-slate-900 font-semibold py-3 px-5 rounded-lg hover:bg-primary-400 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 transition-all duration-200 shadow-md hover:shadow-lg",children:"Get Reset Code"})]}),r.jsx("p",{className:"text-center mt-6",children:r.jsx("button",{onClick:()=>{i("login_signup"),c(null)},className:"text-sm text-primary-600 hover:underline",children:"Back to Login"})})]});case"reset":return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"text-left mb-10",children:[r.jsx("h1",{className:"text-3xl font-bold font-serif text-slate-900",children:"Reset Your Password"}),r.jsx("p",{className:"mt-2 text-slate-600",children:"Enter the reset code and your new password."})]}),r.jsxs("form",{onSubmit:w,className:"space-y-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"reset-token",className:"sr-only",children:"Reset Code"}),r.jsx(sa,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),r.jsx("input",{id:"reset-token",type:"text",value:h,onChange:E=>g(E.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-400 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Reset Code",required:!0})]}),r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"new-password",className:"sr-only",children:"New Password"}),r.jsx(_n,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),r.jsx("input",{id:"new-password",type:"password",value:C,onChange:E=>S(E.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-400 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"New Password",required:!0})]}),r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm New Password"}),r.jsx(_n,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),r.jsx("input",{id:"confirm-password",type:"password",value:N,onChange:E=>v(E.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-400 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Confirm New Password",required:!0})]}),r.jsx("button",{type:"submit",className:"w-full bg-primary-300 text-slate-900 font-semibold py-3 px-5 rounded-lg hover:bg-primary-400 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 transition-all duration-200 shadow-md hover:shadow-lg",children:"Reset Password"})]})]});case"login_signup":default:return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"text-left mb-10",children:[r.jsx("h1",{className:"text-3xl font-bold font-serif text-slate-900",children:o?"Welcome Back, Resident":"Create Your Account"}),r.jsx("p",{className:"mt-2 text-slate-600",children:o?"Login to continue your progress.":"Sign up to begin your learning journey."})]}),r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex border-b border-slate-200",children:[r.jsx("button",{onClick:()=>{s(!0),c(null)},className:`flex-1 py-3 text-sm text-center transition-colors focus:outline-none ${o?"font-semibold text-primary-600 border-b-2 border-primary-600":"text-slate-500 hover:text-slate-700"}`,children:"LOGIN"}),r.jsx("button",{onClick:()=>{s(!1),c(null)},className:`flex-1 py-3 text-sm text-center transition-colors focus:outline-none ${o?"text-slate-500 hover:text-slate-700":"font-semibold text-primary-600 border-b-2 border-primary-600"}`,children:"SIGN UP"})]})}),r.jsx(zg,{onSubmit:y,isLoginView:o,buttonText:o?"Login to Your Session":"Create Account & Start Learning"},o?"login":"signup"),o&&r.jsx("p",{className:"text-center mt-6",children:r.jsx("button",{onClick:()=>{i("forgot"),c(null),f(null)},className:"text-sm text-primary-600 hover:underline",children:"Forgot Password?"})}),r.jsx("p",{className:"text-center text-xs text-slate-500 mt-8",children:"Your progress is saved locally in your browser, linked to your username."})]})}};return r.jsx("div",{className:"min-h-screen bg-white",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 min-h-screen",children:[r.jsxs("div",{className:"hidden lg:block relative",children:[r.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1579154204601-01588f351e67?q=80&w=3439&auto=format&fit=crop')"},children:r.jsx("div",{className:"absolute inset-0 bg-slate-900 opacity-60"})}),r.jsxs("div",{className:"relative z-10 flex flex-col justify-center h-full px-12 text-white",children:[r.jsx(dp,{className:"h-12 w-12 text-primary-400 mb-4"}),r.jsx("h1",{className:"text-4xl font-bold font-serif leading-tight",children:"Unlock Your Diagnostic Potential."}),r.jsx("p",{className:"mt-4 text-lg text-slate-300",children:"An interactive learning module designed to elevate your diagnostic skills in granulomatous diseases of the lung."})]})]}),r.jsx("div",{className:"flex flex-col justify-center items-center p-8 sm:p-12 bg-slate-50",children:r.jsxs("div",{className:"w-full max-w-md",children:[l&&r.jsx("div",{className:"mb-4",children:r.jsx(ie,{type:"error",children:l})}),d&&r.jsx("div",{className:"mb-4",children:r.jsx(ie,{type:"info",children:d})}),T()]})})]})})},fo=({section:e,currentSection:t,onClick:n,icon:i})=>{const o=e===t;return r.jsxs("button",{onClick:()=>n(e),className:`w-full flex items-center px-4 py-2.5 text-sm font-medium rounded-lg transition-all duration-200 text-left ${o?"bg-primary-200 text-primary-900 font-bold shadow-lg shadow-primary-500/20":"text-slate-600 hover:bg-slate-200 hover:text-slate-900"}`,children:[r.jsx("div",{className:"mr-3 flex-shrink-0",children:i}),r.jsx("span",{children:e})]})},Eu=({currentSection:e,onSectionChange:t,user:n,onLogout:i,onChangePasswordClick:o,className:s})=>{const l=[{section:U.JOB_AID,icon:r.jsx(pp,{className:"h-5 w-5"})},{section:U.CASE_STUDY,icon:r.jsx(na,{className:"h-5 w-5"})},{section:U.CASE_LIBRARY,icon:r.jsx(la,{className:"h-5 w-5"})},{section:U.VISUAL_CHALLENGE,icon:r.jsx(oa,{className:"h-5 w-5"})},{section:U.DIAGNOSTIC_PATHWAY,icon:r.jsx(fp,{className:"h-5 w-5"})},{section:U.AI_CASE_GENERATOR,icon:r.jsx(bn,{className:"h-5 w-5"})},{section:U.IMAGE_GALLERIES,icon:r.jsx(ra,{className:"h-5 w-5"})}],c=[{section:U.ANALYSIS,icon:r.jsx(Ct,{className:"h-5 w-5"})},{section:U.DESIGN,icon:r.jsx(Ct,{className:"h-5 w-5"})},{section:U.DEVELOPMENT,icon:r.jsx(Ct,{className:"h-5 w-5"})},{section:U.EVALUATION,icon:r.jsx(Ct,{className:"h-5 w-5"})}];return r.jsxs("aside",{className:`bg-white border-r border-slate-200/80 p-4 flex flex-col ${s}`,children:[r.jsxs("div",{className:"flex items-center mb-6 px-2 flex-shrink-0",children:[r.jsx(dp,{className:"h-8 w-8 text-primary-600"}),r.jsx("h1",{className:"ml-3 text-lg font-bold font-serif text-slate-800",children:"Pathology Module"})]}),r.jsxs("nav",{className:"flex-1 space-y-4 overflow-y-auto",children:[r.jsx("div",{children:r.jsx(fo,{section:U.HOME,currentSection:e,onClick:t,icon:r.jsx(Ag,{className:"h-5 w-5"})})}),r.jsxs("div",{children:[r.jsx("h2",{className:"px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2 mt-4",children:"Learning Sections"}),r.jsx("div",{className:"space-y-1",children:l.map(({section:d,icon:f})=>r.jsx(fo,{section:d,currentSection:e,onClick:t,icon:f},d))})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2 mt-4",children:"Instructional Design"}),r.jsx("div",{className:"space-y-1",children:c.map(({section:d,icon:f})=>r.jsx(fo,{section:d,currentSection:e,onClick:t,icon:f},d))})]}),n.isAdmin&&r.jsxs("div",{children:[r.jsx("h2",{className:"px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2 mt-4",children:"Admin"}),r.jsx("div",{className:"space-y-1",children:r.jsx(fo,{section:U.ADMIN,currentSection:e,onClick:t,icon:r.jsx(Ug,{className:"h-5 w-5"})})})]})]}),r.jsx("div",{className:"mt-auto pt-4 border-t border-slate-200",children:r.jsxs("div",{className:"px-4 py-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(ia,{className:"h-8 w-8 text-slate-400 flex-shrink-0"}),r.jsxs("div",{className:"ml-3 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 truncate",children:n.username}),r.jsx("p",{className:"text-xs text-slate-500 truncate",children:n.email})]})]}),r.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[r.jsxs("button",{onClick:o,title:"Change Password",className:"w-full flex items-center justify-center text-xs px-2 py-1.5 bg-slate-100 text-slate-700 hover:bg-slate-200 hover:text-slate-900 rounded-md font-medium transition-colors",children:[r.jsx(sa,{className:"h-4 w-4 mr-1.5"})," Change Password"]}),r.jsx("button",{onClick:i,title:"Logout",className:"flex-shrink-0 p-2 text-slate-600 hover:bg-slate-200/70 hover:text-slate-900 rounded-md transition-colors",children:r.jsx(Rg,{className:"h-5 w-5"})})]})]})})]})},Jg=({onMenuClick:e,currentSection:t})=>r.jsxs("header",{className:"md:hidden bg-white shadow-sm sticky top-0 z-20 flex items-center justify-between p-4 border-b border-slate-200",children:[r.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 p-2 -ml-2","aria-label":"Open navigation menu",children:r.jsx(Lg,{className:"h-6 w-6"})}),r.jsx("h1",{className:"text-lg font-semibold text-slate-800 truncate",children:t}),r.jsx("div",{className:"w-6"})," "]}),F=rd.forwardRef(({children:e,className:t="",interactive:n=!1,...i},o)=>{const s="bg-white rounded-xl shadow-sm border border-slate-200/80 p-6 md:p-8 mb-8 transition-all duration-300",l=n?"hover:shadow-md hover:border-slate-300/80 hover:-translate-y-0.5 cursor-pointer":"";return r.jsx("div",{ref:o,className:`${s} ${l} ${t}`,...i,children:e})});F.displayName="Card";const _u=({section:e,description:t,icon:n,onClick:i})=>r.jsx("li",{className:"list-none",children:r.jsx(F,{interactive:!0,className:"!mb-0 h-full",onClick:()=>i(e),children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-lg bg-primary-100 flex items-center justify-center mr-4",children:r.jsx("div",{className:"text-primary-600",children:n})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold font-serif text-slate-800",children:e}),r.jsx("p",{className:"mt-1 text-sm text-slate-500",children:t})]})]})})}),Nu=({onSectionChange:e})=>{const t=[{section:U.JOB_AID,description:"A quick-reference table comparing high-yield features of Sarcoidosis and Tuberculosis.",icon:r.jsx(pp,{className:"h-5 w-5"})},{section:U.CASE_STUDY,description:"Work through a classic case of Hypersensitivity Pneumonitis with an interactive whole-slide image viewer.",icon:r.jsx(na,{className:"h-5 w-5"})},{section:U.CASE_LIBRARY,description:"Browse a library of AI-organized case studies with integrated histology.",icon:r.jsx(la,{className:"h-5 w-5"})},{section:U.VISUAL_CHALLENGE,description:"Sharpen your morphologic eye by comparing Sarcoidosis and HP side-by-side on digital slides.",icon:r.jsx(oa,{className:"h-5 w-5"})},{section:U.DIAGNOSTIC_PATHWAY,description:"A comprehensive, multi-step quiz that guides you through the differential diagnosis of a wide range of granulomatous diseases.",icon:r.jsx(fp,{className:"h-5 w-5"})},{section:U.AI_CASE_GENERATOR,description:"Leverage Gemini AI to generate unique, board-style cases and receive instant feedback on your diagnostic skills.",icon:r.jsx(bn,{className:"h-5 w-5"})},{section:U.IMAGE_GALLERIES,description:"Browse curated official images and contribute your own finds to the community gallery.",icon:r.jsx(ra,{className:"h-5 w-5"})}],n=[{section:U.ANALYSIS,description:"Defining the learner, their knowledge gaps, and the context for learning.",icon:r.jsx(Ct,{className:"h-5 w-5"})},{section:U.DESIGN,description:"Creating specific, measurable learning objectives based on the analysis.",icon:r.jsx(Ct,{className:"h-5 w-5"})},{section:U.DEVELOPMENT,description:"Creating the instructional content, media, and activities.",icon:r.jsx(Ct,{className:"h-5 w-5"})},{section:U.EVALUATION,description:"Measuring your ability to integrate findings and form a diagnosis.",icon:r.jsx(Ct,{className:"h-5 w-5"})}];return r.jsxs("div",{className:"space-y-12 animate-fade-in",children:[r.jsxs("header",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl sm:text-5xl font-bold font-serif text-slate-900 tracking-tight",children:"Granulomatous Diseases of the Lung"}),r.jsx("p",{className:"mt-4 text-lg text-slate-600 max-w-3xl mx-auto",children:"An Interactive Learning Module for Pathology Residents"})]}),r.jsxs(F,{children:[r.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-4",children:"Welcome, Resident!"}),r.jsx("p",{className:"text-slate-600 leading-relaxed",children:"This module is designed to elevate your diagnostic skills in evaluating granulomatous diseases of the lung. The primary challenge in this area is not just identifying a granuloma, but navigating the significant morphologic overlap between different etiologies. Our goal is to move you from simple identification to integrated diagnostic reasoning—a crucial skill for both daily sign-out and board examinations."})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-6 text-center",children:"The Learning Module"}),r.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>r.jsx(_u,{...i,onClick:e},i.section))})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-6 text-center",children:"About This Project (Instructional Design)"}),r.jsx("p",{className:"text-slate-600 mb-6 text-center max-w-3xl mx-auto",children:"This module was built using the ADDIE model of instructional design. The sections below provide a meta-narrative on how this learning experience was constructed, from initial analysis to final evaluation."}),r.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(i=>r.jsx(_u,{...i,onClick:e},i.section))})]})]})},Ye=({title:e,subtitle:t,icon:n})=>r.jsx("header",{className:"mb-8 md:mb-12 animate-fade-in",children:r.jsxs("div",{className:"flex items-center",children:[n&&r.jsx("div",{className:"mr-4 text-primary-600",children:n}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl sm:text-4xl font-bold font-serif text-slate-900",children:e}),r.jsx("p",{className:"mt-2 text-md text-slate-500",children:t})]})]})});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Wg,Og;function Yg(){return{geminiUrl:Wg,vertexUrl:Og}}function Kg(e,t,n,i){var o,s;if(!(e!=null&&e.baseUrl)){const l=Yg();return t?(o=l.vertexUrl)!==null&&o!==void 0?o:n:(s=l.geminiUrl)!==null&&s!==void 0?s:i}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class on{}function D(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const s=t[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function u(e,t,n){for(let s=0;s<t.length-1;s++){const l=t[s];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in e))if(Array.isArray(n))e[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(e[c])){const d=e[c];if(Array.isArray(n))for(let f=0;f<d.length;f++){const p=d[f];u(p,t.slice(s+1),n[f])}else for(const f of d)u(f,t.slice(s+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in e||(e[c]=[{}]);const d=e[c];u(d[0],t.slice(s+1),n);return}(!e[l]||typeof e[l]!="object")&&(e[l]={}),e=e[l]}const i=t[t.length-1],o=e[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function a(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let i=0;i<t.length;i++){if(typeof e!="object"||e===null)return n;const o=t[i];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in e){const l=e[s];return Array.isArray(l)?l.map(c=>a(c,t.slice(i+1),n)):n}else return n}else e=e[o]}return e}catch(i){if(i instanceof TypeError)return n;throw i}}function Qg(e,t){for(const[n,i]of Object.entries(t)){const o=n.split("."),s=i.split("."),l=new Set;let c=-1;for(let d=0;d<o.length;d++)if(o[d]==="*"){c=d;break}if(c!==-1&&s.length>c)for(let d=c;d<s.length;d++){const f=s[d];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&l.add(f)}Zr(e,o,s,0,l)}}function Zr(e,t,n,i,o){if(i>=t.length||typeof e!="object"||e===null)return;const s=t[i];if(s.endsWith("[]")){const l=s.slice(0,-2),c=e;if(l in c&&Array.isArray(c[l]))for(const d of c[l])Zr(d,t,n,i+1,o)}else if(s==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const l=e,c=Object.keys(l).filter(f=>!f.startsWith("_")&&!o.has(f)),d={};for(const f of c)d[f]=l[f];for(const[f,p]of Object.entries(d)){const m=[];for(const h of n.slice(i))h==="*"?m.push(f):m.push(h);u(l,m,p)}for(const f of c)delete l[f]}}else{const l=e;s in l&&Zr(l[s],t,n,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aa(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xg(e){const t={},n=a(e,["operationName"]);n!=null&&u(t,["operationName"],n);const i=a(e,["resourceName"]);return i!=null&&u(t,["_url","resourceName"],i),t}function Zg(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const i=a(e,["metadata"]);i!=null&&u(t,["metadata"],i);const o=a(e,["done"]);o!=null&&u(t,["done"],o);const s=a(e,["error"]);s!=null&&u(t,["error"],s);const l=a(e,["response","generateVideoResponse"]);return l!=null&&u(t,["response"],t0(l)),t}function e0(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const i=a(e,["metadata"]);i!=null&&u(t,["metadata"],i);const o=a(e,["done"]);o!=null&&u(t,["done"],o);const s=a(e,["error"]);s!=null&&u(t,["error"],s);const l=a(e,["response"]);return l!=null&&u(t,["response"],n0(l)),t}function t0(e){const t={},n=a(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>i0(l))),u(t,["generatedVideos"],s)}const i=a(e,["raiMediaFilteredCount"]);i!=null&&u(t,["raiMediaFilteredCount"],i);const o=a(e,["raiMediaFilteredReasons"]);return o!=null&&u(t,["raiMediaFilteredReasons"],o),t}function n0(e){const t={},n=a(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>o0(l))),u(t,["generatedVideos"],s)}const i=a(e,["raiMediaFilteredCount"]);i!=null&&u(t,["raiMediaFilteredCount"],i);const o=a(e,["raiMediaFilteredReasons"]);return o!=null&&u(t,["raiMediaFilteredReasons"],o),t}function i0(e){const t={},n=a(e,["video"]);return n!=null&&u(t,["video"],l0(n)),t}function o0(e){const t={},n=a(e,["_self"]);return n!=null&&u(t,["video"],a0(n)),t}function s0(e){const t={},n=a(e,["operationName"]);return n!=null&&u(t,["_url","operationName"],n),t}function r0(e){const t={},n=a(e,["operationName"]);return n!=null&&u(t,["_url","operationName"],n),t}function l0(e){const t={},n=a(e,["uri"]);n!=null&&u(t,["uri"],n);const i=a(e,["encodedVideo"]);i!=null&&u(t,["videoBytes"],aa(i));const o=a(e,["encoding"]);return o!=null&&u(t,["mimeType"],o),t}function a0(e){const t={},n=a(e,["gcsUri"]);n!=null&&u(t,["uri"],n);const i=a(e,["bytesBase64Encoded"]);i!=null&&u(t,["videoBytes"],aa(i));const o=a(e,["mimeType"]);return o!=null&&u(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Iu;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Iu||(Iu={}));var Au;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(Au||(Au={}));var ku;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(ku||(ku={}));var ae;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(ae||(ae={}));var Pu;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Pu||(Pu={}));var Ru;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(Ru||(Ru={}));var Mu;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Mu||(Mu={}));var Lu;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Lu||(Lu={}));var Du;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Du||(Du={}));var Uu;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Uu||(Uu={}));var bu;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"})(bu||(bu={}));var Fu;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Fu||(Fu={}));var Gu;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Gu||(Gu={}));var Vu;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Vu||(Vu={}));var ju;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(ju||(ju={}));var Hu;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Hu||(Hu={}));var es;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(es||(es={}));var Bu;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Bu||(Bu={}));var qu;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(qu||(qu={}));var zu;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(zu||(zu={}));var el;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(el||(el={}));var $u;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V"})($u||($u={}));var Ju;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Ju||(Ju={}));var Wu;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Wu||(Wu={}));var Ou;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Ou||(Ou={}));var Yu;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Yu||(Yu={}));var Ku;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Ku||(Ku={}));var Qu;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Qu||(Qu={}));var Xu;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Xu||(Xu={}));var Zu;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Zu||(Zu={}));var ec;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ec||(ec={}));var tc;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(tc||(tc={}));var nc;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(nc||(nc={}));var ic;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ic||(ic={}));var oc;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(oc||(oc={}));var sc;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(sc||(sc={}));var rc;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(rc||(rc={}));var lc;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(lc||(lc={}));var ac;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(ac||(ac={}));var uc;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(uc||(uc={}));var cc;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(cc||(cc={}));var dc;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(dc||(dc={}));var fc;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(fc||(fc={}));var pc;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(pc||(pc={}));var mc;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(mc||(mc={}));var hc;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(hc||(hc={}));var gc;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(gc||(gc={}));var yc;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(yc||(yc={}));var vc;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(vc||(vc={}));var vn;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(vn||(vn={}));class tl{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class ti{get text(){var t,n,i,o,s,l,c,d;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",p=!1;const m=[];for(const h of(d=(c=(l=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[g,C]of Object.entries(h))g!=="text"&&g!=="thought"&&(C!==null||C!==void 0)&&m.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;p=!0,f+=h.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?f:void 0}get data(){var t,n,i,o,s,l,c,d;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const p=[];for(const m of(d=(c=(l=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[h,g]of Object.entries(m))h!=="inlineData"&&(g!==null||g!==void 0)&&p.push(h);m.inlineData&&typeof m.inlineData.data=="string"&&(f+=atob(m.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var t,n,i,o,s,l,c,d;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(d=(c=(l=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var t,n,i,o,s,l,c,d,f;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(d=(c=(l=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var t,n,i,o,s,l,c,d,f;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(d=(c=(l=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.output}}class xc{}class wc{}class u0{}class c0{}class d0{}class f0{}class Cc{}class Sc{}class Tc{}class p0{}class ts{_fromAPIResponse({apiResponse:t,isVertexAI:n}){const i=new ts;let o;const s=t;return n?o=e0(s):o=Zg(s),Object.assign(i,o),i}}class Ec{}class _c{}class Nc{}class m0{}class h0{}class g0{}class Ic{}class y0{get text(){var t,n,i;let o="",s=!1;const l=[];for(const c of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(c))d!=="text"&&d!=="thought"&&f!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;s=!0,o+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var t,n,i;let o="";const s=[];for(const l of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&s.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(o+=atob(l.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class v0{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function mp(e,t){const n=H(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function hp(e){return Array.isArray(e)?e.map(t=>ns(t)):[ns(e)]}function ns(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function gp(e){const t=ns(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function yp(e){const t=ns(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Ac(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function vp(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Ac(t)):[Ac(e)]}function nl(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function kc(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function Pc(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function ye(e){if(e==null)throw new Error("ContentUnion is required");return nl(e)?e:{role:"user",parts:vp(e)}}function ua(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=ye(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=ye(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>ye(n)):[ye(t)]}function Ve(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(kc(e)||Pc(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ye(e)]}const t=[],n=[],i=nl(e[0]);for(const o of e){const s=nl(o);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)t.push(o);else{if(kc(o)||Pc(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||t.push({role:"user",parts:vp(n)}),t}function x0(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(ae).includes(n[0].toUpperCase())?n[0].toUpperCase():ae.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of n)t.anyOf.push({type:Object.values(ae).includes(i.toUpperCase())?i.toUpperCase():ae.TYPE_UNSPECIFIED})}}function Nn(e){const t={},n=["items"],i=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=e.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(t.nullable=!0,e=s[1]):s[1].type==="null"&&(t.nullable=!0,e=s[0])),e.type instanceof Array&&x0(e.type,t);for(const[l,c]of Object.entries(e))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;t.type=Object.values(ae).includes(c.toUpperCase())?c.toUpperCase():ae.TYPE_UNSPECIFIED}else if(n.includes(l))t[l]=Nn(c);else if(i.includes(l)){const d=[];for(const f of c){if(f.type=="null"){t.nullable=!0;continue}d.push(Nn(f))}t[l]=d}else if(o.includes(l)){const d={};for(const[f,p]of Object.entries(c))d[f]=Nn(p);t[l]=d}else{if(l==="additionalProperties")continue;t[l]=c}return t}function ca(e){return Nn(e)}function da(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function fa(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Hn(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Nn(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Nn(t.response));return e}function Bn(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function w0(e,t,n,i=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function pt(e,t){if(typeof t!="string")throw new Error("name must be a string");return w0(e,t,"cachedContents")}function xp(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Ut(e){return aa(e)}function C0(e){return e!=null&&typeof e=="object"&&"name"in e}function S0(e){return e!=null&&typeof e=="object"&&"video"in e}function T0(e){return e!=null&&typeof e=="object"&&"uri"in e}function wp(e){var t;let n;if(C0(e)&&(n=e.name),!(T0(e)&&(n=e.uri,n===void 0))&&!(S0(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Cp(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function Sp(e){for(const t of["models","tunedModels","publisherModels"])if(E0(e,t))return e[t];return[]}function E0(e,t){return e!==null&&typeof e=="object"&&t in e}function _0(e,t={}){const n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function N0(e,t={}){const n=[],i=new Set;for(const o of e){const s=o.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const l=_0(o,t);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function Tp(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function I0(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Ep(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let s=!1;for(const l of o){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){s=!0;break}}return s&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function qn(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function _p(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A0(e){const t={},n=a(e,["responsesFile"]);n!=null&&u(t,["fileName"],n);const i=a(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>sy(l))),u(t,["inlinedResponses"],s)}const o=a(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),u(t,["inlinedEmbedContentResponses"],s)}return t}function k0(e){const t={},n=a(e,["predictionsFormat"]);n!=null&&u(t,["format"],n);const i=a(e,["gcsDestination","outputUriPrefix"]);i!=null&&u(t,["gcsUri"],i);const o=a(e,["bigqueryDestination","outputUri"]);return o!=null&&u(t,["bigqueryUri"],o),t}function P0(e){const t={},n=a(e,["format"]);n!=null&&u(t,["predictionsFormat"],n);const i=a(e,["gcsUri"]);i!=null&&u(t,["gcsDestination","outputUriPrefix"],i);const o=a(e,["bigqueryUri"]);if(o!=null&&u(t,["bigqueryDestination","outputUri"],o),a(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Ao(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const i=a(e,["metadata","displayName"]);i!=null&&u(t,["displayName"],i);const o=a(e,["metadata","state"]);o!=null&&u(t,["state"],_p(o));const s=a(e,["metadata","createTime"]);s!=null&&u(t,["createTime"],s);const l=a(e,["metadata","endTime"]);l!=null&&u(t,["endTime"],l);const c=a(e,["metadata","updateTime"]);c!=null&&u(t,["updateTime"],c);const d=a(e,["metadata","model"]);d!=null&&u(t,["model"],d);const f=a(e,["metadata","output"]);return f!=null&&u(t,["dest"],A0(Ep(f))),t}function il(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const i=a(e,["displayName"]);i!=null&&u(t,["displayName"],i);const o=a(e,["state"]);o!=null&&u(t,["state"],_p(o));const s=a(e,["error"]);s!=null&&u(t,["error"],s);const l=a(e,["createTime"]);l!=null&&u(t,["createTime"],l);const c=a(e,["startTime"]);c!=null&&u(t,["startTime"],c);const d=a(e,["endTime"]);d!=null&&u(t,["endTime"],d);const f=a(e,["updateTime"]);f!=null&&u(t,["updateTime"],f);const p=a(e,["model"]);p!=null&&u(t,["model"],p);const m=a(e,["inputConfig"]);m!=null&&u(t,["src"],R0(m));const h=a(e,["outputConfig"]);return h!=null&&u(t,["dest"],k0(Ep(h))),t}function R0(e){const t={},n=a(e,["instancesFormat"]);n!=null&&u(t,["format"],n);const i=a(e,["gcsSource","uris"]);i!=null&&u(t,["gcsUri"],i);const o=a(e,["bigquerySource","inputUri"]);return o!=null&&u(t,["bigqueryUri"],o),t}function M0(e,t){const n={};if(a(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=a(t,["fileName"]);i!=null&&u(n,["fileName"],i);const o=a(t,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>oy(e,l))),u(n,["requests","requests"],s)}return n}function L0(e){const t={},n=a(e,["format"]);n!=null&&u(t,["instancesFormat"],n);const i=a(e,["gcsUri"]);i!=null&&u(t,["gcsSource","uris"],i);const o=a(e,["bigqueryUri"]);if(o!=null&&u(t,["bigquerySource","inputUri"],o),a(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function D0(e){const t={},n=a(e,["data"]);if(n!=null&&u(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function U0(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],qn(e,i)),n}function b0(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],qn(e,i)),n}function F0(e){const t={},n=a(e,["content"]);n!=null&&u(t,["content"],n);const i=a(e,["citationMetadata"]);i!=null&&u(t,["citationMetadata"],G0(i));const o=a(e,["tokenCount"]);o!=null&&u(t,["tokenCount"],o);const s=a(e,["finishReason"]);s!=null&&u(t,["finishReason"],s);const l=a(e,["avgLogprobs"]);l!=null&&u(t,["avgLogprobs"],l);const c=a(e,["groundingMetadata"]);c!=null&&u(t,["groundingMetadata"],c);const d=a(e,["index"]);d!=null&&u(t,["index"],d);const f=a(e,["logprobsResult"]);f!=null&&u(t,["logprobsResult"],f);const p=a(e,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>g)),u(t,["safetyRatings"],h)}const m=a(e,["urlContextMetadata"]);return m!=null&&u(t,["urlContextMetadata"],m),t}function G0(e){const t={},n=a(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),u(t,["citations"],i)}return t}function Np(e){const t={},n=a(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>fy(s))),u(t,["parts"],o)}const i=a(e,["role"]);return i!=null&&u(t,["role"],i),t}function V0(e,t){const n={},i=a(e,["displayName"]);if(t!==void 0&&i!=null&&u(t,["batch","displayName"],i),a(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function j0(e,t){const n={},i=a(e,["displayName"]);t!==void 0&&i!=null&&u(t,["displayName"],i);const o=a(e,["dest"]);return t!==void 0&&o!=null&&u(t,["outputConfig"],P0(I0(o))),n}function Rc(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["src"]);o!=null&&u(n,["batch","inputConfig"],M0(e,Tp(e,o)));const s=a(t,["config"]);return s!=null&&V0(s,n),n}function H0(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["model"],H(e,i));const o=a(t,["src"]);o!=null&&u(n,["inputConfig"],L0(Tp(e,o)));const s=a(t,["config"]);return s!=null&&j0(s,n),n}function B0(e,t){const n={},i=a(e,["displayName"]);return t!==void 0&&i!=null&&u(t,["batch","displayName"],i),n}function q0(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["src"]);o!=null&&u(n,["batch","inputConfig"],K0(e,o));const s=a(t,["config"]);return s!=null&&B0(s,n),n}function z0(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],qn(e,i)),n}function $0(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],qn(e,i)),n}function J0(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["name"]);i!=null&&u(t,["name"],i);const o=a(e,["done"]);o!=null&&u(t,["done"],o);const s=a(e,["error"]);return s!=null&&u(t,["error"],s),t}function W0(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["name"]);i!=null&&u(t,["name"],i);const o=a(e,["done"]);o!=null&&u(t,["done"],o);const s=a(e,["error"]);return s!=null&&u(t,["error"],s),t}function O0(e,t){const n={},i=a(t,["contents"]);if(i!=null){let s=ua(e,i);Array.isArray(s)&&(s=s.map(l=>l)),u(n,["requests[]","request","content"],s)}const o=a(t,["config"]);return o!=null&&(u(n,["_self"],Y0(o,n)),Qg(n,{"requests[].*":"requests[].request.*"})),n}function Y0(e,t){const n={},i=a(e,["taskType"]);t!==void 0&&i!=null&&u(t,["requests[]","taskType"],i);const o=a(e,["title"]);t!==void 0&&o!=null&&u(t,["requests[]","title"],o);const s=a(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&u(t,["requests[]","outputDimensionality"],s),a(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function K0(e,t){const n={},i=a(t,["fileName"]);i!=null&&u(n,["file_name"],i);const o=a(t,["inlinedRequests"]);return o!=null&&u(n,["requests"],O0(e,o)),n}function Q0(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function X0(e,t,n){const i={},o=a(t,["systemInstruction"]);n!==void 0&&o!=null&&u(n,["systemInstruction"],Np(ye(o)));const s=a(t,["temperature"]);s!=null&&u(i,["temperature"],s);const l=a(t,["topP"]);l!=null&&u(i,["topP"],l);const c=a(t,["topK"]);c!=null&&u(i,["topK"],c);const d=a(t,["candidateCount"]);d!=null&&u(i,["candidateCount"],d);const f=a(t,["maxOutputTokens"]);f!=null&&u(i,["maxOutputTokens"],f);const p=a(t,["stopSequences"]);p!=null&&u(i,["stopSequences"],p);const m=a(t,["responseLogprobs"]);m!=null&&u(i,["responseLogprobs"],m);const h=a(t,["logprobs"]);h!=null&&u(i,["logprobs"],h);const g=a(t,["presencePenalty"]);g!=null&&u(i,["presencePenalty"],g);const C=a(t,["frequencyPenalty"]);C!=null&&u(i,["frequencyPenalty"],C);const S=a(t,["seed"]);S!=null&&u(i,["seed"],S);const N=a(t,["responseMimeType"]);N!=null&&u(i,["responseMimeType"],N);const v=a(t,["responseSchema"]);v!=null&&u(i,["responseSchema"],ca(v));const y=a(t,["responseJsonSchema"]);if(y!=null&&u(i,["responseJsonSchema"],y),a(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=a(t,["safetySettings"]);if(n!==void 0&&x!=null){let z=x;Array.isArray(z)&&(z=z.map(pe=>py(pe))),u(n,["safetySettings"],z)}const w=a(t,["tools"]);if(n!==void 0&&w!=null){let z=Bn(w);Array.isArray(z)&&(z=z.map(pe=>my(Hn(pe)))),u(n,["tools"],z)}const T=a(t,["toolConfig"]);if(n!==void 0&&T!=null&&u(n,["toolConfig"],T),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=a(t,["cachedContent"]);n!==void 0&&E!=null&&u(n,["cachedContent"],pt(e,E));const _=a(t,["responseModalities"]);_!=null&&u(i,["responseModalities"],_);const k=a(t,["mediaResolution"]);k!=null&&u(i,["mediaResolution"],k);const P=a(t,["speechConfig"]);if(P!=null&&u(i,["speechConfig"],da(P)),a(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=a(t,["thinkingConfig"]);M!=null&&u(i,["thinkingConfig"],M);const B=a(t,["imageConfig"]);return B!=null&&u(i,["imageConfig"],B),i}function Z0(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>F0(f))),u(t,["candidates"],d)}const o=a(e,["modelVersion"]);o!=null&&u(t,["modelVersion"],o);const s=a(e,["promptFeedback"]);s!=null&&u(t,["promptFeedback"],s);const l=a(e,["responseId"]);l!=null&&u(t,["responseId"],l);const c=a(e,["usageMetadata"]);return c!=null&&u(t,["usageMetadata"],c),t}function ey(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],qn(e,i)),n}function ty(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],qn(e,i)),n}function ny(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function iy(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function oy(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["request","model"],H(e,i));const o=a(t,["contents"]);if(o!=null){let c=Ve(o);Array.isArray(c)&&(c=c.map(d=>Np(d))),u(n,["request","contents"],c)}const s=a(t,["metadata"]);s!=null&&u(n,["metadata"],s);const l=a(t,["config"]);return l!=null&&u(n,["request","generationConfig"],X0(e,l,a(n,["request"],{}))),n}function sy(e){const t={},n=a(e,["response"]);n!=null&&u(t,["response"],Z0(n));const i=a(e,["error"]);return i!=null&&u(t,["error"],i),t}function ry(e,t){const n={},i=a(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const o=a(e,["pageToken"]);if(t!==void 0&&o!=null&&u(t,["_query","pageToken"],o),a(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function ly(e,t){const n={},i=a(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const o=a(e,["pageToken"]);t!==void 0&&o!=null&&u(t,["_query","pageToken"],o);const s=a(e,["filter"]);return t!==void 0&&s!=null&&u(t,["_query","filter"],s),n}function ay(e){const t={},n=a(e,["config"]);return n!=null&&ry(n,t),t}function uy(e){const t={},n=a(e,["config"]);return n!=null&&ly(n,t),t}function cy(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const o=a(e,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Ao(l))),u(t,["batchJobs"],s)}return t}function dy(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const o=a(e,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>il(l))),u(t,["batchJobs"],s)}return t}function fy(e){const t={},n=a(e,["functionCall"]);n!=null&&u(t,["functionCall"],n);const i=a(e,["codeExecutionResult"]);i!=null&&u(t,["codeExecutionResult"],i);const o=a(e,["executableCode"]);o!=null&&u(t,["executableCode"],o);const s=a(e,["fileData"]);s!=null&&u(t,["fileData"],Q0(s));const l=a(e,["functionResponse"]);l!=null&&u(t,["functionResponse"],l);const c=a(e,["inlineData"]);c!=null&&u(t,["inlineData"],D0(c));const d=a(e,["text"]);d!=null&&u(t,["text"],d);const f=a(e,["thought"]);f!=null&&u(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&u(t,["thoughtSignature"],p);const m=a(e,["videoMetadata"]);return m!=null&&u(t,["videoMetadata"],m),t}function py(e){const t={},n=a(e,["category"]);if(n!=null&&u(t,["category"],n),a(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(e,["threshold"]);return i!=null&&u(t,["threshold"],i),t}function my(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(t,["functionDeclarations"],f)}if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(e,["googleSearchRetrieval"]);i!=null&&u(t,["googleSearchRetrieval"],i);const o=a(e,["googleMaps"]);o!=null&&u(t,["googleMaps"],ny(o));const s=a(e,["computerUse"]);s!=null&&u(t,["computerUse"],s);const l=a(e,["codeExecution"]);if(l!=null&&u(t,["codeExecution"],l),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=a(e,["googleSearch"]);c!=null&&u(t,["googleSearch"],iy(c));const d=a(e,["urlContext"]);return d!=null&&u(t,["urlContext"],d),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Zt;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_RAG_STORES="ragStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Zt||(Zt={}));class Bi{constructor(t,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,o)}init(t,n,i){var o,s;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(s=(o=l.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hy extends on{constructor(t){super(),this.apiClient=t,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Bi(Zt.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(t){const n=Rc(this.apiClient,t),i=n._url,o=D("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,d=c.requests,f=[];for(const p of d){const m=Object.assign({},p);if(m.systemInstruction){const h=m.systemInstruction;delete m.systemInstruction;const g=m.request;g.systemInstruction=h,m.request=g}f.push(m)}return c.requests=f,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const s=this.getGcsUri(t),l=this.getBigqueryUri(t);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${o}`;else if(l)i.dest=`${l}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=H0(this.apiClient,t);return c=D("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>il(p))}else{const f=Rc(this.apiClient,t);return c=D("{model}:batchGenerateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),l.then(p=>Ao(p))}}async createEmbeddingsInternal(t){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=q0(this.apiClient,t);return s=D("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>Ao(d))}}async get(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=ty(this.apiClient,t);return c=D("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>il(p))}else{const f=ey(this.apiClient,t);return c=D("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),l.then(p=>Ao(p))}}async cancel(t){var n,i,o,s;let l="",c={};if(this.apiClient.isVertexAI()){const d=b0(this.apiClient,t);l=D("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=U0(this.apiClient,t);l=D("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=uy(t);return c=D("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=dy(p),h=new Ic;return Object.assign(h,m),h})}else{const f=ay(t);return c=D("batches",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=cy(p),h=new Ic;return Object.assign(h,m),h})}}async delete(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=$0(this.apiClient,t);return c=D("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>W0(p))}else{const f=z0(this.apiClient,t);return c=D("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>J0(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gy(e){const t={},n=a(e,["data"]);if(n!=null&&u(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function Mc(e){const t={},n=a(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Fy(s))),u(t,["parts"],o)}const i=a(e,["role"]);return i!=null&&u(t,["role"],i),t}function yy(e,t){const n={},i=a(e,["ttl"]);t!==void 0&&i!=null&&u(t,["ttl"],i);const o=a(e,["expireTime"]);t!==void 0&&o!=null&&u(t,["expireTime"],o);const s=a(e,["displayName"]);t!==void 0&&s!=null&&u(t,["displayName"],s);const l=a(e,["contents"]);if(t!==void 0&&l!=null){let p=Ve(l);Array.isArray(p)&&(p=p.map(m=>Mc(m))),u(t,["contents"],p)}const c=a(e,["systemInstruction"]);t!==void 0&&c!=null&&u(t,["systemInstruction"],Mc(ye(c)));const d=a(e,["tools"]);if(t!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>Gy(m))),u(t,["tools"],p)}const f=a(e,["toolConfig"]);if(t!==void 0&&f!=null&&u(t,["toolConfig"],f),a(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function vy(e,t){const n={},i=a(e,["ttl"]);t!==void 0&&i!=null&&u(t,["ttl"],i);const o=a(e,["expireTime"]);t!==void 0&&o!=null&&u(t,["expireTime"],o);const s=a(e,["displayName"]);t!==void 0&&s!=null&&u(t,["displayName"],s);const l=a(e,["contents"]);if(t!==void 0&&l!=null){let m=Ve(l);Array.isArray(m)&&(m=m.map(h=>h)),u(t,["contents"],m)}const c=a(e,["systemInstruction"]);t!==void 0&&c!=null&&u(t,["systemInstruction"],ye(c));const d=a(e,["tools"]);if(t!==void 0&&d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>Vy(h))),u(t,["tools"],m)}const f=a(e,["toolConfig"]);t!==void 0&&f!=null&&u(t,["toolConfig"],f);const p=a(e,["kmsKeyName"]);return t!==void 0&&p!=null&&u(t,["encryption_spec","kmsKeyName"],p),n}function xy(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["model"],mp(e,i));const o=a(t,["config"]);return o!=null&&yy(o,n),n}function wy(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["model"],mp(e,i));const o=a(t,["config"]);return o!=null&&vy(o,n),n}function Cy(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],pt(e,i)),n}function Sy(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],pt(e,i)),n}function Ty(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function Ey(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function _y(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function Ny(e){const t={};if(a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(e,["description"]);n!=null&&u(t,["description"],n);const i=a(e,["name"]);i!=null&&u(t,["name"],i);const o=a(e,["parameters"]);o!=null&&u(t,["parameters"],o);const s=a(e,["parametersJsonSchema"]);s!=null&&u(t,["parametersJsonSchema"],s);const l=a(e,["response"]);l!=null&&u(t,["response"],l);const c=a(e,["responseJsonSchema"]);return c!=null&&u(t,["responseJsonSchema"],c),t}function Iy(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],pt(e,i)),n}function Ay(e,t){const n={},i=a(t,["name"]);return i!=null&&u(n,["_url","name"],pt(e,i)),n}function ky(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function Py(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function Ry(e,t){const n={},i=a(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const o=a(e,["pageToken"]);return t!==void 0&&o!=null&&u(t,["_query","pageToken"],o),n}function My(e,t){const n={},i=a(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const o=a(e,["pageToken"]);return t!==void 0&&o!=null&&u(t,["_query","pageToken"],o),n}function Ly(e){const t={},n=a(e,["config"]);return n!=null&&Ry(n,t),t}function Dy(e){const t={},n=a(e,["config"]);return n!=null&&My(n,t),t}function Uy(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const o=a(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),u(t,["cachedContents"],s)}return t}function by(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const o=a(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),u(t,["cachedContents"],s)}return t}function Fy(e){const t={},n=a(e,["functionCall"]);n!=null&&u(t,["functionCall"],n);const i=a(e,["codeExecutionResult"]);i!=null&&u(t,["codeExecutionResult"],i);const o=a(e,["executableCode"]);o!=null&&u(t,["executableCode"],o);const s=a(e,["fileData"]);s!=null&&u(t,["fileData"],_y(s));const l=a(e,["functionResponse"]);l!=null&&u(t,["functionResponse"],l);const c=a(e,["inlineData"]);c!=null&&u(t,["inlineData"],gy(c));const d=a(e,["text"]);d!=null&&u(t,["text"],d);const f=a(e,["thought"]);f!=null&&u(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&u(t,["thoughtSignature"],p);const m=a(e,["videoMetadata"]);return m!=null&&u(t,["videoMetadata"],m),t}function Gy(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(t,["functionDeclarations"],f)}if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(e,["googleSearchRetrieval"]);i!=null&&u(t,["googleSearchRetrieval"],i);const o=a(e,["googleMaps"]);o!=null&&u(t,["googleMaps"],ky(o));const s=a(e,["computerUse"]);s!=null&&u(t,["computerUse"],s);const l=a(e,["codeExecution"]);if(l!=null&&u(t,["codeExecution"],l),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=a(e,["googleSearch"]);c!=null&&u(t,["googleSearch"],Py(c));const d=a(e,["urlContext"]);return d!=null&&u(t,["urlContext"],d),t}function Vy(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>Ny(h))),u(t,["functionDeclarations"],m)}const i=a(e,["retrieval"]);i!=null&&u(t,["retrieval"],i);const o=a(e,["googleSearchRetrieval"]);o!=null&&u(t,["googleSearchRetrieval"],o);const s=a(e,["googleMaps"]);s!=null&&u(t,["googleMaps"],s);const l=a(e,["computerUse"]);l!=null&&u(t,["computerUse"],l);const c=a(e,["codeExecution"]);c!=null&&u(t,["codeExecution"],c);const d=a(e,["enterpriseWebSearch"]);d!=null&&u(t,["enterpriseWebSearch"],d);const f=a(e,["googleSearch"]);f!=null&&u(t,["googleSearch"],f);const p=a(e,["urlContext"]);return p!=null&&u(t,["urlContext"],p),t}function jy(e,t){const n={},i=a(e,["ttl"]);t!==void 0&&i!=null&&u(t,["ttl"],i);const o=a(e,["expireTime"]);return t!==void 0&&o!=null&&u(t,["expireTime"],o),n}function Hy(e,t){const n={},i=a(e,["ttl"]);t!==void 0&&i!=null&&u(t,["ttl"],i);const o=a(e,["expireTime"]);return t!==void 0&&o!=null&&u(t,["expireTime"],o),n}function By(e,t){const n={},i=a(t,["name"]);i!=null&&u(n,["_url","name"],pt(e,i));const o=a(t,["config"]);return o!=null&&jy(o,n),n}function qy(e,t){const n={},i=a(t,["name"]);i!=null&&u(n,["_url","name"],pt(e,i));const o=a(t,["config"]);return o!=null&&Hy(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zy extends on{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Bi(Zt.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=wy(this.apiClient,t);return c=D("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=xy(this.apiClient,t);return c=D("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Ay(this.apiClient,t);return c=D("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=Iy(this.apiClient,t);return c=D("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Sy(this.apiClient,t);return c=D("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Ey(p),h=new _c;return Object.assign(h,m),h})}else{const f=Cy(this.apiClient,t);return c=D("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Ty(p),h=new _c;return Object.assign(h,m),h})}}async update(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=qy(this.apiClient,t);return c=D("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=By(this.apiClient,t);return c=D("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Dy(t);return c=D("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=by(p),h=new Nc;return Object.assign(h,m),h})}else{const f=Ly(t);return c=D("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Uy(p),h=new Nc;return Object.assign(h,m),h})}}}function Lc(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(e){return this instanceof W?(this.v=e,this):new W(e)}function In(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),o[Symbol.asyncIterator]=function(){return this},o;function l(g){return function(C){return Promise.resolve(C).then(g,m)}}function c(g,C){i[g]&&(o[g]=function(S){return new Promise(function(N,v){s.push([g,S,N,v])>1||d(g,S)})},C&&(o[g]=C(o[g])))}function d(g,C){try{f(i[g](C))}catch(S){h(s[0][3],S)}}function f(g){g.value instanceof W?Promise.resolve(g.value.v).then(p,m):h(s[0][2],g)}function p(g){d("next",g)}function m(g){d("throw",g)}function h(g,C){g(C),s.shift(),s.length&&d(s[0][0],s[0][1])}}function gi(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Lc=="function"?Lc(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(l){return new Promise(function(c,d){l=e[s](l),o(c,d,l.done,l.value)})}}function o(s,l,c,d){Promise.resolve(d).then(function(f){s({value:f,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $y(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Ip(n)}function Ip(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function Jy(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Dc(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{const o=[];let s=!0;for(;i<n&&e[i].role==="model";)o.push(e[i]),s&&!Ip(e[i])&&(s=!1),i++;s?t.push(...o):t.pop()}return t}class Wy{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new Oy(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Oy{constructor(t,n,i,o={},s=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),Jy(s)}async sendMessage(t){var n;await this.sendPromise;const i=ye(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,l,c;const d=await o,f=(l=(s=d.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content,p=d.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let h=[];p!=null&&(h=(c=p.slice(m))!==null&&c!==void 0?c:[]);const g=f?[f]:[];this.recordHistory(i,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;const i=ye(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const s=await o;return this.processStreamResponse(s,i)}getHistory(t=!1){const n=t?Dc(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var i,o;return In(this,arguments,function*(){var l,c,d,f;const p=[];try{for(var m=!0,h=gi(t),g;g=yield W(h.next()),l=g.done,!l;m=!0){f=g.value,m=!1;const C=f;if($y(C)){const S=(o=(i=C.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;S!==void 0&&p.push(S)}yield yield W(C)}}catch(C){c={error:C}}finally{try{!m&&!l&&(d=h.return)&&(yield W(d.call(h)))}finally{if(c)throw c.error}}this.recordHistory(n,p)})}recordHistory(t,n,i){let o=[];n.length>0&&n.every(s=>s.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Dc(i)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Es extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Es.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yy(e){const t={},n=a(e,["file"]);return n!=null&&u(t,["file"],n),t}function Ky(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function Qy(e){const t={},n=a(e,["name"]);return n!=null&&u(t,["_url","file"],wp(n)),t}function Xy(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function Zy(e){const t={},n=a(e,["name"]);return n!=null&&u(t,["_url","file"],wp(n)),t}function ev(e,t){const n={},i=a(e,["pageSize"]);t!==void 0&&i!=null&&u(t,["_query","pageSize"],i);const o=a(e,["pageToken"]);return t!==void 0&&o!=null&&u(t,["_query","pageToken"],o),n}function tv(e){const t={},n=a(e,["config"]);return n!=null&&ev(n,t),t}function nv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const o=a(e,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),u(t,["files"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iv extends on{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Bi(Zt.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=tv(t);return s=D("files",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const f=nv(d),p=new m0;return Object.assign(p,f),p})}}async createInternal(t){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Yy(t);return s=D("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const f=Ky(d),p=new h0;return Object.assign(p,f),p})}}async get(t){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Zy(t);return s=D("files/{file}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(t){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Qy(t);return s=D("files/{file}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const f=Xy(d),p=new g0;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ko(e){const t={},n=a(e,["data"]);if(n!=null&&u(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function ov(e){const t={},n=a(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>xv(s))),u(t,["parts"],o)}const i=a(e,["role"]);return i!=null&&u(t,["role"],i),t}function sv(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function rv(e){const t={};if(a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(e,["description"]);n!=null&&u(t,["description"],n);const i=a(e,["name"]);i!=null&&u(t,["name"],i);const o=a(e,["parameters"]);o!=null&&u(t,["parameters"],o);const s=a(e,["parametersJsonSchema"]);s!=null&&u(t,["parametersJsonSchema"],s);const l=a(e,["response"]);l!=null&&u(t,["response"],l);const c=a(e,["responseJsonSchema"]);return c!=null&&u(t,["responseJsonSchema"],c),t}function lv(e){const t={},n=a(e,["modelSelectionConfig"]);n!=null&&u(t,["modelConfig"],n);const i=a(e,["audioTimestamp"]);i!=null&&u(t,["audioTimestamp"],i);const o=a(e,["candidateCount"]);o!=null&&u(t,["candidateCount"],o);const s=a(e,["enableAffectiveDialog"]);s!=null&&u(t,["enableAffectiveDialog"],s);const l=a(e,["frequencyPenalty"]);l!=null&&u(t,["frequencyPenalty"],l);const c=a(e,["logprobs"]);c!=null&&u(t,["logprobs"],c);const d=a(e,["maxOutputTokens"]);d!=null&&u(t,["maxOutputTokens"],d);const f=a(e,["mediaResolution"]);f!=null&&u(t,["mediaResolution"],f);const p=a(e,["presencePenalty"]);p!=null&&u(t,["presencePenalty"],p);const m=a(e,["responseJsonSchema"]);m!=null&&u(t,["responseJsonSchema"],m);const h=a(e,["responseLogprobs"]);h!=null&&u(t,["responseLogprobs"],h);const g=a(e,["responseMimeType"]);g!=null&&u(t,["responseMimeType"],g);const C=a(e,["responseModalities"]);C!=null&&u(t,["responseModalities"],C);const S=a(e,["responseSchema"]);S!=null&&u(t,["responseSchema"],S);const N=a(e,["routingConfig"]);N!=null&&u(t,["routingConfig"],N);const v=a(e,["seed"]);v!=null&&u(t,["seed"],v);const y=a(e,["speechConfig"]);y!=null&&u(t,["speechConfig"],Ap(y));const x=a(e,["stopSequences"]);x!=null&&u(t,["stopSequences"],x);const w=a(e,["temperature"]);w!=null&&u(t,["temperature"],w);const T=a(e,["thinkingConfig"]);T!=null&&u(t,["thinkingConfig"],T);const E=a(e,["topK"]);E!=null&&u(t,["topK"],E);const _=a(e,["topP"]);if(_!=null&&u(t,["topP"],_),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function av(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function uv(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function cv(e,t){const n={},i=a(e,["generationConfig"]);t!==void 0&&i!=null&&u(t,["setup","generationConfig"],i);const o=a(e,["responseModalities"]);t!==void 0&&o!=null&&u(t,["setup","generationConfig","responseModalities"],o);const s=a(e,["temperature"]);t!==void 0&&s!=null&&u(t,["setup","generationConfig","temperature"],s);const l=a(e,["topP"]);t!==void 0&&l!=null&&u(t,["setup","generationConfig","topP"],l);const c=a(e,["topK"]);t!==void 0&&c!=null&&u(t,["setup","generationConfig","topK"],c);const d=a(e,["maxOutputTokens"]);t!==void 0&&d!=null&&u(t,["setup","generationConfig","maxOutputTokens"],d);const f=a(e,["mediaResolution"]);t!==void 0&&f!=null&&u(t,["setup","generationConfig","mediaResolution"],f);const p=a(e,["seed"]);t!==void 0&&p!=null&&u(t,["setup","generationConfig","seed"],p);const m=a(e,["speechConfig"]);t!==void 0&&m!=null&&u(t,["setup","generationConfig","speechConfig"],fa(m));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&u(t,["setup","generationConfig","thinkingConfig"],h);const g=a(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&u(t,["setup","generationConfig","enableAffectiveDialog"],g);const C=a(e,["systemInstruction"]);t!==void 0&&C!=null&&u(t,["setup","systemInstruction"],ov(ye(C)));const S=a(e,["tools"]);if(t!==void 0&&S!=null){let E=Bn(S);Array.isArray(E)&&(E=E.map(_=>Cv(Hn(_)))),u(t,["setup","tools"],E)}const N=a(e,["sessionResumption"]);t!==void 0&&N!=null&&u(t,["setup","sessionResumption"],wv(N));const v=a(e,["inputAudioTranscription"]);t!==void 0&&v!=null&&u(t,["setup","inputAudioTranscription"],v);const y=a(e,["outputAudioTranscription"]);t!==void 0&&y!=null&&u(t,["setup","outputAudioTranscription"],y);const x=a(e,["realtimeInputConfig"]);t!==void 0&&x!=null&&u(t,["setup","realtimeInputConfig"],x);const w=a(e,["contextWindowCompression"]);t!==void 0&&w!=null&&u(t,["setup","contextWindowCompression"],w);const T=a(e,["proactivity"]);return t!==void 0&&T!=null&&u(t,["setup","proactivity"],T),n}function dv(e,t){const n={},i=a(e,["generationConfig"]);t!==void 0&&i!=null&&u(t,["setup","generationConfig"],lv(i));const o=a(e,["responseModalities"]);t!==void 0&&o!=null&&u(t,["setup","generationConfig","responseModalities"],o);const s=a(e,["temperature"]);t!==void 0&&s!=null&&u(t,["setup","generationConfig","temperature"],s);const l=a(e,["topP"]);t!==void 0&&l!=null&&u(t,["setup","generationConfig","topP"],l);const c=a(e,["topK"]);t!==void 0&&c!=null&&u(t,["setup","generationConfig","topK"],c);const d=a(e,["maxOutputTokens"]);t!==void 0&&d!=null&&u(t,["setup","generationConfig","maxOutputTokens"],d);const f=a(e,["mediaResolution"]);t!==void 0&&f!=null&&u(t,["setup","generationConfig","mediaResolution"],f);const p=a(e,["seed"]);t!==void 0&&p!=null&&u(t,["setup","generationConfig","seed"],p);const m=a(e,["speechConfig"]);t!==void 0&&m!=null&&u(t,["setup","generationConfig","speechConfig"],Ap(fa(m)));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&u(t,["setup","generationConfig","thinkingConfig"],h);const g=a(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&u(t,["setup","generationConfig","enableAffectiveDialog"],g);const C=a(e,["systemInstruction"]);t!==void 0&&C!=null&&u(t,["setup","systemInstruction"],ye(C));const S=a(e,["tools"]);if(t!==void 0&&S!=null){let E=Bn(S);Array.isArray(E)&&(E=E.map(_=>Sv(Hn(_)))),u(t,["setup","tools"],E)}const N=a(e,["sessionResumption"]);t!==void 0&&N!=null&&u(t,["setup","sessionResumption"],N);const v=a(e,["inputAudioTranscription"]);t!==void 0&&v!=null&&u(t,["setup","inputAudioTranscription"],v);const y=a(e,["outputAudioTranscription"]);t!==void 0&&y!=null&&u(t,["setup","outputAudioTranscription"],y);const x=a(e,["realtimeInputConfig"]);t!==void 0&&x!=null&&u(t,["setup","realtimeInputConfig"],x);const w=a(e,["contextWindowCompression"]);t!==void 0&&w!=null&&u(t,["setup","contextWindowCompression"],w);const T=a(e,["proactivity"]);return t!==void 0&&T!=null&&u(t,["setup","proactivity"],T),n}function fv(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["setup","model"],H(e,i));const o=a(t,["config"]);return o!=null&&u(n,["config"],cv(o,n)),n}function pv(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["setup","model"],H(e,i));const o=a(t,["config"]);return o!=null&&u(n,["config"],dv(o,n)),n}function mv(e){const t={},n=a(e,["musicGenerationConfig"]);return n!=null&&u(t,["musicGenerationConfig"],n),t}function hv(e){const t={},n=a(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),u(t,["weightedPrompts"],i)}return t}function gv(e){const t={},n=a(e,["media"]);if(n!=null){let f=hp(n);Array.isArray(f)&&(f=f.map(p=>ko(p))),u(t,["mediaChunks"],f)}const i=a(e,["audio"]);i!=null&&u(t,["audio"],ko(yp(i)));const o=a(e,["audioStreamEnd"]);o!=null&&u(t,["audioStreamEnd"],o);const s=a(e,["video"]);s!=null&&u(t,["video"],ko(gp(s)));const l=a(e,["text"]);l!=null&&u(t,["text"],l);const c=a(e,["activityStart"]);c!=null&&u(t,["activityStart"],c);const d=a(e,["activityEnd"]);return d!=null&&u(t,["activityEnd"],d),t}function yv(e){const t={},n=a(e,["media"]);if(n!=null){let f=hp(n);Array.isArray(f)&&(f=f.map(p=>p)),u(t,["mediaChunks"],f)}const i=a(e,["audio"]);i!=null&&u(t,["audio"],yp(i));const o=a(e,["audioStreamEnd"]);o!=null&&u(t,["audioStreamEnd"],o);const s=a(e,["video"]);s!=null&&u(t,["video"],gp(s));const l=a(e,["text"]);l!=null&&u(t,["text"],l);const c=a(e,["activityStart"]);c!=null&&u(t,["activityStart"],c);const d=a(e,["activityEnd"]);return d!=null&&u(t,["activityEnd"],d),t}function vv(e){const t={},n=a(e,["setupComplete"]);n!=null&&u(t,["setupComplete"],n);const i=a(e,["serverContent"]);i!=null&&u(t,["serverContent"],i);const o=a(e,["toolCall"]);o!=null&&u(t,["toolCall"],o);const s=a(e,["toolCallCancellation"]);s!=null&&u(t,["toolCallCancellation"],s);const l=a(e,["usageMetadata"]);l!=null&&u(t,["usageMetadata"],Tv(l));const c=a(e,["goAway"]);c!=null&&u(t,["goAway"],c);const d=a(e,["sessionResumptionUpdate"]);return d!=null&&u(t,["sessionResumptionUpdate"],d),t}function xv(e){const t={},n=a(e,["functionCall"]);n!=null&&u(t,["functionCall"],n);const i=a(e,["codeExecutionResult"]);i!=null&&u(t,["codeExecutionResult"],i);const o=a(e,["executableCode"]);o!=null&&u(t,["executableCode"],o);const s=a(e,["fileData"]);s!=null&&u(t,["fileData"],sv(s));const l=a(e,["functionResponse"]);l!=null&&u(t,["functionResponse"],l);const c=a(e,["inlineData"]);c!=null&&u(t,["inlineData"],ko(c));const d=a(e,["text"]);d!=null&&u(t,["text"],d);const f=a(e,["thought"]);f!=null&&u(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&u(t,["thoughtSignature"],p);const m=a(e,["videoMetadata"]);return m!=null&&u(t,["videoMetadata"],m),t}function wv(e){const t={},n=a(e,["handle"]);if(n!=null&&u(t,["handle"],n),a(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Ap(e){const t={},n=a(e,["languageCode"]);n!=null&&u(t,["languageCode"],n);const i=a(e,["voiceConfig"]);if(i!=null&&u(t,["voiceConfig"],i),a(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function Cv(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(t,["functionDeclarations"],f)}if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(e,["googleSearchRetrieval"]);i!=null&&u(t,["googleSearchRetrieval"],i);const o=a(e,["googleMaps"]);o!=null&&u(t,["googleMaps"],av(o));const s=a(e,["computerUse"]);s!=null&&u(t,["computerUse"],s);const l=a(e,["codeExecution"]);if(l!=null&&u(t,["codeExecution"],l),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=a(e,["googleSearch"]);c!=null&&u(t,["googleSearch"],uv(c));const d=a(e,["urlContext"]);return d!=null&&u(t,["urlContext"],d),t}function Sv(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>rv(h))),u(t,["functionDeclarations"],m)}const i=a(e,["retrieval"]);i!=null&&u(t,["retrieval"],i);const o=a(e,["googleSearchRetrieval"]);o!=null&&u(t,["googleSearchRetrieval"],o);const s=a(e,["googleMaps"]);s!=null&&u(t,["googleMaps"],s);const l=a(e,["computerUse"]);l!=null&&u(t,["computerUse"],l);const c=a(e,["codeExecution"]);c!=null&&u(t,["codeExecution"],c);const d=a(e,["enterpriseWebSearch"]);d!=null&&u(t,["enterpriseWebSearch"],d);const f=a(e,["googleSearch"]);f!=null&&u(t,["googleSearch"],f);const p=a(e,["urlContext"]);return p!=null&&u(t,["urlContext"],p),t}function Tv(e){const t={},n=a(e,["promptTokenCount"]);n!=null&&u(t,["promptTokenCount"],n);const i=a(e,["cachedContentTokenCount"]);i!=null&&u(t,["cachedContentTokenCount"],i);const o=a(e,["candidatesTokenCount"]);o!=null&&u(t,["responseTokenCount"],o);const s=a(e,["toolUsePromptTokenCount"]);s!=null&&u(t,["toolUsePromptTokenCount"],s);const l=a(e,["thoughtsTokenCount"]);l!=null&&u(t,["thoughtsTokenCount"],l);const c=a(e,["totalTokenCount"]);c!=null&&u(t,["totalTokenCount"],c);const d=a(e,["promptTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(C=>C)),u(t,["promptTokensDetails"],g)}const f=a(e,["cacheTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(C=>C)),u(t,["cacheTokensDetails"],g)}const p=a(e,["candidatesTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(C=>C)),u(t,["responseTokensDetails"],g)}const m=a(e,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(C=>C)),u(t,["toolUsePromptTokensDetails"],g)}const h=a(e,["trafficType"]);return h!=null&&u(t,["trafficType"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ev(e){const t={},n=a(e,["data"]);if(n!=null&&u(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function _v(e){const t={},n=a(e,["content"]);n!=null&&u(t,["content"],n);const i=a(e,["citationMetadata"]);i!=null&&u(t,["citationMetadata"],Nv(i));const o=a(e,["tokenCount"]);o!=null&&u(t,["tokenCount"],o);const s=a(e,["finishReason"]);s!=null&&u(t,["finishReason"],s);const l=a(e,["avgLogprobs"]);l!=null&&u(t,["avgLogprobs"],l);const c=a(e,["groundingMetadata"]);c!=null&&u(t,["groundingMetadata"],c);const d=a(e,["index"]);d!=null&&u(t,["index"],d);const f=a(e,["logprobsResult"]);f!=null&&u(t,["logprobsResult"],f);const p=a(e,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>g)),u(t,["safetyRatings"],h)}const m=a(e,["urlContextMetadata"]);return m!=null&&u(t,["urlContextMetadata"],m),t}function Nv(e){const t={},n=a(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),u(t,["citations"],i)}return t}function Iv(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["contents"]);if(o!=null){let s=Ve(o);Array.isArray(s)&&(s=s.map(l=>l)),u(n,["contents"],s)}return n}function Av(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),u(t,["tokensInfo"],o)}return t}function kv(e){const t={},n=a(e,["values"]);n!=null&&u(t,["values"],n);const i=a(e,["statistics"]);return i!=null&&u(t,["statistics"],Pv(i)),t}function Pv(e){const t={},n=a(e,["truncated"]);n!=null&&u(t,["truncated"],n);const i=a(e,["token_count"]);return i!=null&&u(t,["tokenCount"],i),t}function _s(e){const t={},n=a(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Ux(s))),u(t,["parts"],o)}const i=a(e,["role"]);return i!=null&&u(t,["role"],i),t}function Rv(e){const t={},n=a(e,["controlType"]);n!=null&&u(t,["controlType"],n);const i=a(e,["enableControlImageComputation"]);return i!=null&&u(t,["computeControl"],i),t}function Mv(e){const t={};if(a(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Lv(e,t){const n={},i=a(e,["systemInstruction"]);t!==void 0&&i!=null&&u(t,["systemInstruction"],ye(i));const o=a(e,["tools"]);if(t!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Lp(c))),u(t,["tools"],l)}const s=a(e,["generationConfig"]);return t!==void 0&&s!=null&&u(t,["generationConfig"],Sx(s)),n}function Dv(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["contents"]);if(o!=null){let l=Ve(o);Array.isArray(l)&&(l=l.map(c=>_s(c))),u(n,["contents"],l)}const s=a(t,["config"]);return s!=null&&Mv(s),n}function Uv(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["contents"]);if(o!=null){let l=Ve(o);Array.isArray(l)&&(l=l.map(c=>c)),u(n,["contents"],l)}const s=a(t,["config"]);return s!=null&&Lv(s,n),n}function bv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["totalTokens"]);i!=null&&u(t,["totalTokens"],i);const o=a(e,["cachedContentTokenCount"]);return o!=null&&u(t,["cachedContentTokenCount"],o),t}function Fv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["totalTokens"]);return i!=null&&u(t,["totalTokens"],i),t}function Gv(e,t){const n={},i=a(t,["model"]);return i!=null&&u(n,["_url","name"],H(e,i)),n}function Vv(e,t){const n={},i=a(t,["model"]);return i!=null&&u(n,["_url","name"],H(e,i)),n}function jv(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function Hv(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function Bv(e,t){const n={},i=a(e,["outputGcsUri"]);t!==void 0&&i!=null&&u(t,["parameters","storageUri"],i);const o=a(e,["negativePrompt"]);t!==void 0&&o!=null&&u(t,["parameters","negativePrompt"],o);const s=a(e,["numberOfImages"]);t!==void 0&&s!=null&&u(t,["parameters","sampleCount"],s);const l=a(e,["aspectRatio"]);t!==void 0&&l!=null&&u(t,["parameters","aspectRatio"],l);const c=a(e,["guidanceScale"]);t!==void 0&&c!=null&&u(t,["parameters","guidanceScale"],c);const d=a(e,["seed"]);t!==void 0&&d!=null&&u(t,["parameters","seed"],d);const f=a(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&u(t,["parameters","safetySetting"],f);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&u(t,["parameters","personGeneration"],p);const m=a(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&u(t,["parameters","includeSafetyAttributes"],m);const h=a(e,["includeRaiReason"]);t!==void 0&&h!=null&&u(t,["parameters","includeRaiReason"],h);const g=a(e,["language"]);t!==void 0&&g!=null&&u(t,["parameters","language"],g);const C=a(e,["outputMimeType"]);t!==void 0&&C!=null&&u(t,["parameters","outputOptions","mimeType"],C);const S=a(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&u(t,["parameters","outputOptions","compressionQuality"],S);const N=a(e,["addWatermark"]);t!==void 0&&N!=null&&u(t,["parameters","addWatermark"],N);const v=a(e,["labels"]);t!==void 0&&v!=null&&u(t,["labels"],v);const y=a(e,["editMode"]);t!==void 0&&y!=null&&u(t,["parameters","editMode"],y);const x=a(e,["baseSteps"]);return t!==void 0&&x!=null&&u(t,["parameters","editConfig","baseSteps"],x),n}function qv(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const s=a(t,["referenceImages"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>Hx(d))),u(n,["instances[0]","referenceImages"],c)}const l=a(t,["config"]);return l!=null&&Bv(l,n),n}function zv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ns(s))),u(t,["generatedImages"],o)}return t}function $v(e,t){const n={},i=a(e,["taskType"]);t!==void 0&&i!=null&&u(t,["requests[]","taskType"],i);const o=a(e,["title"]);t!==void 0&&o!=null&&u(t,["requests[]","title"],o);const s=a(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&u(t,["requests[]","outputDimensionality"],s),a(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Jv(e,t){const n={},i=a(e,["taskType"]);t!==void 0&&i!=null&&u(t,["instances[]","task_type"],i);const o=a(e,["title"]);t!==void 0&&o!=null&&u(t,["instances[]","title"],o);const s=a(e,["outputDimensionality"]);t!==void 0&&s!=null&&u(t,["parameters","outputDimensionality"],s);const l=a(e,["mimeType"]);t!==void 0&&l!=null&&u(t,["instances[]","mimeType"],l);const c=a(e,["autoTruncate"]);return t!==void 0&&c!=null&&u(t,["parameters","autoTruncate"],c),n}function Wv(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["contents"]);if(o!=null){let c=ua(e,o);Array.isArray(c)&&(c=c.map(d=>d)),u(n,["requests[]","content"],c)}const s=a(t,["config"]);s!=null&&$v(s,n);const l=a(t,["model"]);return l!==void 0&&u(n,["requests[]","model"],H(e,l)),n}function Ov(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["contents"]);if(o!=null){let l=ua(e,o);Array.isArray(l)&&(l=l.map(c=>c)),u(n,["instances[]","content"],l)}const s=a(t,["config"]);return s!=null&&Jv(s,n),n}function Yv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>l)),u(t,["embeddings"],s)}const o=a(e,["metadata"]);return o!=null&&u(t,["metadata"],o),t}function Kv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>kv(l))),u(t,["embeddings"],s)}const o=a(e,["metadata"]);return o!=null&&u(t,["metadata"],o),t}function Qv(e){const t={},n=a(e,["endpoint"]);n!=null&&u(t,["name"],n);const i=a(e,["deployedModelId"]);return i!=null&&u(t,["deployedModelId"],i),t}function Xv(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function Zv(e){const t={};if(a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(e,["description"]);n!=null&&u(t,["description"],n);const i=a(e,["name"]);i!=null&&u(t,["name"],i);const o=a(e,["parameters"]);o!=null&&u(t,["parameters"],o);const s=a(e,["parametersJsonSchema"]);s!=null&&u(t,["parametersJsonSchema"],s);const l=a(e,["response"]);l!=null&&u(t,["response"],l);const c=a(e,["responseJsonSchema"]);return c!=null&&u(t,["responseJsonSchema"],c),t}function ex(e,t,n){const i={},o=a(t,["systemInstruction"]);n!==void 0&&o!=null&&u(n,["systemInstruction"],_s(ye(o)));const s=a(t,["temperature"]);s!=null&&u(i,["temperature"],s);const l=a(t,["topP"]);l!=null&&u(i,["topP"],l);const c=a(t,["topK"]);c!=null&&u(i,["topK"],c);const d=a(t,["candidateCount"]);d!=null&&u(i,["candidateCount"],d);const f=a(t,["maxOutputTokens"]);f!=null&&u(i,["maxOutputTokens"],f);const p=a(t,["stopSequences"]);p!=null&&u(i,["stopSequences"],p);const m=a(t,["responseLogprobs"]);m!=null&&u(i,["responseLogprobs"],m);const h=a(t,["logprobs"]);h!=null&&u(i,["logprobs"],h);const g=a(t,["presencePenalty"]);g!=null&&u(i,["presencePenalty"],g);const C=a(t,["frequencyPenalty"]);C!=null&&u(i,["frequencyPenalty"],C);const S=a(t,["seed"]);S!=null&&u(i,["seed"],S);const N=a(t,["responseMimeType"]);N!=null&&u(i,["responseMimeType"],N);const v=a(t,["responseSchema"]);v!=null&&u(i,["responseSchema"],ca(v));const y=a(t,["responseJsonSchema"]);if(y!=null&&u(i,["responseJsonSchema"],y),a(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=a(t,["safetySettings"]);if(n!==void 0&&x!=null){let z=x;Array.isArray(z)&&(z=z.map(pe=>Bx(pe))),u(n,["safetySettings"],z)}const w=a(t,["tools"]);if(n!==void 0&&w!=null){let z=Bn(w);Array.isArray(z)&&(z=z.map(pe=>Ox(Hn(pe)))),u(n,["tools"],z)}const T=a(t,["toolConfig"]);if(n!==void 0&&T!=null&&u(n,["toolConfig"],T),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=a(t,["cachedContent"]);n!==void 0&&E!=null&&u(n,["cachedContent"],pt(e,E));const _=a(t,["responseModalities"]);_!=null&&u(i,["responseModalities"],_);const k=a(t,["mediaResolution"]);k!=null&&u(i,["mediaResolution"],k);const P=a(t,["speechConfig"]);if(P!=null&&u(i,["speechConfig"],da(P)),a(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=a(t,["thinkingConfig"]);M!=null&&u(i,["thinkingConfig"],M);const B=a(t,["imageConfig"]);return B!=null&&u(i,["imageConfig"],B),i}function tx(e,t,n){const i={},o=a(t,["systemInstruction"]);n!==void 0&&o!=null&&u(n,["systemInstruction"],ye(o));const s=a(t,["temperature"]);s!=null&&u(i,["temperature"],s);const l=a(t,["topP"]);l!=null&&u(i,["topP"],l);const c=a(t,["topK"]);c!=null&&u(i,["topK"],c);const d=a(t,["candidateCount"]);d!=null&&u(i,["candidateCount"],d);const f=a(t,["maxOutputTokens"]);f!=null&&u(i,["maxOutputTokens"],f);const p=a(t,["stopSequences"]);p!=null&&u(i,["stopSequences"],p);const m=a(t,["responseLogprobs"]);m!=null&&u(i,["responseLogprobs"],m);const h=a(t,["logprobs"]);h!=null&&u(i,["logprobs"],h);const g=a(t,["presencePenalty"]);g!=null&&u(i,["presencePenalty"],g);const C=a(t,["frequencyPenalty"]);C!=null&&u(i,["frequencyPenalty"],C);const S=a(t,["seed"]);S!=null&&u(i,["seed"],S);const N=a(t,["responseMimeType"]);N!=null&&u(i,["responseMimeType"],N);const v=a(t,["responseSchema"]);v!=null&&u(i,["responseSchema"],ca(v));const y=a(t,["responseJsonSchema"]);y!=null&&u(i,["responseJsonSchema"],y);const x=a(t,["routingConfig"]);x!=null&&u(i,["routingConfig"],x);const w=a(t,["modelSelectionConfig"]);w!=null&&u(i,["modelConfig"],w);const T=a(t,["safetySettings"]);if(n!==void 0&&T!=null){let Ae=T;Array.isArray(Ae)&&(Ae=Ae.map(bt=>bt)),u(n,["safetySettings"],Ae)}const E=a(t,["tools"]);if(n!==void 0&&E!=null){let Ae=Bn(E);Array.isArray(Ae)&&(Ae=Ae.map(bt=>Lp(Hn(bt)))),u(n,["tools"],Ae)}const _=a(t,["toolConfig"]);n!==void 0&&_!=null&&u(n,["toolConfig"],_);const k=a(t,["labels"]);n!==void 0&&k!=null&&u(n,["labels"],k);const P=a(t,["cachedContent"]);n!==void 0&&P!=null&&u(n,["cachedContent"],pt(e,P));const M=a(t,["responseModalities"]);M!=null&&u(i,["responseModalities"],M);const B=a(t,["mediaResolution"]);B!=null&&u(i,["mediaResolution"],B);const z=a(t,["speechConfig"]);z!=null&&u(i,["speechConfig"],Mp(da(z)));const pe=a(t,["audioTimestamp"]);pe!=null&&u(i,["audioTimestamp"],pe);const $n=a(t,["thinkingConfig"]);$n!=null&&u(i,["thinkingConfig"],$n);const qi=a(t,["imageConfig"]);return qi!=null&&u(i,["imageConfig"],qi),i}function Uc(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["contents"]);if(o!=null){let l=Ve(o);Array.isArray(l)&&(l=l.map(c=>_s(c))),u(n,["contents"],l)}const s=a(t,["config"]);return s!=null&&u(n,["generationConfig"],ex(e,s,n)),n}function bc(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["contents"]);if(o!=null){let l=Ve(o);Array.isArray(l)&&(l=l.map(c=>c)),u(n,["contents"],l)}const s=a(t,["config"]);return s!=null&&u(n,["generationConfig"],tx(e,s,n)),n}function Fc(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>_v(f))),u(t,["candidates"],d)}const o=a(e,["modelVersion"]);o!=null&&u(t,["modelVersion"],o);const s=a(e,["promptFeedback"]);s!=null&&u(t,["promptFeedback"],s);const l=a(e,["responseId"]);l!=null&&u(t,["responseId"],l);const c=a(e,["usageMetadata"]);return c!=null&&u(t,["usageMetadata"],c),t}function Gc(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),u(t,["candidates"],f)}const o=a(e,["createTime"]);o!=null&&u(t,["createTime"],o);const s=a(e,["modelVersion"]);s!=null&&u(t,["modelVersion"],s);const l=a(e,["promptFeedback"]);l!=null&&u(t,["promptFeedback"],l);const c=a(e,["responseId"]);c!=null&&u(t,["responseId"],c);const d=a(e,["usageMetadata"]);return d!=null&&u(t,["usageMetadata"],d),t}function nx(e,t){const n={};if(a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=a(e,["numberOfImages"]);t!==void 0&&i!=null&&u(t,["parameters","sampleCount"],i);const o=a(e,["aspectRatio"]);t!==void 0&&o!=null&&u(t,["parameters","aspectRatio"],o);const s=a(e,["guidanceScale"]);if(t!==void 0&&s!=null&&u(t,["parameters","guidanceScale"],s),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=a(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&u(t,["parameters","safetySetting"],l);const c=a(e,["personGeneration"]);t!==void 0&&c!=null&&u(t,["parameters","personGeneration"],c);const d=a(e,["includeSafetyAttributes"]);t!==void 0&&d!=null&&u(t,["parameters","includeSafetyAttributes"],d);const f=a(e,["includeRaiReason"]);t!==void 0&&f!=null&&u(t,["parameters","includeRaiReason"],f);const p=a(e,["language"]);t!==void 0&&p!=null&&u(t,["parameters","language"],p);const m=a(e,["outputMimeType"]);t!==void 0&&m!=null&&u(t,["parameters","outputOptions","mimeType"],m);const h=a(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&u(t,["parameters","outputOptions","compressionQuality"],h),a(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=a(e,["imageSize"]);if(t!==void 0&&g!=null&&u(t,["parameters","sampleImageSize"],g),a(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function ix(e,t){const n={},i=a(e,["outputGcsUri"]);t!==void 0&&i!=null&&u(t,["parameters","storageUri"],i);const o=a(e,["negativePrompt"]);t!==void 0&&o!=null&&u(t,["parameters","negativePrompt"],o);const s=a(e,["numberOfImages"]);t!==void 0&&s!=null&&u(t,["parameters","sampleCount"],s);const l=a(e,["aspectRatio"]);t!==void 0&&l!=null&&u(t,["parameters","aspectRatio"],l);const c=a(e,["guidanceScale"]);t!==void 0&&c!=null&&u(t,["parameters","guidanceScale"],c);const d=a(e,["seed"]);t!==void 0&&d!=null&&u(t,["parameters","seed"],d);const f=a(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&u(t,["parameters","safetySetting"],f);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&u(t,["parameters","personGeneration"],p);const m=a(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&u(t,["parameters","includeSafetyAttributes"],m);const h=a(e,["includeRaiReason"]);t!==void 0&&h!=null&&u(t,["parameters","includeRaiReason"],h);const g=a(e,["language"]);t!==void 0&&g!=null&&u(t,["parameters","language"],g);const C=a(e,["outputMimeType"]);t!==void 0&&C!=null&&u(t,["parameters","outputOptions","mimeType"],C);const S=a(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&u(t,["parameters","outputOptions","compressionQuality"],S);const N=a(e,["addWatermark"]);t!==void 0&&N!=null&&u(t,["parameters","addWatermark"],N);const v=a(e,["labels"]);t!==void 0&&v!=null&&u(t,["labels"],v);const y=a(e,["imageSize"]);t!==void 0&&y!=null&&u(t,["parameters","sampleImageSize"],y);const x=a(e,["enhancePrompt"]);return t!==void 0&&x!=null&&u(t,["parameters","enhancePrompt"],x),n}function ox(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const s=a(t,["config"]);return s!=null&&nx(s,n),n}function sx(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const s=a(t,["config"]);return s!=null&&ix(s,n),n}function rx(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>vx(l))),u(t,["generatedImages"],s)}const o=a(e,["positivePromptSafetyAttributes"]);return o!=null&&u(t,["positivePromptSafetyAttributes"],Pp(o)),t}function lx(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Ns(l))),u(t,["generatedImages"],s)}const o=a(e,["positivePromptSafetyAttributes"]);return o!=null&&u(t,["positivePromptSafetyAttributes"],Rp(o)),t}function ax(e,t){const n={},i=a(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&u(t,["parameters","sampleCount"],i),a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=a(e,["durationSeconds"]);if(t!==void 0&&o!=null&&u(t,["parameters","durationSeconds"],o),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(e,["aspectRatio"]);t!==void 0&&s!=null&&u(t,["parameters","aspectRatio"],s);const l=a(e,["resolution"]);t!==void 0&&l!=null&&u(t,["parameters","resolution"],l);const c=a(e,["personGeneration"]);if(t!==void 0&&c!=null&&u(t,["parameters","personGeneration"],c),a(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=a(e,["negativePrompt"]);t!==void 0&&d!=null&&u(t,["parameters","negativePrompt"],d);const f=a(e,["enhancePrompt"]);if(t!==void 0&&f!=null&&u(t,["parameters","enhancePrompt"],f),a(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=a(e,["lastFrame"]);t!==void 0&&p!=null&&u(t,["instances[0]","lastFrame"],Is(p));const m=a(e,["referenceImages"]);if(t!==void 0&&m!=null){let h=m;Array.isArray(h)&&(h=h.map(g=>lw(g))),u(t,["instances[0]","referenceImages"],h)}if(a(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function ux(e,t){const n={},i=a(e,["numberOfVideos"]);t!==void 0&&i!=null&&u(t,["parameters","sampleCount"],i);const o=a(e,["outputGcsUri"]);t!==void 0&&o!=null&&u(t,["parameters","storageUri"],o);const s=a(e,["fps"]);t!==void 0&&s!=null&&u(t,["parameters","fps"],s);const l=a(e,["durationSeconds"]);t!==void 0&&l!=null&&u(t,["parameters","durationSeconds"],l);const c=a(e,["seed"]);t!==void 0&&c!=null&&u(t,["parameters","seed"],c);const d=a(e,["aspectRatio"]);t!==void 0&&d!=null&&u(t,["parameters","aspectRatio"],d);const f=a(e,["resolution"]);t!==void 0&&f!=null&&u(t,["parameters","resolution"],f);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&u(t,["parameters","personGeneration"],p);const m=a(e,["pubsubTopic"]);t!==void 0&&m!=null&&u(t,["parameters","pubsubTopic"],m);const h=a(e,["negativePrompt"]);t!==void 0&&h!=null&&u(t,["parameters","negativePrompt"],h);const g=a(e,["enhancePrompt"]);t!==void 0&&g!=null&&u(t,["parameters","enhancePrompt"],g);const C=a(e,["generateAudio"]);t!==void 0&&C!=null&&u(t,["parameters","generateAudio"],C);const S=a(e,["lastFrame"]);t!==void 0&&S!=null&&u(t,["instances[0]","lastFrame"],Ke(S));const N=a(e,["referenceImages"]);if(t!==void 0&&N!=null){let x=N;Array.isArray(x)&&(x=x.map(w=>aw(w))),u(t,["instances[0]","referenceImages"],x)}const v=a(e,["mask"]);t!==void 0&&v!=null&&u(t,["instances[0]","mask"],rw(v));const y=a(e,["compressionQuality"]);return t!==void 0&&y!=null&&u(t,["parameters","compressionQuality"],y),n}function cx(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const i=a(e,["metadata"]);i!=null&&u(t,["metadata"],i);const o=a(e,["done"]);o!=null&&u(t,["done"],o);const s=a(e,["error"]);s!=null&&u(t,["error"],s);const l=a(e,["response","generateVideoResponse"]);return l!=null&&u(t,["response"],mx(l)),t}function dx(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const i=a(e,["metadata"]);i!=null&&u(t,["metadata"],i);const o=a(e,["done"]);o!=null&&u(t,["done"],o);const s=a(e,["error"]);s!=null&&u(t,["error"],s);const l=a(e,["response"]);return l!=null&&u(t,["response"],hx(l)),t}function fx(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const s=a(t,["image"]);s!=null&&u(n,["instances[0]","image"],Is(s));const l=a(t,["video"]);l!=null&&u(n,["instances[0]","video"],Dp(l));const c=a(t,["source"]);c!=null&&gx(c,n);const d=a(t,["config"]);return d!=null&&ax(d,n),n}function px(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const s=a(t,["image"]);s!=null&&u(n,["instances[0]","image"],Ke(s));const l=a(t,["video"]);l!=null&&u(n,["instances[0]","video"],Up(l));const c=a(t,["source"]);c!=null&&yx(c,n);const d=a(t,["config"]);return d!=null&&ux(d,n),n}function mx(e){const t={},n=a(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>wx(l))),u(t,["generatedVideos"],s)}const i=a(e,["raiMediaFilteredCount"]);i!=null&&u(t,["raiMediaFilteredCount"],i);const o=a(e,["raiMediaFilteredReasons"]);return o!=null&&u(t,["raiMediaFilteredReasons"],o),t}function hx(e){const t={},n=a(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Cx(l))),u(t,["generatedVideos"],s)}const i=a(e,["raiMediaFilteredCount"]);i!=null&&u(t,["raiMediaFilteredCount"],i);const o=a(e,["raiMediaFilteredReasons"]);return o!=null&&u(t,["raiMediaFilteredReasons"],o),t}function gx(e,t){const n={},i=a(e,["prompt"]);t!==void 0&&i!=null&&u(t,["instances[0]","prompt"],i);const o=a(e,["image"]);t!==void 0&&o!=null&&u(t,["instances[0]","image"],Is(o));const s=a(e,["video"]);return t!==void 0&&s!=null&&u(t,["instances[0]","video"],Dp(s)),n}function yx(e,t){const n={},i=a(e,["prompt"]);t!==void 0&&i!=null&&u(t,["instances[0]","prompt"],i);const o=a(e,["image"]);t!==void 0&&o!=null&&u(t,["instances[0]","image"],Ke(o));const s=a(e,["video"]);return t!==void 0&&s!=null&&u(t,["instances[0]","video"],Up(s)),n}function vx(e){const t={},n=a(e,["_self"]);n!=null&&u(t,["image"],Ix(n));const i=a(e,["raiFilteredReason"]);i!=null&&u(t,["raiFilteredReason"],i);const o=a(e,["_self"]);return o!=null&&u(t,["safetyAttributes"],Pp(o)),t}function Ns(e){const t={},n=a(e,["_self"]);n!=null&&u(t,["image"],kp(n));const i=a(e,["raiFilteredReason"]);i!=null&&u(t,["raiFilteredReason"],i);const o=a(e,["_self"]);o!=null&&u(t,["safetyAttributes"],Rp(o));const s=a(e,["prompt"]);return s!=null&&u(t,["enhancedPrompt"],s),t}function xx(e){const t={},n=a(e,["_self"]);n!=null&&u(t,["mask"],kp(n));const i=a(e,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),u(t,["labels"],o)}return t}function wx(e){const t={},n=a(e,["video"]);return n!=null&&u(t,["video"],ow(n)),t}function Cx(e){const t={},n=a(e,["_self"]);return n!=null&&u(t,["video"],sw(n)),t}function Sx(e){const t={},n=a(e,["modelSelectionConfig"]);n!=null&&u(t,["modelConfig"],n);const i=a(e,["audioTimestamp"]);i!=null&&u(t,["audioTimestamp"],i);const o=a(e,["candidateCount"]);o!=null&&u(t,["candidateCount"],o);const s=a(e,["enableAffectiveDialog"]);s!=null&&u(t,["enableAffectiveDialog"],s);const l=a(e,["frequencyPenalty"]);l!=null&&u(t,["frequencyPenalty"],l);const c=a(e,["logprobs"]);c!=null&&u(t,["logprobs"],c);const d=a(e,["maxOutputTokens"]);d!=null&&u(t,["maxOutputTokens"],d);const f=a(e,["mediaResolution"]);f!=null&&u(t,["mediaResolution"],f);const p=a(e,["presencePenalty"]);p!=null&&u(t,["presencePenalty"],p);const m=a(e,["responseJsonSchema"]);m!=null&&u(t,["responseJsonSchema"],m);const h=a(e,["responseLogprobs"]);h!=null&&u(t,["responseLogprobs"],h);const g=a(e,["responseMimeType"]);g!=null&&u(t,["responseMimeType"],g);const C=a(e,["responseModalities"]);C!=null&&u(t,["responseModalities"],C);const S=a(e,["responseSchema"]);S!=null&&u(t,["responseSchema"],S);const N=a(e,["routingConfig"]);N!=null&&u(t,["routingConfig"],N);const v=a(e,["seed"]);v!=null&&u(t,["seed"],v);const y=a(e,["speechConfig"]);y!=null&&u(t,["speechConfig"],Mp(y));const x=a(e,["stopSequences"]);x!=null&&u(t,["stopSequences"],x);const w=a(e,["temperature"]);w!=null&&u(t,["temperature"],w);const T=a(e,["thinkingConfig"]);T!=null&&u(t,["thinkingConfig"],T);const E=a(e,["topK"]);E!=null&&u(t,["topK"],E);const _=a(e,["topP"]);if(_!=null&&u(t,["topP"],_),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Tx(e,t){const n={},i=a(t,["model"]);return i!=null&&u(n,["_url","name"],H(e,i)),n}function Ex(e,t){const n={},i=a(t,["model"]);return i!=null&&u(n,["_url","name"],H(e,i)),n}function _x(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function Nx(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function Ix(e){const t={},n=a(e,["bytesBase64Encoded"]);n!=null&&u(t,["imageBytes"],Ut(n));const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function kp(e){const t={},n=a(e,["gcsUri"]);n!=null&&u(t,["gcsUri"],n);const i=a(e,["bytesBase64Encoded"]);i!=null&&u(t,["imageBytes"],Ut(i));const o=a(e,["mimeType"]);return o!=null&&u(t,["mimeType"],o),t}function Is(e){const t={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(e,["imageBytes"]);n!=null&&u(t,["bytesBase64Encoded"],Ut(n));const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function Ke(e){const t={},n=a(e,["gcsUri"]);n!=null&&u(t,["gcsUri"],n);const i=a(e,["imageBytes"]);i!=null&&u(t,["bytesBase64Encoded"],Ut(i));const o=a(e,["mimeType"]);return o!=null&&u(t,["mimeType"],o),t}function Ax(e,t,n){const i={},o=a(t,["pageSize"]);n!==void 0&&o!=null&&u(n,["_query","pageSize"],o);const s=a(t,["pageToken"]);n!==void 0&&s!=null&&u(n,["_query","pageToken"],s);const l=a(t,["filter"]);n!==void 0&&l!=null&&u(n,["_query","filter"],l);const c=a(t,["queryBase"]);return n!==void 0&&c!=null&&u(n,["_url","models_url"],Cp(e,c)),i}function kx(e,t,n){const i={},o=a(t,["pageSize"]);n!==void 0&&o!=null&&u(n,["_query","pageSize"],o);const s=a(t,["pageToken"]);n!==void 0&&s!=null&&u(n,["_query","pageToken"],s);const l=a(t,["filter"]);n!==void 0&&l!=null&&u(n,["_query","filter"],l);const c=a(t,["queryBase"]);return n!==void 0&&c!=null&&u(n,["_url","models_url"],Cp(e,c)),i}function Px(e,t){const n={},i=a(t,["config"]);return i!=null&&Ax(e,i,n),n}function Rx(e,t){const n={},i=a(t,["config"]);return i!=null&&kx(e,i,n),n}function Mx(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const o=a(e,["_self"]);if(o!=null){let s=Sp(o);Array.isArray(s)&&(s=s.map(l=>ol(l))),u(t,["models"],s)}return t}function Lx(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["nextPageToken"]);i!=null&&u(t,["nextPageToken"],i);const o=a(e,["_self"]);if(o!=null){let s=Sp(o);Array.isArray(s)&&(s=s.map(l=>sl(l))),u(t,["models"],s)}return t}function Dx(e){const t={},n=a(e,["maskMode"]);n!=null&&u(t,["maskMode"],n);const i=a(e,["segmentationClasses"]);i!=null&&u(t,["maskClasses"],i);const o=a(e,["maskDilation"]);return o!=null&&u(t,["dilation"],o),t}function ol(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const i=a(e,["displayName"]);i!=null&&u(t,["displayName"],i);const o=a(e,["description"]);o!=null&&u(t,["description"],o);const s=a(e,["version"]);s!=null&&u(t,["version"],s);const l=a(e,["_self"]);l!=null&&u(t,["tunedModelInfo"],Yx(l));const c=a(e,["inputTokenLimit"]);c!=null&&u(t,["inputTokenLimit"],c);const d=a(e,["outputTokenLimit"]);d!=null&&u(t,["outputTokenLimit"],d);const f=a(e,["supportedGenerationMethods"]);return f!=null&&u(t,["supportedActions"],f),t}function sl(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const i=a(e,["displayName"]);i!=null&&u(t,["displayName"],i);const o=a(e,["description"]);o!=null&&u(t,["description"],o);const s=a(e,["versionId"]);s!=null&&u(t,["version"],s);const l=a(e,["deployedModels"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(h=>Qv(h))),u(t,["endpoints"],m)}const c=a(e,["labels"]);c!=null&&u(t,["labels"],c);const d=a(e,["_self"]);d!=null&&u(t,["tunedModelInfo"],Kx(d));const f=a(e,["defaultCheckpointId"]);f!=null&&u(t,["defaultCheckpointId"],f);const p=a(e,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>h)),u(t,["checkpoints"],m)}return t}function Ux(e){const t={},n=a(e,["functionCall"]);n!=null&&u(t,["functionCall"],n);const i=a(e,["codeExecutionResult"]);i!=null&&u(t,["codeExecutionResult"],i);const o=a(e,["executableCode"]);o!=null&&u(t,["executableCode"],o);const s=a(e,["fileData"]);s!=null&&u(t,["fileData"],Xv(s));const l=a(e,["functionResponse"]);l!=null&&u(t,["functionResponse"],l);const c=a(e,["inlineData"]);c!=null&&u(t,["inlineData"],Ev(c));const d=a(e,["text"]);d!=null&&u(t,["text"],d);const f=a(e,["thought"]);f!=null&&u(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&u(t,["thoughtSignature"],p);const m=a(e,["videoMetadata"]);return m!=null&&u(t,["videoMetadata"],m),t}function bx(e){const t={},n=a(e,["productImage"]);return n!=null&&u(t,["image"],Ke(n)),t}function Fx(e,t){const n={},i=a(e,["numberOfImages"]);t!==void 0&&i!=null&&u(t,["parameters","sampleCount"],i);const o=a(e,["baseSteps"]);t!==void 0&&o!=null&&u(t,["parameters","editConfig","baseSteps"],o);const s=a(e,["outputGcsUri"]);t!==void 0&&s!=null&&u(t,["parameters","storageUri"],s);const l=a(e,["seed"]);t!==void 0&&l!=null&&u(t,["parameters","seed"],l);const c=a(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&u(t,["parameters","safetySetting"],c);const d=a(e,["personGeneration"]);t!==void 0&&d!=null&&u(t,["parameters","personGeneration"],d);const f=a(e,["addWatermark"]);t!==void 0&&f!=null&&u(t,["parameters","addWatermark"],f);const p=a(e,["outputMimeType"]);t!==void 0&&p!=null&&u(t,["parameters","outputOptions","mimeType"],p);const m=a(e,["outputCompressionQuality"]);t!==void 0&&m!=null&&u(t,["parameters","outputOptions","compressionQuality"],m);const h=a(e,["enhancePrompt"]);t!==void 0&&h!=null&&u(t,["parameters","enhancePrompt"],h);const g=a(e,["labels"]);return t!==void 0&&g!=null&&u(t,["labels"],g),n}function Gx(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["source"]);o!=null&&jx(o,n);const s=a(t,["config"]);return s!=null&&Fx(s,n),n}function Vx(e){const t={},n=a(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Ns(o))),u(t,["generatedImages"],i)}return t}function jx(e,t){const n={},i=a(e,["prompt"]);t!==void 0&&i!=null&&u(t,["instances[0]","prompt"],i);const o=a(e,["personImage"]);t!==void 0&&o!=null&&u(t,["instances[0]","personImage","image"],Ke(o));const s=a(e,["productImages"]);if(t!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>bx(c))),u(t,["instances[0]","productImages"],l)}return n}function Hx(e){const t={},n=a(e,["referenceImage"]);n!=null&&u(t,["referenceImage"],Ke(n));const i=a(e,["referenceId"]);i!=null&&u(t,["referenceId"],i);const o=a(e,["referenceType"]);o!=null&&u(t,["referenceType"],o);const s=a(e,["maskImageConfig"]);s!=null&&u(t,["maskImageConfig"],Dx(s));const l=a(e,["controlImageConfig"]);l!=null&&u(t,["controlImageConfig"],Rv(l));const c=a(e,["styleImageConfig"]);c!=null&&u(t,["styleImageConfig"],c);const d=a(e,["subjectImageConfig"]);return d!=null&&u(t,["subjectImageConfig"],d),t}function Pp(e){const t={},n=a(e,["safetyAttributes","categories"]);n!=null&&u(t,["categories"],n);const i=a(e,["safetyAttributes","scores"]);i!=null&&u(t,["scores"],i);const o=a(e,["contentType"]);return o!=null&&u(t,["contentType"],o),t}function Rp(e){const t={},n=a(e,["safetyAttributes","categories"]);n!=null&&u(t,["categories"],n);const i=a(e,["safetyAttributes","scores"]);i!=null&&u(t,["scores"],i);const o=a(e,["contentType"]);return o!=null&&u(t,["contentType"],o),t}function Bx(e){const t={},n=a(e,["category"]);if(n!=null&&u(t,["category"],n),a(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(e,["threshold"]);return i!=null&&u(t,["threshold"],i),t}function qx(e){const t={},n=a(e,["image"]);return n!=null&&u(t,["image"],Ke(n)),t}function zx(e,t){const n={},i=a(e,["mode"]);t!==void 0&&i!=null&&u(t,["parameters","mode"],i);const o=a(e,["maxPredictions"]);t!==void 0&&o!=null&&u(t,["parameters","maxPredictions"],o);const s=a(e,["confidenceThreshold"]);t!==void 0&&s!=null&&u(t,["parameters","confidenceThreshold"],s);const l=a(e,["maskDilation"]);t!==void 0&&l!=null&&u(t,["parameters","maskDilation"],l);const c=a(e,["binaryColorThreshold"]);t!==void 0&&c!=null&&u(t,["parameters","binaryColorThreshold"],c);const d=a(e,["labels"]);return t!==void 0&&d!=null&&u(t,["labels"],d),n}function $x(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["source"]);o!=null&&Wx(o,n);const s=a(t,["config"]);return s!=null&&zx(s,n),n}function Jx(e){const t={},n=a(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>xx(o))),u(t,["generatedMasks"],i)}return t}function Wx(e,t){const n={},i=a(e,["prompt"]);t!==void 0&&i!=null&&u(t,["instances[0]","prompt"],i);const o=a(e,["image"]);t!==void 0&&o!=null&&u(t,["instances[0]","image"],Ke(o));const s=a(e,["scribbleImage"]);return t!==void 0&&s!=null&&u(t,["instances[0]","scribble"],qx(s)),n}function Mp(e){const t={},n=a(e,["languageCode"]);n!=null&&u(t,["languageCode"],n);const i=a(e,["voiceConfig"]);if(i!=null&&u(t,["voiceConfig"],i),a(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function Ox(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(t,["functionDeclarations"],f)}if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(e,["googleSearchRetrieval"]);i!=null&&u(t,["googleSearchRetrieval"],i);const o=a(e,["googleMaps"]);o!=null&&u(t,["googleMaps"],_x(o));const s=a(e,["computerUse"]);s!=null&&u(t,["computerUse"],s);const l=a(e,["codeExecution"]);if(l!=null&&u(t,["codeExecution"],l),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=a(e,["googleSearch"]);c!=null&&u(t,["googleSearch"],Nx(c));const d=a(e,["urlContext"]);return d!=null&&u(t,["urlContext"],d),t}function Lp(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>Zv(h))),u(t,["functionDeclarations"],m)}const i=a(e,["retrieval"]);i!=null&&u(t,["retrieval"],i);const o=a(e,["googleSearchRetrieval"]);o!=null&&u(t,["googleSearchRetrieval"],o);const s=a(e,["googleMaps"]);s!=null&&u(t,["googleMaps"],s);const l=a(e,["computerUse"]);l!=null&&u(t,["computerUse"],l);const c=a(e,["codeExecution"]);c!=null&&u(t,["codeExecution"],c);const d=a(e,["enterpriseWebSearch"]);d!=null&&u(t,["enterpriseWebSearch"],d);const f=a(e,["googleSearch"]);f!=null&&u(t,["googleSearch"],f);const p=a(e,["urlContext"]);return p!=null&&u(t,["urlContext"],p),t}function Yx(e){const t={},n=a(e,["baseModel"]);n!=null&&u(t,["baseModel"],n);const i=a(e,["createTime"]);i!=null&&u(t,["createTime"],i);const o=a(e,["updateTime"]);return o!=null&&u(t,["updateTime"],o),t}function Kx(e){const t={},n=a(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&u(t,["baseModel"],n);const i=a(e,["createTime"]);i!=null&&u(t,["createTime"],i);const o=a(e,["updateTime"]);return o!=null&&u(t,["updateTime"],o),t}function Qx(e,t){const n={},i=a(e,["displayName"]);t!==void 0&&i!=null&&u(t,["displayName"],i);const o=a(e,["description"]);t!==void 0&&o!=null&&u(t,["description"],o);const s=a(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&u(t,["defaultCheckpointId"],s),n}function Xx(e,t){const n={},i=a(e,["displayName"]);t!==void 0&&i!=null&&u(t,["displayName"],i);const o=a(e,["description"]);t!==void 0&&o!=null&&u(t,["description"],o);const s=a(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&u(t,["defaultCheckpointId"],s),n}function Zx(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","name"],H(e,i));const o=a(t,["config"]);return o!=null&&Qx(o,n),n}function ew(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["config"]);return o!=null&&Xx(o,n),n}function tw(e,t){const n={},i=a(e,["outputGcsUri"]);t!==void 0&&i!=null&&u(t,["parameters","storageUri"],i);const o=a(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&u(t,["parameters","safetySetting"],o);const s=a(e,["personGeneration"]);t!==void 0&&s!=null&&u(t,["parameters","personGeneration"],s);const l=a(e,["includeRaiReason"]);t!==void 0&&l!=null&&u(t,["parameters","includeRaiReason"],l);const c=a(e,["outputMimeType"]);t!==void 0&&c!=null&&u(t,["parameters","outputOptions","mimeType"],c);const d=a(e,["outputCompressionQuality"]);t!==void 0&&d!=null&&u(t,["parameters","outputOptions","compressionQuality"],d);const f=a(e,["enhanceInputImage"]);t!==void 0&&f!=null&&u(t,["parameters","upscaleConfig","enhanceInputImage"],f);const p=a(e,["imagePreservationFactor"]);t!==void 0&&p!=null&&u(t,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=a(e,["labels"]);t!==void 0&&m!=null&&u(t,["labels"],m);const h=a(e,["numberOfImages"]);t!==void 0&&h!=null&&u(t,["parameters","sampleCount"],h);const g=a(e,["mode"]);return t!==void 0&&g!=null&&u(t,["parameters","mode"],g),n}function nw(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["_url","model"],H(e,i));const o=a(t,["image"]);o!=null&&u(n,["instances[0]","image"],Ke(o));const s=a(t,["upscaleFactor"]);s!=null&&u(n,["parameters","upscaleConfig","upscaleFactor"],s);const l=a(t,["config"]);return l!=null&&tw(l,n),n}function iw(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const i=a(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ns(s))),u(t,["generatedImages"],o)}return t}function ow(e){const t={},n=a(e,["uri"]);n!=null&&u(t,["uri"],n);const i=a(e,["encodedVideo"]);i!=null&&u(t,["videoBytes"],Ut(i));const o=a(e,["encoding"]);return o!=null&&u(t,["mimeType"],o),t}function sw(e){const t={},n=a(e,["gcsUri"]);n!=null&&u(t,["uri"],n);const i=a(e,["bytesBase64Encoded"]);i!=null&&u(t,["videoBytes"],Ut(i));const o=a(e,["mimeType"]);return o!=null&&u(t,["mimeType"],o),t}function rw(e){const t={},n=a(e,["image"]);n!=null&&u(t,["_self"],Ke(n));const i=a(e,["maskMode"]);return i!=null&&u(t,["maskMode"],i),t}function lw(e){const t={},n=a(e,["image"]);n!=null&&u(t,["image"],Is(n));const i=a(e,["referenceType"]);return i!=null&&u(t,["referenceType"],i),t}function aw(e){const t={},n=a(e,["image"]);n!=null&&u(t,["image"],Ke(n));const i=a(e,["referenceType"]);return i!=null&&u(t,["referenceType"],i),t}function Dp(e){const t={},n=a(e,["uri"]);n!=null&&u(t,["uri"],n);const i=a(e,["videoBytes"]);i!=null&&u(t,["encodedVideo"],Ut(i));const o=a(e,["mimeType"]);return o!=null&&u(t,["encoding"],o),t}function Up(e){const t={},n=a(e,["uri"]);n!=null&&u(t,["gcsUri"],n);const i=a(e,["videoBytes"]);i!=null&&u(t,["bytesBase64Encoded"],Ut(i));const o=a(e,["mimeType"]);return o!=null&&u(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uw="Content-Type",cw="X-Server-Timeout",dw="User-Agent",rl="x-goog-api-client",fw="1.28.0",pw=`google-genai-sdk/${fw}`,mw="v1beta1",hw="v1beta",Vc=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class gw{constructor(t){var n,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:mw,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:hw,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[l,c]of Object.entries(t.queryParams))o.searchParams.append(l,String(c));let s={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=t.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),t.abortSignal),this.unaryApiCall(o,s,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[o,s]of Object.entries(n))typeof s=="object"?i[o]=Object.assign(Object.assign({},i[o]),s):s!==void 0&&(i[o]=s);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=t.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),t.abortSignal),this.streamApiCall(o,s,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i,o){if(n&&n.timeout||o){const s=new AbortController,l=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>s.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),t.signal=l}return n&&n.extraBody!==null&&yw(t,n.extraBody),t.headers=await this.getHeadersInternal(n,i),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await jc(o),new tl(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await jc(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){var n;return In(this,arguments,function*(){const o=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:d}=yield W(o.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=s.decode(d,{stream:!0});try{const m=JSON.parse(f);if("error"in m){const h=JSON.parse(JSON.stringify(m.error)),g=h.status,C=h.code,S=`got status: ${g}. ${JSON.stringify(m)}`;if(C>=400&&C<600)throw new Es({message:S,status:C})}}catch(m){if(m.name==="ApiError")throw m}l+=f;let p=l.match(Vc);for(;p;){const m=p[1];try{const h=new Response(m,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield W(new tl(h)),l=l.slice(p[0].length),p=l.match(Vc)}catch(h){throw new Error(`exception parsing stream chunk ${m}. ${h}`)}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},n=pw+" "+this.clientOptions.userAgentExtra;return t[dw]=n,t[rl]=n,t[uw]="application/json",t}async getHeadersInternal(t,n){const i=new Headers;if(t&&t.headers){for(const[o,s]of Object.entries(t.headers))i.append(o,s);t.timeout&&t.timeout>0&&i.append(cw,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}async uploadFile(t,n){var i,o;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,c=await l.stat(t);s.sizeBytes=String(c.size);const d=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;let f="";typeof t=="string"&&(f=t.replace(/[/\\]+$/,""),f=(o=f.split(/[/\\]/).pop())!==null&&o!==void 0?o:"");const p=await this.fetchUploadUrl(s,f,n);return l.upload(t,p,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,i){var o;let s={};i!=null&&i.httpOptions?s=i.httpOptions:s={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`},n?{"X-Goog-Upload-File-Name":n}:{})};const l={file:t},c=await this.request({path:D("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:s});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(o=c==null?void 0:c.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function jc(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new Es({message:o,status:n}):new Error(o)}}function yw(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const s=JSON.parse(e.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,l){const c=Object.assign({},s);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const f=l[d],p=c[d];f&&typeof f=="object"&&!Array.isArray(f)&&p&&typeof p=="object"&&!Array.isArray(p)?c[d]=i(p,f):(p&&f&&typeof p!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof p}, New type: ${typeof f}. Overwriting.`),c[d]=f)}return c}const o=i(n,t);e.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vw="mcp_used/unknown";let xw=!1;function bp(e){for(const t of e)if(ww(t)||typeof t=="object"&&"inputSchema"in t)return!0;return xw}function Fp(e){var t;const n=(t=e[rl])!==null&&t!==void 0?t:"";e[rl]=(n+` ${vw}`).trimStart()}function ww(e){return e!==null&&typeof e=="object"&&e instanceof pa}function Cw(e,t=100){return In(this,arguments,function*(){let i,o=0;for(;o<t;){const s=yield W(e.listTools({cursor:i}));for(const l of s.tools)yield yield W(l),o++;if(!s.nextCursor)break;i=s.nextCursor}})}class pa{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new pa(t,n)}async initialize(){var t,n,i,o;if(this.mcpTools.length>0)return;const s={},l=[];for(const p of this.mcpClients)try{for(var c=!0,d=(n=void 0,gi(Cw(p))),f;f=await d.next(),t=f.done,!t;c=!0){o=f.value,c=!1;const m=o;l.push(m);const h=m.name;if(s[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);s[h]=p}}catch(m){n={error:m}}finally{try{!c&&!t&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),N0(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const l=await o.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Sw(e,t,n){const i=new v0;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),t(i)}class Tw{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),l=Nw(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${c}`;let f=()=>{};const p=new Promise(x=>{f=x}),m=t.callbacks,h=function(){f({})},g=this.apiClient,C={onopen:h,onmessage:x=>{Sw(g,m.onmessage,x)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(x){},onclose:(i=m==null?void 0:m.onclose)!==null&&i!==void 0?i:function(x){}},S=this.webSocketFactory.create(d,_w(l),C);S.connect(),await p;const y={setup:{model:H(this.apiClient,t.model)}};return S.send(JSON.stringify(y)),new Ew(S,this.apiClient)}}class Ew{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=hv(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=mv(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(vn.PLAY)}pause(){this.sendPlaybackControl(vn.PAUSE)}stop(){this.sendPlaybackControl(vn.STOP)}resetContext(){this.sendPlaybackControl(vn.RESET_CONTEXT)}close(){this.conn.close()}}function _w(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function Nw(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Iw="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Aw(e,t,n){const i=new y0;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const s=JSON.parse(o);if(e.isVertexAI()){const l=vv(s);Object.assign(i,l)}else Object.assign(i,s);t(i)}class kw{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new Tw(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,o,s,l,c;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let p;const m=this.apiClient.getHeaders();t.config&&t.config.tools&&bp(t.config.tools)&&Fp(m);const h=Lw(m);if(this.apiClient.isVertexAI())p=`${d}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,p);else{const P=this.apiClient.getApiKey();let M="BidiGenerateContent",B="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",B="access_token"),p=`${d}/ws/google.ai.generativelanguage.${f}.GenerativeService.${M}?${B}=${P}`}let g=()=>{};const C=new Promise(P=>{g=P}),S=t.callbacks,N=function(){var P;(P=S==null?void 0:S.onopen)===null||P===void 0||P.call(S),g({})},v=this.apiClient,y={onopen:N,onmessage:P=>{Aw(v,S.onmessage,P)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(P){},onclose:(i=S==null?void 0:S.onclose)!==null&&i!==void 0?i:function(P){}},x=this.webSocketFactory.create(p,Mw(h),y);x.connect(),await C;let w=H(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&w.startsWith("publishers/")){const P=this.apiClient.getProject(),M=this.apiClient.getLocation();w=`projects/${P}/locations/${M}/`+w}let T={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[es.AUDIO]}:t.config.responseModalities=[es.AUDIO]),!((s=t.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const E=(c=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],_=[];for(const P of E)if(this.isCallableTool(P)){const M=P;_.push(await M.tool())}else _.push(P);_.length>0&&(t.config.tools=_);const k={model:w,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?T=pv(this.apiClient,k):T=fv(this.apiClient,k),delete T.config,x.send(JSON.stringify(T)),new Rw(x,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const Pw={turnComplete:!0};class Rw{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Ve(n.turns),t.isVertexAI()||(i=i.map(o=>_s(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!t.isVertexAI()&&!("id"in s))throw new Error(Iw)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},Pw),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:yv(t)}:n={realtimeInput:gv(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Mw(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function Lw(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hc=10;function Bc(e){var t,n,i;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const l of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(An(l)){o=!0;break}if(!o)return!0;const s=(i=e==null?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function An(e){return"callTool"in e&&typeof e.callTool=="function"}function Dw(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>An(o)))!==null&&i!==void 0?i:!1}function Uw(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>!An(o)))!==null&&i!==void 0?i:!1}function qc(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bw extends on{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,o,s,l,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Dw(n)||Bc(n.config))return await this.generateContentInternal(d);if(Uw(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,p;const m=Ve(d.contents),h=(s=(o=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Hc;let g=0;for(;g<h&&(f=await this.generateContentInternal(d),!(!f.functionCalls||f.functionCalls.length===0));){const C=f.candidates[0].content,S=[];for(const N of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(An(N)){const y=await N.callTool(f.functionCalls);S.push(...y)}g++,p={role:"user",parts:S},d.contents=Ve(d.contents),d.contents.push(C),d.contents.push(p),qc(d.config)&&(m.push(C),m.push(p))}return qc(d.config)&&(f.automaticFunctionCallingHistory=m),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Bc(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let s;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((o=d==null?void 0:d.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=d==null?void 0:d.safetyAttributes:l.push(d);let c;return s?c={generatedImages:l,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Bi(Zt.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,s,l,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(s=n.source)===null||s===void 0?void 0:s.video)===null||l===void 0)&&l.uri&&(!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,o;const s=(n=t.config)===null||n===void 0?void 0:n.tools;if(!s)return t;const l=await Promise.all(s.map(async d=>An(d)?await d.tool():d)),c={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:l})};if(c.config.tools=l,t.config&&t.config.tools&&bp(t.config.tools)){const d=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let f=Object.assign({},d);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),Fp(f),c.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:f})}return c}async initAfcToolsMap(t){var n,i,o;const s=new Map;for(const l of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(An(l)){const c=l,d=await c.tool();for(const f of(o=d.functionDeclarations)!==null&&o!==void 0?o:[]){if(!f.name)throw new Error("Function declaration name is required.");if(s.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);s.set(f.name,c)}}return s}async processAfcStream(t){var n,i,o;const s=(o=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Hc;let l=!1,c=0;const d=await this.initAfcToolsMap(t);return function(f,p,m){var h,g;return In(this,arguments,function*(){for(var C,S,N,v;c<s;){l&&(c++,l=!1);const T=yield W(f.processParamsMaybeAddMcpUsage(m)),E=yield W(f.generateContentStreamInternal(T)),_=[],k=[];try{for(var y=!0,x=(S=void 0,gi(E)),w;w=yield W(x.next()),C=w.done,!C;y=!0){v=w.value,y=!1;const P=v;if(yield yield W(P),P.candidates&&(!((h=P.candidates[0])===null||h===void 0)&&h.content)){k.push(P.candidates[0].content);for(const M of(g=P.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(c<s&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(M.functionCall.name)){const B=yield W(p.get(M.functionCall.name).callTool([M.functionCall]));_.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(P){S={error:P}}finally{try{!y&&!C&&(N=x.return)&&(yield W(N.call(x)))}finally{if(S)throw S.error}}if(_.length>0){l=!0;const P=new ti;P.candidates=[{content:{role:"user",parts:_}}],yield yield W(P);const M=[];M.push(...k),M.push({role:"user",parts:_});const B=Ve(m.contents).concat(M);m.contents=B}else break}})}(this,d,t)}async generateContentInternal(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=bc(this.apiClient,t);return c=D("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Gc(p),h=new ti;return Object.assign(h,m),h})}else{const f=Uc(this.apiClient,t);return c=D("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Fc(p),h=new ti;return Object.assign(h,m),h})}}async generateContentStreamInternal(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=bc(this.apiClient,t);return c=D("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(m){return In(this,arguments,function*(){var h,g,C,S;try{for(var N=!0,v=gi(m),y;y=yield W(v.next()),h=y.done,!h;N=!0){S=y.value,N=!1;const x=S,w=Gc(yield W(x.json()));w.sdkHttpResponse={headers:x.headers};const T=new ti;Object.assign(T,w),yield yield W(T)}}catch(x){g={error:x}}finally{try{!N&&!h&&(C=v.return)&&(yield W(C.call(v)))}finally{if(g)throw g.error}}})})}else{const f=Uc(this.apiClient,t);return c=D("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),l.then(function(m){return In(this,arguments,function*(){var h,g,C,S;try{for(var N=!0,v=gi(m),y;y=yield W(v.next()),h=y.done,!h;N=!0){S=y.value,N=!1;const x=S,w=Fc(yield W(x.json()));w.sdkHttpResponse={headers:x.headers};const T=new ti;Object.assign(T,w),yield yield W(T)}}catch(x){g={error:x}}finally{try{!N&&!h&&(C=v.return)&&(yield W(C.call(v)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Ov(this.apiClient,t);return c=D("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Kv(p),h=new xc;return Object.assign(h,m),h})}else{const f=Wv(this.apiClient,t);return c=D("{model}:batchEmbedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Yv(p),h=new xc;return Object.assign(h,m),h})}}async generateImagesInternal(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=sx(this.apiClient,t);return c=D("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=lx(p),h=new wc;return Object.assign(h,m),h})}else{const f=ox(this.apiClient,t);return c=D("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=rx(p),h=new wc;return Object.assign(h,m),h})}}async editImageInternal(t){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI()){const c=qv(this.apiClient,t);return s=D("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const f=zv(d),p=new u0;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI()){const c=nw(this.apiClient,t);return s=D("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const f=iw(d),p=new c0;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI()){const c=Gx(this.apiClient,t);return s=D("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const f=Vx(d),p=new d0;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI()){const c=$x(this.apiClient,t);return s=D("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const f=Jx(d),p=new f0;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Ex(this.apiClient,t);return c=D("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>sl(p))}else{const f=Tx(this.apiClient,t);return c=D("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),l.then(p=>ol(p))}}async listInternal(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Rx(this.apiClient,t);return c=D("{models_url}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Lx(p),h=new Cc;return Object.assign(h,m),h})}else{const f=Px(this.apiClient,t);return c=D("{models_url}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Mx(p),h=new Cc;return Object.assign(h,m),h})}}async update(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=ew(this.apiClient,t);return c=D("{model}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>sl(p))}else{const f=Zx(this.apiClient,t);return c=D("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),l.then(p=>ol(p))}}async delete(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Vv(this.apiClient,t);return c=D("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Hv(p),h=new Sc;return Object.assign(h,m),h})}else{const f=Gv(this.apiClient,t);return c=D("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=jv(p),h=new Sc;return Object.assign(h,m),h})}}async countTokens(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Uv(this.apiClient,t);return c=D("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Fv(p),h=new Tc;return Object.assign(h,m),h})}else{const f=Dv(this.apiClient,t);return c=D("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=bv(p),h=new Tc;return Object.assign(h,m),h})}}async computeTokens(t){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI()){const c=Iv(this.apiClient,t);return s=D("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>{const f=Av(d),p=new p0;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=px(this.apiClient,t);return c=D("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const m=dx(p),h=new ts;return Object.assign(h,m),h})}else{const f=fx(this.apiClient,t);return c=D("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),l.then(p=>{const m=cx(p),h=new ts;return Object.assign(h,m),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fw extends on{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=r0(t);return c=D("{operationName}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}else{const f=s0(t);return c=D("{operationName}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(t){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI()){const c=Xg(t);return s=D("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gw(e){const t={},n=a(e,["data"]);if(n!=null&&u(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function Vw(e){const t={},n=a(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Ww(s))),u(t,["parts"],o)}const i=a(e,["role"]);return i!=null&&u(t,["role"],i),t}function jw(e,t,n){const i={},o=a(t,["expireTime"]);n!==void 0&&o!=null&&u(n,["expireTime"],o);const s=a(t,["newSessionExpireTime"]);n!==void 0&&s!=null&&u(n,["newSessionExpireTime"],s);const l=a(t,["uses"]);n!==void 0&&l!=null&&u(n,["uses"],l);const c=a(t,["liveConnectConstraints"]);n!==void 0&&c!=null&&u(n,["bidiGenerateContentSetup"],Jw(e,c));const d=a(t,["lockAdditionalFields"]);return n!==void 0&&d!=null&&u(n,["fieldMask"],d),i}function Hw(e,t){const n={},i=a(t,["config"]);return i!=null&&u(n,["config"],jw(e,i,n)),n}function Bw(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const i=a(e,["mimeType"]);return i!=null&&u(t,["mimeType"],i),t}function qw(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function zw(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function $w(e,t){const n={},i=a(e,["generationConfig"]);t!==void 0&&i!=null&&u(t,["setup","generationConfig"],i);const o=a(e,["responseModalities"]);t!==void 0&&o!=null&&u(t,["setup","generationConfig","responseModalities"],o);const s=a(e,["temperature"]);t!==void 0&&s!=null&&u(t,["setup","generationConfig","temperature"],s);const l=a(e,["topP"]);t!==void 0&&l!=null&&u(t,["setup","generationConfig","topP"],l);const c=a(e,["topK"]);t!==void 0&&c!=null&&u(t,["setup","generationConfig","topK"],c);const d=a(e,["maxOutputTokens"]);t!==void 0&&d!=null&&u(t,["setup","generationConfig","maxOutputTokens"],d);const f=a(e,["mediaResolution"]);t!==void 0&&f!=null&&u(t,["setup","generationConfig","mediaResolution"],f);const p=a(e,["seed"]);t!==void 0&&p!=null&&u(t,["setup","generationConfig","seed"],p);const m=a(e,["speechConfig"]);t!==void 0&&m!=null&&u(t,["setup","generationConfig","speechConfig"],fa(m));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&u(t,["setup","generationConfig","thinkingConfig"],h);const g=a(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&u(t,["setup","generationConfig","enableAffectiveDialog"],g);const C=a(e,["systemInstruction"]);t!==void 0&&C!=null&&u(t,["setup","systemInstruction"],Vw(ye(C)));const S=a(e,["tools"]);if(t!==void 0&&S!=null){let E=Bn(S);Array.isArray(E)&&(E=E.map(_=>Yw(Hn(_)))),u(t,["setup","tools"],E)}const N=a(e,["sessionResumption"]);t!==void 0&&N!=null&&u(t,["setup","sessionResumption"],Ow(N));const v=a(e,["inputAudioTranscription"]);t!==void 0&&v!=null&&u(t,["setup","inputAudioTranscription"],v);const y=a(e,["outputAudioTranscription"]);t!==void 0&&y!=null&&u(t,["setup","outputAudioTranscription"],y);const x=a(e,["realtimeInputConfig"]);t!==void 0&&x!=null&&u(t,["setup","realtimeInputConfig"],x);const w=a(e,["contextWindowCompression"]);t!==void 0&&w!=null&&u(t,["setup","contextWindowCompression"],w);const T=a(e,["proactivity"]);return t!==void 0&&T!=null&&u(t,["setup","proactivity"],T),n}function Jw(e,t){const n={},i=a(t,["model"]);i!=null&&u(n,["setup","model"],H(e,i));const o=a(t,["config"]);return o!=null&&u(n,["config"],$w(o,n)),n}function Ww(e){const t={},n=a(e,["functionCall"]);n!=null&&u(t,["functionCall"],n);const i=a(e,["codeExecutionResult"]);i!=null&&u(t,["codeExecutionResult"],i);const o=a(e,["executableCode"]);o!=null&&u(t,["executableCode"],o);const s=a(e,["fileData"]);s!=null&&u(t,["fileData"],Bw(s));const l=a(e,["functionResponse"]);l!=null&&u(t,["functionResponse"],l);const c=a(e,["inlineData"]);c!=null&&u(t,["inlineData"],Gw(c));const d=a(e,["text"]);d!=null&&u(t,["text"],d);const f=a(e,["thought"]);f!=null&&u(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&u(t,["thoughtSignature"],p);const m=a(e,["videoMetadata"]);return m!=null&&u(t,["videoMetadata"],m),t}function Ow(e){const t={},n=a(e,["handle"]);if(n!=null&&u(t,["handle"],n),a(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Yw(e){const t={},n=a(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(t,["functionDeclarations"],f)}if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(e,["googleSearchRetrieval"]);i!=null&&u(t,["googleSearchRetrieval"],i);const o=a(e,["googleMaps"]);o!=null&&u(t,["googleMaps"],qw(o));const s=a(e,["computerUse"]);s!=null&&u(t,["computerUse"],s);const l=a(e,["codeExecution"]);if(l!=null&&u(t,["codeExecution"],l),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=a(e,["googleSearch"]);c!=null&&u(t,["googleSearch"],zw(c));const d=a(e,["urlContext"]);return d!=null&&u(t,["urlContext"],d),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kw(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(s=>`${n}.${s}`);t.push(...o)}else t.push(n)}return t.join(",")}function Qw(e,t){let n=null;const i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(e.bidiGenerateContentSetup=s,n=s):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const s=Kw(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)s?e.fieldMask=s:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];o.length>0&&(c=o.map(f=>l.includes(f)?`generationConfig.${f}`:f));const d=[];s&&d.push(s),c.length>0&&d.push(...c),d.length>0?e.fieldMask=d.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class Xw extends on{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=Hw(this.apiClient,t);s=D("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=Qw(c,t.config);return o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zw(e,t){const n={},i=a(e,["name"]);return i!=null&&u(n,["_url","name"],i),n}function eC(e,t){const n={},i=a(e,["name"]);return i!=null&&u(n,["_url","name"],i),n}function tC(e,t,n){const i={};if(a(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=a(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&u(t,["displayName"],o),a(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=a(e,["epochCount"]);t!==void 0&&s!=null&&u(t,["tuningTask","hyperparameters","epochCount"],s);const l=a(e,["learningRateMultiplier"]);if(l!=null&&u(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),a(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=a(e,["batchSize"]);t!==void 0&&c!=null&&u(t,["tuningTask","hyperparameters","batchSize"],c);const d=a(e,["learningRate"]);if(t!==void 0&&d!=null&&u(t,["tuningTask","hyperparameters","learningRate"],d),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function nC(e,t,n){const i={};let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const g=a(e,["validationDataset"]);t!==void 0&&g!=null&&u(t,["supervisedTuningSpec"],zc(g))}else if(o==="PREFERENCE_TUNING"){const g=a(e,["validationDataset"]);t!==void 0&&g!=null&&u(t,["preferenceOptimizationSpec"],zc(g))}const s=a(e,["tunedModelDisplayName"]);t!==void 0&&s!=null&&u(t,["tunedModelDisplayName"],s);const l=a(e,["description"]);t!==void 0&&l!=null&&u(t,["description"],l);let c=a(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=a(e,["epochCount"]);t!==void 0&&g!=null&&u(t,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(c==="PREFERENCE_TUNING"){const g=a(e,["epochCount"]);t!==void 0&&g!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let d=a(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=a(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&u(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(d==="PREFERENCE_TUNING"){const g=a(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=a(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&u(t,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(f==="PREFERENCE_TUNING"){const g=a(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&u(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let p=a(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const g=a(e,["adapterSize"]);t!==void 0&&g!=null&&u(t,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(p==="PREFERENCE_TUNING"){const g=a(e,["adapterSize"]);t!==void 0&&g!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(a(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=a(e,["labels"]);t!==void 0&&m!=null&&u(t,["labels"],m);const h=a(e,["beta"]);return t!==void 0&&h!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","beta"],h),i}function iC(e,t){const n={},i=a(e,["baseModel"]);i!=null&&u(n,["baseModel"],i);const o=a(e,["preTunedModel"]);o!=null&&u(n,["preTunedModel"],o);const s=a(e,["trainingDataset"]);s!=null&&mC(s);const l=a(e,["config"]);return l!=null&&tC(l,n),n}function oC(e,t){const n={},i=a(e,["baseModel"]);i!=null&&u(n,["baseModel"],i);const o=a(e,["preTunedModel"]);o!=null&&u(n,["preTunedModel"],o);const s=a(e,["trainingDataset"]);s!=null&&hC(s,n,t);const l=a(e,["config"]);return l!=null&&nC(l,n,t),n}function sC(e,t){const n={},i=a(e,["name"]);return i!=null&&u(n,["_url","name"],i),n}function rC(e,t){const n={},i=a(e,["name"]);return i!=null&&u(n,["_url","name"],i),n}function lC(e,t,n){const i={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&u(t,["_query","pageSize"],o);const s=a(e,["pageToken"]);t!==void 0&&s!=null&&u(t,["_query","pageToken"],s);const l=a(e,["filter"]);return t!==void 0&&l!=null&&u(t,["_query","filter"],l),i}function aC(e,t,n){const i={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&u(t,["_query","pageSize"],o);const s=a(e,["pageToken"]);t!==void 0&&s!=null&&u(t,["_query","pageToken"],s);const l=a(e,["filter"]);return t!==void 0&&l!=null&&u(t,["_query","filter"],l),i}function uC(e,t){const n={},i=a(e,["config"]);return i!=null&&lC(i,n),n}function cC(e,t){const n={},i=a(e,["config"]);return i!=null&&aC(i,n),n}function dC(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const s=a(e,["tunedModels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Gp(c))),u(n,["tuningJobs"],l)}return n}function fC(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const s=a(e,["tuningJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>ll(c))),u(n,["tuningJobs"],l)}return n}function pC(e,t){const n={},i=a(e,["name"]);i!=null&&u(n,["model"],i);const o=a(e,["name"]);return o!=null&&u(n,["endpoint"],o),n}function mC(e,t){const n={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=a(e,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),u(n,["examples","examples"],o)}return n}function hC(e,t,n){const i={};let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=a(e,["gcsUri"]);t!==void 0&&l!=null&&u(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=a(e,["gcsUri"]);t!==void 0&&l!=null&&u(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let s=a(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=a(e,["vertexDatasetResource"]);t!==void 0&&l!=null&&u(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=a(e,["vertexDatasetResource"]);t!==void 0&&l!=null&&u(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(a(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Gp(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["name"]);o!=null&&u(n,["name"],o);const s=a(e,["state"]);s!=null&&u(n,["state"],xp(s));const l=a(e,["createTime"]);l!=null&&u(n,["createTime"],l);const c=a(e,["tuningTask","startTime"]);c!=null&&u(n,["startTime"],c);const d=a(e,["tuningTask","completeTime"]);d!=null&&u(n,["endTime"],d);const f=a(e,["updateTime"]);f!=null&&u(n,["updateTime"],f);const p=a(e,["description"]);p!=null&&u(n,["description"],p);const m=a(e,["baseModel"]);m!=null&&u(n,["baseModel"],m);const h=a(e,["_self"]);return h!=null&&u(n,["tunedModel"],pC(h)),n}function ll(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["name"]);o!=null&&u(n,["name"],o);const s=a(e,["state"]);s!=null&&u(n,["state"],xp(s));const l=a(e,["createTime"]);l!=null&&u(n,["createTime"],l);const c=a(e,["startTime"]);c!=null&&u(n,["startTime"],c);const d=a(e,["endTime"]);d!=null&&u(n,["endTime"],d);const f=a(e,["updateTime"]);f!=null&&u(n,["updateTime"],f);const p=a(e,["error"]);p!=null&&u(n,["error"],p);const m=a(e,["description"]);m!=null&&u(n,["description"],m);const h=a(e,["baseModel"]);h!=null&&u(n,["baseModel"],h);const g=a(e,["tunedModel"]);g!=null&&u(n,["tunedModel"],g);const C=a(e,["preTunedModel"]);C!=null&&u(n,["preTunedModel"],C);const S=a(e,["supervisedTuningSpec"]);S!=null&&u(n,["supervisedTuningSpec"],S);const N=a(e,["preferenceOptimizationSpec"]);N!=null&&u(n,["preferenceOptimizationSpec"],N);const v=a(e,["tuningDataStats"]);v!=null&&u(n,["tuningDataStats"],v);const y=a(e,["encryptionSpec"]);y!=null&&u(n,["encryptionSpec"],y);const x=a(e,["partnerModelTuningSpec"]);x!=null&&u(n,["partnerModelTuningSpec"],x);const w=a(e,["customBaseModel"]);w!=null&&u(n,["customBaseModel"],w);const T=a(e,["experiment"]);T!=null&&u(n,["experiment"],T);const E=a(e,["labels"]);E!=null&&u(n,["labels"],E);const _=a(e,["outputUri"]);_!=null&&u(n,["outputUri"],_);const k=a(e,["pipelineJob"]);k!=null&&u(n,["pipelineJob"],k);const P=a(e,["serviceAccount"]);P!=null&&u(n,["serviceAccount"],P);const M=a(e,["tunedModelDisplayName"]);M!=null&&u(n,["tunedModelDisplayName"],M);const B=a(e,["veoTuningSpec"]);return B!=null&&u(n,["veoTuningSpec"],B),n}function gC(e,t){const n={},i=a(e,["sdkHttpResponse"]);i!=null&&u(n,["sdkHttpResponse"],i);const o=a(e,["name"]);o!=null&&u(n,["name"],o);const s=a(e,["metadata"]);s!=null&&u(n,["metadata"],s);const l=a(e,["done"]);l!=null&&u(n,["done"],l);const c=a(e,["error"]);return c!=null&&u(n,["error"],c),n}function zc(e,t){const n={},i=a(e,["gcsUri"]);i!=null&&u(n,["validationDatasetUri"],i);const o=a(e,["vertexDatasetResource"]);return o!=null&&u(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yC extends on{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Bi(Zt.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),s=await this.tuneMldevInternal(o);let l="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?l=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(l=s.name.split("/operations/")[0]),{name:l,state:el.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=rC(t);return c=D("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>ll(p))}else{const f=sC(t);return c=D("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>Gp(p))}}async listInternal(t){var n,i,o,s;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=cC(t);return c=D("tuningJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=fC(p),h=new Ec;return Object.assign(h,m),h})}else{const f=uC(t);return c=D("tunedModels",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=dC(p),h=new Ec;return Object.assign(h,m),h})}}async cancel(t){var n,i,o,s;let l="",c={};if(this.apiClient.isVertexAI()){const d=eC(t);l=D("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=Zw(t);l=D("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(t){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI()){const c=oC(t,t);return s=D("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>ll(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=iC(t);return s=D("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),o.then(d=>gC(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vC{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const xC=1024*1024*8,wC=3,CC=1e3,SC=2,nr="x-goog-upload-status";async function TC(e,t,n){var i,o,s;let l=0,c=0,d=new tl(new Response),f="upload";for(l=e.size;c<l;){const m=Math.min(xC,l-c),h=e.slice(c,c+m);c+m>=l&&(f+=", finalize");let g=0,C=CC;for(;g<wC&&(d=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[nr]));)g++,await _C(C),C=C*SC;if(c+=m,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[nr])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const p=await(d==null?void 0:d.json());if(((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[nr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return p.file}async function EC(e){return{size:e.size,type:e.type}}function _C(e){return new Promise(t=>setTimeout(t,e))}class NC{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await TC(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await EC(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IC{create(t,n,i){return new AC(t,n,i)}}class AC{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $c="x-goog-api-key";class kC{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get($c)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append($c,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PC="gl-node/";class is{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=Kg(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion;const o=new kC(this.apiKey);this.apiClient=new gw({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:PC+"web",uploader:new NC,downloader:new vC}),this.models=new bw(this.apiClient),this.live=new kw(this.apiClient,o,new IC),this.batches=new hy(this.apiClient),this.chats=new Wy(this.models,this.apiClient),this.caches=new zy(this.apiClient),this.files=new iv(this.apiClient),this.operations=new Fw(this.apiClient),this.authTokens=new Xw(this.apiClient),this.tunings=new yC(this.apiClient)}}const Vp="pathology_module_official_images",jp="pathology_module_community_images",os=()=>{try{const e=localStorage.getItem(Vp);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to parse official images from localStorage:",e),[]}},Jc=e=>{try{localStorage.setItem(Vp,JSON.stringify(e))}catch(t){console.error("Failed to save official images to localStorage:",t)}},ss=()=>{try{const e=localStorage.getItem(jp);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to parse community images from localStorage:",e),[]}},ir=e=>{try{localStorage.setItem(jp,JSON.stringify(e))}catch(t){console.error("Failed to save community images to localStorage:",t)}},zn=async e=>{const t=os(),n=ss(),i=[...t,...n];if(i.length===0||!e)return null;const o=i.map(({id:s,title:l,description:c})=>({id:s,title:l,description:c}));try{const s=new is({apiKey:void 0}),l=`
      You are an expert pathologist's assistant. Your task is to select the most relevant histology image for a given clinical case description from a provided list of images.
      The context is: "${e}"
      
      Here is a list of available images in JSON format:
      ${JSON.stringify(o)}

      Based on the context, identify the single best image from the list that illustrates the key pathological findings described. The image title and description are your primary clues.
      Respond with a single JSON object containing the ID of the best matching image. The format should be: {"imageId": "the_best_image_id"}. If no image is a good match, respond with {"imageId": null}.
    `,c=await s.models.generateContent({model:"gemini-2.5-flash",contents:l,config:{responseMimeType:"application/json",responseSchema:{type:ae.OBJECT,properties:{imageId:{type:ae.STRING,nullable:!0}},required:["imageId"]}}}),d=JSON.parse(c.text.trim());return d.imageId&&i.find(p=>p.id===d.imageId)||null}catch(s){return console.error("AI Image Selector failed:",s),null}},Wc=[{category:"I. Infectious Granulomatous Diseases",subcategories:[{title:"A. Mycobacterial",diseases:[{name:"Mycobacterium tuberculosis",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," Caseating granulomas (amorphous, eosinophilic, necrotic centers), composed of epithelioid histiocytes and Langhans-type giant cells, surrounded by a cuff of lymphocytes."]}),links:[{url:"https://www.pathologyatlas.ro/tuberculous-lymphadenitis-granuloma.php",text:"Tuberculous Granuloma - Atlas of Pathology"}],imageUrl:"https://www.pathpedia.com/education/eatlas/histopathology/lymph_nodes/tuberculous_lymphadenitis/tuberculous-lymphadenitis-1.jpeg?Width=800"},{name:"Nontuberculous Mycobacteria (NTM), e.g., M. avium complex (MAC)",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," In immunocompromised patients, often ",r.jsx("em",{children:"poorly formed"}),' granulomas or just collections of foamy macrophages (histiocytes) packed with organisms, which stain with AFB. "Hot tub lung" is a form of HP.']}),links:[{url:"https://www.elsevier.es/es-revista-clinics-22-articulo-incidence-mycobacteria-in-pulmonary-granulomatous-S1807593224002412",text:"Incidence of mycobacteria in pulmonary granulomatous lesions"}],imageUrl:"https://www.researchgate.net/profile/Won-Jung-Koh/publication/320504743/figure/fig1/AS:614324225019914@1523477717582/Histopathologic-findings-of-pulmonary-disease-due-to-Mycobacterium-avium-complex-in-a.png"}]},{title:"B. Fungal",diseases:[{name:"Histoplasma capsulatum",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," Small, oval yeasts (2-5 μm) found ",r.jsx("em",{children:"within"})," the cytoplasm of macrophages. Best seen on GMS or PAS stains. Can be associated with caseating granulomas."]}),links:[{url:"https://journals.asm.org/doi/10.1128/msphere.00742-20",text:"Histoplasma Species Elicit Distinct Patterns of Pulmonary Inflammation"}],imageUrl:"https://upload.wikimedia.org/wikipedia/commons/8/87/Histoplasmosis_-_interstitial_-_very_high_mag.jpg"},{name:"Blastomyces dermatitidis",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"}),' Large (8-15 μm), round-to-oval yeasts with thick, "double-contoured" walls and characteristic ',r.jsx("strong",{children:"broad-based budding"}),"."]}),links:[{url:"https://www.ncbi.nlm.nih.gov/books/NBK441987/",text:"Blastomycosis - StatPearls (NCBI)"}],imageUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c4/Blastomycosis_PASD.jpg/1024px-Blastomycosis_PASD.jpg"},{name:"Coccidioides immitis/posadasii",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," Very large (30-100 μm), thick-walled ",r.jsx("strong",{children:"spherules"})," which contain smaller ",r.jsx("strong",{children:"endospores"}),". Ruptured spherules elicit a mixed inflammatory (neutrophilic and granulomatous) response."]}),links:[{url:"https://meridian.allenpress.com/aplm/article/130/1/97/459659/Unusual-Forms-of-Immature-Sporulating-Coccidioides",text:"Unusual Forms of Immature Sporulating Coccidioides"}],imageUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Coccidioidomycosis_spherule.jpg/1024px-Coccidioidomycosis_spherule.jpg"},{name:"Cryptococcus neoformans/gattii",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"}),' Yeasts of variable size (5-15 μm) with prominent polysaccharide capsules that are clear ("halo") on H&E and stain brightly with ',r.jsx("strong",{children:"Mucicarmine"}),'. Often causes a "soap bubble" or gelatinous tissue reaction with minimal inflammation in immunocompromised hosts.']}),links:[{url:"https://commons.wikimedia.org/wiki/File:Cryptococcosis_of_lung_in_patient_with_AIDS._Mucicarmine_stain_962_lores.jpg",text:"Cryptococcosis of lung - Mucicarmine stain (Wikimedia Commons)"}],imageUrl:"https://upload.wikimedia.org/wikipedia/commons/8/8b/Cryptococcosis_of_lung_in_patient_with_AIDS._Mucicarmine_stain_962_lores.jpg"},{name:"Aspergillus spp.",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," In Allergic Bronchopulmonary Aspergillosis (ABPA), features include mucoid impaction of bronchi, abundant eosinophils, Charcot-Leyden crystals, and fungal hyphae (thin, septate, acute-angle branching)."]}),links:[{url:"https://www.imrpress.com/journal/FBL/8/5/10.2741/945",text:"Pathology of allergic bronchopulmonary aspergillosis"}],imageUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Aspergillus_GMS.jpg/1024px-Aspergillus_GMS.jpg"},{name:"Pneumocystis jirovecii",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"}),' Classically a foamy, eosinophilic ("cotton candy") intra-alveolar exudate. The granulomatous form (rare) shows poorly formed granulomas, often with a "fluffy" eosinophilic necrotic center that reveals the organisms on GMS stain.']}),links:[{url:"https://pmc.ncbi.nlm.nih.gov/articles/PMC4951449/",text:"Unmasking Granulomatous Pneumocystis jirovecii Pneumonia"}],imageUrl:"https://www.researchgate.net/profile/Aurelie-Guinard/publication/305380582/figure/fig1/AS:385803207868417@1468994065221/Histological-findings-of-granulomatous-Pneumocystis-jirovecii-pneumonia-A-Low-power.png"}]},{title:"C. Bacterial (Non-mycobacterial)",diseases:[{name:"Coxiella burnetii (Q Fever)",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," The classic (though not pathognomonic) finding is a ",r.jsx("strong",{children:'"doughnut" granuloma'})," or fibrin-ring granuloma: a central lipid vacuole surrounded by a ring of fibrin, epithelioid histiocytes, and other inflammatory cells."]}),links:[{url:"https://www.researchgate.net/publication/231178178_Q_fever_Bone_marrow_characteristic_granuloma",text:"Q fever: Bone marrow characteristic granuloma (ResearchGate)"}],imageUrl:"https://www.researchgate.net/publication/285324529/figure/fig1/AS:668636730249226@1536426966817/Fibrin-ring-granuloma-doughnut-lesion-in-the-bone-marrow-of-a-patient-with-Q-fever.png"},{name:"Nocardia spp.",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," ",r.jsx("strong",{children:"Suppurative granulomas"}),", which are essentially abscesses (collections of neutrophils) surrounded by granulomatous inflammation. The organism is a filamentous, branching, weakly gram-positive rod, best seen on a ",r.jsx("strong",{children:"Modified Acid-Fast"})," stain."]}),links:[{url:"https://sesc.cat/en/granulomatous-suppurative-pneumonia-due-to-nocardia-in-a-calf/",text:"Granulomatous-suppurative pneumonia due to Nocardia"}],imageUrl:"https://sesc.cat/wp-content/uploads/2014/12/SESC-091-14-3.jpg"}]},{title:"D. Parasitic",diseases:[{name:"Dirofilaria immitis",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"}),` A large, round, necrotic granuloma ("coin lesion") with a central, often degenerated, nematode. The organism's internal structures (e.g., thick cuticle) can sometimes be identified.`]}),links:[{url:"https://www.researchgate.net/figure/Histopathological-findings-of-the-pulmonary-nodule-Dirofilaria-immitis-is-present-in-the_fig4_299072502",text:"Histopathological findings of the pulmonary nodule (ResearchGate)"}],imageUrl:"https://www.researchgate.net/publication/299072502/figure/fig4/AS:340989013540869@1458309531853/Histopathological-findings-of-the-pulmonary-nodule-Dirofilaria-immitis-is-present-in-the.png"}]}]},{category:"II. Non-Infectious Granulomatous Diseases",subcategories:[{title:"A. Systemic / Idiopathic",diseases:[{name:"Sarcoidosis",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," The classic non-caseating granuloma. They are well-formed, discrete, and ",r.jsx("strong",{children:'"naked"'})," (i.e., with very little surrounding lymphocytic inflammation). Asteroid bodies and Schaumann bodies can be seen but are not specific."]}),links:[{url:"https://dermnetnz.org/topics/sarcoidosis-pathology",text:"Sarcoidosis pathology - DermNet"}],imageUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Sarcoid_lung_interstitium.jpg/1024px-Sarcoid_lung_interstitium.jpg"},{name:"Crohn's Disease",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," Rare in the lung, but histologically mimics sarcoidosis. Features non-caseating granulomas that may be airway-centered or random. Diagnosis requires a strong clinical history of GI Crohn's disease."]}),links:[{url:"https://pmc.ncbi.nlm.nih.gov/articles/PMC8261598/",text:"Crohn's disease with pulmonary granuloma in a child (PMC)"}],imageUrl:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8261598/bin/CRJ-2021-5573489-g002.jpg"}]},{title:"B. Inhalational / Hypersensitivity",diseases:[{name:"Hypersensitivity Pneumonitis (HP)",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," The classic triad is 1) cellular bronchiolitis, 2) chronic interstitial inflammation (lymphoplasmacytic), and 3) ",r.jsx("strong",{children:"poorly formed, non-necrotizing granulomas"})," and/or isolated multinucleated giant cells, often located ",r.jsx("em",{children:"peribronchiolarly"}),"."]}),links:[{url:"https://meridian.allenpress.com/aplm/article/132/2/199/460400/Hypersensitivity-Pneumonitis-Histopathology",text:"Hypersensitivity Pneumonitis: Histopathology - Archives of Pathology"}],imageUrl:"http://www.webpathology.com/slides-100/slide-2-hp-med.jpg"},{name:"Berylliosis (Chronic Beryllium Disease)",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," Histologically ",r.jsx("em",{children:"indistinguishable"})," from sarcoidosis. Shows well-formed, non-caseating granulomas. The distinction is clinical (history of exposure) and immunological (positive BeLPT)."]}),links:[{url:"https://www.frontiersin.org/journals/immunology/articles/10.3389/fimmu.2020.00474/full",text:"Adaptive Immunity in Pulmonary Sarcoidosis and Chronic Beryllium Disease"}],imageUrl:"https://www.cdc.gov/niosh/topics/beryllium/images/histo.jpg"},{name:"Silicosis",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," Features classic ",r.jsx("strong",{children:"silicotic nodules"}),", which are dense, whorled, hyalinized (collagenous) nodules. Under ",r.jsx("strong",{children:"polarized light"}),", they contain numerous, small, brightly birefringent silica crystals."]}),links:[{url:"https://webpath.med.utah.edu/LUNGHTML/LUNG086.html",text:"Lung, silicosis, polarized light microscopic - WebPath"},{url:"https://www.youtube.com/watch?v=PUqOTkKWZR4",text:"Video: Silicosis Histopathology Overview (YouTube)"}],imageUrl:"https://webpath.med.utah.edu/jpeg5/LUNG086.jpeg"},{name:"Talc Granulomatosis (IV drug use)",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," Features foreign-body giant cells containing plate-like, brightly birefringent ",r.jsx("strong",{children:"talc crystals"})," under ",r.jsx("strong",{children:"polarized light"}),". The granulomas are characteristically perivascular or intravascular."]}),links:[{url:"https://pmc.ncbi.nlm.nih.gov/articles/PMC1860321/",text:"Talc induced pulmonary granulomatosis - (PMC)"}],imageUrl:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC1860321/bin/1746-1596-1-11-1-c.jpg"}]},{title:"C. ANCA-Associated Vasculitides",diseases:[{name:"Granulomatosis with Polyangiitis (GPA)",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," A triad of vasculitis, (often neutrophilic), ",r.jsx("strong",{children:'"geographic" necrosis'})," (large, map-like, basophilic necrosis), and granulomatous inflammation with palisading histiocytes and giant cells."]}),links:[{url:"https://pmc.ncbi.nlm.nih.gov/articles/PMC11138764/",text:"Pulmonary pathology in vasculitis - (PMC)"}],imageUrl:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC11138764/bin/yjbm_77_2_79_F3.jpg"},{name:"Eosinophilic Granulomatosis with Polyangiitis (EGPA)",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," Necrotizing, ",r.jsx("strong",{children:"eosinophil-rich"})," granulomas (granulomas with central eosinophilic necrosis surrounded by histiocytes) and an eosinophilic vasculitis."]}),links:[{url:"https://www.ncbi.nlm.nih.gov/books/NBK537099/",text:"Eosinophilic Granulomatosis With Polyangiitis - (NCBI)"}],imageUrl:"https://www.pathpresenter.net/casereportsv4/fetch/3b74e64f0b2f153a8174780598710329.jpg?type=1&content_type=1"}]},{title:"D. Drug-Induced",diseases:[{name:"Checkpoint Inhibitors",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," Can induce a ",r.jsx("strong",{children:"sarcoid-like reaction"})," with well-formed, non-caseating granulomas, histologically identical to sarcoidosis."]}),links:[{url:"https://www.actasdermo.org/es-translated-article-sarcoid-like-reactions-immune-articulo-S0001731023008645",text:"Sarcoid-like Reactions to Immune Checkpoint Inhibitors"}],imageUrl:"https://www.jto.org/cms/10.1016/j.jtho.2016.11.2223/attachment/2a2a7f52-5011-4099-b1fd-e09fa4968453/gr1.jpg"},{name:"Methotrexate",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," Can cause a hypersensitivity-like reaction. Findings can include non-caseating granulomas (similar to HP), organizing pneumonia, and interstitial inflammation with eosinophils."]}),links:[{url:"https://publications.ersnet.org/content/erj/15/2/373",text:"Methotrexate pneumonitis: review of the literature and histopathological findings"}],imageUrl:"https://erj.ersjournals.com/content/erj/15/2/373/F1.large.jpg"}]},{title:"E. Lymphoproliferative Disorders",diseases:[{name:"Lymphomatoid Granulomatosis (LyG)",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," An ",r.jsx("strong",{children:"angiocentric"})," and ",r.jsx("strong",{children:"angiodestructive"}),` infiltrate of atypical lymphoid cells (EBV+ B-cells) mixed with reactive T-cells. The "granulomatosis" part is a misnomer; it's more of an inflammatory, necrotic process that can mimic granulomas.`]}),links:[{url:"https://ajronline.org/doi/10.2214/ajr.175.5.1751335",text:"Lymphomatoid Granulomatosis Radiologic Features and Pathologic Correlations"}],imageUrl:"https://ars.els-cdn.com/content/image/3-s2.0-B9780323377135000219-f021-006-9780323377135.jpg"},{name:"Granulomatous-Lymphocytic Interstitial Lung Disease (GLILD)",features:r.jsxs(r.Fragment,{children:[r.jsx("strong",{children:"Features:"})," A complication of CVID. Features a combination of follicular bronchiolitis (lymphoid follicles with germinal centers along airways) and non-caseating, sarcoid-like granulomas."]}),links:[{url:"https://pmc.ncbi.nlm.nih.gov/articles/PMC4554947/",text:"Granulomatous and Lymphocytic Interstitial Lung Disease (GLILD) - (PMC)"}],imageUrl:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4554947/bin/f1-0060417.jpg"}]}]}],RC=({imageUrl:e,imageName:t,onClose:n})=>(I.useEffect(()=>{const i=o=>{o.key==="Escape"&&n()};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[n]),r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/75 animate-fade-in",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"image-modal-title",children:r.jsxs("div",{className:"relative p-2 bg-white rounded-lg shadow-xl max-w-4xl max-h-[90vh] w-auto",onClick:i=>i.stopPropagation(),children:[r.jsx("img",{src:e,alt:`Histology of ${t}`,className:"object-contain max-w-full max-h-[85vh] rounded"}),r.jsxs("h2",{id:"image-modal-title",className:"sr-only",children:["Histology image of ",t]}),r.jsx("button",{onClick:n,className:"absolute -top-4 -right-4 bg-white rounded-full p-1 shadow-lg text-slate-600 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-primary-500 transition-colors","aria-label":"Close image viewer",children:r.jsx(nn,{className:"h-9 w-9"})})]})})),MC=()=>{const[e,t]=I.useState([Wc[0].category]),[n,i]=I.useState(null),[o,s]=I.useState({}),[l,c]=I.useState(null),d=p=>{t(m=>m.includes(p)?m.filter(h=>h!==p):[...m,p])},f=async(p,m)=>{c(p);const h=`${p}: ${JSON.stringify(m)}`,g=await zn(h);s(C=>({...C,[p]:g})),c(null)};return r.jsxs("div",{className:"animate-fade-in",children:[r.jsx(Ye,{title:"Histology Link-Out Atlas",subtitle:"A curated collection of high-yield examples for differentiating granulomatous diseases."}),r.jsx("div",{className:"space-y-6",children:Wc.map(({category:p,subcategories:m})=>{const h=e.includes(p);return r.jsxs("div",{className:"border border-slate-200/80 bg-white rounded-xl shadow-sm",children:[r.jsxs("button",{onClick:()=>d(p),className:"w-full text-left p-4 md:p-5 flex justify-between items-center focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 rounded-lg","aria-expanded":h,children:[r.jsx("h2",{className:"text-xl font-semibold font-serif text-slate-800",children:p}),r.jsx("span",{className:`transform transition-transform duration-200 ${h?"rotate-180":""}`,children:r.jsx("svg",{className:"h-6 w-6 text-slate-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),h&&r.jsx("div",{className:"p-4 md:p-5 border-t border-slate-200/80 space-y-8",children:m.map(({title:g,diseases:C})=>r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-4",children:g}),r.jsx("div",{className:"space-y-4",children:C.map(S=>{var x,w;const N=((x=o[S.name])==null?void 0:x.src)??S.imageUrl,v=((w=o[S.name])==null?void 0:w.title)??`Histology of ${S.name}`,y=!!o[S.name];return r.jsx(F,{className:"!mb-0 !p-5 bg-slate-50/50",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-5",children:[N&&r.jsxs("div",{className:"flex-shrink-0 text-center w-32",children:[r.jsxs("button",{onClick:()=>i({url:N,name:S.name}),className:"group relative w-32 h-32 rounded-md overflow-hidden border-2 border-slate-200 hover:border-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-all duration-200","aria-label":`View histology image for ${S.name}`,children:[r.jsx("img",{src:N,alt:v,className:"w-full h-full object-cover bg-slate-100"}),r.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 10h.01"})})}),y&&r.jsx("div",{title:"This image was selected by AI from the gallery",className:"absolute top-1 right-1 bg-primary-500 p-1 rounded-full text-white shadow",children:r.jsx(bn,{className:"h-3 w-3"})})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1.5",children:"Click to enlarge"})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"font-semibold text-md text-primary-800 mb-2",children:S.name}),r.jsx("p",{className:"text-sm text-slate-600 leading-relaxed mb-4",children:S.features}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:[r.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:S.links.map(T=>r.jsxs("a",{href:T.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium text-primary-600 bg-primary-100 hover:bg-primary-200 hover:text-primary-700 px-3 py-1.5 rounded-md transition-colors inline-flex items-center",children:[T.text,r.jsx("svg",{className:"w-4 h-4 ml-1.5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-4.5 0V6.375c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125-1.125h-4.5A1.125 1.125 0 0110.5 10.5z"})})]},T.url))}),r.jsxs("button",{onClick:()=>f(S.name,S.features),disabled:l===S.name,className:"text-sm font-medium text-slate-600 bg-slate-200 hover:bg-slate-300 hover:text-slate-700 px-3 py-1.5 rounded-md transition-colors inline-flex items-center disabled:opacity-50",children:[r.jsx(bn,{className:"h-4 w-4 mr-1.5"}),l===S.name?"Searching...":"Find Image"]})]})]})]})},S.name)})})]},g))})]},p)})}),n&&r.jsx(RC,{imageUrl:n.url,imageName:n.name,onClose:()=>i(null)})]})},et=({dziUrl:e,staticImageUrl:t,altText:n})=>{const i=I.useRef(null);return I.useEffect(()=>{let o=null;return i.current&&e&&(o=Wp({element:i.current,prefixUrl:"https://cdnjs.cloudflare.com/ajax/libs/openseadragon/4.1.1/images/",tileSources:e,animationTime:.5,blendTime:.1,constrainDuringPan:!0,maxZoomPixelRatio:2,minZoomLevel:1,visibilityRatio:1,zoomPerScroll:2,showNavigator:!0,navigatorPosition:"BOTTOM_RIGHT",navigatorHeight:120,navigatorWidth:150})),()=>{o&&o.destroy()}},[e]),e?r.jsx("div",{ref:i,className:"w-full h-64 sm:h-96 bg-black rounded-lg shadow-md openseadragon-container","aria-label":n||"Interactive whole slide image viewer"}):t?r.jsx("div",{className:"w-full h-64 sm:h-96 bg-black rounded-lg shadow-md flex items-center justify-center overflow-hidden openseadragon-container",children:r.jsx("img",{src:t,alt:n||"Pathology slide image",className:"max-w-full max-h-full object-contain rounded-lg"})}):r.jsx("div",{className:"w-full h-64 sm:h-96 bg-black rounded-lg shadow-md flex items-center justify-center openseadragon-container","aria-label":"Image viewer placeholder",children:r.jsx("p",{className:"text-slate-300",children:"No image available"})})},LC=({text:e="Loading..."})=>r.jsxs("div",{className:"flex items-center justify-center h-full",children:[r.jsxs("svg",{className:"animate-spin h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"ml-3 text-slate-600",children:e})]}),DC=()=>{const[e,t]=I.useState(!1),[n,i]=I.useState(null),[o,s]=I.useState(!0),l={clinical:"You receive a lung wedge biopsy from a 55-year-old man with a 6-month history of progressive shortness of breath and a dry cough. He is a non-smoker but has kept pigeons in his attic for over 20 years. A chest CT shows diffuse, bilateral ground-glass opacities with centrilobular nodules.",histology:"The biopsy shows a cellular interstitial pneumonia. There are numerous small, poorly-formed granulomas centered on the bronchioles (bronchiolocentric). The granulomas are composed of loose collections of epithelioid histiocytes and multinucleated giant cells. There is no necrosis. The surrounding interstitium is expanded by a dense lymphoplasmacytic infiltrate, and scattered eosinophils are present. You also note foci of organizing pneumonia."};return I.useEffect(()=>{(async()=>{s(!0);const d=`The case is about Hypersensitivity Pneumonitis. ${l.clinical} ${l.histology}`,f=await zn(d);i(f),s(!1)})()},[]),r.jsxs("div",{className:"animate-fade-in",children:[r.jsxs("header",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:"Interactive Case Study"}),r.jsx("p",{className:"mt-2 text-md text-slate-600",children:"Applying knowledge to a clinical scenario."})]}),r.jsxs(F,{children:[r.jsx("h2",{className:"text-2xl font-semibold text-slate-800 mb-4",children:`Case: "The Bird Fancier's Cough"`}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-2",children:"Part 1: Clinical & Radiologic Data"}),r.jsx("p",{className:"text-slate-600",children:l.clinical})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-2",children:"Part 2: Histologic Findings"}),r.jsxs("div",{className:"space-y-3",children:[o?r.jsx("div",{className:"w-full h-64 sm:h-96 bg-slate-100 rounded-lg shadow-md flex items-center justify-center",children:r.jsx(LC,{text:"Finding relevant image..."})}):r.jsx(et,{staticImageUrl:n==null?void 0:n.src,altText:(n==null?void 0:n.title)||"AI-selected image for the case study."}),n&&r.jsxs("p",{className:"text-center text-sm text-slate-600 font-semibold italic",children:['AI-selected image from gallery: "',n.title,'"']}),!o&&!n&&r.jsx("div",{className:"bg-sky-50 p-4 rounded-md border border-sky-200 text-sm text-sky-800",children:r.jsx("p",{children:"No relevant image was found in the galleries for this case. You can upload one in the Image Galleries section!"})}),r.jsx("p",{className:"text-slate-600 flex-1 pt-2",children:l.histology})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-2",children:"Part 3: The Diagnostic Task"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"Given the integrated clinical, radiologic, and histologic findings, construct a ranked differential diagnosis. Justify your top two choices."}),r.jsx("button",{onClick:()=>t(!e),className:"bg-primary-600 text-white font-medium py-2 px-5 rounded-lg hover:bg-primary-700 transition-colors shadow-sm",children:e?"Hide Expert Answer":"Reveal Expert Answer"}),e&&r.jsxs("div",{className:"mt-4 p-4 bg-slate-50 border border-slate-200 rounded-lg animate-fade-in",children:[r.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Expert's Answer:"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-green-700",children:"1. Hypersensitivity Pneumonitis (Subacute/Chronic)"}),r.jsxs("p",{className:"text-slate-600 text-sm",children:[r.jsx("strong",{children:"Justification:"})," This is the leading diagnosis. The clinical history (pigeon keeping), radiology (ground-glass, centrilobular nodules), and histology (cellular interstitial pneumonia, bronchiolocentric distribution, poorly-formed non-necrotizing granulomas) align perfectly."]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-orange-700",children:"2. Sarcoidosis"}),r.jsxs("p",{className:"text-slate-600 text-sm",children:[r.jsx("strong",{children:"Justification:"})," This is on the differential but less likely. In sarcoidosis, granulomas are typically well-formed and tight with a lymphangitic distribution, which is discordant with this case."]})]})]})]})]})]})]})]})},Hp="pathology_module_cases",Bp="pathology_module_case_studies",UC=()=>{try{const e=localStorage.getItem(Hp);return e?JSON.parse(e):{version:"1.0.0",generated:new Date().toISOString(),cases:{}}}catch(e){return console.error("Failed to parse cases from localStorage:",e),{version:"1.0.0",generated:new Date().toISOString(),cases:{}}}},bC=e=>{try{e.generated=new Date().toISOString(),localStorage.setItem(Hp,JSON.stringify(e))}catch(t){console.error("Failed to save cases to localStorage:",t)}},qp=()=>{try{const e=localStorage.getItem(Bp);return e?JSON.parse(e):{version:"1.0.0",generated:new Date().toISOString(),caseStudies:{}}}catch(e){return console.error("Failed to parse case studies from localStorage:",e),{version:"1.0.0",generated:new Date().toISOString(),caseStudies:{}}}},FC=e=>{try{e.generated=new Date().toISOString(),localStorage.setItem(Bp,JSON.stringify(e))}catch(t){console.error("Failed to save case studies to localStorage:",t)}},GC=({caseStudy:e,onBack:t})=>r.jsxs("div",{className:"animate-fade-in",children:[r.jsx("button",{onClick:t,className:"mb-6 text-sm font-semibold text-primary-600 hover:text-primary-800 transition-colors",children:"← Back to Case Library"}),r.jsxs(F,{children:[r.jsx("h2",{className:"text-3xl font-bold font-serif text-slate-800",children:e.title}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 mb-6",children:[e.tags.map(n=>r.jsx("span",{className:"bg-slate-100 text-slate-700 text-xs font-medium px-2.5 py-1 rounded-full",children:n},n)),r.jsx("span",{className:"capitalize bg-primary-100 text-primary-800 text-xs font-medium px-2.5 py-1 rounded-full",children:e.difficulty})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg text-slate-800 mb-2 border-b pb-2",children:"Description"}),r.jsx("p",{className:"text-slate-600",children:e.description})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg text-slate-800 mb-2 border-b pb-2",children:"Case Context"}),r.jsx("p",{className:"text-slate-600",children:e.caseContext})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg text-slate-800 mb-2 border-b pb-2",children:"Learning Objectives"}),r.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:e.learningObjectives.map((n,i)=>r.jsx("li",{children:n},i))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg text-slate-800 mb-2 border-b pb-2",children:"Discussion"}),r.jsx("p",{className:"text-slate-600",children:e.discussion})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-lg text-slate-800 mb-2 text-center",children:"Associated Images"}),e.images.length>0?e.images.map(n=>r.jsxs("div",{children:[r.jsx(et,{staticImageUrl:n.path,altText:n.caption}),r.jsx("p",{className:"text-center text-sm text-slate-600 mt-2 font-semibold italic",children:n.caption})]},n.imageId)):r.jsx("p",{className:"text-center text-slate-500",children:"No images associated with this case."})]})]})]})]}),VC=({cases:e,onSelectCase:t})=>r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(n=>r.jsxs(F,{interactive:!0,className:"!mb-0 h-full flex flex-col",onClick:()=>t(n),children:[r.jsxs("div",{className:"flex-grow",children:[r.jsx("h3",{className:"text-lg font-semibold font-serif text-slate-800 mb-2",children:n.title}),r.jsx("p",{className:"text-sm text-slate-500 mb-4",children:n.description})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-auto pt-4 border-t border-slate-100",children:[n.tags.slice(0,3).map(i=>r.jsx("span",{className:"bg-slate-100 text-slate-700 text-xs font-medium px-2 py-0.5 rounded-full",children:i},i)),r.jsx("span",{className:"capitalize bg-primary-100 text-primary-800 text-xs font-medium px-2 py-0.5 rounded-full",children:n.difficulty})]})]},n.caseId))}),jC=({user:e})=>{const[t,n]=I.useState([]),[i,o]=I.useState(null);return I.useEffect(()=>{const s=qp();n(Object.values(s.caseStudies))},[]),i?r.jsx(GC,{caseStudy:i,onBack:()=>o(null)}):r.jsxs("div",{className:"animate-fade-in",children:[r.jsx(Ye,{title:"Case Study Library",subtitle:"Browse a collection of AI-generated and organized case studies.",icon:r.jsx(la,{className:"h-10 w-10"})}),t.length===0?r.jsx(F,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"The Library is Empty"}),r.jsx("p",{className:"text-slate-500 mt-2",children:e.isAdmin?"Go to the Admin View to generate case studies from the image galleries.":"No case studies have been generated yet. Please check back later."})]})}):r.jsx(VC,{cases:t,onSelectCase:o})]})},zp="pathology_module_user_data",$p=()=>{const e=localStorage.getItem(zp);return e?JSON.parse(e):{}},HC=e=>{localStorage.setItem(zp,JSON.stringify(e))},Fn=(e,t,n,i)=>{if(e==="admin")return;const o=$p(),s=o[e]||{},l=t.replace(/\s+/g,"");t===U.AI_CASE_GENERATOR?(s.AICaseGenerator||(s.AICaseGenerator=[]),s.AICaseGenerator.push(i)):t===U.EVALUATION?s.Evaluation=i:(s[l]||(s[l]={}),s[l][n]=i),o[e]=s,HC(o)},BC=()=>$p(),qC=({user:e})=>{const[t,n]=I.useState(null),[i,o]=I.useState(null),s=m=>{t||(n(m),Fn(e.username,U.VISUAL_CHALLENGE,"challenge1",{question:"Which slide shows the 'tightly-formed, well-circumscribed' granuloma typical of Sarcoidosis?",selectedAnswer:`Slide ${m}`,isCorrect:m==="B",timestamp:Date.now()}))},l=m=>{i||(o(m),Fn(e.username,U.VISUAL_CHALLENGE,"challenge2",{question:"Which slide shows the 'lymphangitic distribution' typical of Sarcoidosis?",selectedAnswer:`Slide ${m}`,isCorrect:m==="B",timestamp:Date.now()}))},c="https://openslide.cs.cmu.edu/download/openslide-testdata/Aperio/CMU-1.svs.dzi",d="https://openseadragon.github.io/example-images/aperio/aperio.dzi",f="https://openslide.cs.cmu.edu/download/openslide-testdata/Aperio/CMU-1.svs.dzi",p="https://openseadragon.github.io/example-images/aperio/aperio.dzi";return r.jsxs("div",{className:"animate-fade-in",children:[r.jsx(Ye,{title:"Visual Discrimination Challenge",subtitle:"Sharpening your eye for Sarcoidosis vs. Hypersensitivity Pneumonitis."}),r.jsxs(F,{children:[r.jsx("p",{className:"text-slate-600 mb-8 text-center max-w-2xl mx-auto",children:"This activity forces a direct, side-by-side comparison of key visual features. Pan and zoom on each digital slide to find the key features, then make your choice."}),r.jsxs("div",{className:"space-y-12",children:[r.jsxs("div",{className:"pb-8 border-b border-slate-200",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h3",{className:"font-semibold font-serif text-xl text-slate-800",children:"Challenge 1: Granuloma Quality"}),r.jsxs("p",{className:"text-slate-500 mt-1",children:["Which slide shows the ",r.jsx("strong",{children:"'tightly-formed, well-circumscribed'"})," granuloma typical of Sarcoidosis?"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-center mb-2 text-slate-700",children:"Slide A"}),r.jsx(et,{dziUrl:c})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-center mb-2 text-slate-700",children:"Slide B"}),r.jsx(et,{dziUrl:d})]})]}),r.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-center gap-4",children:[r.jsx("button",{onClick:()=>s("A"),disabled:!!t,className:"px-6 py-2 bg-white border border-slate-300 rounded-lg font-semibold text-slate-700 hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Select Slide A"}),r.jsx("button",{onClick:()=>s("B"),disabled:!!t,className:"px-6 py-2 bg-white border border-slate-300 rounded-lg font-semibold text-slate-700 hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Select Slide B"})]}),t&&r.jsxs("div",{className:"mt-6 max-w-xl mx-auto",children:[t==="A"&&r.jsx(ie,{type:"error",title:"Slide A (Incorrect)",children:"This slide represents a 'poorly-formed' granuloma typical of HP. Notice how the cells are loosely aggregated and blend into the surrounding inflammation."}),t==="B"&&r.jsx(ie,{type:"success",title:"Slide B (Correct)",children:"Notice the sharp borders and how the epithelioid histiocytes are tightly packed together. This is a classic 'sarcoidal' granuloma."})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h3",{className:"font-semibold font-serif text-xl text-slate-800",children:"Challenge 2: Architectural Distribution"}),r.jsxs("p",{className:"text-slate-500 mt-1",children:["Which slide shows the ",r.jsx("strong",{children:"'lymphangitic distribution'"})," typical of Sarcoidosis?"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-center mb-2 text-slate-700",children:"Slide A"}),r.jsx(et,{dziUrl:f})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-center mb-2 text-slate-700",children:"Slide B"}),r.jsx(et,{dziUrl:p})]})]}),r.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-center gap-4",children:[r.jsx("button",{onClick:()=>l("A"),disabled:!!i,className:"px-6 py-2 bg-white border border-slate-300 rounded-lg font-semibold text-slate-700 hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Select Slide A"}),r.jsx("button",{onClick:()=>l("B"),disabled:!!i,className:"px-6 py-2 bg-white border border-slate-300 rounded-lg font-semibold text-slate-700 hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Select Slide B"})]}),i&&r.jsxs("div",{className:"mt-6 max-w-xl mx-auto",children:[i==="A"&&r.jsx(ie,{type:"error",title:"Slide A (Incorrect)",children:"This represents a 'bronchiolocentric' pattern, a key feature of HP. The inflammation is centered on the small airways."}),i==="B"&&r.jsx(ie,{type:"success",title:"Slide B (Correct)",children:"This represents a lymphangitic distribution. The granulomas are following the lung's lymphatic drainage routes along the bronchovascular bundles and septa."})]})]})]})]}),r.jsxs(F,{children:[r.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-4 text-center",children:"High-Yield Summary"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm text-left text-slate-500",children:[r.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-100",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold rounded-l-lg",children:"Feature"}),r.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:"Sarcoidosis"}),r.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold rounded-r-lg",children:"Hypersensitivity Pneumonitis"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-200",children:[r.jsxs("tr",{className:"bg-white",children:[r.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Quality"}),r.jsx("td",{className:"px-6 py-4",children:'Tight, Well-Formed, "Naked"'}),r.jsx("td",{className:"px-6 py-4",children:"Loose, Poorly-Formed, Cellular"})]}),r.jsxs("tr",{className:"bg-white",children:[r.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Location"}),r.jsx("td",{className:"px-6 py-4",children:"Lymphangitic (along bundles)"}),r.jsx("td",{className:"px-6 py-4",children:"Bronchiolocentric (around airways)"})]})]})]})})]})]})},po={root:{id:"root",phase:1,type:"undetermined",title:"Granuloma Identification & Initial Assessment",description:"Granulomas have been identified on histopathology. Begin with the critical distinction between infectious and non-infectious causes.",options:[{text:"Suspect Infectious Cause",target:"infectious-workup",icon:r.jsx(uo,{className:"h-5 w-5"})},{text:"Suspect Non-Infectious Cause",target:"non-infectious-workup",icon:r.jsx(Tu,{className:"h-5 w-5"})},{text:"Undetermined - Proceed with Comprehensive Workup",target:"comprehensive-workup",icon:r.jsx(Di,{className:"h-5 w-5"})}],recommendations:r.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[r.jsx("li",{children:"Always prioritize exclusion of infectious causes before considering non-infectious etiologies."}),r.jsx("li",{children:"Correlate with clinical presentation: B-symptoms (fever, night sweats, weight loss) suggest infection."}),r.jsx("li",{children:"Review radiologic findings: Tree-in-bud pattern suggests infection; perilymphatic nodules suggest sarcoidosis."})]})},"infectious-workup":{id:"infectious-workup",phase:2,type:"infectious",title:"Infectious Workup",description:"When infection is suspected, perform a systematic evaluation for mycobacterial and fungal organisms using special stains and cultures.",options:[{text:"Mycobacterial Evaluation",target:"mycobacterial-workup",icon:r.jsx(uo,{className:"h-5 w-5"})},{text:"Fungal Evaluation",target:"fungal-workup",icon:r.jsx(co,{className:"h-5 w-5"})},{text:"Other Infectious Agents",target:"other-infectious",icon:r.jsx(jg,{className:"h-5 w-5"})}],recommendations:r.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[r.jsx("li",{children:"Send fresh tissue for routine microbiology (culture & PCR) and histopathology."}),r.jsx("li",{children:"Necrotizing granulomas are most commonly infectious (MTB, NTM, fungi)."}),r.jsx("li",{children:"Consider patient's geographic location and travel history for endemic fungi."})]})},"mycobacterial-workup":{id:"mycobacterial-workup",phase:3,type:"infectious",title:"Mycobacterial Evaluation",description:"Evaluate for Mycobacterium tuberculosis (MTB) and non-tuberculous mycobacteria (NTM) using appropriate stains and molecular tests.",options:[{text:"M. tuberculosis Complex",target:"mtb-workup",icon:r.jsx(uo,{className:"h-5 w-5"})},{text:"Non-Tuberculous Mycobacteria (NTM)",target:"ntm-workup",icon:r.jsx(uo,{className:"h-5 w-5"})}],recommendations:r.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[r.jsx("li",{children:"Perform Ziehl-Neelsen (ZN) stain and auramine-rhodamine fluorescence staining."}),r.jsx("li",{children:"Send tissue for mycobacterial culture (gold standard) and PCR (e.g., Xpert MTB/RIF)."}),r.jsx("li",{children:"MTB typically shows caseating necrosis; NTM may show histologically identical granulomas."})]})},"mtb-workup":{id:"mtb-workup",phase:4,isTerminal:!0,type:"infectious",title:"Conclusion: M. tuberculosis Complex",description:"Tuberculosis remains a leading cause of granulomatous lung disease worldwide. Diagnosis requires identification of the organism or its DNA.",content:r.jsxs(r.Fragment,{children:[r.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Diagnostic Criteria for MTB:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-600",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Clinical:"})," Endemic exposure, immunosuppression (HIV), active TB contact."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Radiologic:"})," Upper lobe cavitary lesions, tree-in-bud pattern, lymphadenopathy."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Histologic:"})," Caseating (necrotizing) granulomas with Langhans giant cells."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Laboratory:"})," Positive culture or molecular identification (Xpert MTB/RIF) from tissue/sputum."]})]})]}),recommendations:"MTB can mimic other granulomatous diseases. Always confirm with microbiologic studies before initiating treatment. In immunocompromised patients, granulomas may be poorly formed or absent."},"ntm-workup":{id:"ntm-workup",phase:4,isTerminal:!0,type:"infectious",title:"Conclusion: Non-Tuberculous Mycobacteria (NTM)",description:"NTM pulmonary disease is increasingly recognized, especially in patients with structural lung disease.",content:r.jsxs(r.Fragment,{children:[r.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Diagnostic Criteria for NTM (ATS/IDSA Guidelines):"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-600",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Clinical:"})," Pulmonary symptoms, radiologic findings, exclusion of other diagnoses."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Radiologic:"})," Nodular bronchiectasis (especially RML/lingula), fibrocavitary disease."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Special Consideration:"})," Hot Tub Lung (HTL) - hypersensitivity vs. infection to NTM."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Laboratory:"})," Positive NTM cultures from bronchial wash or sputum (≥2) or lung biopsy."]})]})]}),recommendations:"Hot Tub Lung presents with centrilobular nodules and ground-glass opacities, mimicking hypersensitivity pneumonitis. Histology shows non-necrotizing granulomas and cellular bronchiolitis."},"fungal-workup":{id:"fungal-workup",phase:3,type:"infectious",title:"Fungal Evaluation",description:"Fungal infections are common causes of granulomatous lung disease. Geographic variation is critical for diagnosis.",options:[{text:"Endemic Fungi",target:"endemic-fungi",icon:r.jsx(co,{className:"h-5 w-5"})},{text:"Cryptococcus",target:"cryptococcus",icon:r.jsx(co,{className:"h-5 w-5"})},{text:"Aspergillus",target:"aspergillus",icon:r.jsx(co,{className:"h-5 w-5"})}],recommendations:r.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[r.jsx("li",{children:"Perform GMS stain for fungi and examine carefully at both low and high magnification."}),r.jsx("li",{children:"Consider patient's geographic location and travel history for endemic fungi."}),r.jsx("li",{children:"Send tissue for fungal culture and consider serologic testing (antigen/antibody)."})]})},"endemic-fungi":{id:"endemic-fungi",phase:4,isTerminal:!0,type:"infectious",title:"Conclusion: Endemic Fungal Infections",description:"Histoplasma, Blastomyces, and Coccidioides are major endemic fungal causes of granulomatous lung disease.",content:r.jsx("p",{children:"Review the comparison table in the Job Aid & Atlas for details on Histoplasma, Blastomyces, and Coccidioides."}),recommendations:"Histoplasma is the most common overlooked cause of unexplained necrotizing granulomas. Multiple recuts and special stains may be necessary for diagnosis."},cryptococcus:{id:"cryptococcus",phase:4,isTerminal:!0,type:"infectious",title:"Conclusion: Cryptococcosis",description:"Cryptococcus neoformans and Cryptococcus gattii cause granulomatous inflammation, particularly in immunocompromised patients.",content:r.jsxs(r.Fragment,{children:[r.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Diagnostic Criteria for Cryptococcosis:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-600",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Histologic:"})," Narrow-based budding yeast (4-7μm); may show capsule on H&E."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Special Stains:"})," Mucicarmine highlights capsule; Fontana-Masson stains cell wall of capsule-deficient strains."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Laboratory:"})," Serum/BAL cryptococcal antigen (highly sensitive/specific), culture."]})]})]}),recommendations:"Cryptococcus is a common opportunistic infection in patients with sarcoidosis due to their underlying immunosuppression. Always consider in patients with known sarcoidosis who develop new or worsening symptoms."},aspergillus:{id:"aspergillus",phase:4,isTerminal:!0,type:"infectious",title:"Conclusion: Aspergillosis",description:"Aspergillus species rarely cause granulomatous inflammation, except in chronic forms of the disease.",content:r.jsxs(r.Fragment,{children:[r.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Diagnostic Criteria for Aspergillosis:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-600",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Histologic:"})," Septate hyphae with acute-angle branching (45°); rarely forms granulomas."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Chronic Forms:"})," Chronic necrotizing aspergillosis (semi-invasive) may show granulomatous inflammation."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Laboratory:"})," Culture, galactomannan antigen, PCR, Aspergillus IgG/IgE."]})]})]}),recommendations:"Allergic bronchopulmonary aspergillosis (ABPA) can cause granulomatous inflammation in the airways, typically in patients with asthma or cystic fibrosis. Look for eosinophilic inflammation and mucus plugs."},"other-infectious":{id:"other-infectious",phase:3,isTerminal:!0,type:"infectious",title:"Conclusion: Other Infectious Agents",description:"Less common infectious causes of granulomatous lung disease include parasites, bacteria, and viruses.",content:r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-600",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Parasitic:"})," Schistosomiasis, paragonimiasis, strongyloidiasis."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Bacterial:"})," Brucellosis, tularemia, nocardiosis, rhodococcus equi."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Viral:"})," Rare, but reported with herpesviruses in immunocompromised patients."]})]}),recommendations:"Always consider travel history and exposure to unusual pathogens when common infectious causes have been excluded. Consultation with infectious disease specialists may be helpful."},"non-infectious-workup":{id:"non-infectious-workup",phase:2,type:"non-infectious",title:"Non-Infectious Workup",description:"After excluding infectious causes, evaluate for non-infectious granulomatous lung diseases. Always correlate with clinical and radiologic findings.",options:[{text:"Sarcoidosis",target:"sarcoidosis-workup",icon:r.jsx(Hg,{className:"h-5 w-5"})},{text:"Vasculitis",target:"vasculitis-workup",icon:r.jsx(tr,{className:"h-5 w-5"})},{text:"Hypersensitivity Pneumonitis",target:"hypersensitivity-workup",icon:r.jsx(Tu,{className:"h-5 w-5"})},{text:"Other Non-Infectious Causes",target:"other-non-infectious",icon:r.jsx(Bg,{className:"h-5 w-5"})}],recommendations:r.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[r.jsx("li",{children:"Non-infectious causes require a diagnosis of exclusion after thorough infectious workup."}),r.jsx("li",{children:"Clinical-radiologic-pathologic correlation is essential for accurate diagnosis."}),r.jsx("li",{children:"Consider drug-induced sarcoidosis-like reactions (DISR) and malignancy-associated reactions."})]})},"sarcoidosis-workup":{id:"sarcoidosis-workup",phase:3,isTerminal:!0,type:"non-infectious",title:"Conclusion: Sarcoidosis",description:"Sarcoidosis is a multisystem granulomatous disorder of unknown cause. The diagnosis requires clinical-radiologic-pathologic correlation.",content:r.jsxs(r.Fragment,{children:[r.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Diagnostic Criteria for Sarcoidosis:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-600",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Clinical:"})," Multisystem involvement; may present with Löfgren's syndrome or Heerfordt's syndrome."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Radiologic:"})," Bilateral hilar lymphadenopathy, perilymphatic nodules."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Histologic:"})," Well-formed, non-necrotizing granulomas in a lymphangitic distribution."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Laboratory:"})," Elevated ACE level (nonspecific), hypercalcemia, BAL lymphocytosis with CD4:CD8 ratio >3.5."]})]})]}),recommendations:"Sarcoidosis is a diagnosis of exclusion. Always rule out infections and other granulomatous diseases like Berylliosis before making the diagnosis."},"vasculitis-workup":{id:"vasculitis-workup",phase:3,type:"non-infectious",title:"Vasculitis Evaluation",description:"Granulomatosis with polyangiitis (GPA) and eosinophilic granulomatosis with polyangiitis (EGPA) are the primary vasculitides causing granulomatous lung disease.",options:[{text:"Granulomatosis with Polyangiitis (GPA)",target:"gpa-workup",icon:r.jsx(tr,{className:"h-5 w-5"})},{text:"Eosinophilic Granulomatosis with Polyangiitis (EGPA)",target:"egpa-workup",icon:r.jsx(tr,{className:"h-5 w-5"})}],recommendations:r.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[r.jsx("li",{children:"Test for ANCA (c-ANCA/PR3 for GPA, p-ANCA/MPO for EGPA)."}),r.jsx("li",{children:"Look for systemic involvement (renal, skin, nerve, ENT)."}),r.jsx("li",{children:"Consider lung biopsy for definitive diagnosis when possible."})]})},"gpa-workup":{id:"gpa-workup",phase:4,isTerminal:!0,type:"non-infectious",title:"Conclusion: Granulomatosis with Polyangiitis (GPA)",description:"GPA (formerly Wegener granulomatosis) is a necrotizing granulomatous vasculitis affecting small- to medium-sized vessels.",content:r.jsxs(r.Fragment,{children:[r.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Diagnostic Criteria for GPA:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-600",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Clinical:"})," Upper airway (sinusitis, nasal ulcers), lower airway (nodules, cavities), renal (glomerulonephritis)."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Radiologic:"})," Pulmonary nodules (often multiple and bilateral), cavities."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Histologic:"})," Necrotizing granulomas, necrotizing vasculitis, geographic necrosis."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Serology:"})," c-ANCA/PR3 positive in 90% of active systemic disease."]})]})]}),recommendations:"Limited forms of GPA may present with only granulomatous inflammation without vasculitis. Always consider infection in the differential, especially when necrosis is present."},"egpa-workup":{id:"egpa-workup",phase:4,isTerminal:!0,type:"non-infectious",title:"Conclusion: Eosinophilic Granulomatosis with Polyangiitis (EGPA)",description:"EGPA (formerly Churg-Strauss syndrome) is an eosinophil-rich, necrotizing granulomatous inflammation often affecting the lungs.",content:r.jsxs(r.Fragment,{children:[r.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Diagnostic Criteria for EGPA:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-600",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Clinical:"})," Asthma, eosinophilia (>1,500/μL), mononeuritis multiplex."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Radiologic:"})," Patchy, migratory pulmonary opacities."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Histologic:"})," Eosinophil-rich inflammation, necrotizing granulomas, vasculitis."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Serology:"})," p-ANCA/MPO positive in ~50% of cases."]})]})]}),recommendations:"EGPA can be difficult to distinguish from chronic eosinophilic pneumonia. The presence of systemic vasculitis or mononeuritis multiplex helps establish the diagnosis."},"hypersensitivity-workup":{id:"hypersensitivity-workup",phase:3,isTerminal:!0,type:"non-infectious",title:"Conclusion: Hypersensitivity Pneumonitis (HP)",description:"HP is an immune-mediated lung disease caused by inhalation of antigens in susceptible individuals.",content:r.jsxs(r.Fragment,{children:[r.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Diagnostic Criteria for HP:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-600",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Clinical:"})," Exposure to known antigen (birds, mold, hot tubs, etc.)."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Radiologic:"})," Centrilobular nodules, ground-glass opacities, mosaic attenuation."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Histologic:"})," Poorly formed, non-necrotizing, airway-centric granulomas; cellular bronchiolitis."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Laboratory:"})," BAL lymphocytosis (>20-30%), serum-specific IgG antibodies (supportive)."]})]})]}),recommendations:"Hot Tub Lung is a distinct entity caused by exposure to Mycobacterium avium complex in hot tubs, presenting with features of both HP and infection."},"other-non-infectious":{id:"other-non-infectious",phase:3,isTerminal:!0,type:"non-infectious",title:"Conclusion: Other Non-Infectious Causes",description:"Several other non-infectious conditions can cause granulomatous lung disease.",content:r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-600",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Chronic Beryllium Disease (CBD):"})," Histologically identical to sarcoidosis; requires exposure history and positive BeLPT."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Drug-Induced Sarcoidosis-like Reactions (DISR):"})," Caused by checkpoint inhibitors, TNF-α inhibitors, etc."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Malignancy-Associated Granulomas:"})," Sarcoid-like reactions can occur with lymphomas and solid tumors."]})]}),recommendations:"A detailed medication and occupational history is essential to identify potential drug-induced or exposure-related reactions."},"comprehensive-workup":{id:"comprehensive-workup",phase:2,isTerminal:!0,type:"undetermined",title:"Conclusion: Comprehensive Workup Required",description:"When the cause is unclear, a comprehensive workup for both infectious and non-infectious causes is necessary.",content:r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-slate-600",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Clinical Evaluation:"})," Detailed history including symptoms, exposures, travel, occupation, medications."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Radiologic Evaluation:"})," High-resolution CT to characterize pattern and distribution."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Laboratory Tests:"})," ACE level, ANCA, serum-specific IgG for HP, etc."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Pulmonary Evaluation:"})," Bronchoscopy with BAL, transbronchial or surgical lung biopsy."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Histopathology:"})," H&E with GMS, ZN, and potentially PCR for microorganisms."]})]}),recommendations:"Multidisciplinary discussion (MDD) involving pulmonology, radiology, and pathology is essential for complex cases. When diagnosis remains uncertain, close follow-up and re-biopsy may be necessary."}},zC=({text:e="Loading..."})=>r.jsxs("div",{className:"flex items-center justify-center h-full my-4",children:[r.jsxs("svg",{className:"animate-spin h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"ml-3 text-slate-600",children:e})]}),$C=({currentPhase:e,maxPhase:t})=>r.jsx("div",{className:"flex items-center justify-center space-x-2 sm:space-x-4 my-8",children:Array.from({length:t}).map((n,i)=>{const o=i+1,s=o===e,l=o<e;return r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center font-bold border-2 transition-all duration-300
                        ${l?"bg-primary-600 border-primary-600 text-white":""}
                        ${s?"bg-white border-primary-600 text-primary-600":""}
                        ${!s&&!l?"bg-white border-slate-300 text-slate-400":""}
                    `,children:l?r.jsx(Hi,{className:"h-5 w-5"}):o}),r.jsxs("p",{className:`mt-2 text-xs sm:text-sm font-semibold transition-colors duration-300
                        ${s?"text-primary-600":"text-slate-500"}
                    `,children:["Phase ",o]})]},o)})}),JC=({user:e})=>{const[t,n]=I.useState(["root"]),[i,o]=I.useState({}),[s,l]=I.useState({}),[c,d]=I.useState({}),f=I.useRef(null),p=t[t.length-1],m=po[p];I.useEffect(()=>{const S=async N=>{if(s[N]===void 0&&!c[N]){d(w=>({...w,[N]:!0}));const v=po[N],y=`${v.title}: ${v.description}`,x=await zn(y);l(w=>({...w,[N]:x})),d(w=>({...w,[N]:!1}))}};t.forEach(S),f.current&&f.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},[t,s,c]);const h=(S,N)=>{o(v=>({...v,[S]:N.text})),n(v=>[...v,N.target]),Fn(e.username,U.DIAGNOSTIC_PATHWAY,S,{question:po[S].title,selectedAnswer:N.text,isCorrect:!0,timestamp:Date.now()})},g=()=>{n(["root"]),o({}),l({}),d({})},C={infectious:{border:"border-red-500",badgeBg:"bg-red-100",badgeText:"text-red-800"},"non-infectious":{border:"border-primary-500",badgeBg:"bg-primary-100",badgeText:"text-primary-800"},undetermined:{border:"border-amber-500",badgeBg:"bg-amber-100",badgeText:"text-amber-800"}};return r.jsxs("div",{className:"animate-fade-in",children:[r.jsx(Ye,{title:"Interactive Diagnostic Algorithm",subtitle:"Navigate the diagnostic process with this interactive decision tree."}),r.jsxs(F,{children:[r.jsx($C,{currentPhase:m.phase,maxPhase:4}),r.jsx("div",{className:"flex justify-center mb-6",children:r.jsxs("button",{onClick:g,className:"bg-slate-200 text-slate-700 font-semibold py-2 px-5 rounded-lg hover:bg-slate-300 transition-colors flex items-center shadow-sm",children:[r.jsx(Dg,{className:"h-5 w-5 mr-2"}),"Start Over"]})}),r.jsx("div",{className:"space-y-6",children:t.map((S,N)=>{var T,E,_;const v=po[S],y=N===t.length-1,x=C[v.type],w=i[S];return r.jsx("div",{ref:y?f:null,children:r.jsxs(F,{className:`!mb-0 border-l-4 ${x.border} ${y?"":"opacity-80 bg-slate-50"}`,children:[r.jsxs("span",{className:`absolute top-4 right-4 text-xs font-bold px-2.5 py-1 rounded-full ${x.badgeBg} ${x.badgeText}`,children:["Phase ",v.phase]}),r.jsx("h2",{className:"text-xl font-semibold font-serif text-slate-800 mb-2 pr-20",children:v.title}),r.jsx("p",{className:"text-slate-600 mb-4",children:v.description}),c[S]&&r.jsx(zC,{text:"Finding relevant image..."}),s[S]&&r.jsxs("div",{className:"my-4 space-y-2 animate-fade-in",children:[r.jsx(et,{staticImageUrl:(T=s[S])==null?void 0:T.src,altText:(E=s[S])==null?void 0:E.title}),r.jsxs("p",{className:"text-center text-sm text-slate-600 font-semibold italic",children:['AI-selected image from gallery: "',(_=s[S])==null?void 0:_.title,'"']})]}),v.content&&r.jsx("div",{className:"mt-4 text-sm",children:v.content}),v.options&&r.jsx("div",{className:`mt-4 space-y-3 ${y?"":"pointer-events-none"}`,children:v.options.map(k=>r.jsxs("button",{onClick:()=>h(v.id,k),disabled:!y,className:`w-full text-left p-3 border rounded-lg transition-all duration-200 flex items-center font-medium
                                                        ${w===k.text?"bg-primary-600 border-primary-600 text-white shadow-md":"bg-white border-slate-300 hover:bg-slate-100 hover:border-slate-400"}`,children:[k.icon&&r.jsx("span",{className:"mr-3",children:k.icon}),k.text]},k.text))}),(w||v.isTerminal)&&r.jsx("div",{className:"mt-6",children:r.jsx(ie,{type:"info",title:"Expert Recommendation",children:v.recommendations})})]})},`${S}-${N}`)})})]})]})},or=({text:e="Generating..."})=>r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"ml-3 text-slate-600",children:e})]}),WC=({user:e})=>{const[t,n]=I.useState(null),[i,o]=I.useState(""),[s,l]=I.useState(null),[c,d]=I.useState(!1),[f,p]=I.useState(!1),[m,h]=I.useState(null),[g,C]=I.useState(null),[S,N]=I.useState(!1);I.useEffect(()=>{t&&(async()=>{N(!0);const T=`Clinical History: ${t.clinicalHistory}. Radiologic Findings: ${t.radiologicFindings}. Histologic Description: ${t.histologicDescription}. Diagnosis: ${t.diagnosis}`,E=await zn(T);C(E),N(!1)})()},[t]);const v=async()=>{d(!0),h(null),n(null),l(null),o(""),C(null);try{const w=new is({apiKey:void 0}),T=`
                You are a pathology professor creating a board-style case study for a resident.
                Generate a unique, realistic case of a granulomatous disease of the lung.
                Do NOT use Sarcoidosis, Tuberculosis, or Hypersensitivity Pneumonitis as the final diagnosis. Pick a less common but important entity.
                Provide a clinical history, radiologic findings, and a detailed histologic description.
                Return the output as a single, minified JSON object with no markdown formatting.
            `,E=await w.models.generateContent({model:"gemini-2.5-pro",contents:T,config:{responseMimeType:"application/json",responseSchema:{type:ae.OBJECT,properties:{clinicalHistory:{type:ae.STRING},radiologicFindings:{type:ae.STRING},histologicDescription:{type:ae.STRING},diagnosis:{type:ae.STRING}},required:["clinicalHistory","radiologicFindings","histologicDescription","diagnosis"]}}}),_=JSON.parse(E.text.trim());n(_)}catch(w){console.error(w),h("Failed to generate a case. Please try again.")}finally{d(!1)}},y=async()=>{if(!(!t||!i)){p(!0),h(null),l(null);try{const w=new is({apiKey:void 0}),T=`
                You are a senior pathology attending providing feedback to a resident.
                The case is as follows:
                - Clinical History: ${t.clinicalHistory}
                - Radiologic Findings: ${t.radiologicFindings}
                - Histologic Description: ${t.histologicDescription}
                The final diagnosis is: ${t.diagnosis}.

                The resident's submitted differential diagnosis and justification is: "${i}"

                Your task is to:
                1. First, clearly state the correct final diagnosis.
                2. Evaluate the resident's answer. If they were correct, praise them and highlight why their reasoning was good.
                3. If they were incorrect, gently correct them. Explain why their answer is less likely and what key features from the case they might have missed.
                4. Provide a brief, high-yield summary of the key diagnostic features of the correct entity.
                Keep your tone supportive and educational. Format the response using markdown for clarity (bolding with **text** and newlines).
            `,_=(await w.models.generateContent({model:"gemini-2.5-flash",contents:T})).text.trim();l(_),Fn(e.username,U.AI_CASE_GENERATOR,`case_${Date.now()}`,{caseData:t,userDx:i,feedback:_,timestamp:Date.now()})}catch(w){console.error(w),h("Failed to get feedback. Please try again.")}finally{p(!1)}}},x=w=>{const T=w.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br />");return r.jsx("div",{className:"prose prose-sm max-w-none prose-slate",dangerouslySetInnerHTML:{__html:T}})};return r.jsxs("div",{className:"animate-fade-in space-y-8",children:[r.jsx(Ye,{title:"AI-Powered Case Generator",subtitle:"Generate unique cases and get instant feedback from a virtual attending."}),r.jsxs(F,{children:[r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("p",{className:"text-slate-600 mb-4 max-w-lg",children:"Challenge yourself with novel cases on less common entities to broaden your differential diagnosis and sharpen your skills."}),r.jsxs("button",{onClick:v,disabled:c,className:"bg-primary-600 text-white font-semibold py-2.5 px-6 rounded-lg hover:bg-primary-700 transition-colors disabled:bg-slate-300 disabled:text-slate-600 disabled:cursor-not-allowed flex items-center shadow-sm",children:[r.jsx(bn,{className:"h-5 w-5 mr-2"}),c?"Generating...":"Generate New Case Study"]})]}),c&&r.jsx("div",{className:"mt-4",children:r.jsx(or,{})})]}),m&&r.jsx(ie,{type:"error",children:m}),t&&r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs(F,{children:[r.jsx("h2",{className:"text-xl font-semibold font-serif text-slate-800 mb-3",children:"Clinical History"}),r.jsx("p",{className:"text-slate-600 leading-relaxed",children:t.clinicalHistory})]}),r.jsxs(F,{children:[r.jsx("h2",{className:"text-xl font-semibold font-serif text-slate-800 mb-3",children:"Radiologic Findings"}),r.jsx("p",{className:"text-slate-600 leading-relaxed",children:t.radiologicFindings})]}),r.jsxs(F,{children:[r.jsx("h2",{className:"text-xl font-semibold font-serif text-slate-800 mb-3",children:"Histologic Description"}),S&&r.jsx("div",{className:"my-4",children:r.jsx(or,{text:"Finding relevant image..."})}),g&&r.jsxs("div",{className:"my-4 space-y-2",children:[r.jsx(et,{staticImageUrl:g.src,altText:g.title}),r.jsxs("p",{className:"text-center text-sm text-slate-600 font-semibold italic",children:['AI-selected image from gallery: "',g.title,'"']})]}),r.jsx("p",{className:"text-slate-600 leading-relaxed",children:t.histologicDescription})]}),r.jsxs(F,{children:[r.jsx("h2",{id:"user-dx-heading",className:"text-xl font-semibold font-serif text-slate-800 mb-3",children:"Your Diagnosis"}),r.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Provide a ranked differential diagnosis and a brief justification."}),r.jsx("label",{htmlFor:"user-dx-textarea",className:"sr-only",children:"Your Diagnosis and Justification"}),r.jsx("textarea",{id:"user-dx-textarea",name:"userDiagnosis",value:i,onChange:w=>o(w.target.value),rows:5,className:"w-full p-3 border border-slate-400 rounded-lg focus:ring-primary-500 focus:border-primary-500 transition shadow-sm",placeholder:`e.g., 1. Diagnosis A - because of feature X.
2. Diagnosis B - less likely due to feature Y.`,"aria-labelledby":"user-dx-heading"}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("button",{onClick:y,disabled:f||!i,className:"bg-green-600 text-white font-semibold py-2.5 px-6 rounded-lg hover:bg-green-700 transition-colors disabled:bg-slate-300 disabled:text-slate-600 disabled:cursor-not-allowed shadow-sm",children:f?"Getting Feedback...":"Submit for Feedback"})}),f&&r.jsx("div",{className:"mt-4",children:r.jsx(or,{text:"Getting feedback..."})})]})]}),s&&r.jsx(F,{className:"bg-slate-50 border-slate-200 animate-fade-in",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center mr-4",children:r.jsx(Di,{className:"h-6 w-6 text-primary-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold font-serif text-slate-800 mb-3",children:"Virtual Attending Feedback"}),r.jsx("div",{className:"text-slate-700 leading-relaxed",children:x(s)})]})]})})]})},OC=({onUpload:e,showGallerySelector:t=!1})=>{const[n,i]=I.useState(""),[o,s]=I.useState(""),[l,c]=I.useState(null),[d,f]=I.useState(null),[p,m]=I.useState(!1),[h,g]=I.useState("community"),C=I.useCallback(w=>{if(!w.type.startsWith("image/")){f("Please upload a valid image file (e.g., JPG, PNG, GIF).");return}f(null);const T=new FileReader;T.onload=E=>{var _;c((_=E.target)==null?void 0:_.result)},T.readAsDataURL(w)},[]),S=w=>{w.target.files&&w.target.files[0]&&C(w.target.files[0])},N=w=>{if(w.preventDefault(),!l||!n){f("An image and a title are required to submit.");return}e({src:l,title:n,description:o},t?h:"community"),i(""),s(""),c(null),f(null);const T=document.getElementById("file-upload");T&&(T.value="")},v=I.useCallback(w=>{if(w.preventDefault(),m(!1),w.dataTransfer.items&&w.dataTransfer.items[0].kind==="file"){const T=w.dataTransfer.items[0].getAsFile();T&&C(T)}},[C]),y=w=>{w.preventDefault(),m(!0)},x=()=>{m(!1)};return r.jsxs("form",{onSubmit:N,className:"space-y-4 max-w-lg mx-auto",children:[d&&r.jsx(ie,{type:"error",children:d}),r.jsx("div",{onDrop:v,onDragOver:y,onDragLeave:x,className:`mt-2 flex justify-center rounded-lg border border-dashed px-6 py-10 transition-colors ${p?"border-primary-600 bg-primary-50":"border-slate-900/25"}`,children:r.jsxs("div",{className:"text-center",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-300",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:r.jsx("path",{fillRule:"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z",clipRule:"evenodd"})}),r.jsxs("div",{className:"mt-4 flex text-sm leading-6 text-slate-600",children:[r.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer rounded-md bg-white font-semibold text-primary-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-primary-600 focus-within:ring-offset-2 hover:text-primary-500",children:[r.jsx("span",{children:"Upload a file"}),r.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:S,accept:"image/*"})]}),r.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),r.jsx("p",{className:"text-xs leading-5 text-slate-600",children:"PNG, JPG, GIF up to 10MB"})]})}),l&&r.jsxs("div",{className:"mt-4 text-center",children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Image Preview:"}),r.jsx("img",{src:l,alt:"Preview",className:"max-h-40 mx-auto rounded-md border p-1"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium leading-6 text-slate-900",children:["Title ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{type:"text",id:"title",value:n,onChange:w=>i(w.target.value),required:!0,className:"mt-1 block w-full rounded-md border-slate-400 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm p-2"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium leading-6 text-slate-900",children:"Description"}),r.jsx("textarea",{id:"description",value:o,onChange:w=>s(w.target.value),rows:3,className:"mt-1 block w-full rounded-md border-slate-400 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm p-2"})]}),t&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium leading-6 text-slate-900",children:"Target Gallery"}),r.jsxs("fieldset",{className:"mt-2",children:[r.jsx("legend",{className:"sr-only",children:"Choose a gallery to upload to"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"community",name:"gallery-type",type:"radio",value:"community",checked:h==="community",onChange:w=>g(w.target.value),className:"h-4 w-4 border-gray-300 text-primary-600 focus:ring-primary-600"}),r.jsx("label",{htmlFor:"community",className:"ml-2 block text-sm font-medium text-gray-700",children:"Community Gallery"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"official",name:"gallery-type",type:"radio",value:"official",checked:h==="official",onChange:w=>g(w.target.value),className:"h-4 w-4 border-gray-300 text-primary-600 focus:ring-primary-600"}),r.jsx("label",{htmlFor:"official",className:"ml-2 block text-sm font-medium text-gray-700",children:"Official Atlas"})]})]})]})]}),r.jsx("div",{className:"text-right pt-2",children:r.jsx("button",{type:"submit",className:"inline-flex justify-center rounded-lg bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary-700 disabled:bg-slate-300 disabled:text-slate-600 disabled:cursor-not-allowed",disabled:!l||!n,children:"Submit Image"})})]})},sr=({images:e,onImageClick:t,onDelete:n,currentUser:i,isModerationView:o=!1})=>e.length===0?r.jsx("p",{className:"text-center text-slate-500 py-8",children:"No images have been submitted to this gallery yet."}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:e.map(s=>r.jsxs("div",{className:"group relative",children:[r.jsxs("button",{onClick:()=>t(s),className:"aspect-square w-full bg-slate-100 rounded-lg overflow-hidden focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:[r.jsx("img",{src:s.src,alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.jsxs("div",{className:"absolute bottom-0 left-0 p-2.5 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[r.jsx("h3",{className:"font-semibold text-sm leading-tight",children:s.title}),r.jsxs("p",{className:"text-xs text-slate-300",children:["by ",s.uploader]})]})]}),(i==null?void 0:i.isAdmin)&&n&&o&&r.jsx("button",{onClick:()=>n(s.id),className:"absolute -top-2 -right-2 bg-white text-red-600 rounded-full p-0.5 shadow-md hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1 opacity-100 transition-opacity","aria-label":`Delete image titled ${s.title}`,children:r.jsx(nn,{className:"h-6 w-6"})})]},s.id))}),YC=({image:e,onClose:t})=>(I.useEffect(()=>{const n=i=>{i.key==="Escape"&&t()};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[t]),r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 animate-fade-in",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"image-modal-title",children:r.jsxs("div",{className:"relative p-4 bg-white rounded-lg shadow-xl max-w-4xl max-h-[90vh] w-auto flex flex-col",onClick:n=>n.stopPropagation(),children:[r.jsx("img",{src:e.src,alt:e.title,className:"object-contain max-w-full max-h-[calc(85vh-80px)] rounded"}),r.jsxs("div",{className:"pt-4 px-2 flex-shrink-0",children:[r.jsx("h2",{id:"image-modal-title",className:"text-lg font-bold text-slate-800",children:e.title}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:e.description}),r.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["Uploaded by: ",e.uploader]})]}),r.jsx("button",{onClick:t,className:"absolute -top-3 -right-3 bg-white rounded-full p-1 shadow-lg text-slate-600 hover:text-slate-900 focus:outline-none focus:ring-2 focus:ring-primary-500 transition-colors","aria-label":"Close image viewer",children:r.jsx(nn,{className:"h-8 w-8"})})]})})),KC=({user:e})=>{const[t,n]=I.useState("browse"),[i,o]=I.useState([]),[s,l]=I.useState([]),[c,d]=I.useState(null),[f,p]=I.useState(null),[m,h]=I.useState(""),[g,C]=I.useState(!1);I.useRef(null),I.useEffect(()=>{o(os()),l(ss())},[]);const S=(w,T)=>{const E={...w,id:`img_${Date.now()}`,uploader:T==="official"?"admin":e.username,timestamp:Date.now()};if(T==="official"&&e.isAdmin){const _=[...i,E];o(_),Jc(_)}else{const _=[...s,E];l(_),ir(_)}p({type:"success",text:`Image "${E.title}" uploaded successfully to ${T==="official"?"Official Atlas":"Community Gallery"}.`}),n("browse")},N=w=>{const T=s.filter(E=>E.id!==w);l(T),ir(T)},v=()=>{p(null);try{const w={official:os(),community:ss()},T=JSON.stringify(w,null,2),E=new Blob([T],{type:"application/json"}),_=URL.createObjectURL(E),k=document.createElement("a");k.href=_,k.download="gallery.json",document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(_),p({type:"success",text:"Gallery data exported successfully as gallery.json."})}catch(w){console.error("Export failed",w),p({type:"error",text:"Failed to export gallery data."})}},y=async()=>{if(!m||!m.startsWith("https")){p({type:"error",text:"Please enter a valid HTTPS URL."});return}p(null),C(!0);try{const w=await fetch(m);if(!w.ok)throw new Error(`Failed to fetch: ${w.status} ${w.statusText}`);const T=await w.json();if(Array.isArray(T.official)&&Array.isArray(T.community))Jc(T.official),ir(T.community),o(T.official),l(T.community),p({type:"success",text:"Gallery successfully synced from URL."}),h("");else throw new Error('Invalid file format. The JSON must contain "official" and "community" arrays.')}catch(w){console.error("Import from URL failed",w),p({type:"error",text:`Import failed: ${w.message}`})}finally{C(!1)}},x=({targetView:w,currentView:T,onClick:E,icon:_,children:k})=>{const P=w===T;return r.jsxs("button",{onClick:()=>E(w),className:`flex items-center justify-center w-full sm:w-auto px-4 py-2.5 text-sm font-medium rounded-lg transition-all duration-200 text-left ${P?"bg-primary-200 text-primary-900 font-bold shadow-md":"text-slate-600 hover:bg-slate-200 hover:text-slate-900"}`,children:[r.jsx("div",{className:"mr-2",children:_}),k]})};return r.jsxs("div",{className:"animate-fade-in space-y-8",children:[r.jsx(Ye,{title:"Image Galleries",subtitle:"Browse curated images or contribute to the community collection.",icon:r.jsx(ra,{className:"h-10 w-10"})}),r.jsxs(F,{children:[r.jsx("h3",{className:"text-xl font-semibold font-serif text-slate-800 mb-4 text-center",children:"Sync with GitHub Repository"}),r.jsxs("div",{className:"text-slate-600 text-sm mb-6 max-w-3xl mx-auto space-y-4 prose prose-sm prose-slate",children:[r.jsx("p",{children:"To use GitHub as a dedicated storage area for your galleries, follow this secure workflow. This method allows you to version-control your gallery data without exposing any sensitive credentials in the application."}),r.jsxs("ol",{children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Export Gallery Data:"}),' Click the "Export Gallery" button to download a single ',r.jsx("code",{children:"gallery.json"})," file. This file contains all image data and metadata."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Commit to GitHub:"})," Add the downloaded ",r.jsx("code",{children:"gallery.json"})," file to your GitHub repository. Commit and push the changes. This creates a persistent, version-controlled backup."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Load from GitHub:"})," Navigate to the ",r.jsx("code",{children:"gallery.json"}),' file in your GitHub repository, click the "Raw" button to get the direct file URL, and paste it into the "Load from URL" field below to sync the application.']})]})]}),f&&r.jsx("div",{className:"mb-4",children:r.jsx(ie,{type:f.type,children:f.text})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:r.jsxs("button",{onClick:v,className:"w-full sm:w-auto flex items-center justify-center bg-sky-600 text-white font-semibold py-2.5 px-6 rounded-lg hover:bg-sky-700 transition-colors shadow-sm",children:[r.jsx(Fg,{className:"h-5 w-5 mr-2"}),"Export Gallery"]})}),r.jsxs("div",{className:"pt-4 border-t border-slate-200 max-w-xl mx-auto",children:[r.jsx("label",{htmlFor:"github-url",className:"block text-sm font-medium text-center text-slate-700 mb-2",children:"Load from URL (e.g., raw GitHub link)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{id:"github-url",type:"url",value:m,onChange:w=>h(w.target.value),className:"w-full border border-slate-400 rounded-md shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm p-2",placeholder:"https://raw.githubusercontent.com/.../gallery.json"}),r.jsxs("button",{onClick:y,disabled:g,className:"flex-shrink-0 flex items-center justify-center bg-slate-600 text-white font-semibold px-4 rounded-lg hover:bg-slate-700 transition-colors shadow-sm disabled:bg-slate-300",children:[r.jsx(Vg,{className:"h-5 w-5 mr-2"}),g?"Loading...":"Load"]})]})]})]})]}),r.jsxs(F,{children:[r.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-2 border-b border-slate-200 pb-4",children:[r.jsx(x,{targetView:"browse",currentView:t,onClick:n,icon:r.jsx(oa,{className:"h-5 w-5"}),children:"Browse Galleries"}),r.jsx(x,{targetView:"upload",currentView:t,onClick:n,icon:r.jsx(bg,{className:"h-5 w-5"}),children:"Upload an Image"}),e.isAdmin&&r.jsx(x,{targetView:"moderate",currentView:t,onClick:n,icon:r.jsx(Gg,{className:"h-5 w-5"}),children:"Moderate Submissions"})]}),t==="browse"&&r.jsxs("div",{className:"space-y-8",children:[r.jsxs(F,{className:"!shadow-none border-dashed border-2 bg-slate-50/50",children:[r.jsx("h3",{className:"text-xl font-semibold font-serif text-slate-800 mb-4",children:"Official Atlas"}),r.jsx(sr,{images:i,onImageClick:d})]}),r.jsxs(F,{className:"!shadow-none border-dashed border-2 bg-slate-50/50",children:[r.jsx("h3",{className:"text-xl font-semibold font-serif text-slate-800 mb-4",children:"Community Submissions"}),r.jsx(sr,{images:s,onImageClick:d,currentUser:e})]})]}),t==="upload"&&r.jsxs(F,{className:"!shadow-none border-dashed border-2 bg-slate-50/50",children:[r.jsx("h3",{className:"font-semibold text-slate-800 mb-4 text-center",children:"Contribute an Image"}),r.jsx(OC,{onUpload:S,showGallerySelector:e.isAdmin})]}),t==="moderate"&&e.isAdmin&&r.jsxs(F,{className:"!shadow-none border-dashed border-2 bg-slate-50/50",children:[r.jsx("h3",{className:"text-xl font-semibold font-serif text-slate-800 mb-4",children:"Moderate Community Submissions"}),r.jsx(sr,{images:s,onImageClick:d,onDelete:N,currentUser:e,isModerationView:!0})]})]}),c&&r.jsx(YC,{image:c,onClose:()=>d(null)})]})},ni=({icon:e,title:t})=>r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center mr-4",children:r.jsx("div",{className:"text-primary-600",children:e})}),r.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800",children:t})]}),Oc=[{question:"Based on the learner profile, what is the primary motivation for a pathology resident using this module?",options:[{id:"a",text:"General interest in lung diseases."},{id:"b",text:"A requirement for their academic curriculum."},{id:"c",text:"Achieving diagnostic competence for daily work and board exams."},{id:"d",text:"Learning basic histology from scratch."}],correctAnswer:"c",feedback:{a:"While interest is a factor, their primary driver is more practical and goal-oriented.",b:"This might be true, but their personal motivation is tied to professional competence.",c:"Correct. Residents are goal-oriented and focused on practical skills for their job and high-stakes exams.",d:"Incorrect. The analysis shows they already have a strong foundation in basic histology."}},{question:"What is the core diagnostic challenge this module aims to address?",options:[{id:"a",text:"The inability to identify a granuloma on a slide."},{id:"b",text:"The significant morphologic overlap between different causes of granulomas."},{id:"c",text:"A lack of knowledge about special stains."},{id:"d",text:"Difficulty in using a microscope."}],correctAnswer:"b",feedback:{a:"Incorrect. The analysis specifies that residents can already identify a granuloma; the problem is differentiating them.",b:"Correct. The key difficulty is that many different diseases can produce very similar-looking granulomas, requiring integrated reasoning.",c:"While important, knowing which stain to order is secondary to first understanding the differential diagnosis based on morphology.",d:"This is a basic skill assumed to be competent in pathology residents."}}],QC=({user:e})=>{const[t,n]=I.useState([null,null]),i=(o,s)=>{if(t[o]===null){const l=[...t];l[o]=s,n(l);const c=Oc[o],d=c.options.find(f=>f.id===s);Fn(e.username,U.ANALYSIS,`q${o+1}`,{question:c.question,selectedAnswer:(d==null?void 0:d.text)||"N/A",isCorrect:s===c.correctAnswer,timestamp:Date.now()})}};return r.jsxs("div",{className:"animate-fade-in",children:[r.jsx(Ye,{title:"Phase 1: Analysis",subtitle:"Defining the learner, their knowledge gaps, and the context for learning."}),r.jsxs(F,{children:[r.jsx(ni,{icon:r.jsx(kg,{className:"h-6 w-6"}),title:"1. Identify the Learner"}),r.jsxs("ul",{className:"space-y-4 text-slate-600 list-disc list-inside",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Who are they?"})," Pathology residents (PGY 1-3) with foundational medical knowledge."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Background Knowledge:"})," Strong understanding of general medicine, basic pathophysiology, and histology. They can define and identify a granuloma."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Experience Level:"})," Novice-to-Intermediate diagnosticians transitioning from theory to practice."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Motivations:"})," Goal-oriented, seeking diagnostic competence for daily work and board certification. They are practical, time-constrained, and highly visual learners."]})]})]}),r.jsxs(F,{children:[r.jsx(ni,{icon:r.jsx(na,{className:"h-6 w-6"}),title:"2. Analyze the Topic"}),r.jsxs("p",{className:"text-slate-600 mb-4",children:["The core difficulty is not identifying a granuloma, but differentiating between causes due to ",r.jsx("strong",{children:"significant morphologic overlap"}),"."]}),r.jsxs("ul",{className:"space-y-4 text-slate-600 list-disc list-inside",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Vast Differential Diagnosis:"})," Spans infectious, autoimmune, environmental, and drug-induced categories."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Non-Specific Histology:"})," Histologic patterns alone are often insufficient for a definitive diagnosis."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Necessity of Clinical Correlation:"})," Diagnosis requires skillful integration of clinical history, radiology, and microbiology with histology."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Use of Ancillary Studies:"})," A critical skill is knowing which special stains to order and how to interpret them."]})]})]}),r.jsxs(F,{children:[r.jsx(ni,{icon:r.jsx(Pg,{className:"h-6 w-6"}),title:"3. Define the Knowledge Gap"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-slate-700 mb-2",children:"Current State (What they can do)"}),r.jsxs("ul",{className:"space-y-2 text-slate-600 list-disc list-inside",children:[r.jsx("li",{children:"Define a granuloma."}),r.jsx("li",{children:"Identify a granuloma on a slide."}),r.jsx("li",{children:'Broadly classify as "necrotizing" or "non-necrotizing."'}),r.jsx("li",{children:"List a few classic causes."})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-slate-700 mb-2",children:"Desired State (What they need to do)"}),r.jsxs("ul",{className:"space-y-2 text-slate-600 list-disc list-inside",children:[r.jsx("li",{children:"Systematically evaluate morphology (quality, distribution)."}),r.jsx("li",{children:"Formulate a pattern-based differential diagnosis."}),r.jsx("li",{children:"Integrate multi-modal data (clinical, radiologic)."}),r.jsx("li",{children:"Guide the clinical workup with appropriate recommendations."})]})]})]}),r.jsx("div",{className:"mt-8",children:r.jsxs(ie,{type:"info",title:"The Core Challenge",children:["The fundamental gap is the transition from ",r.jsx("span",{className:"font-bold",children:"simple identification"})," to ",r.jsx("span",{className:"font-bold",children:"integrated diagnostic reasoning"}),"."]})})]}),r.jsxs(F,{children:[r.jsx(ni,{icon:r.jsx(Di,{className:"h-6 w-6"}),title:"Output of this Phase: The Recipe"}),r.jsxs("ul",{className:"space-y-3 text-slate-600 list-disc list-inside",children:[r.jsxs("li",{children:[r.jsx("strong",{className:"text-slate-700",children:"Instructional Goal:"})," Advance from simple identification to clinically-integrated differential diagnosis."]}),r.jsxs("li",{children:[r.jsx("strong",{className:"text-slate-700",children:"Core Problem to Solve:"})," The vast and histologically overlapping differential diagnosis."]}),r.jsxs("li",{children:[r.jsx("strong",{className:"text-slate-700",children:"Instructional Approach:"})," Must be case-based and highly visual, structured by histologic pattern to mimic the actual diagnostic process."]})]})]}),r.jsxs(F,{children:[r.jsx(ni,{icon:r.jsx(Di,{className:"h-6 w-6"}),title:"Knowledge Check"}),r.jsx("div",{className:"space-y-8",children:Oc.map((o,s)=>r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold text-slate-700 mb-4",children:[s+1,". ",o.question]}),r.jsx("div",{className:"space-y-3",children:o.options.map(l=>{const c=t[s]!==null,d=t[s]===l.id,f=l.id===o.correctAnswer;let p="bg-white border-slate-300 hover:bg-slate-50 hover:border-slate-400 focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500";return c&&(f?p="bg-green-50 border-green-500 text-green-900":d?p="bg-red-50 border-red-500 text-red-900":p="bg-slate-50 border-slate-300 text-slate-500 cursor-default"),r.jsxs("button",{onClick:()=>i(s,l.id),disabled:c,className:`w-full text-left p-4 border rounded-lg transition-all duration-200 flex items-center justify-between ${p} ${c?"cursor-default":"cursor-pointer"}`,children:[r.jsx("span",{children:l.text}),c&&f&&d&&r.jsx(Hi,{className:"h-5 w-5 text-green-600"}),c&&d&&!f&&r.jsx(nn,{className:"h-5 w-5 text-red-600"})]},l.id)})}),t[s]&&r.jsx("div",{className:"mt-4",children:r.jsx(ie,{type:t[s]===o.correctAnswer?"success":"error",children:o.feedback[t[s]]})})]},s))})]})]})},XC=()=>r.jsxs("div",{className:"animate-fade-in",children:[r.jsx(Ye,{title:"Phase 2: Design",subtitle:"Creating specific, measurable learning objectives based on the analysis."}),r.jsxs(F,{children:[r.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-4",children:"Selecting Bloom's Taxonomy Levels"}),r.jsx("p",{className:"text-slate-600 leading-relaxed mb-4",children:"The analysis revealed that the core problem is not a lack of foundational knowledge, but the inability to apply and synthesize it. Therefore, this module targets higher-order thinking skills."}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("span",{className:"bg-slate-100 text-slate-700 text-sm font-medium px-3 py-1 rounded-full",children:"Remember"}),r.jsx("span",{className:"bg-slate-100 text-slate-700 text-sm font-medium px-3 py-1 rounded-full",children:"Understand"}),r.jsx("span",{className:"bg-primary-100 text-primary-800 text-sm font-bold px-3 py-1 rounded-full",children:"Apply"}),r.jsx("span",{className:"bg-primary-100 text-primary-800 text-sm font-bold px-3 py-1 rounded-full",children:"Analyze"}),r.jsx("span",{className:"bg-primary-100 text-primary-800 text-sm font-bold px-3 py-1 rounded-full",children:"Evaluate"}),r.jsx("span",{className:"bg-primary-100 text-primary-800 text-sm font-bold px-3 py-1 rounded-full",children:"Create"})]}),r.jsxs("p",{className:"mt-4 text-slate-600 leading-relaxed",children:["Instruction will operate primarily at the ",r.jsx("strong",{children:"Apply, Analyze, and Evaluate"})," levels, culminating in a ",r.jsx("strong",{children:"Create"})," task (formulating a diagnostic report)."]})]}),r.jsxs("div",{className:"mt-12",children:[r.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-2 text-center",children:"Learning Objectives"}),r.jsx("p",{className:"text-slate-600 leading-relaxed mb-8 text-center",children:"Upon completion of this module, the learner will be able to:"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(F,{className:"!mb-0 border-l-4 border-primary-500 bg-slate-50",children:[r.jsx("h3",{className:"font-bold text-lg font-serif text-slate-800 mb-2",children:"Objective 1: Analyze"}),r.jsxs("p",{className:"text-slate-600",children:["Given a high-resolution digital image of a lung biopsy containing granulomas, the pathology resident will ",r.jsx("strong",{className:"text-slate-800",children:"differentiate"})," the key morphologic features by correctly identifying the type of granuloma, its architectural distribution, and any associated findings."]})]}),r.jsxs(F,{className:"!mb-0 border-l-4 border-green-500 bg-slate-50",children:[r.jsx("h3",{className:"font-bold text-lg font-serif text-slate-800 mb-2",children:"Objective 2: Evaluate & Create"}),r.jsxs("p",{className:"text-slate-600",children:["Given a case study that includes a histologic pattern, a brief clinical history, and radiologic findings, the resident will ",r.jsx("strong",{className:"text-slate-800",children:"synthesize"})," the information to construct a clinically relevant, ranked differential diagnosis, justifying the top two diagnoses with specific evidence."]})]}),r.jsxs(F,{className:"!mb-0 border-l-4 border-purple-500 bg-slate-50",children:[r.jsx("h3",{className:"font-bold text-lg font-serif text-slate-800 mb-2",children:"Objective 3: Apply & Evaluate"}),r.jsxs("p",{className:"text-slate-600",children:["Based on a formulated differential diagnosis for a case, the resident will ",r.jsx("strong",{className:"text-slate-800",children:"propose"})," the most appropriate ancillary studies and correctly interpret the diagnostic implications of both a positive and a negative result, including limitations."]})]})]})]})]}),ZC=({text:e="Loading..."})=>r.jsxs("div",{className:"flex items-center justify-center h-full my-4",children:[r.jsxs("svg",{className:"animate-spin h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"ml-3 text-slate-600",children:e})]}),e1=()=>{const[e,t]=I.useState(!1),[n,i]=I.useState(null),[o,s]=I.useState(!0),l={clinical:"You receive a lung wedge biopsy from a 55-year-old man with a 6-month history of progressive shortness of breath and a dry cough. He is a non-smoker but has kept pigeons in his attic for over 20 years. A chest CT shows diffuse, bilateral ground-glass opacities with centrilobular nodules.",histology:"The biopsy shows a cellular interstitial pneumonia. There are numerous small, poorly-formed granulomas centered on the bronchioles (bronchiolocentric). The granulomas are composed of loose collections of epithelioid histiocytes and multinucleated giant cells. There is no necrosis. The surrounding interstitium is expanded by a dense lymphoplasmacytic infiltrate, and scattered eosinophils are present. You also note foci of organizing pneumonia."};return I.useEffect(()=>{(async()=>{s(!0);const d=`The case is about Hypersensitivity Pneumonitis. ${l.clinical} ${l.histology}`,f=await zn(d);i(f),s(!1)})()},[]),r.jsxs("div",{className:"animate-fade-in",children:[r.jsx(Ye,{title:"Phase 3: Development",subtitle:"Creating the instructional content, media, and activities."}),r.jsxs(F,{children:[r.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-4",children:"Comparative Job Aid: Sarcoidosis vs. Tuberculosis"}),r.jsx("p",{className:"text-slate-600 mb-6",children:"This table highlights key distinguishing features between two common entities. Use it as a quick reference at the microscope."}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm text-left text-slate-500",children:[r.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-100",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold rounded-l-lg",children:"Feature"}),r.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:"Classic Finding in Sarcoidosis"}),r.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold rounded-r-lg",children:"Classic Finding in Tuberculosis"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-200",children:[r.jsxs("tr",{className:"bg-white",children:[r.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Granuloma Type"}),r.jsx("td",{className:"px-6 py-4",children:'Tightly formed, well-circumscribed, "naked" (scant lymphocytes).'}),r.jsx("td",{className:"px-6 py-4",children:"Can be well-formed or poorly-formed, often confluent, prominent rim of lymphocytes."})]}),r.jsxs("tr",{className:"bg-white",children:[r.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Necrosis"}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("strong",{children:"Non-necrotizing"}),' ("non-caseating").']}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("strong",{children:"Caseating necrosis"})," (eosinophilic, granular, acellular debris)."]})]}),r.jsxs("tr",{className:"bg-white",children:[r.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Distribution"}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("strong",{children:"Lymphangitic"})," (along bronchovascular bundles, septa, pleura)."]}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("strong",{children:"Apical and cavitary"})," (typically upper lobes)."]})]}),r.jsxs("tr",{className:"bg-white",children:[r.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Associated Findings"}),r.jsx("td",{className:"px-6 py-4",children:"Schaumann bodies, Asteroid bodies."}),r.jsx("td",{className:"px-6 py-4",children:"Acid-fast bacilli (AFB) visible with special stain."})]})]})]})})]}),r.jsxs(F,{children:[r.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-4",children:`Interactive Case Study: "The Bird Fancier's Cough"`}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg font-serif text-slate-800 mb-2",children:"Part 1: Clinical & Radiologic Data"}),r.jsx("p",{className:"text-slate-600",children:l.clinical})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg font-serif text-slate-800 mb-2",children:"Part 2: Histologic Findings"}),r.jsxs("div",{className:"space-y-3",children:[o?r.jsx("div",{className:"w-full h-64 sm:h-96 bg-slate-100 rounded-lg shadow-md flex items-center justify-center",children:r.jsx(ZC,{text:"Finding relevant image..."})}):r.jsx(et,{staticImageUrl:n==null?void 0:n.src,altText:(n==null?void 0:n.title)||"AI-selected image for the case study."}),n&&r.jsxs("p",{className:"text-center text-sm text-slate-600 font-semibold italic",children:['AI-selected image from gallery: "',n.title,'"']}),r.jsx("p",{className:"text-slate-600 flex-1 pt-2",children:l.histology})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg font-serif text-slate-800 mb-2",children:"Part 3: The Diagnostic Task"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"Given the integrated clinical, radiologic, and histologic findings, construct a ranked differential diagnosis. Justify your top two choices."}),r.jsx("button",{onClick:()=>t(!e),className:"bg-primary-600 text-white font-medium py-2 px-5 rounded-lg hover:bg-primary-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 transition-colors shadow-sm",children:e?"Hide Expert Answer":"Reveal Expert Answer"}),e&&r.jsxs("div",{className:"mt-6 space-y-4 animate-fade-in",children:[r.jsxs(ie,{type:"success",title:"1. Hypersensitivity Pneumonitis (Subacute/Chronic)",children:[r.jsx("strong",{children:"Justification:"})," This is the leading diagnosis. The clinical history (pigeon keeping), radiology (ground-glass, centrilobular nodules), and histology (cellular interstitial pneumonia, bronchiolocentric distribution, poorly-formed non-necrotizing granulomas) align perfectly."]}),r.jsxs(ie,{type:"info",title:"2. Sarcoidosis",children:[r.jsx("strong",{children:"Justification:"})," This is on the differential but less likely. In sarcoidosis, granulomas are typically well-formed and tight with a lymphangitic distribution, which is discordant with this case."]})]})]})]})]})]})},Yc=[{id:"A",text:"Sarcoidosis"},{id:"B",text:"Hypersensitivity Pneumonitis"},{id:"C",text:"Tuberculosis"},{id:"D",text:"Berylliosis"}],Vt="A",jt={A:{title:"Sarcoidosis",rationale:"This is the classic presentation. The combination of bilateral hilar lymphadenopathy in an asymptomatic young adult with well-formed, non-necrotizing granulomas in a lymphangitic distribution is pathognomonic.",isCorrect:!0},B:{title:"Hypersensitivity Pneumonitis",rationale:"Incorrect. The granulomas in HP are typically poorly-formed and bronchiolocentric, not well-formed and lymphangitic. The clinical picture is also not typical for HP.",isCorrect:!1},C:{title:"Tuberculosis",rationale:'Incorrect. The stem explicitly states the granulomas are "non-necrotizing." Classic post-primary tuberculosis is characterized by caseating necrotizing granulomas.',isCorrect:!1},D:{title:"Berylliosis",rationale:"Incorrect. While histologically indistinguishable from sarcoidosis, berylliosis requires a specific clinical history of exposure to beryllium, which is absent here. Sarcoidosis is far more common.",isCorrect:!1}},mo={clinical:"A 35-year-old woman presents for a pre-employment physical. She is asymptomatic. A routine chest X-ray reveals an abnormality, prompting a CT scan and subsequent transbronchial biopsy. The chest CT demonstrates bilateral hilar lymphadenopathy and subtle perilymphatic nodularity.",histology:"Examination shows numerous, discrete, and well-formed non-necrotizing granulomas. They are composed of tight clusters of epithelioid histiocytes with scattered multinucleated giant cells and a minimal lymphocytic cuff. They are observed in the submucosa of a bronchiole and expanding the interstitium of adjacent alveolar septa, consistent with a lymphangitic distribution."},t1=({text:e="Loading..."})=>r.jsxs("div",{className:"flex items-center justify-center h-full my-4",children:[r.jsxs("svg",{className:"animate-spin h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"ml-3 text-slate-600",children:e})]}),n1=({user:e})=>{const[t,n]=I.useState(null),[i,o]=I.useState(!1),[s,l]=I.useState(null),[c,d]=I.useState(!0);I.useEffect(()=>{(async()=>{d(!0);const g=`The case is about Sarcoidosis. ${mo.clinical} ${mo.histology}`,C=await zn(g);l(C),d(!1)})()},[]);const f=h=>{i||n(h)},p=()=>{if(t){o(!0);const h=Yc.find(g=>g.id===t);Fn(e.username,U.EVALUATION,"finalQuestion",{question:"Based on the integration of all findings, what is the most likely diagnosis?",selectedAnswer:(h==null?void 0:h.text)||"N/A",isCorrect:t===Vt,timestamp:Date.now()})}},m=h=>i?h===Vt?"bg-green-50 border-green-500 text-green-900":h===t?"bg-red-50 border-red-500 text-red-900":"bg-slate-100 border-slate-300 text-slate-500 cursor-default":t===h?"bg-primary-100 border-primary-400 ring-2 ring-primary-300":"bg-white border-slate-300 hover:bg-slate-50 hover:border-slate-400";return r.jsxs("div",{className:"animate-fade-in",children:[r.jsx(Ye,{title:"Board-Style Question",subtitle:"Measuring your ability to integrate findings and form a diagnosis."}),r.jsxs(F,{children:[r.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-2",children:"Question: Integrate and Diagnose"}),r.jsxs("div",{className:"bg-slate-50 p-6 rounded-lg border border-slate-200 text-slate-600 space-y-4 mb-6",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Stem:"})," ",mo.clinical]}),r.jsxs("div",{children:[r.jsx("p",{children:r.jsx("strong",{children:"Microscopic Findings:"})}),c&&r.jsx(t1,{text:"Finding relevant image..."}),s&&r.jsxs("div",{className:"my-4 space-y-2 animate-fade-in",children:[r.jsx(et,{staticImageUrl:s.src,altText:s.title}),r.jsxs("p",{className:"text-center text-sm text-slate-600 font-semibold italic",children:['AI-selected image from gallery: "',s.title,'"']})]}),r.jsx("p",{children:mo.histology})]})]}),r.jsx("p",{className:"font-semibold text-slate-700 mb-4",children:"Based on the integration of all findings, what is the most likely diagnosis?"}),r.jsx("div",{className:"space-y-3",children:Yc.map(h=>r.jsxs("button",{onClick:()=>f(h.id),disabled:i,className:`w-full text-left p-4 border rounded-lg transition-all duration-200 flex items-center ${m(h.id)} ${i?"cursor-default":"cursor-pointer"}`,children:[r.jsxs("span",{className:"font-bold mr-4 text-slate-500",children:[h.id,"."]}),r.jsx("span",{className:"flex-1",children:h.text}),i&&h.id===Vt&&r.jsx(Hi,{className:"h-6 w-6 text-green-600"}),i&&h.id===t&&h.id!==Vt&&r.jsx(nn,{className:"h-6 w-6 text-red-600"})]},h.id))}),r.jsx("div",{className:"mt-8 border-t border-slate-200 pt-6 text-center",children:r.jsx("button",{onClick:p,disabled:!t||i,className:"bg-primary-600 text-white font-semibold py-2.5 px-8 rounded-lg hover:bg-primary-700 transition-colors disabled:bg-slate-300 disabled:text-slate-600 disabled:cursor-not-allowed focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 shadow-sm",children:"Submit Answer"})}),i&&r.jsxs("div",{className:"mt-8 space-y-4 animate-fade-in",children:[t&&r.jsx(ie,{type:jt[t].isCorrect?"success":"error",title:jt[t].isCorrect?`Correct: ${jt[t].title}`:`Incorrect: ${jt[t].title}`,children:jt[t].rationale}),t!==Vt&&r.jsx(ie,{type:"info",title:`The Correct Answer was: ${jt[Vt].title}`,children:jt[Vt].rationale})]})]})]})},i1={version:"1.0.0",schema:"who-2022-thoracic",entities:{tuberculosis:{category:"infectious",patterns:[{keyword:"caseous",description:"caseating necrosis"},{keyword:"langhans",description:"Langhans giant cells"}],cells:["epithelioid histiocytes","Langhans giant cells","lymphocytes"],difficulty:"advanced",tags:["mycobacterial","caseating","necrosis"],teachingPoint:"Caseating granulomas with central necrosis suggest mycobacterial infection (e.g., TB).",caseContext:"Tuberculosis typically shows caseating granulomas with Langhans giant cells. AFB staining may reveal acid-fast bacilli."},histoplasmosis:{category:"infectious",patterns:[{keyword:"yeast",description:"intracellular yeast forms"}],cells:["epithelioid histiocytes","intracellular yeast","macrophages"],difficulty:"advanced",tags:["fungal","dimorphic","yeast"],teachingPoint:"Small intracellular yeast forms with narrow-based budding are characteristic of histoplasmosis.",caseContext:"Histoplasmosis granulomas contain small yeast forms within macrophages. GMS or PAS staining highlights the organisms."},sarcoidosis:{category:"noninfectious",patterns:[{keyword:"noncaseating",description:"noncaseating granulomas"}],cells:["epithelioid histiocytes","asteroid bodies (sometimes)","lymphocytes"],difficulty:"intermediate",tags:["noncaseating","systemic","asteroid"],teachingPoint:"Noncaseating granulomas in the appropriate clinical setting support sarcoidosis.",caseContext:"Sarcoidosis features well-formed noncaseating granulomas. Asteroid bodies may be seen but are not specific."},rheumatoid:{category:"autoimmune",patterns:[{keyword:"necrobiotic",description:"necrobiotic granulomas"}],cells:["histiocytes","fibroblasts","lymphocytes"],difficulty:"intermediate",tags:["autoimmune","necrobiotic","rheumatoid"],teachingPoint:"Rheumatoid nodules show central necrobiotic material surrounded by palisading histiocytes.",caseContext:"Rheumatoid lung nodules demonstrate necrobiotic granulomas with a fibrinoid center and palisading histiocytes."}},stainRoles:{"H&E":"general morphology",GMS:"highlight fungal cell walls",PAS:"highlight fungal cell walls and mucin",AFB:"highlight mycobacterial organisms",Polarized:"reveal polarizable foreign material"},difficultyLevels:{beginner:"Classic presentations with obvious diagnostic features",intermediate:"Moderate diagnostic complexity, requires pattern recognition",advanced:"Subtle findings, mimics, or rare presentations"},caseTypes:{classic:"Classic textbook presentation of the disease",atypical:"Unusual or variant presentation",mimic:"Presentation that mimics other conditions",complicated:"Case with additional complications or comorbidities"}},rs=i1;async function o1(e,t){if(e.entity&&e.difficulty)return e;const n=`
        You are an expert pathologist's assistant. Your task is to analyze the metadata of a histology image and classify it.
        The image title is: "${e.title}"
        The image description is: "${e.description}"
        
        Here is a list of known entities: ${Object.keys(rs.entities).join(", ")}.
        Here are the possible difficulty levels: ${Object.keys(rs.difficultyLevels).join(", ")}.

        Based on the title and description, determine the single most likely entity and the most appropriate difficulty level.
        Respond with a single JSON object with no markdown formatting. The format should be: {"entity": "the_best_entity", "difficulty": "the_best_difficulty"}.
        If you cannot determine the entity, respond with {"entity": null, "difficulty": "intermediate"}.
    `;try{const i=await t.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{responseMimeType:"application/json",responseSchema:{type:ae.OBJECT,properties:{entity:{type:ae.STRING,nullable:!0},difficulty:{type:ae.STRING}},required:["entity","difficulty"]}}}),o=JSON.parse(i.text.trim());return{...e,entity:o.entity||"unknown",difficulty:o.difficulty||"intermediate"}}catch(i){return console.warn(`AI metadata enrichment failed for image ${e.id}:`,i),{...e,entity:"unknown",difficulty:"intermediate"}}}async function s1(){console.log("Starting case mapping generation...");const e=new is({apiKey:void 0});let t=UC(),n=qp();const i=[...os(),...ss()],o=await Promise.all(i.map(f=>o1(f,e))),s={};for(const f of o){if(!f.entity||f.entity==="unknown")continue;const p=`${f.entity}_${f.difficulty}`;s[p]||(s[p]=[]),s[p].push(f)}let l=0,c=0,d=Object.keys(t.cases).length+1;for(const[f,p]of Object.entries(s)){const[m,h]=f.split("_"),g=Object.values(t.cases).find(C=>C.entity===m&&C.difficulty===h);if(g)g.updatedAt=new Date().toISOString(),t.cases[g.caseId]=g,c++;else{const C=`CASE${d.toString().padStart(3,"0")}`,S=rs.entities[m]||{},N={caseId:C,title:`${m.charAt(0).toUpperCase()+m.slice(1)} Case (${h})`,entity:m,category:S.category||"unknown",difficulty:h,caseType:"classic",description:S.teachingPoint||`Case demonstrating ${m} at a ${h} level.`,caseContext:S.caseContext||`Histologic features of ${m}.`,learningObjectives:[`Recognize histologic features of ${m}`,`Differentiate ${m} from other granulomatous diseases`],tags:S.tags||[m],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};t.cases[C]=N,l++,d++}}for(const f of Object.values(t.cases)){const p=o.filter(g=>g.entity===f.entity&&g.difficulty===f.difficulty),m=rs.entities[f.entity]||{},h={...f,images:p.map((g,C)=>({imageId:`${f.caseId}_IMG${(C+1).toString().padStart(3,"0")}`,path:g.src,stain:"H&E",caption:g.title,findings:m.cells||[]})),discussion:`This case demonstrates ${f.entity}. ${f.caseContext}`,teachingPoints:[f.description,`Key features include: ${(m.cells||[]).join(", ")||"granulomatous inflammation"}`],references:["WHO Classification of Thoracic Tumours, 5th Edition","Pathology of Granulomatous Diseases, Current Diagnostic Criteria"]};n.caseStudies[f.caseId]=h}return bC(t),FC(n),console.log(`Case mapping complete. ${l} created, ${c} updated. Total: ${Object.keys(t.cases).length}`),{casesCreated:l,casesUpdated:c,totalCases:Object.keys(t.cases).length}}const r1=()=>{const[e,t]=I.useState({}),[n,i]=I.useState(null),[o,s]=I.useState(!1),[l,c]=I.useState(null),[d,f]=I.useState(null);I.useEffect(()=>{t(BC())},[]);const p=g=>{i(n===g?null:g)},m=async()=>{s(!0),c(null),f(null);try{const g=await s1();c(`Case mapping complete. ${g.casesCreated} new cases created, ${g.casesUpdated} cases updated. A total of ${g.totalCases} cases are now in the library.`)}catch(g){console.error("Case generation failed",g),f(`Failed to generate cases: ${g.message}`)}finally{s(!1)}},h=Object.keys(e);return r.jsxs("div",{className:"animate-fade-in",children:[r.jsx(Ye,{title:"Admin Dashboard",subtitle:"Manage module data and user activity."}),r.jsxs(F,{children:[r.jsx("h2",{className:"text-xl font-semibold font-serif text-slate-800 mb-4",children:"Case Management"}),r.jsx("p",{className:"text-slate-600 text-sm mb-4",children:"Use the button below to automatically generate case studies. This process will:"}),r.jsxs("ul",{className:"list-disc list-inside text-sm text-slate-600 mb-6 space-y-1",children:[r.jsx("li",{children:"Scan all images in the Official and Community galleries."}),r.jsx("li",{children:"Use Gemini AI to analyze image titles and descriptions to determine the disease entity and difficulty."}),r.jsx("li",{children:"Group related images together to form new cases or update existing ones."}),r.jsx("li",{children:'Generate detailed case study data for the new "Case Library" section.'})]}),l&&r.jsx(ie,{type:"success",children:l}),d&&r.jsx(ie,{type:"error",children:d}),r.jsx("div",{className:"text-center mt-4",children:r.jsxs("button",{onClick:m,disabled:o,className:"bg-primary-600 text-white font-semibold py-2.5 px-6 rounded-lg hover:bg-primary-700 transition-colors disabled:bg-slate-400 flex items-center justify-center mx-auto",children:[r.jsx(bn,{className:"h-5 w-5 mr-2"}),o?"Generating Cases...":"Generate & Update Case Library"]})})]}),r.jsxs(F,{children:[r.jsx("h2",{className:"text-xl font-semibold font-serif text-slate-800 mb-4",children:"User Activity"}),r.jsxs("p",{className:"text-slate-600 text-sm mb-4",children:["Tracking responses from ",h.length," user(s). Click on a user to expand their activity log."]}),h.length===0?r.jsx("p",{className:"text-slate-500 text-center py-4",children:"No user data has been recorded yet."}):r.jsx("div",{className:"space-y-4",children:h.map(g=>r.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[r.jsxs("button",{onClick:()=>p(g),className:"w-full text-left p-4 bg-slate-50 hover:bg-slate-100 transition-colors flex justify-between items-center focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500","aria-expanded":n===g,"aria-controls":`user-data-${g}`,children:[r.jsx("span",{className:"font-semibold text-slate-800",children:g}),r.jsx("span",{className:`transform transition-transform duration-200 ${n===g?"rotate-180":""}`,children:r.jsx("svg",{className:"h-5 w-5 text-slate-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),n===g&&r.jsxs("div",{id:`user-data-${g}`,className:"p-4 sm:p-6 bg-white space-y-6",children:[Object.keys(e[g]).length===0&&r.jsx("p",{children:"No activity recorded for this user."}),e[g].Analysis&&r.jsx(ho,{title:"Analysis Phase Quiz",data:e[g].Analysis}),e[g].Evaluation&&r.jsx(ho,{title:"Evaluation Phase Quiz",data:{"Final Question":e[g].Evaluation}}),e[g].VisualChallenge&&r.jsx(ho,{title:"Visual Challenge",data:e[g].VisualChallenge}),e[g].DiagnosticPathway&&r.jsx(ho,{title:"Diagnostic Pathway",data:e[g].DiagnosticPathway}),e[g].AICaseGenerator&&r.jsx(l1,{title:"AI Case Generator",data:e[g].AICaseGenerator})]})]},g))})]})]})},ho=({title:e,data:t})=>r.jsxs(F,{className:"!shadow-md !mb-0 border border-slate-200 bg-slate-50/50",children:[r.jsx("h3",{className:"text-lg font-semibold font-serif text-slate-800 mb-4",children:e}),r.jsx("ul",{className:"space-y-4",children:Object.keys(t).map(n=>{const i=t[n];return r.jsxs("li",{className:"p-3 bg-white rounded-md border border-slate-200",children:[r.jsx("p",{className:"font-semibold text-sm text-slate-700",children:i.question}),r.jsxs("div",{className:"flex items-center mt-2",children:[i.isCorrect?r.jsx(Hi,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0"}):r.jsx(nn,{className:"h-5 w-5 text-red-500 mr-2 flex-shrink-0"}),r.jsxs("p",{className:"text-sm text-slate-600",children:["Answered: ",r.jsx("span",{className:"font-medium",children:i.selectedAnswer})]})]})]},n)})})]}),l1=({title:e,data:t})=>r.jsxs(F,{className:"!shadow-md !mb-0 border border-slate-200 bg-slate-50/50",children:[r.jsx("h3",{className:"text-lg font-semibold font-serif text-slate-800 mb-4",children:e}),r.jsx("div",{className:"space-y-6",children:t.map((n,i)=>r.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[r.jsxs("h4",{className:"font-semibold text-md text-slate-700 mb-3 pb-2 border-b",children:["Case #",i+1," - Diagnosis: ",r.jsx("span",{className:"font-bold",children:n.caseData.diagnosis})]}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("strong",{className:"text-slate-600",children:"Clinical:"})," ",r.jsx("p",{className:"text-slate-500 italic mt-1",children:n.caseData.clinicalHistory})]}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-slate-600",children:"User's Diagnosis:"})," ",r.jsx("p",{className:"text-slate-500 italic mt-1",children:n.userDx})]}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-slate-600",children:"AI Feedback:"})," ",r.jsx("p",{className:"text-slate-500 italic mt-1",children:n.feedback})]})]})]},i))})]}),a1=({isOpen:e,onClose:t,user:n})=>{const[i,o]=I.useState(""),[s,l]=I.useState(""),[c,d]=I.useState(""),[f,p]=I.useState(null),[m,h]=I.useState(null),g=C=>{if(C.preventDefault(),p(null),h(null),s!==c){p("New passwords do not match.");return}if(s.length<6){p("New password must be at least 6 characters long.");return}try{Tg(n.username,i,s),h("Password changed successfully!"),o(""),l(""),d(""),setTimeout(()=>{t(),h(null)},2e3)}catch(S){p(S.message)}};return e?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 animate-fade-in","aria-labelledby":"change-password-title",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"relative bg-white w-full max-w-md m-4 p-8 rounded-2xl shadow-2xl",role:"document",children:[r.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-slate-500 hover:text-slate-800","aria-label":"Close modal",children:r.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsxs("div",{className:"flex items-center mb-6",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center mr-4",children:r.jsx(sa,{className:"h-6 w-6 text-primary-600"})}),r.jsx("h2",{id:"change-password-title",className:"text-2xl font-bold font-serif text-slate-800",children:"Change Password"})]}),f&&r.jsx("div",{className:"mb-4",children:r.jsx(ie,{type:"error",children:f})}),m&&r.jsx("div",{className:"mb-4",children:r.jsx(ie,{type:"success",children:m})}),r.jsxs("form",{onSubmit:g,className:"space-y-5",children:[r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"current-password",className:"sr-only",children:"Current Password"}),r.jsx(_n,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),r.jsx("input",{id:"current-password",type:"password",value:i,onChange:C=>o(C.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-400 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Current Password",required:!0})]}),r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"new-password",className:"sr-only",children:"New Password"}),r.jsx(_n,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),r.jsx("input",{id:"new-password",type:"password",value:s,onChange:C=>l(C.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-400 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"New Password",required:!0})]}),r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm New Password"}),r.jsx(_n,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),r.jsx("input",{id:"confirm-password",type:"password",value:c,onChange:C=>d(C.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-400 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Confirm New Password",required:!0})]}),r.jsx("button",{type:"submit",className:"w-full bg-primary-600 text-white font-semibold py-2.5 px-5 rounded-lg hover:bg-primary-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 transition-all duration-200 shadow-sm hover:shadow-md",children:"Update Password"})]})]})}):null},u1=({user:e,onLogout:t})=>{const{currentSection:n,handleSectionChange:i}=Ig(e.username),[o,s]=I.useState(!1),[l,c]=I.useState(!1),d=p=>{i(p),s(!1)},f=()=>{switch(n){case U.HOME:return r.jsx(Nu,{onSectionChange:d});case U.JOB_AID:return r.jsx(MC,{});case U.CASE_STUDY:return r.jsx(DC,{});case U.CASE_LIBRARY:return r.jsx(jC,{user:e});case U.VISUAL_CHALLENGE:return r.jsx(qC,{user:e});case U.DIAGNOSTIC_PATHWAY:return r.jsx(JC,{user:e});case U.AI_CASE_GENERATOR:return r.jsx(WC,{user:e});case U.IMAGE_GALLERIES:return r.jsx(KC,{user:e});case U.ANALYSIS:return r.jsx(QC,{user:e});case U.DESIGN:return r.jsx(XC,{});case U.DEVELOPMENT:return r.jsx(e1,{});case U.EVALUATION:return r.jsx(n1,{user:e});case U.ADMIN:return r.jsx(r1,{});default:return r.jsx(Nu,{onSectionChange:d})}};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex",children:[r.jsxs("div",{className:`fixed inset-0 z-30 transition-transform transform ${o?"translate-x-0":"-translate-x-full"} md:hidden`,children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>s(!1)}),r.jsx("div",{className:"relative w-72 h-full",children:r.jsx(Eu,{user:e,onLogout:t,currentSection:n,onSectionChange:d,onChangePasswordClick:()=>c(!0),className:"h-full"})})]}),r.jsx(Eu,{user:e,onLogout:t,currentSection:n,onSectionChange:d,onChangePasswordClick:()=>c(!0),className:"hidden md:block w-72 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[r.jsx(Jg,{currentSection:n,onMenuClick:()=>s(!0)}),r.jsx("main",{className:"p-4 sm:p-6 md:p-8 lg:p-12 flex-1",children:f()})]})]}),r.jsx(a1,{user:e,isOpen:l,onClose:()=>c(!1)})]})},c1=()=>{const{currentUser:e,login:t,signup:n,logout:i,isLoading:o}=Ng();return o?r.jsx("div",{className:"min-h-screen bg-slate-100"}):r.jsx("div",{className:"min-h-screen bg-slate-50 text-slate-800",children:e?r.jsx(u1,{user:e,onLogout:i}):r.jsx($g,{onLogin:t,onSignup:n})})},Jp=document.getElementById("root");if(!Jp)throw new Error("Could not find root element to mount to");const d1=rr.createRoot(Jp);d1.render(r.jsx(rd.StrictMode,{children:r.jsx(c1,{})}));
