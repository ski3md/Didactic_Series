(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function Np(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Dc={exports:{}},ji={},Lc={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Do=Symbol.for("react.element"),Ap=Symbol.for("react.portal"),Ip=Symbol.for("react.fragment"),kp=Symbol.for("react.strict_mode"),Pp=Symbol.for("react.profiler"),Rp=Symbol.for("react.provider"),Mp=Symbol.for("react.context"),Dp=Symbol.for("react.forward_ref"),Lp=Symbol.for("react.suspense"),Up=Symbol.for("react.memo"),Fp=Symbol.for("react.lazy"),Xl=Symbol.iterator;function Vp(e){return e===null||typeof e!="object"?null:(e=Xl&&e[Xl]||e["@@iterator"],typeof e=="function"?e:null)}var Uc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fc=Object.assign,Vc={};function Un(e,t,n){this.props=e,this.context=t,this.refs=Vc,this.updater=n||Uc}Un.prototype.isReactComponent={};Un.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Un.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Gc(){}Gc.prototype=Un.prototype;function Ys(e,t,n){this.props=e,this.context=t,this.refs=Vc,this.updater=n||Uc}var Ks=Ys.prototype=new Gc;Ks.constructor=Ys;Fc(Ks,Un.prototype);Ks.isPureReactComponent=!0;var Zl=Array.isArray,qc=Object.prototype.hasOwnProperty,Qs={current:null},bc={key:!0,ref:!0,__self:!0,__source:!0};function Hc(e,t,n){var o,i={},r=null,s=null;if(t!=null)for(o in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(r=""+t.key),t)qc.call(t,o)&&!bc.hasOwnProperty(o)&&(i[o]=t[o]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(o in u=e.defaultProps,u)i[o]===void 0&&(i[o]=u[o]);return{$$typeof:Do,type:e,key:r,ref:s,props:i,_owner:Qs.current}}function Gp(e,t){return{$$typeof:Do,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function js(e){return typeof e=="object"&&e!==null&&e.$$typeof===Do}function qp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ea=/\/+/g;function xr(e,t){return typeof e=="object"&&e!==null&&e.key!=null?qp(""+e.key):t.toString(36)}function ci(e,t,n,o,i){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(r){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Do:case Ap:s=!0}}if(s)return s=e,i=i(s),e=o===""?"."+xr(s,0):o,Zl(i)?(n="",e!=null&&(n=e.replace(ea,"$&/")+"/"),ci(i,t,n,"",function(d){return d})):i!=null&&(js(i)&&(i=Gp(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(ea,"$&/")+"/")+e)),t.push(i)),1;if(s=0,o=o===""?".":o+":",Zl(e))for(var u=0;u<e.length;u++){r=e[u];var c=o+xr(r,u);s+=ci(r,t,n,c,i)}else if(c=Vp(e),typeof c=="function")for(e=c.call(e),u=0;!(r=e.next()).done;)r=r.value,c=o+xr(r,u++),s+=ci(r,t,n,c,i);else if(r==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function $o(e,t,n){if(e==null)return e;var o=[],i=0;return ci(e,o,"","",function(r){return t.call(n,r,i++)}),o}function bp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ce={current:null},di={transition:null},Hp={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:di,ReactCurrentOwner:Qs};function Bc(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:$o,forEach:function(e,t,n){$o(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return $o(e,function(){t++}),t},toArray:function(e){return $o(e,function(t){return t})||[]},only:function(e){if(!js(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};G.Component=Un;G.Fragment=Ip;G.Profiler=Pp;G.PureComponent=Ys;G.StrictMode=kp;G.Suspense=Lp;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hp;G.act=Bc;G.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=Fc({},e.props),i=e.key,r=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,s=Qs.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)qc.call(t,c)&&!bc.hasOwnProperty(c)&&(o[c]=t[c]===void 0&&u!==void 0?u[c]:t[c])}var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:Do,type:e.type,key:i,ref:r,props:o,_owner:s}};G.createContext=function(e){return e={$$typeof:Mp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Rp,_context:e},e.Consumer=e};G.createElement=Hc;G.createFactory=function(e){var t=Hc.bind(null,e);return t.type=e,t};G.createRef=function(){return{current:null}};G.forwardRef=function(e){return{$$typeof:Dp,render:e}};G.isValidElement=js;G.lazy=function(e){return{$$typeof:Fp,_payload:{_status:-1,_result:e},_init:bp}};G.memo=function(e,t){return{$$typeof:Up,type:e,compare:t===void 0?null:t}};G.startTransition=function(e){var t=di.transition;di.transition={};try{e()}finally{di.transition=t}};G.unstable_act=Bc;G.useCallback=function(e,t){return Ce.current.useCallback(e,t)};G.useContext=function(e){return Ce.current.useContext(e)};G.useDebugValue=function(){};G.useDeferredValue=function(e){return Ce.current.useDeferredValue(e)};G.useEffect=function(e,t){return Ce.current.useEffect(e,t)};G.useId=function(){return Ce.current.useId()};G.useImperativeHandle=function(e,t,n){return Ce.current.useImperativeHandle(e,t,n)};G.useInsertionEffect=function(e,t){return Ce.current.useInsertionEffect(e,t)};G.useLayoutEffect=function(e,t){return Ce.current.useLayoutEffect(e,t)};G.useMemo=function(e,t){return Ce.current.useMemo(e,t)};G.useReducer=function(e,t,n){return Ce.current.useReducer(e,t,n)};G.useRef=function(e){return Ce.current.useRef(e)};G.useState=function(e){return Ce.current.useState(e)};G.useSyncExternalStore=function(e,t,n){return Ce.current.useSyncExternalStore(e,t,n)};G.useTransition=function(){return Ce.current.useTransition()};G.version="18.3.1";Lc.exports=G;var L=Lc.exports;const zc=Np(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bp=L,zp=Symbol.for("react.element"),Jp=Symbol.for("react.fragment"),$p=Object.prototype.hasOwnProperty,Wp=Bp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Op={key:!0,ref:!0,__self:!0,__source:!0};function Jc(e,t,n){var o,i={},r=null,s=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(s=t.ref);for(o in t)$p.call(t,o)&&!Op.hasOwnProperty(o)&&(i[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)i[o]===void 0&&(i[o]=t[o]);return{$$typeof:zp,type:e,key:r,ref:s,props:i,_owner:Wp.current}}ji.Fragment=Jp;ji.jsx=Jc;ji.jsxs=Jc;Dc.exports=ji;var f=Dc.exports,Wr={},$c={exports:{}},De={},Wc={exports:{}},Oc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,F){var V=M.length;M.push(F);e:for(;0<V;){var ee=V-1>>>1,re=M[ee];if(0<i(re,F))M[ee]=F,M[V]=re,V=ee;else break e}}function n(M){return M.length===0?null:M[0]}function o(M){if(M.length===0)return null;var F=M[0],V=M.pop();if(V!==F){M[0]=V;e:for(var ee=0,re=M.length,zo=re>>>1;ee<zo;){var Ft=2*(ee+1)-1,vr=M[Ft],Vt=Ft+1,Jo=M[Vt];if(0>i(vr,V))Vt<re&&0>i(Jo,vr)?(M[ee]=Jo,M[Vt]=V,ee=Vt):(M[ee]=vr,M[Ft]=V,ee=Ft);else if(Vt<re&&0>i(Jo,V))M[ee]=Jo,M[Vt]=V,ee=Vt;else break e}}return F}function i(M,F){var V=M.sortIndex-F.sortIndex;return V!==0?V:M.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var c=[],d=[],p=1,m=null,h=3,x=!1,C=!1,T=!1,N=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(M){for(var F=n(d);F!==null;){if(F.callback===null)o(d);else if(F.startTime<=M)o(d),F.sortIndex=F.expirationTime,t(c,F);else break;F=n(d)}}function w(M){if(T=!1,v(M),!C)if(n(c)!==null)C=!0,Ae(_);else{var F=n(d);F!==null&&Ut(w,F.startTime-M)}}function _(M,F){C=!1,T&&(T=!1,y(I),I=-1),x=!0;var V=h;try{for(v(F),m=n(c);m!==null&&(!(m.expirationTime>F)||M&&!J());){var ee=m.callback;if(typeof ee=="function"){m.callback=null,h=m.priorityLevel;var re=ee(m.expirationTime<=F);F=e.unstable_now(),typeof re=="function"?m.callback=re:m===n(c)&&o(c),v(F)}else o(c);m=n(c)}if(m!==null)var zo=!0;else{var Ft=n(d);Ft!==null&&Ut(w,Ft.startTime-F),zo=!1}return zo}finally{m=null,h=V,x=!1}}var S=!1,E=null,I=-1,k=5,R=-1;function J(){return!(e.unstable_now()-R<k)}function z(){if(E!==null){var M=e.unstable_now();R=M;var F=!0;try{F=E(!0,M)}finally{F?fe():(S=!1,E=null)}}else S=!1}var fe;if(typeof g=="function")fe=function(){g(z)};else if(typeof MessageChannel<"u"){var Hn=new MessageChannel,Bo=Hn.port2;Hn.port1.onmessage=z,fe=function(){Bo.postMessage(null)}}else fe=function(){N(z,0)};function Ae(M){E=M,S||(S=!0,fe())}function Ut(M,F){I=N(function(){M(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){C||x||(C=!0,Ae(_))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(M){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var V=h;h=F;try{return M()}finally{h=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,F){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var V=h;h=M;try{return F()}finally{h=V}},e.unstable_scheduleCallback=function(M,F,V){var ee=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ee+V:ee):V=ee,M){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=V+re,M={id:p++,callback:F,priorityLevel:M,startTime:V,expirationTime:re,sortIndex:-1},V>ee?(M.sortIndex=V,t(d,M),n(c)===null&&M===n(d)&&(T?(y(I),I=-1):T=!0,Ut(w,V-ee))):(M.sortIndex=re,t(c,M),C||x||(C=!0,Ae(_))),M},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(M){var F=h;return function(){var V=h;h=F;try{return M.apply(this,arguments)}finally{h=V}}}})(Oc);Wc.exports=Oc;var Yp=Wc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kp=L,Me=Yp;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yc=new Set,ho={};function Zt(e,t){An(e,t),An(e+"Capture",t)}function An(e,t){for(ho[e]=t,e=0;e<t.length;e++)Yc.add(t[e])}var lt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Or=Object.prototype.hasOwnProperty,Qp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ta={},na={};function jp(e){return Or.call(na,e)?!0:Or.call(ta,e)?!1:Qp.test(e)?na[e]=!0:(ta[e]=!0,!1)}function Xp(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Zp(e,t,n,o){if(t===null||typeof t>"u"||Xp(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Te(e,t,n,o,i,r,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=s}var de={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){de[e]=new Te(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];de[t]=new Te(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){de[e]=new Te(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){de[e]=new Te(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){de[e]=new Te(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){de[e]=new Te(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){de[e]=new Te(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){de[e]=new Te(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){de[e]=new Te(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xs=/[\-:]([a-z])/g;function Zs(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xs,Zs);de[t]=new Te(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xs,Zs);de[t]=new Te(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xs,Zs);de[t]=new Te(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){de[e]=new Te(e,1,!1,e.toLowerCase(),null,!1,!1)});de.xlinkHref=new Te("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){de[e]=new Te(e,1,!1,e.toLowerCase(),null,!0,!0)});function el(e,t,n,o){var i=de.hasOwnProperty(t)?de[t]:null;(i!==null?i.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Zp(t,n,i,o)&&(n=null),o||i===null?jp(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,o=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var dt=Kp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wo=Symbol.for("react.element"),on=Symbol.for("react.portal"),rn=Symbol.for("react.fragment"),tl=Symbol.for("react.strict_mode"),Yr=Symbol.for("react.profiler"),Kc=Symbol.for("react.provider"),Qc=Symbol.for("react.context"),nl=Symbol.for("react.forward_ref"),Kr=Symbol.for("react.suspense"),Qr=Symbol.for("react.suspense_list"),ol=Symbol.for("react.memo"),ht=Symbol.for("react.lazy"),jc=Symbol.for("react.offscreen"),oa=Symbol.iterator;function Bn(e){return e===null||typeof e!="object"?null:(e=oa&&e[oa]||e["@@iterator"],typeof e=="function"?e:null)}var X=Object.assign,Cr;function Zn(e){if(Cr===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Cr=t&&t[1]||""}return`
`+Cr+e}var Tr=!1;function wr(e,t){if(!e||Tr)return"";Tr=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var o=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){o=d}e.call(t.prototype)}else{try{throw Error()}catch(d){o=d}e()}}catch(d){if(d&&o&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),r=o.stack.split(`
`),s=i.length-1,u=r.length-1;1<=s&&0<=u&&i[s]!==r[u];)u--;for(;1<=s&&0<=u;s--,u--)if(i[s]!==r[u]){if(s!==1||u!==1)do if(s--,u--,0>u||i[s]!==r[u]){var c=`
`+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=u);break}}}finally{Tr=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Zn(e):""}function em(e){switch(e.tag){case 5:return Zn(e.type);case 16:return Zn("Lazy");case 13:return Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 2:case 15:return e=wr(e.type,!1),e;case 11:return e=wr(e.type.render,!1),e;case 1:return e=wr(e.type,!0),e;default:return""}}function jr(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case rn:return"Fragment";case on:return"Portal";case Yr:return"Profiler";case tl:return"StrictMode";case Kr:return"Suspense";case Qr:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qc:return(e.displayName||"Context")+".Consumer";case Kc:return(e._context.displayName||"Context")+".Provider";case nl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ol:return t=e.displayName||null,t!==null?t:jr(e.type)||"Memo";case ht:t=e._payload,e=e._init;try{return jr(e(t))}catch{}}return null}function tm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jr(t);case 8:return t===tl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nm(e){var t=Xc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){o=""+s,r.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(s){o=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Oo(e){e._valueTracker||(e._valueTracker=nm(e))}function Zc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=Xc(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function _i(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xr(e,t){var n=t.checked;return X({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ia(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=kt(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ed(e,t){t=t.checked,t!=null&&el(e,"checked",t,!1)}function Zr(e,t){ed(e,t);var n=kt(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?es(e,t.type,n):t.hasOwnProperty("defaultValue")&&es(e,t.type,kt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ra(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function es(e,t,n){(t!=="number"||_i(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var eo=Array.isArray;function yn(e,t,n,o){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&o&&(e[n].defaultSelected=!0)}else{for(n=""+kt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,o&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ts(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return X({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sa(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(A(92));if(eo(n)){if(1<n.length)throw Error(A(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:kt(n)}}function td(e,t){var n=kt(t.value),o=kt(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function la(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ns(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yo,od=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yo=Yo||document.createElement("div"),Yo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function go(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var io={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},om=["Webkit","ms","Moz","O"];Object.keys(io).forEach(function(e){om.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),io[t]=io[e]})});function id(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||io.hasOwnProperty(e)&&io[e]?(""+t).trim():t+"px"}function rd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,i=id(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,i):e[n]=i}}var im=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function os(e,t){if(t){if(im[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function is(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rs=null;function il(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ss=null,vn=null,xn=null;function aa(e){if(e=Fo(e)){if(typeof ss!="function")throw Error(A(280));var t=e.stateNode;t&&(t=nr(t),ss(e.stateNode,e.type,t))}}function sd(e){vn?xn?xn.push(e):xn=[e]:vn=e}function ld(){if(vn){var e=vn,t=xn;if(xn=vn=null,aa(e),t)for(e=0;e<t.length;e++)aa(t[e])}}function ad(e,t){return e(t)}function ud(){}var Sr=!1;function cd(e,t,n){if(Sr)return e(t,n);Sr=!0;try{return ad(e,t,n)}finally{Sr=!1,(vn!==null||xn!==null)&&(ud(),ld())}}function yo(e,t){var n=e.stateNode;if(n===null)return null;var o=nr(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(A(231,t,typeof n));return n}var ls=!1;if(lt)try{var zn={};Object.defineProperty(zn,"passive",{get:function(){ls=!0}}),window.addEventListener("test",zn,zn),window.removeEventListener("test",zn,zn)}catch{ls=!1}function rm(e,t,n,o,i,r,s,u,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(p){this.onError(p)}}var ro=!1,Ei=null,Ni=!1,as=null,sm={onError:function(e){ro=!0,Ei=e}};function lm(e,t,n,o,i,r,s,u,c){ro=!1,Ei=null,rm.apply(sm,arguments)}function am(e,t,n,o,i,r,s,u,c){if(lm.apply(this,arguments),ro){if(ro){var d=Ei;ro=!1,Ei=null}else throw Error(A(198));Ni||(Ni=!0,as=d)}}function en(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ua(e){if(en(e)!==e)throw Error(A(188))}function um(e){var t=e.alternate;if(!t){if(t=en(e),t===null)throw Error(A(188));return t!==e?null:e}for(var n=e,o=t;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(o=i.return,o!==null){n=o;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return ua(i),e;if(r===o)return ua(i),t;r=r.sibling}throw Error(A(188))}if(n.return!==o.return)n=i,o=r;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,o=r;break}if(u===o){s=!0,o=i,n=r;break}u=u.sibling}if(!s){for(u=r.child;u;){if(u===n){s=!0,n=r,o=i;break}if(u===o){s=!0,o=r,n=i;break}u=u.sibling}if(!s)throw Error(A(189))}}if(n.alternate!==o)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?e:t}function fd(e){return e=um(e),e!==null?pd(e):null}function pd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=pd(e);if(t!==null)return t;e=e.sibling}return null}var md=Me.unstable_scheduleCallback,ca=Me.unstable_cancelCallback,cm=Me.unstable_shouldYield,dm=Me.unstable_requestPaint,te=Me.unstable_now,fm=Me.unstable_getCurrentPriorityLevel,rl=Me.unstable_ImmediatePriority,hd=Me.unstable_UserBlockingPriority,Ai=Me.unstable_NormalPriority,pm=Me.unstable_LowPriority,gd=Me.unstable_IdlePriority,Xi=null,Ze=null;function mm(e){if(Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(Xi,e,void 0,(e.current.flags&128)===128)}catch{}}var We=Math.clz32?Math.clz32:ym,hm=Math.log,gm=Math.LN2;function ym(e){return e>>>=0,e===0?32:31-(hm(e)/gm|0)|0}var Ko=64,Qo=4194304;function to(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ii(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,i=e.suspendedLanes,r=e.pingedLanes,s=n&268435455;if(s!==0){var u=s&~i;u!==0?o=to(u):(r&=s,r!==0&&(o=to(r)))}else s=n&~i,s!==0?o=to(s):r!==0&&(o=to(r));if(o===0)return 0;if(t!==0&&t!==o&&!(t&i)&&(i=o&-o,r=t&-t,i>=r||i===16&&(r&4194240)!==0))return t;if(o&4&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-We(t),i=1<<n,o|=e[n],t&=~i;return o}function vm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xm(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,i=e.expirationTimes,r=e.pendingLanes;0<r;){var s=31-We(r),u=1<<s,c=i[s];c===-1?(!(u&n)||u&o)&&(i[s]=vm(u,t)):c<=t&&(e.expiredLanes|=u),r&=~u}}function us(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yd(){var e=Ko;return Ko<<=1,!(Ko&4194240)&&(Ko=64),e}function _r(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Lo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-We(t),e[t]=n}function Cm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-We(n),r=1<<i;t[i]=0,o[i]=-1,e[i]=-1,n&=~r}}function sl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-We(n),i=1<<o;i&t|e[o]&t&&(e[o]|=t),n&=~i}}var B=0;function vd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xd,ll,Cd,Td,wd,cs=!1,jo=[],Tt=null,wt=null,St=null,vo=new Map,xo=new Map,yt=[],Tm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function da(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":wt=null;break;case"mouseover":case"mouseout":St=null;break;case"pointerover":case"pointerout":vo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xo.delete(t.pointerId)}}function Jn(e,t,n,o,i,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:r,targetContainers:[i]},t!==null&&(t=Fo(t),t!==null&&ll(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function wm(e,t,n,o,i){switch(t){case"focusin":return Tt=Jn(Tt,e,t,n,o,i),!0;case"dragenter":return wt=Jn(wt,e,t,n,o,i),!0;case"mouseover":return St=Jn(St,e,t,n,o,i),!0;case"pointerover":var r=i.pointerId;return vo.set(r,Jn(vo.get(r)||null,e,t,n,o,i)),!0;case"gotpointercapture":return r=i.pointerId,xo.set(r,Jn(xo.get(r)||null,e,t,n,o,i)),!0}return!1}function Sd(e){var t=Bt(e.target);if(t!==null){var n=en(t);if(n!==null){if(t=n.tag,t===13){if(t=dd(n),t!==null){e.blockedOn=t,wd(e.priority,function(){Cd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ds(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);rs=o,n.target.dispatchEvent(o),rs=null}else return t=Fo(n),t!==null&&ll(t),e.blockedOn=n,!1;t.shift()}return!0}function fa(e,t,n){fi(e)&&n.delete(t)}function Sm(){cs=!1,Tt!==null&&fi(Tt)&&(Tt=null),wt!==null&&fi(wt)&&(wt=null),St!==null&&fi(St)&&(St=null),vo.forEach(fa),xo.forEach(fa)}function $n(e,t){e.blockedOn===t&&(e.blockedOn=null,cs||(cs=!0,Me.unstable_scheduleCallback(Me.unstable_NormalPriority,Sm)))}function Co(e){function t(i){return $n(i,e)}if(0<jo.length){$n(jo[0],e);for(var n=1;n<jo.length;n++){var o=jo[n];o.blockedOn===e&&(o.blockedOn=null)}}for(Tt!==null&&$n(Tt,e),wt!==null&&$n(wt,e),St!==null&&$n(St,e),vo.forEach(t),xo.forEach(t),n=0;n<yt.length;n++)o=yt[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<yt.length&&(n=yt[0],n.blockedOn===null);)Sd(n),n.blockedOn===null&&yt.shift()}var Cn=dt.ReactCurrentBatchConfig,ki=!0;function _m(e,t,n,o){var i=B,r=Cn.transition;Cn.transition=null;try{B=1,al(e,t,n,o)}finally{B=i,Cn.transition=r}}function Em(e,t,n,o){var i=B,r=Cn.transition;Cn.transition=null;try{B=4,al(e,t,n,o)}finally{B=i,Cn.transition=r}}function al(e,t,n,o){if(ki){var i=ds(e,t,n,o);if(i===null)Lr(e,t,o,Pi,n),da(e,o);else if(wm(i,e,t,n,o))o.stopPropagation();else if(da(e,o),t&4&&-1<Tm.indexOf(e)){for(;i!==null;){var r=Fo(i);if(r!==null&&xd(r),r=ds(e,t,n,o),r===null&&Lr(e,t,o,Pi,n),r===i)break;i=r}i!==null&&o.stopPropagation()}else Lr(e,t,o,null,n)}}var Pi=null;function ds(e,t,n,o){if(Pi=null,e=il(o),e=Bt(e),e!==null)if(t=en(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Pi=e,null}function _d(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fm()){case rl:return 1;case hd:return 4;case Ai:case pm:return 16;case gd:return 536870912;default:return 16}default:return 16}}var xt=null,ul=null,pi=null;function Ed(){if(pi)return pi;var e,t=ul,n=t.length,o,i="value"in xt?xt.value:xt.textContent,r=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(o=1;o<=s&&t[n-o]===i[r-o];o++);return pi=i.slice(e,1<o?1-o:void 0)}function mi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xo(){return!0}function pa(){return!1}function Le(e){function t(n,o,i,r,s){this._reactName=n,this._targetInst=i,this.type=o,this.nativeEvent=r,this.target=s,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(r):r[u]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Xo:pa,this.isPropagationStopped=pa,this}return X(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),t}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cl=Le(Fn),Uo=X({},Fn,{view:0,detail:0}),Nm=Le(Uo),Er,Nr,Wn,Zi=X({},Uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wn&&(Wn&&e.type==="mousemove"?(Er=e.screenX-Wn.screenX,Nr=e.screenY-Wn.screenY):Nr=Er=0,Wn=e),Er)},movementY:function(e){return"movementY"in e?e.movementY:Nr}}),ma=Le(Zi),Am=X({},Zi,{dataTransfer:0}),Im=Le(Am),km=X({},Uo,{relatedTarget:0}),Ar=Le(km),Pm=X({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),Rm=Le(Pm),Mm=X({},Fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dm=Le(Mm),Lm=X({},Fn,{data:0}),ha=Le(Lm),Um={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vm[e])?!!t[e]:!1}function dl(){return Gm}var qm=X({},Uo,{key:function(e){if(e.key){var t=Um[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dl,charCode:function(e){return e.type==="keypress"?mi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bm=Le(qm),Hm=X({},Zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ga=Le(Hm),Bm=X({},Uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dl}),zm=Le(Bm),Jm=X({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$m=Le(Jm),Wm=X({},Zi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Om=Le(Wm),Ym=[9,13,27,32],fl=lt&&"CompositionEvent"in window,so=null;lt&&"documentMode"in document&&(so=document.documentMode);var Km=lt&&"TextEvent"in window&&!so,Nd=lt&&(!fl||so&&8<so&&11>=so),ya=String.fromCharCode(32),va=!1;function Ad(e,t){switch(e){case"keyup":return Ym.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Id(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sn=!1;function Qm(e,t){switch(e){case"compositionend":return Id(t);case"keypress":return t.which!==32?null:(va=!0,ya);case"textInput":return e=t.data,e===ya&&va?null:e;default:return null}}function jm(e,t){if(sn)return e==="compositionend"||!fl&&Ad(e,t)?(e=Ed(),pi=ul=xt=null,sn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nd&&t.locale!=="ko"?null:t.data;default:return null}}var Xm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Xm[e.type]:t==="textarea"}function kd(e,t,n,o){sd(o),t=Ri(t,"onChange"),0<t.length&&(n=new cl("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var lo=null,To=null;function Zm(e){bd(e,0)}function er(e){var t=un(e);if(Zc(t))return e}function eh(e,t){if(e==="change")return t}var Pd=!1;if(lt){var Ir;if(lt){var kr="oninput"in document;if(!kr){var Ca=document.createElement("div");Ca.setAttribute("oninput","return;"),kr=typeof Ca.oninput=="function"}Ir=kr}else Ir=!1;Pd=Ir&&(!document.documentMode||9<document.documentMode)}function Ta(){lo&&(lo.detachEvent("onpropertychange",Rd),To=lo=null)}function Rd(e){if(e.propertyName==="value"&&er(To)){var t=[];kd(t,To,e,il(e)),cd(Zm,t)}}function th(e,t,n){e==="focusin"?(Ta(),lo=t,To=n,lo.attachEvent("onpropertychange",Rd)):e==="focusout"&&Ta()}function nh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return er(To)}function oh(e,t){if(e==="click")return er(t)}function ih(e,t){if(e==="input"||e==="change")return er(t)}function rh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ye=typeof Object.is=="function"?Object.is:rh;function wo(e,t){if(Ye(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var i=n[o];if(!Or.call(t,i)||!Ye(e[i],t[i]))return!1}return!0}function wa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sa(e,t){var n=wa(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wa(n)}}function Md(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Md(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Dd(){for(var e=window,t=_i();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_i(e.document)}return t}function pl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function sh(e){var t=Dd(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Md(n.ownerDocument.documentElement,n)){if(o!==null&&pl(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,r=Math.min(o.start,i);o=o.end===void 0?r:Math.min(o.end,i),!e.extend&&r>o&&(i=o,o=r,r=i),i=Sa(n,r);var s=Sa(n,o);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),r>o?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lh=lt&&"documentMode"in document&&11>=document.documentMode,ln=null,fs=null,ao=null,ps=!1;function _a(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ps||ln==null||ln!==_i(o)||(o=ln,"selectionStart"in o&&pl(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ao&&wo(ao,o)||(ao=o,o=Ri(fs,"onSelect"),0<o.length&&(t=new cl("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=ln)))}function Zo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var an={animationend:Zo("Animation","AnimationEnd"),animationiteration:Zo("Animation","AnimationIteration"),animationstart:Zo("Animation","AnimationStart"),transitionend:Zo("Transition","TransitionEnd")},Pr={},Ld={};lt&&(Ld=document.createElement("div").style,"AnimationEvent"in window||(delete an.animationend.animation,delete an.animationiteration.animation,delete an.animationstart.animation),"TransitionEvent"in window||delete an.transitionend.transition);function tr(e){if(Pr[e])return Pr[e];if(!an[e])return e;var t=an[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ld)return Pr[e]=t[n];return e}var Ud=tr("animationend"),Fd=tr("animationiteration"),Vd=tr("animationstart"),Gd=tr("transitionend"),qd=new Map,Ea="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rt(e,t){qd.set(e,t),Zt(t,[e])}for(var Rr=0;Rr<Ea.length;Rr++){var Mr=Ea[Rr],ah=Mr.toLowerCase(),uh=Mr[0].toUpperCase()+Mr.slice(1);Rt(ah,"on"+uh)}Rt(Ud,"onAnimationEnd");Rt(Fd,"onAnimationIteration");Rt(Vd,"onAnimationStart");Rt("dblclick","onDoubleClick");Rt("focusin","onFocus");Rt("focusout","onBlur");Rt(Gd,"onTransitionEnd");An("onMouseEnter",["mouseout","mouseover"]);An("onMouseLeave",["mouseout","mouseover"]);An("onPointerEnter",["pointerout","pointerover"]);An("onPointerLeave",["pointerout","pointerover"]);Zt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zt("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ch=new Set("cancel close invalid load scroll toggle".split(" ").concat(no));function Na(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,am(o,t,void 0,e),e.currentTarget=null}function bd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],i=o.event;o=o.listeners;e:{var r=void 0;if(t)for(var s=o.length-1;0<=s;s--){var u=o[s],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==r&&i.isPropagationStopped())break e;Na(i,u,d),r=c}else for(s=0;s<o.length;s++){if(u=o[s],c=u.instance,d=u.currentTarget,u=u.listener,c!==r&&i.isPropagationStopped())break e;Na(i,u,d),r=c}}}if(Ni)throw e=as,Ni=!1,as=null,e}function W(e,t){var n=t[vs];n===void 0&&(n=t[vs]=new Set);var o=e+"__bubble";n.has(o)||(Hd(t,e,2,!1),n.add(o))}function Dr(e,t,n){var o=0;t&&(o|=4),Hd(n,e,o,t)}var ei="_reactListening"+Math.random().toString(36).slice(2);function So(e){if(!e[ei]){e[ei]=!0,Yc.forEach(function(n){n!=="selectionchange"&&(ch.has(n)||Dr(n,!1,e),Dr(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ei]||(t[ei]=!0,Dr("selectionchange",!1,t))}}function Hd(e,t,n,o){switch(_d(t)){case 1:var i=_m;break;case 4:i=Em;break;default:i=al}n=i.bind(null,t,n,e),i=void 0,!ls||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),o?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,o,i){var r=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var s=o.tag;if(s===3||s===4){var u=o.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(s===4)for(s=o.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;u!==null;){if(s=Bt(u),s===null)return;if(c=s.tag,c===5||c===6){o=r=s;continue e}u=u.parentNode}}o=o.return}cd(function(){var d=r,p=il(n),m=[];e:{var h=qd.get(e);if(h!==void 0){var x=cl,C=e;switch(e){case"keypress":if(mi(n)===0)break e;case"keydown":case"keyup":x=bm;break;case"focusin":C="focus",x=Ar;break;case"focusout":C="blur",x=Ar;break;case"beforeblur":case"afterblur":x=Ar;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=ma;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Im;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=zm;break;case Ud:case Fd:case Vd:x=Rm;break;case Gd:x=$m;break;case"scroll":x=Nm;break;case"wheel":x=Om;break;case"copy":case"cut":case"paste":x=Dm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=ga}var T=(t&4)!==0,N=!T&&e==="scroll",y=T?h!==null?h+"Capture":null:h;T=[];for(var g=d,v;g!==null;){v=g;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,y!==null&&(w=yo(g,y),w!=null&&T.push(_o(g,w,v)))),N)break;g=g.return}0<T.length&&(h=new x(h,C,null,n,p),m.push({event:h,listeners:T}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==rs&&(C=n.relatedTarget||n.fromElement)&&(Bt(C)||C[at]))break e;if((x||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,x?(C=n.relatedTarget||n.toElement,x=d,C=C?Bt(C):null,C!==null&&(N=en(C),C!==N||C.tag!==5&&C.tag!==6)&&(C=null)):(x=null,C=d),x!==C)){if(T=ma,w="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(T=ga,w="onPointerLeave",y="onPointerEnter",g="pointer"),N=x==null?h:un(x),v=C==null?h:un(C),h=new T(w,g+"leave",x,n,p),h.target=N,h.relatedTarget=v,w=null,Bt(p)===d&&(T=new T(y,g+"enter",C,n,p),T.target=v,T.relatedTarget=N,w=T),N=w,x&&C)t:{for(T=x,y=C,g=0,v=T;v;v=nn(v))g++;for(v=0,w=y;w;w=nn(w))v++;for(;0<g-v;)T=nn(T),g--;for(;0<v-g;)y=nn(y),v--;for(;g--;){if(T===y||y!==null&&T===y.alternate)break t;T=nn(T),y=nn(y)}T=null}else T=null;x!==null&&Aa(m,h,x,T,!1),C!==null&&N!==null&&Aa(m,N,C,T,!0)}}e:{if(h=d?un(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var _=eh;else if(xa(h))if(Pd)_=ih;else{_=nh;var S=th}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=oh);if(_&&(_=_(e,d))){kd(m,_,n,p);break e}S&&S(e,h,d),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&es(h,"number",h.value)}switch(S=d?un(d):window,e){case"focusin":(xa(S)||S.contentEditable==="true")&&(ln=S,fs=d,ao=null);break;case"focusout":ao=fs=ln=null;break;case"mousedown":ps=!0;break;case"contextmenu":case"mouseup":case"dragend":ps=!1,_a(m,n,p);break;case"selectionchange":if(lh)break;case"keydown":case"keyup":_a(m,n,p)}var E;if(fl)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else sn?Ad(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Nd&&n.locale!=="ko"&&(sn||I!=="onCompositionStart"?I==="onCompositionEnd"&&sn&&(E=Ed()):(xt=p,ul="value"in xt?xt.value:xt.textContent,sn=!0)),S=Ri(d,I),0<S.length&&(I=new ha(I,e,null,n,p),m.push({event:I,listeners:S}),E?I.data=E:(E=Id(n),E!==null&&(I.data=E)))),(E=Km?Qm(e,n):jm(e,n))&&(d=Ri(d,"onBeforeInput"),0<d.length&&(p=new ha("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=E))}bd(m,t)})}function _o(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ri(e,t){for(var n=t+"Capture",o=[];e!==null;){var i=e,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=yo(e,n),r!=null&&o.unshift(_o(e,r,i)),r=yo(e,t),r!=null&&o.push(_o(e,r,i))),e=e.return}return o}function nn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Aa(e,t,n,o,i){for(var r=t._reactName,s=[];n!==null&&n!==o;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===o)break;u.tag===5&&d!==null&&(u=d,i?(c=yo(n,r),c!=null&&s.unshift(_o(n,c,u))):i||(c=yo(n,r),c!=null&&s.push(_o(n,c,u)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var dh=/\r\n?/g,fh=/\u0000|\uFFFD/g;function Ia(e){return(typeof e=="string"?e:""+e).replace(dh,`
`).replace(fh,"")}function ti(e,t,n){if(t=Ia(t),Ia(e)!==t&&n)throw Error(A(425))}function Mi(){}var ms=null,hs=null;function gs(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ys=typeof setTimeout=="function"?setTimeout:void 0,ph=typeof clearTimeout=="function"?clearTimeout:void 0,ka=typeof Promise=="function"?Promise:void 0,mh=typeof queueMicrotask=="function"?queueMicrotask:typeof ka<"u"?function(e){return ka.resolve(null).then(e).catch(hh)}:ys;function hh(e){setTimeout(function(){throw e})}function Ur(e,t){var n=t,o=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(o===0){e.removeChild(i),Co(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=i}while(n);Co(t)}function _t(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pa(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Vn=Math.random().toString(36).slice(2),Xe="__reactFiber$"+Vn,Eo="__reactProps$"+Vn,at="__reactContainer$"+Vn,vs="__reactEvents$"+Vn,gh="__reactListeners$"+Vn,yh="__reactHandles$"+Vn;function Bt(e){var t=e[Xe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[at]||n[Xe]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Pa(e);e!==null;){if(n=e[Xe])return n;e=Pa(e)}return t}e=n,n=e.parentNode}return null}function Fo(e){return e=e[Xe]||e[at],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function un(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function nr(e){return e[Eo]||null}var xs=[],cn=-1;function Mt(e){return{current:e}}function Y(e){0>cn||(e.current=xs[cn],xs[cn]=null,cn--)}function $(e,t){cn++,xs[cn]=e.current,e.current=t}var Pt={},ye=Mt(Pt),_e=Mt(!1),Ot=Pt;function In(e,t){var n=e.type.contextTypes;if(!n)return Pt;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in n)i[r]=t[r];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ee(e){return e=e.childContextTypes,e!=null}function Di(){Y(_e),Y(ye)}function Ra(e,t,n){if(ye.current!==Pt)throw Error(A(168));$(ye,t),$(_e,n)}function Bd(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var i in o)if(!(i in t))throw Error(A(108,tm(e)||"Unknown",i));return X({},n,o)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pt,Ot=ye.current,$(ye,e),$(_e,_e.current),!0}function Ma(e,t,n){var o=e.stateNode;if(!o)throw Error(A(169));n?(e=Bd(e,t,Ot),o.__reactInternalMemoizedMergedChildContext=e,Y(_e),Y(ye),$(ye,e)):Y(_e),$(_e,n)}var nt=null,or=!1,Fr=!1;function zd(e){nt===null?nt=[e]:nt.push(e)}function vh(e){or=!0,zd(e)}function Dt(){if(!Fr&&nt!==null){Fr=!0;var e=0,t=B;try{var n=nt;for(B=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}nt=null,or=!1}catch(i){throw nt!==null&&(nt=nt.slice(e+1)),md(rl,Dt),i}finally{B=t,Fr=!1}}return null}var dn=[],fn=0,Ui=null,Fi=0,Ue=[],Fe=0,Yt=null,it=1,rt="";function bt(e,t){dn[fn++]=Fi,dn[fn++]=Ui,Ui=e,Fi=t}function Jd(e,t,n){Ue[Fe++]=it,Ue[Fe++]=rt,Ue[Fe++]=Yt,Yt=e;var o=it;e=rt;var i=32-We(o)-1;o&=~(1<<i),n+=1;var r=32-We(t)+i;if(30<r){var s=i-i%5;r=(o&(1<<s)-1).toString(32),o>>=s,i-=s,it=1<<32-We(t)+i|n<<i|o,rt=r+e}else it=1<<r|n<<i|o,rt=e}function ml(e){e.return!==null&&(bt(e,1),Jd(e,1,0))}function hl(e){for(;e===Ui;)Ui=dn[--fn],dn[fn]=null,Fi=dn[--fn],dn[fn]=null;for(;e===Yt;)Yt=Ue[--Fe],Ue[Fe]=null,rt=Ue[--Fe],Ue[Fe]=null,it=Ue[--Fe],Ue[Fe]=null}var Re=null,Pe=null,K=!1,$e=null;function $d(e,t){var n=Ve(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Da(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Re=e,Pe=_t(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Re=e,Pe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Yt!==null?{id:it,overflow:rt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ve(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Re=e,Pe=null,!0):!1;default:return!1}}function Cs(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ts(e){if(K){var t=Pe;if(t){var n=t;if(!Da(e,t)){if(Cs(e))throw Error(A(418));t=_t(n.nextSibling);var o=Re;t&&Da(e,t)?$d(o,n):(e.flags=e.flags&-4097|2,K=!1,Re=e)}}else{if(Cs(e))throw Error(A(418));e.flags=e.flags&-4097|2,K=!1,Re=e}}}function La(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Re=e}function ni(e){if(e!==Re)return!1;if(!K)return La(e),K=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!gs(e.type,e.memoizedProps)),t&&(t=Pe)){if(Cs(e))throw Wd(),Error(A(418));for(;t;)$d(e,t),t=_t(t.nextSibling)}if(La(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Pe=_t(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Pe=null}}else Pe=Re?_t(e.stateNode.nextSibling):null;return!0}function Wd(){for(var e=Pe;e;)e=_t(e.nextSibling)}function kn(){Pe=Re=null,K=!1}function gl(e){$e===null?$e=[e]:$e.push(e)}var xh=dt.ReactCurrentBatchConfig;function On(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var o=n.stateNode}if(!o)throw Error(A(147,e));var i=o,r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(s){var u=i.refs;s===null?delete u[r]:u[r]=s},t._stringRef=r,t)}if(typeof e!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,e))}return e}function oi(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ua(e){var t=e._init;return t(e._payload)}function Od(e){function t(y,g){if(e){var v=y.deletions;v===null?(y.deletions=[g],y.flags|=16):v.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function o(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=It(y,g),y.index=0,y.sibling=null,y}function r(y,g,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<g?(y.flags|=2,g):v):(y.flags|=2,g)):(y.flags|=1048576,g)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function u(y,g,v,w){return g===null||g.tag!==6?(g=zr(v,y.mode,w),g.return=y,g):(g=i(g,v),g.return=y,g)}function c(y,g,v,w){var _=v.type;return _===rn?p(y,g,v.props.children,w,v.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ht&&Ua(_)===g.type)?(w=i(g,v.props),w.ref=On(y,g,v),w.return=y,w):(w=Ti(v.type,v.key,v.props,null,y.mode,w),w.ref=On(y,g,v),w.return=y,w)}function d(y,g,v,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Jr(v,y.mode,w),g.return=y,g):(g=i(g,v.children||[]),g.return=y,g)}function p(y,g,v,w,_){return g===null||g.tag!==7?(g=Wt(v,y.mode,w,_),g.return=y,g):(g=i(g,v),g.return=y,g)}function m(y,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=zr(""+g,y.mode,v),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Wo:return v=Ti(g.type,g.key,g.props,null,y.mode,v),v.ref=On(y,null,g),v.return=y,v;case on:return g=Jr(g,y.mode,v),g.return=y,g;case ht:var w=g._init;return m(y,w(g._payload),v)}if(eo(g)||Bn(g))return g=Wt(g,y.mode,v,null),g.return=y,g;oi(y,g)}return null}function h(y,g,v,w){var _=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:u(y,g,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Wo:return v.key===_?c(y,g,v,w):null;case on:return v.key===_?d(y,g,v,w):null;case ht:return _=v._init,h(y,g,_(v._payload),w)}if(eo(v)||Bn(v))return _!==null?null:p(y,g,v,w,null);oi(y,v)}return null}function x(y,g,v,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(v)||null,u(g,y,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Wo:return y=y.get(w.key===null?v:w.key)||null,c(g,y,w,_);case on:return y=y.get(w.key===null?v:w.key)||null,d(g,y,w,_);case ht:var S=w._init;return x(y,g,v,S(w._payload),_)}if(eo(w)||Bn(w))return y=y.get(v)||null,p(g,y,w,_,null);oi(g,w)}return null}function C(y,g,v,w){for(var _=null,S=null,E=g,I=g=0,k=null;E!==null&&I<v.length;I++){E.index>I?(k=E,E=null):k=E.sibling;var R=h(y,E,v[I],w);if(R===null){E===null&&(E=k);break}e&&E&&R.alternate===null&&t(y,E),g=r(R,g,I),S===null?_=R:S.sibling=R,S=R,E=k}if(I===v.length)return n(y,E),K&&bt(y,I),_;if(E===null){for(;I<v.length;I++)E=m(y,v[I],w),E!==null&&(g=r(E,g,I),S===null?_=E:S.sibling=E,S=E);return K&&bt(y,I),_}for(E=o(y,E);I<v.length;I++)k=x(E,y,I,v[I],w),k!==null&&(e&&k.alternate!==null&&E.delete(k.key===null?I:k.key),g=r(k,g,I),S===null?_=k:S.sibling=k,S=k);return e&&E.forEach(function(J){return t(y,J)}),K&&bt(y,I),_}function T(y,g,v,w){var _=Bn(v);if(typeof _!="function")throw Error(A(150));if(v=_.call(v),v==null)throw Error(A(151));for(var S=_=null,E=g,I=g=0,k=null,R=v.next();E!==null&&!R.done;I++,R=v.next()){E.index>I?(k=E,E=null):k=E.sibling;var J=h(y,E,R.value,w);if(J===null){E===null&&(E=k);break}e&&E&&J.alternate===null&&t(y,E),g=r(J,g,I),S===null?_=J:S.sibling=J,S=J,E=k}if(R.done)return n(y,E),K&&bt(y,I),_;if(E===null){for(;!R.done;I++,R=v.next())R=m(y,R.value,w),R!==null&&(g=r(R,g,I),S===null?_=R:S.sibling=R,S=R);return K&&bt(y,I),_}for(E=o(y,E);!R.done;I++,R=v.next())R=x(E,y,I,R.value,w),R!==null&&(e&&R.alternate!==null&&E.delete(R.key===null?I:R.key),g=r(R,g,I),S===null?_=R:S.sibling=R,S=R);return e&&E.forEach(function(z){return t(y,z)}),K&&bt(y,I),_}function N(y,g,v,w){if(typeof v=="object"&&v!==null&&v.type===rn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Wo:e:{for(var _=v.key,S=g;S!==null;){if(S.key===_){if(_=v.type,_===rn){if(S.tag===7){n(y,S.sibling),g=i(S,v.props.children),g.return=y,y=g;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ht&&Ua(_)===S.type){n(y,S.sibling),g=i(S,v.props),g.ref=On(y,S,v),g.return=y,y=g;break e}n(y,S);break}else t(y,S);S=S.sibling}v.type===rn?(g=Wt(v.props.children,y.mode,w,v.key),g.return=y,y=g):(w=Ti(v.type,v.key,v.props,null,y.mode,w),w.ref=On(y,g,v),w.return=y,y=w)}return s(y);case on:e:{for(S=v.key;g!==null;){if(g.key===S)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(y,g.sibling),g=i(g,v.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else t(y,g);g=g.sibling}g=Jr(v,y.mode,w),g.return=y,y=g}return s(y);case ht:return S=v._init,N(y,g,S(v._payload),w)}if(eo(v))return C(y,g,v,w);if(Bn(v))return T(y,g,v,w);oi(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(y,g.sibling),g=i(g,v),g.return=y,y=g):(n(y,g),g=zr(v,y.mode,w),g.return=y,y=g),s(y)):n(y,g)}return N}var Pn=Od(!0),Yd=Od(!1),Vi=Mt(null),Gi=null,pn=null,yl=null;function vl(){yl=pn=Gi=null}function xl(e){var t=Vi.current;Y(Vi),e._currentValue=t}function ws(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function Tn(e,t){Gi=e,yl=pn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Se=!0),e.firstContext=null)}function be(e){var t=e._currentValue;if(yl!==e)if(e={context:e,memoizedValue:t,next:null},pn===null){if(Gi===null)throw Error(A(308));pn=e,Gi.dependencies={lanes:0,firstContext:e}}else pn=pn.next=e;return t}var zt=null;function Cl(e){zt===null?zt=[e]:zt.push(e)}function Kd(e,t,n,o){var i=t.interleaved;return i===null?(n.next=n,Cl(t)):(n.next=i.next,i.next=n),t.interleaved=n,ut(e,o)}function ut(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var gt=!1;function Tl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function st(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Et(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,q&2){var i=o.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),o.pending=t,ut(e,n)}return i=o.interleaved,i===null?(t.next=t,Cl(o)):(t.next=i.next,i.next=t),o.interleaved=t,ut(e,n)}function hi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,sl(e,n)}}function Fa(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?i=r=s:r=r.next=s,n=n.next}while(n!==null);r===null?i=r=t:r=r.next=t}else i=r=t;n={baseState:o.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qi(e,t,n,o){var i=e.updateQueue;gt=!1;var r=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,d=c.next;c.next=null,s===null?r=d:s.next=d,s=c;var p=e.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==s&&(u===null?p.firstBaseUpdate=d:u.next=d,p.lastBaseUpdate=c))}if(r!==null){var m=i.baseState;s=0,p=d=c=null,u=r;do{var h=u.lane,x=u.eventTime;if((o&h)===h){p!==null&&(p=p.next={eventTime:x,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=e,T=u;switch(h=t,x=n,T.tag){case 1:if(C=T.payload,typeof C=="function"){m=C.call(x,m,h);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=T.payload,h=typeof C=="function"?C.call(x,m,h):C,h==null)break e;m=X({},m,h);break e;case 2:gt=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[u]:h.push(u))}else x={eventTime:x,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(d=p=x,c=m):p=p.next=x,s|=h;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;h=u,u=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=p,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else r===null&&(i.shared.lanes=0);Qt|=s,e.lanes=s,e.memoizedState=m}}function Va(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],i=o.callback;if(i!==null){if(o.callback=null,o=n,typeof i!="function")throw Error(A(191,i));i.call(o)}}}var Vo={},et=Mt(Vo),No=Mt(Vo),Ao=Mt(Vo);function Jt(e){if(e===Vo)throw Error(A(174));return e}function wl(e,t){switch($(Ao,t),$(No,e),$(et,Vo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ns(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ns(t,e)}Y(et),$(et,t)}function Rn(){Y(et),Y(No),Y(Ao)}function jd(e){Jt(Ao.current);var t=Jt(et.current),n=ns(t,e.type);t!==n&&($(No,e),$(et,n))}function Sl(e){No.current===e&&(Y(et),Y(No))}var Q=Mt(0);function bi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vr=[];function _l(){for(var e=0;e<Vr.length;e++)Vr[e]._workInProgressVersionPrimary=null;Vr.length=0}var gi=dt.ReactCurrentDispatcher,Gr=dt.ReactCurrentBatchConfig,Kt=0,j=null,oe=null,se=null,Hi=!1,uo=!1,Io=0,Ch=0;function pe(){throw Error(A(321))}function El(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ye(e[n],t[n]))return!1;return!0}function Nl(e,t,n,o,i,r){if(Kt=r,j=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gi.current=e===null||e.memoizedState===null?_h:Eh,e=n(o,i),uo){r=0;do{if(uo=!1,Io=0,25<=r)throw Error(A(301));r+=1,se=oe=null,t.updateQueue=null,gi.current=Nh,e=n(o,i)}while(uo)}if(gi.current=Bi,t=oe!==null&&oe.next!==null,Kt=0,se=oe=j=null,Hi=!1,t)throw Error(A(300));return e}function Al(){var e=Io!==0;return Io=0,e}function je(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return se===null?j.memoizedState=se=e:se=se.next=e,se}function He(){if(oe===null){var e=j.alternate;e=e!==null?e.memoizedState:null}else e=oe.next;var t=se===null?j.memoizedState:se.next;if(t!==null)se=t,oe=e;else{if(e===null)throw Error(A(310));oe=e,e={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},se===null?j.memoizedState=se=e:se=se.next=e}return se}function ko(e,t){return typeof t=="function"?t(e):t}function qr(e){var t=He(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var o=oe,i=o.baseQueue,r=n.pending;if(r!==null){if(i!==null){var s=i.next;i.next=r.next,r.next=s}o.baseQueue=i=r,n.pending=null}if(i!==null){r=i.next,o=o.baseState;var u=s=null,c=null,d=r;do{var p=d.lane;if((Kt&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),o=d.hasEagerState?d.eagerState:e(o,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=m,s=o):c=c.next=m,j.lanes|=p,Qt|=p}d=d.next}while(d!==null&&d!==r);c===null?s=o:c.next=u,Ye(o,t.memoizedState)||(Se=!0),t.memoizedState=o,t.baseState=s,t.baseQueue=c,n.lastRenderedState=o}if(e=n.interleaved,e!==null){i=e;do r=i.lane,j.lanes|=r,Qt|=r,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function br(e){var t=He(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var o=n.dispatch,i=n.pending,r=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do r=e(r,s.action),s=s.next;while(s!==i);Ye(r,t.memoizedState)||(Se=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,o]}function Xd(){}function Zd(e,t){var n=j,o=He(),i=t(),r=!Ye(o.memoizedState,i);if(r&&(o.memoizedState=i,Se=!0),o=o.queue,Il(nf.bind(null,n,o,e),[e]),o.getSnapshot!==t||r||se!==null&&se.memoizedState.tag&1){if(n.flags|=2048,Po(9,tf.bind(null,n,o,i,t),void 0,null),le===null)throw Error(A(349));Kt&30||ef(n,t,i)}return i}function ef(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=j.updateQueue,t===null?(t={lastEffect:null,stores:null},j.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function tf(e,t,n,o){t.value=n,t.getSnapshot=o,of(t)&&rf(e)}function nf(e,t,n){return n(function(){of(t)&&rf(e)})}function of(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ye(e,n)}catch{return!0}}function rf(e){var t=ut(e,1);t!==null&&Oe(t,e,1,-1)}function Ga(e){var t=je();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:e},t.queue=e,e=e.dispatch=Sh.bind(null,j,e),[t.memoizedState,e]}function Po(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=j.updateQueue,t===null?(t={lastEffect:null,stores:null},j.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function sf(){return He().memoizedState}function yi(e,t,n,o){var i=je();j.flags|=e,i.memoizedState=Po(1|t,n,void 0,o===void 0?null:o)}function ir(e,t,n,o){var i=He();o=o===void 0?null:o;var r=void 0;if(oe!==null){var s=oe.memoizedState;if(r=s.destroy,o!==null&&El(o,s.deps)){i.memoizedState=Po(t,n,r,o);return}}j.flags|=e,i.memoizedState=Po(1|t,n,r,o)}function qa(e,t){return yi(8390656,8,e,t)}function Il(e,t){return ir(2048,8,e,t)}function lf(e,t){return ir(4,2,e,t)}function af(e,t){return ir(4,4,e,t)}function uf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cf(e,t,n){return n=n!=null?n.concat([e]):null,ir(4,4,uf.bind(null,t,e),n)}function kl(){}function df(e,t){var n=He();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&El(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function ff(e,t){var n=He();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&El(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function pf(e,t,n){return Kt&21?(Ye(n,t)||(n=yd(),j.lanes|=n,Qt|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Se=!0),e.memoizedState=n)}function Th(e,t){var n=B;B=n!==0&&4>n?n:4,e(!0);var o=Gr.transition;Gr.transition={};try{e(!1),t()}finally{B=n,Gr.transition=o}}function mf(){return He().memoizedState}function wh(e,t,n){var o=At(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},hf(e))gf(t,n);else if(n=Kd(e,t,n,o),n!==null){var i=xe();Oe(n,e,o,i),yf(n,t,o)}}function Sh(e,t,n){var o=At(e),i={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(hf(e))gf(t,i);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var s=t.lastRenderedState,u=r(s,n);if(i.hasEagerState=!0,i.eagerState=u,Ye(u,s)){var c=t.interleaved;c===null?(i.next=i,Cl(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=Kd(e,t,i,o),n!==null&&(i=xe(),Oe(n,e,o,i),yf(n,t,o))}}function hf(e){var t=e.alternate;return e===j||t!==null&&t===j}function gf(e,t){uo=Hi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function yf(e,t,n){if(n&4194240){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,sl(e,n)}}var Bi={readContext:be,useCallback:pe,useContext:pe,useEffect:pe,useImperativeHandle:pe,useInsertionEffect:pe,useLayoutEffect:pe,useMemo:pe,useReducer:pe,useRef:pe,useState:pe,useDebugValue:pe,useDeferredValue:pe,useTransition:pe,useMutableSource:pe,useSyncExternalStore:pe,useId:pe,unstable_isNewReconciler:!1},_h={readContext:be,useCallback:function(e,t){return je().memoizedState=[e,t===void 0?null:t],e},useContext:be,useEffect:qa,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,yi(4194308,4,uf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yi(4194308,4,e,t)},useInsertionEffect:function(e,t){return yi(4,2,e,t)},useMemo:function(e,t){var n=je();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=je();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=wh.bind(null,j,e),[o.memoizedState,e]},useRef:function(e){var t=je();return e={current:e},t.memoizedState=e},useState:Ga,useDebugValue:kl,useDeferredValue:function(e){return je().memoizedState=e},useTransition:function(){var e=Ga(!1),t=e[0];return e=Th.bind(null,e[1]),je().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=j,i=je();if(K){if(n===void 0)throw Error(A(407));n=n()}else{if(n=t(),le===null)throw Error(A(349));Kt&30||ef(o,t,n)}i.memoizedState=n;var r={value:n,getSnapshot:t};return i.queue=r,qa(nf.bind(null,o,r,e),[e]),o.flags|=2048,Po(9,tf.bind(null,o,r,n,t),void 0,null),n},useId:function(){var e=je(),t=le.identifierPrefix;if(K){var n=rt,o=it;n=(o&~(1<<32-We(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=Io++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Ch++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Eh={readContext:be,useCallback:df,useContext:be,useEffect:Il,useImperativeHandle:cf,useInsertionEffect:lf,useLayoutEffect:af,useMemo:ff,useReducer:qr,useRef:sf,useState:function(){return qr(ko)},useDebugValue:kl,useDeferredValue:function(e){var t=He();return pf(t,oe.memoizedState,e)},useTransition:function(){var e=qr(ko)[0],t=He().memoizedState;return[e,t]},useMutableSource:Xd,useSyncExternalStore:Zd,useId:mf,unstable_isNewReconciler:!1},Nh={readContext:be,useCallback:df,useContext:be,useEffect:Il,useImperativeHandle:cf,useInsertionEffect:lf,useLayoutEffect:af,useMemo:ff,useReducer:br,useRef:sf,useState:function(){return br(ko)},useDebugValue:kl,useDeferredValue:function(e){var t=He();return oe===null?t.memoizedState=e:pf(t,oe.memoizedState,e)},useTransition:function(){var e=br(ko)[0],t=He().memoizedState;return[e,t]},useMutableSource:Xd,useSyncExternalStore:Zd,useId:mf,unstable_isNewReconciler:!1};function ze(e,t){if(e&&e.defaultProps){t=X({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ss(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:X({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var rr={isMounted:function(e){return(e=e._reactInternals)?en(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=xe(),i=At(e),r=st(o,i);r.payload=t,n!=null&&(r.callback=n),t=Et(e,r,i),t!==null&&(Oe(t,e,i,o),hi(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=xe(),i=At(e),r=st(o,i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Et(e,r,i),t!==null&&(Oe(t,e,i,o),hi(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xe(),o=At(e),i=st(n,o);i.tag=2,t!=null&&(i.callback=t),t=Et(e,i,o),t!==null&&(Oe(t,e,o,n),hi(t,e,o))}};function ba(e,t,n,o,i,r,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,r,s):t.prototype&&t.prototype.isPureReactComponent?!wo(n,o)||!wo(i,r):!0}function vf(e,t,n){var o=!1,i=Pt,r=t.contextType;return typeof r=="object"&&r!==null?r=be(r):(i=Ee(t)?Ot:ye.current,o=t.contextTypes,r=(o=o!=null)?In(e,i):Pt),t=new t(n,r),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=rr,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=r),t}function Ha(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&rr.enqueueReplaceState(t,t.state,null)}function _s(e,t,n,o){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Tl(e);var r=t.contextType;typeof r=="object"&&r!==null?i.context=be(r):(r=Ee(t)?Ot:ye.current,i.context=In(e,r)),i.state=e.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(Ss(e,t,r,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&rr.enqueueReplaceState(i,i.state,null),qi(e,n,i,o),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Mn(e,t){try{var n="",o=t;do n+=em(o),o=o.return;while(o);var i=n}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:e,source:t,stack:i,digest:null}}function Hr(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Es(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ah=typeof WeakMap=="function"?WeakMap:Map;function xf(e,t,n){n=st(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){Ji||(Ji=!0,Us=o),Es(e,t)},n}function Cf(e,t,n){n=st(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var i=t.value;n.payload=function(){return o(i)},n.callback=function(){Es(e,t)}}var r=e.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){Es(e,t),typeof o!="function"&&(Nt===null?Nt=new Set([this]):Nt.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Ba(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new Ah;var i=new Set;o.set(t,i)}else i=o.get(t),i===void 0&&(i=new Set,o.set(t,i));i.has(n)||(i.add(n),e=Hh.bind(null,e,t,n),t.then(e,e))}function za(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ja(e,t,n,o,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=st(-1,1),t.tag=2,Et(n,t,1))),n.lanes|=1),e)}var Ih=dt.ReactCurrentOwner,Se=!1;function ve(e,t,n,o){t.child=e===null?Yd(t,null,n,o):Pn(t,e.child,n,o)}function $a(e,t,n,o,i){n=n.render;var r=t.ref;return Tn(t,i),o=Nl(e,t,n,o,r,i),n=Al(),e!==null&&!Se?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ct(e,t,i)):(K&&n&&ml(t),t.flags|=1,ve(e,t,o,i),t.child)}function Wa(e,t,n,o,i){if(e===null){var r=n.type;return typeof r=="function"&&!Vl(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=r,Tf(e,t,r,o,i)):(e=Ti(n.type,null,o,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!(e.lanes&i)){var s=r.memoizedProps;if(n=n.compare,n=n!==null?n:wo,n(s,o)&&e.ref===t.ref)return ct(e,t,i)}return t.flags|=1,e=It(r,o),e.ref=t.ref,e.return=t,t.child=e}function Tf(e,t,n,o,i){if(e!==null){var r=e.memoizedProps;if(wo(r,o)&&e.ref===t.ref)if(Se=!1,t.pendingProps=o=r,(e.lanes&i)!==0)e.flags&131072&&(Se=!0);else return t.lanes=e.lanes,ct(e,t,i)}return Ns(e,t,n,o,i)}function wf(e,t,n){var o=t.pendingProps,i=o.children,r=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$(hn,Ie),Ie|=n;else{if(!(n&1073741824))return e=r!==null?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$(hn,Ie),Ie|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=r!==null?r.baseLanes:n,$(hn,Ie),Ie|=o}else r!==null?(o=r.baseLanes|n,t.memoizedState=null):o=n,$(hn,Ie),Ie|=o;return ve(e,t,i,n),t.child}function Sf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ns(e,t,n,o,i){var r=Ee(n)?Ot:ye.current;return r=In(t,r),Tn(t,i),n=Nl(e,t,n,o,r,i),o=Al(),e!==null&&!Se?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ct(e,t,i)):(K&&o&&ml(t),t.flags|=1,ve(e,t,n,i),t.child)}function Oa(e,t,n,o,i){if(Ee(n)){var r=!0;Li(t)}else r=!1;if(Tn(t,i),t.stateNode===null)vi(e,t),vf(t,n,o),_s(t,n,o,i),o=!0;else if(e===null){var s=t.stateNode,u=t.memoizedProps;s.props=u;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=be(d):(d=Ee(n)?Ot:ye.current,d=In(t,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function";m||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==o||c!==d)&&Ha(t,s,o,d),gt=!1;var h=t.memoizedState;s.state=h,qi(t,o,s,i),c=t.memoizedState,u!==o||h!==c||_e.current||gt?(typeof p=="function"&&(Ss(t,n,p,o),c=t.memoizedState),(u=gt||ba(t,n,u,o,h,c,d))?(m||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=c),s.props=o,s.state=c,s.context=d,o=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{s=t.stateNode,Qd(e,t),u=t.memoizedProps,d=t.type===t.elementType?u:ze(t.type,u),s.props=d,m=t.pendingProps,h=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=be(c):(c=Ee(n)?Ot:ye.current,c=In(t,c));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==m||h!==c)&&Ha(t,s,o,c),gt=!1,h=t.memoizedState,s.state=h,qi(t,o,s,i);var C=t.memoizedState;u!==m||h!==C||_e.current||gt?(typeof x=="function"&&(Ss(t,n,x,o),C=t.memoizedState),(d=gt||ba(t,n,d,o,h,C,c)||!1)?(p||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(o,C,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(o,C,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=C),s.props=o,s.state=C,s.context=c,o=d):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),o=!1)}return As(e,t,n,o,r,i)}function As(e,t,n,o,i,r){Sf(e,t);var s=(t.flags&128)!==0;if(!o&&!s)return i&&Ma(t,n,!1),ct(e,t,r);o=t.stateNode,Ih.current=t;var u=s&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&s?(t.child=Pn(t,e.child,null,r),t.child=Pn(t,null,u,r)):ve(e,t,u,r),t.memoizedState=o.state,i&&Ma(t,n,!0),t.child}function _f(e){var t=e.stateNode;t.pendingContext?Ra(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ra(e,t.context,!1),wl(e,t.containerInfo)}function Ya(e,t,n,o,i){return kn(),gl(i),t.flags|=256,ve(e,t,n,o),t.child}var Is={dehydrated:null,treeContext:null,retryLane:0};function ks(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ef(e,t,n){var o=t.pendingProps,i=Q.current,r=!1,s=(t.flags&128)!==0,u;if((u=s)||(u=e!==null&&e.memoizedState===null?!1:(i&2)!==0),u?(r=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),$(Q,i&1),e===null)return Ts(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=o.children,e=o.fallback,r?(o=t.mode,r=t.child,s={mode:"hidden",children:s},!(o&1)&&r!==null?(r.childLanes=0,r.pendingProps=s):r=ar(s,o,0,null),e=Wt(e,o,n,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=ks(n),t.memoizedState=Is,e):Pl(t,s));if(i=e.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return kh(e,t,s,o,u,i,n);if(r){r=o.fallback,s=t.mode,i=e.child,u=i.sibling;var c={mode:"hidden",children:o.children};return!(s&1)&&t.child!==i?(o=t.child,o.childLanes=0,o.pendingProps=c,t.deletions=null):(o=It(i,c),o.subtreeFlags=i.subtreeFlags&14680064),u!==null?r=It(u,r):(r=Wt(r,s,n,null),r.flags|=2),r.return=t,o.return=t,o.sibling=r,t.child=o,o=r,r=t.child,s=e.child.memoizedState,s=s===null?ks(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},r.memoizedState=s,r.childLanes=e.childLanes&~n,t.memoizedState=Is,o}return r=e.child,e=r.sibling,o=It(r,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Pl(e,t){return t=ar({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ii(e,t,n,o){return o!==null&&gl(o),Pn(t,e.child,null,n),e=Pl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kh(e,t,n,o,i,r,s){if(n)return t.flags&256?(t.flags&=-257,o=Hr(Error(A(422))),ii(e,t,s,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(r=o.fallback,i=t.mode,o=ar({mode:"visible",children:o.children},i,0,null),r=Wt(r,i,s,null),r.flags|=2,o.return=t,r.return=t,o.sibling=r,t.child=o,t.mode&1&&Pn(t,e.child,null,s),t.child.memoizedState=ks(s),t.memoizedState=Is,r);if(!(t.mode&1))return ii(e,t,s,null);if(i.data==="$!"){if(o=i.nextSibling&&i.nextSibling.dataset,o)var u=o.dgst;return o=u,r=Error(A(419)),o=Hr(r,o,void 0),ii(e,t,s,o)}if(u=(s&e.childLanes)!==0,Se||u){if(o=le,o!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(o.suspendedLanes|s)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,ut(e,i),Oe(o,e,i,-1))}return Fl(),o=Hr(Error(A(421))),ii(e,t,s,o)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Bh.bind(null,e),i._reactRetry=t,null):(e=r.treeContext,Pe=_t(i.nextSibling),Re=t,K=!0,$e=null,e!==null&&(Ue[Fe++]=it,Ue[Fe++]=rt,Ue[Fe++]=Yt,it=e.id,rt=e.overflow,Yt=t),t=Pl(t,o.children),t.flags|=4096,t)}function Ka(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),ws(e.return,t,n)}function Br(e,t,n,o,i){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=o,r.tail=n,r.tailMode=i)}function Nf(e,t,n){var o=t.pendingProps,i=o.revealOrder,r=o.tail;if(ve(e,t,o.children,n),o=Q.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ka(e,n,t);else if(e.tag===19)Ka(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if($(Q,o),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&bi(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Br(t,!1,i,n,r);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&bi(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Br(t,!0,n,null,r);break;case"together":Br(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ct(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Qt|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,n=It(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=It(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ph(e,t,n){switch(t.tag){case 3:_f(t),kn();break;case 5:jd(t);break;case 1:Ee(t.type)&&Li(t);break;case 4:wl(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,i=t.memoizedProps.value;$(Vi,o._currentValue),o._currentValue=i;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?($(Q,Q.current&1),t.flags|=128,null):n&t.child.childLanes?Ef(e,t,n):($(Q,Q.current&1),e=ct(e,t,n),e!==null?e.sibling:null);$(Q,Q.current&1);break;case 19:if(o=(n&t.childLanes)!==0,e.flags&128){if(o)return Nf(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$(Q,Q.current),o)break;return null;case 22:case 23:return t.lanes=0,wf(e,t,n)}return ct(e,t,n)}var Af,Ps,If,kf;Af=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ps=function(){};If=function(e,t,n,o){var i=e.memoizedProps;if(i!==o){e=t.stateNode,Jt(et.current);var r=null;switch(n){case"input":i=Xr(e,i),o=Xr(e,o),r=[];break;case"select":i=X({},i,{value:void 0}),o=X({},o,{value:void 0}),r=[];break;case"textarea":i=ts(e,i),o=ts(e,o),r=[];break;default:typeof i.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Mi)}os(n,o);var s;n=null;for(d in i)if(!o.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var u=i[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ho.hasOwnProperty(d)?r||(r=[]):(r=r||[]).push(d,null));for(d in o){var c=o[d];if(u=i!=null?i[d]:void 0,o.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(r||(r=[]),r.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(r=r||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ho.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&W("scroll",e),r||u===c||(r=[])):(r=r||[]).push(d,c))}n&&(r=r||[]).push("style",n);var d=r;(t.updateQueue=d)&&(t.flags|=4)}};kf=function(e,t,n,o){n!==o&&(t.flags|=4)};function Yn(e,t){if(!K)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function me(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,o|=i.subtreeFlags&14680064,o|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,o|=i.subtreeFlags,o|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function Rh(e,t,n){var o=t.pendingProps;switch(hl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return me(t),null;case 1:return Ee(t.type)&&Di(),me(t),null;case 3:return o=t.stateNode,Rn(),Y(_e),Y(ye),_l(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(ni(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$e!==null&&(Gs($e),$e=null))),Ps(e,t),me(t),null;case 5:Sl(t);var i=Jt(Ao.current);if(n=t.type,e!==null&&t.stateNode!=null)If(e,t,n,o,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(A(166));return me(t),null}if(e=Jt(et.current),ni(t)){o=t.stateNode,n=t.type;var r=t.memoizedProps;switch(o[Xe]=t,o[Eo]=r,e=(t.mode&1)!==0,n){case"dialog":W("cancel",o),W("close",o);break;case"iframe":case"object":case"embed":W("load",o);break;case"video":case"audio":for(i=0;i<no.length;i++)W(no[i],o);break;case"source":W("error",o);break;case"img":case"image":case"link":W("error",o),W("load",o);break;case"details":W("toggle",o);break;case"input":ia(o,r),W("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!r.multiple},W("invalid",o);break;case"textarea":sa(o,r),W("invalid",o)}os(n,r),i=null;for(var s in r)if(r.hasOwnProperty(s)){var u=r[s];s==="children"?typeof u=="string"?o.textContent!==u&&(r.suppressHydrationWarning!==!0&&ti(o.textContent,u,e),i=["children",u]):typeof u=="number"&&o.textContent!==""+u&&(r.suppressHydrationWarning!==!0&&ti(o.textContent,u,e),i=["children",""+u]):ho.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&W("scroll",o)}switch(n){case"input":Oo(o),ra(o,r,!0);break;case"textarea":Oo(o),la(o);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(o.onclick=Mi)}o=i,t.updateQueue=o,o!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=s.createElement(n,{is:o.is}):(e=s.createElement(n),n==="select"&&(s=e,o.multiple?s.multiple=!0:o.size&&(s.size=o.size))):e=s.createElementNS(e,n),e[Xe]=t,e[Eo]=o,Af(e,t,!1,!1),t.stateNode=e;e:{switch(s=is(n,o),n){case"dialog":W("cancel",e),W("close",e),i=o;break;case"iframe":case"object":case"embed":W("load",e),i=o;break;case"video":case"audio":for(i=0;i<no.length;i++)W(no[i],e);i=o;break;case"source":W("error",e),i=o;break;case"img":case"image":case"link":W("error",e),W("load",e),i=o;break;case"details":W("toggle",e),i=o;break;case"input":ia(e,o),i=Xr(e,o),W("invalid",e);break;case"option":i=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},i=X({},o,{value:void 0}),W("invalid",e);break;case"textarea":sa(e,o),i=ts(e,o),W("invalid",e);break;default:i=o}os(n,i),u=i;for(r in u)if(u.hasOwnProperty(r)){var c=u[r];r==="style"?rd(e,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&od(e,c)):r==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&go(e,c):typeof c=="number"&&go(e,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(ho.hasOwnProperty(r)?c!=null&&r==="onScroll"&&W("scroll",e):c!=null&&el(e,r,c,s))}switch(n){case"input":Oo(e),ra(e,o,!1);break;case"textarea":Oo(e),la(e);break;case"option":o.value!=null&&e.setAttribute("value",""+kt(o.value));break;case"select":e.multiple=!!o.multiple,r=o.value,r!=null?yn(e,!!o.multiple,r,!1):o.defaultValue!=null&&yn(e,!!o.multiple,o.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Mi)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return me(t),null;case 6:if(e&&t.stateNode!=null)kf(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(A(166));if(n=Jt(Ao.current),Jt(et.current),ni(t)){if(o=t.stateNode,n=t.memoizedProps,o[Xe]=t,(r=o.nodeValue!==n)&&(e=Re,e!==null))switch(e.tag){case 3:ti(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ti(o.nodeValue,n,(e.mode&1)!==0)}r&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[Xe]=t,t.stateNode=o}return me(t),null;case 13:if(Y(Q),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(K&&Pe!==null&&t.mode&1&&!(t.flags&128))Wd(),kn(),t.flags|=98560,r=!1;else if(r=ni(t),o!==null&&o.dehydrated!==null){if(e===null){if(!r)throw Error(A(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(A(317));r[Xe]=t}else kn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;me(t),r=!1}else $e!==null&&(Gs($e),$e=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||Q.current&1?ie===0&&(ie=3):Fl())),t.updateQueue!==null&&(t.flags|=4),me(t),null);case 4:return Rn(),Ps(e,t),e===null&&So(t.stateNode.containerInfo),me(t),null;case 10:return xl(t.type._context),me(t),null;case 17:return Ee(t.type)&&Di(),me(t),null;case 19:if(Y(Q),r=t.memoizedState,r===null)return me(t),null;if(o=(t.flags&128)!==0,s=r.rendering,s===null)if(o)Yn(r,!1);else{if(ie!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=bi(e),s!==null){for(t.flags|=128,Yn(r,!1),o=s.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)r=n,e=o,r.flags&=14680066,s=r.alternate,s===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,r.type=s.type,e=s.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return $(Q,Q.current&1|2),t.child}e=e.sibling}r.tail!==null&&te()>Dn&&(t.flags|=128,o=!0,Yn(r,!1),t.lanes=4194304)}else{if(!o)if(e=bi(s),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Yn(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!K)return me(t),null}else 2*te()-r.renderingStartTime>Dn&&n!==1073741824&&(t.flags|=128,o=!0,Yn(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(n=r.last,n!==null?n.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=te(),t.sibling=null,n=Q.current,$(Q,o?n&1|2:n&1),t):(me(t),null);case 22:case 23:return Ul(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?Ie&1073741824&&(me(t),t.subtreeFlags&6&&(t.flags|=8192)):me(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function Mh(e,t){switch(hl(t),t.tag){case 1:return Ee(t.type)&&Di(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rn(),Y(_e),Y(ye),_l(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Sl(t),null;case 13:if(Y(Q),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));kn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Y(Q),null;case 4:return Rn(),null;case 10:return xl(t.type._context),null;case 22:case 23:return Ul(),null;case 24:return null;default:return null}}var ri=!1,he=!1,Dh=typeof WeakSet=="function"?WeakSet:Set,P=null;function mn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){Z(e,t,o)}else n.current=null}function Rs(e,t,n){try{n()}catch(o){Z(e,t,o)}}var Qa=!1;function Lh(e,t){if(ms=ki,e=Dd(),pl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var i=o.anchorOffset,r=o.focusNode;o=o.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var s=0,u=-1,c=-1,d=0,p=0,m=e,h=null;t:for(;;){for(var x;m!==n||i!==0&&m.nodeType!==3||(u=s+i),m!==r||o!==0&&m.nodeType!==3||(c=s+o),m.nodeType===3&&(s+=m.nodeValue.length),(x=m.firstChild)!==null;)h=m,m=x;for(;;){if(m===e)break t;if(h===n&&++d===i&&(u=s),h===r&&++p===o&&(c=s),(x=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=x}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(hs={focusedElem:e,selectionRange:n},ki=!1,P=t;P!==null;)if(t=P,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,P=e;else for(;P!==null;){t=P;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var T=C.memoizedProps,N=C.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?T:ze(t.type,T),N);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(w){Z(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,P=e;break}P=t.return}return C=Qa,Qa=!1,C}function co(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var i=o=o.next;do{if((i.tag&e)===e){var r=i.destroy;i.destroy=void 0,r!==void 0&&Rs(t,n,r)}i=i.next}while(i!==o)}}function sr(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function Ms(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Pf(e){var t=e.alternate;t!==null&&(e.alternate=null,Pf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xe],delete t[Eo],delete t[vs],delete t[gh],delete t[yh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Rf(e){return e.tag===5||e.tag===3||e.tag===4}function ja(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ds(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Mi));else if(o!==4&&(e=e.child,e!==null))for(Ds(e,t,n),e=e.sibling;e!==null;)Ds(e,t,n),e=e.sibling}function Ls(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Ls(e,t,n),e=e.sibling;e!==null;)Ls(e,t,n),e=e.sibling}var ae=null,Je=!1;function mt(e,t,n){for(n=n.child;n!==null;)Mf(e,t,n),n=n.sibling}function Mf(e,t,n){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(Xi,n)}catch{}switch(n.tag){case 5:he||mn(n,t);case 6:var o=ae,i=Je;ae=null,mt(e,t,n),ae=o,Je=i,ae!==null&&(Je?(e=ae,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ae.removeChild(n.stateNode));break;case 18:ae!==null&&(Je?(e=ae,n=n.stateNode,e.nodeType===8?Ur(e.parentNode,n):e.nodeType===1&&Ur(e,n),Co(e)):Ur(ae,n.stateNode));break;case 4:o=ae,i=Je,ae=n.stateNode.containerInfo,Je=!0,mt(e,t,n),ae=o,Je=i;break;case 0:case 11:case 14:case 15:if(!he&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){i=o=o.next;do{var r=i,s=r.destroy;r=r.tag,s!==void 0&&(r&2||r&4)&&Rs(n,t,s),i=i.next}while(i!==o)}mt(e,t,n);break;case 1:if(!he&&(mn(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(u){Z(n,t,u)}mt(e,t,n);break;case 21:mt(e,t,n);break;case 22:n.mode&1?(he=(o=he)||n.memoizedState!==null,mt(e,t,n),he=o):mt(e,t,n);break;default:mt(e,t,n)}}function Xa(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Dh),t.forEach(function(o){var i=zh.bind(null,e,o);n.has(o)||(n.add(o),o.then(i,i))})}}function Be(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var i=n[o];try{var r=e,s=t,u=s;e:for(;u!==null;){switch(u.tag){case 5:ae=u.stateNode,Je=!1;break e;case 3:ae=u.stateNode.containerInfo,Je=!0;break e;case 4:ae=u.stateNode.containerInfo,Je=!0;break e}u=u.return}if(ae===null)throw Error(A(160));Mf(r,s,i),ae=null,Je=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Z(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Df(t,e),t=t.sibling}function Df(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Be(t,e),Qe(e),o&4){try{co(3,e,e.return),sr(3,e)}catch(T){Z(e,e.return,T)}try{co(5,e,e.return)}catch(T){Z(e,e.return,T)}}break;case 1:Be(t,e),Qe(e),o&512&&n!==null&&mn(n,n.return);break;case 5:if(Be(t,e),Qe(e),o&512&&n!==null&&mn(n,n.return),e.flags&32){var i=e.stateNode;try{go(i,"")}catch(T){Z(e,e.return,T)}}if(o&4&&(i=e.stateNode,i!=null)){var r=e.memoizedProps,s=n!==null?n.memoizedProps:r,u=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{u==="input"&&r.type==="radio"&&r.name!=null&&ed(i,r),is(u,s);var d=is(u,r);for(s=0;s<c.length;s+=2){var p=c[s],m=c[s+1];p==="style"?rd(i,m):p==="dangerouslySetInnerHTML"?od(i,m):p==="children"?go(i,m):el(i,p,m,d)}switch(u){case"input":Zr(i,r);break;case"textarea":td(i,r);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var x=r.value;x!=null?yn(i,!!r.multiple,x,!1):h!==!!r.multiple&&(r.defaultValue!=null?yn(i,!!r.multiple,r.defaultValue,!0):yn(i,!!r.multiple,r.multiple?[]:"",!1))}i[Eo]=r}catch(T){Z(e,e.return,T)}}break;case 6:if(Be(t,e),Qe(e),o&4){if(e.stateNode===null)throw Error(A(162));i=e.stateNode,r=e.memoizedProps;try{i.nodeValue=r}catch(T){Z(e,e.return,T)}}break;case 3:if(Be(t,e),Qe(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{Co(t.containerInfo)}catch(T){Z(e,e.return,T)}break;case 4:Be(t,e),Qe(e);break;case 13:Be(t,e),Qe(e),i=e.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(Dl=te())),o&4&&Xa(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(he=(d=he)||p,Be(t,e),he=d):Be(t,e),Qe(e),o&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(P=e,p=e.child;p!==null;){for(m=P=p;P!==null;){switch(h=P,x=h.child,h.tag){case 0:case 11:case 14:case 15:co(4,h,h.return);break;case 1:mn(h,h.return);var C=h.stateNode;if(typeof C.componentWillUnmount=="function"){o=h,n=h.return;try{t=o,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(T){Z(o,n,T)}}break;case 5:mn(h,h.return);break;case 22:if(h.memoizedState!==null){eu(m);continue}}x!==null?(x.return=h,P=x):eu(m)}p=p.sibling}e:for(p=null,m=e;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,d?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(u=m.stateNode,c=m.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=id("display",s))}catch(T){Z(e,e.return,T)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(T){Z(e,e.return,T)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Be(t,e),Qe(e),o&4&&Xa(e);break;case 21:break;default:Be(t,e),Qe(e)}}function Qe(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Rf(n)){var o=n;break e}n=n.return}throw Error(A(160))}switch(o.tag){case 5:var i=o.stateNode;o.flags&32&&(go(i,""),o.flags&=-33);var r=ja(e);Ls(e,r,i);break;case 3:case 4:var s=o.stateNode.containerInfo,u=ja(e);Ds(e,u,s);break;default:throw Error(A(161))}}catch(c){Z(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Uh(e,t,n){P=e,Lf(e)}function Lf(e,t,n){for(var o=(e.mode&1)!==0;P!==null;){var i=P,r=i.child;if(i.tag===22&&o){var s=i.memoizedState!==null||ri;if(!s){var u=i.alternate,c=u!==null&&u.memoizedState!==null||he;u=ri;var d=he;if(ri=s,(he=c)&&!d)for(P=i;P!==null;)s=P,c=s.child,s.tag===22&&s.memoizedState!==null?tu(i):c!==null?(c.return=s,P=c):tu(i);for(;r!==null;)P=r,Lf(r),r=r.sibling;P=i,ri=u,he=d}Za(e)}else i.subtreeFlags&8772&&r!==null?(r.return=i,P=r):Za(e)}}function Za(e){for(;P!==null;){var t=P;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:he||sr(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!he)if(n===null)o.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ze(t.type,n.memoizedProps);o.componentDidUpdate(i,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&Va(t,r,o);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Va(t,s,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Co(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}he||t.flags&512&&Ms(t)}catch(h){Z(t,t.return,h)}}if(t===e){P=null;break}if(n=t.sibling,n!==null){n.return=t.return,P=n;break}P=t.return}}function eu(e){for(;P!==null;){var t=P;if(t===e){P=null;break}var n=t.sibling;if(n!==null){n.return=t.return,P=n;break}P=t.return}}function tu(e){for(;P!==null;){var t=P;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sr(4,t)}catch(c){Z(t,n,c)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var i=t.return;try{o.componentDidMount()}catch(c){Z(t,i,c)}}var r=t.return;try{Ms(t)}catch(c){Z(t,r,c)}break;case 5:var s=t.return;try{Ms(t)}catch(c){Z(t,s,c)}}}catch(c){Z(t,t.return,c)}if(t===e){P=null;break}var u=t.sibling;if(u!==null){u.return=t.return,P=u;break}P=t.return}}var Fh=Math.ceil,zi=dt.ReactCurrentDispatcher,Rl=dt.ReactCurrentOwner,Ge=dt.ReactCurrentBatchConfig,q=0,le=null,ne=null,ce=0,Ie=0,hn=Mt(0),ie=0,Ro=null,Qt=0,lr=0,Ml=0,fo=null,we=null,Dl=0,Dn=1/0,tt=null,Ji=!1,Us=null,Nt=null,si=!1,Ct=null,$i=0,po=0,Fs=null,xi=-1,Ci=0;function xe(){return q&6?te():xi!==-1?xi:xi=te()}function At(e){return e.mode&1?q&2&&ce!==0?ce&-ce:xh.transition!==null?(Ci===0&&(Ci=yd()),Ci):(e=B,e!==0||(e=window.event,e=e===void 0?16:_d(e.type)),e):1}function Oe(e,t,n,o){if(50<po)throw po=0,Fs=null,Error(A(185));Lo(e,n,o),(!(q&2)||e!==le)&&(e===le&&(!(q&2)&&(lr|=n),ie===4&&vt(e,ce)),Ne(e,o),n===1&&q===0&&!(t.mode&1)&&(Dn=te()+500,or&&Dt()))}function Ne(e,t){var n=e.callbackNode;xm(e,t);var o=Ii(e,e===le?ce:0);if(o===0)n!==null&&ca(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&ca(n),t===1)e.tag===0?vh(nu.bind(null,e)):zd(nu.bind(null,e)),mh(function(){!(q&6)&&Dt()}),n=null;else{switch(vd(o)){case 1:n=rl;break;case 4:n=hd;break;case 16:n=Ai;break;case 536870912:n=gd;break;default:n=Ai}n=Bf(n,Uf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Uf(e,t){if(xi=-1,Ci=0,q&6)throw Error(A(327));var n=e.callbackNode;if(wn()&&e.callbackNode!==n)return null;var o=Ii(e,e===le?ce:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Wi(e,o);else{t=o;var i=q;q|=2;var r=Vf();(le!==e||ce!==t)&&(tt=null,Dn=te()+500,$t(e,t));do try{qh();break}catch(u){Ff(e,u)}while(1);vl(),zi.current=r,q=i,ne!==null?t=0:(le=null,ce=0,t=ie)}if(t!==0){if(t===2&&(i=us(e),i!==0&&(o=i,t=Vs(e,i))),t===1)throw n=Ro,$t(e,0),vt(e,o),Ne(e,te()),n;if(t===6)vt(e,o);else{if(i=e.current.alternate,!(o&30)&&!Vh(i)&&(t=Wi(e,o),t===2&&(r=us(e),r!==0&&(o=r,t=Vs(e,r))),t===1))throw n=Ro,$t(e,0),vt(e,o),Ne(e,te()),n;switch(e.finishedWork=i,e.finishedLanes=o,t){case 0:case 1:throw Error(A(345));case 2:Ht(e,we,tt);break;case 3:if(vt(e,o),(o&130023424)===o&&(t=Dl+500-te(),10<t)){if(Ii(e,0)!==0)break;if(i=e.suspendedLanes,(i&o)!==o){xe(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ys(Ht.bind(null,e,we,tt),t);break}Ht(e,we,tt);break;case 4:if(vt(e,o),(o&4194240)===o)break;for(t=e.eventTimes,i=-1;0<o;){var s=31-We(o);r=1<<s,s=t[s],s>i&&(i=s),o&=~r}if(o=i,o=te()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Fh(o/1960))-o,10<o){e.timeoutHandle=ys(Ht.bind(null,e,we,tt),o);break}Ht(e,we,tt);break;case 5:Ht(e,we,tt);break;default:throw Error(A(329))}}}return Ne(e,te()),e.callbackNode===n?Uf.bind(null,e):null}function Vs(e,t){var n=fo;return e.current.memoizedState.isDehydrated&&($t(e,t).flags|=256),e=Wi(e,t),e!==2&&(t=we,we=n,t!==null&&Gs(t)),e}function Gs(e){we===null?we=e:we.push.apply(we,e)}function Vh(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var i=n[o],r=i.getSnapshot;i=i.value;try{if(!Ye(r(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vt(e,t){for(t&=~Ml,t&=~lr,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-We(t),o=1<<n;e[n]=-1,t&=~o}}function nu(e){if(q&6)throw Error(A(327));wn();var t=Ii(e,0);if(!(t&1))return Ne(e,te()),null;var n=Wi(e,t);if(e.tag!==0&&n===2){var o=us(e);o!==0&&(t=o,n=Vs(e,o))}if(n===1)throw n=Ro,$t(e,0),vt(e,t),Ne(e,te()),n;if(n===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ht(e,we,tt),Ne(e,te()),null}function Ll(e,t){var n=q;q|=1;try{return e(t)}finally{q=n,q===0&&(Dn=te()+500,or&&Dt())}}function jt(e){Ct!==null&&Ct.tag===0&&!(q&6)&&wn();var t=q;q|=1;var n=Ge.transition,o=B;try{if(Ge.transition=null,B=1,e)return e()}finally{B=o,Ge.transition=n,q=t,!(q&6)&&Dt()}}function Ul(){Ie=hn.current,Y(hn)}function $t(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ph(n)),ne!==null)for(n=ne.return;n!==null;){var o=n;switch(hl(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Di();break;case 3:Rn(),Y(_e),Y(ye),_l();break;case 5:Sl(o);break;case 4:Rn();break;case 13:Y(Q);break;case 19:Y(Q);break;case 10:xl(o.type._context);break;case 22:case 23:Ul()}n=n.return}if(le=e,ne=e=It(e.current,null),ce=Ie=t,ie=0,Ro=null,Ml=lr=Qt=0,we=fo=null,zt!==null){for(t=0;t<zt.length;t++)if(n=zt[t],o=n.interleaved,o!==null){n.interleaved=null;var i=o.next,r=n.pending;if(r!==null){var s=r.next;r.next=i,o.next=s}n.pending=o}zt=null}return e}function Ff(e,t){do{var n=ne;try{if(vl(),gi.current=Bi,Hi){for(var o=j.memoizedState;o!==null;){var i=o.queue;i!==null&&(i.pending=null),o=o.next}Hi=!1}if(Kt=0,se=oe=j=null,uo=!1,Io=0,Rl.current=null,n===null||n.return===null){ie=1,Ro=t,ne=null;break}e:{var r=e,s=n.return,u=n,c=t;if(t=ce,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=u,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=za(s);if(x!==null){x.flags&=-257,Ja(x,s,u,r,t),x.mode&1&&Ba(r,d,t),t=x,c=d;var C=t.updateQueue;if(C===null){var T=new Set;T.add(c),t.updateQueue=T}else C.add(c);break e}else{if(!(t&1)){Ba(r,d,t),Fl();break e}c=Error(A(426))}}else if(K&&u.mode&1){var N=za(s);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Ja(N,s,u,r,t),gl(Mn(c,u));break e}}r=c=Mn(c,u),ie!==4&&(ie=2),fo===null?fo=[r]:fo.push(r),r=s;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var y=xf(r,c,t);Fa(r,y);break e;case 1:u=c;var g=r.type,v=r.stateNode;if(!(r.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Nt===null||!Nt.has(v)))){r.flags|=65536,t&=-t,r.lanes|=t;var w=Cf(r,u,t);Fa(r,w);break e}}r=r.return}while(r!==null)}qf(n)}catch(_){t=_,ne===n&&n!==null&&(ne=n=n.return);continue}break}while(1)}function Vf(){var e=zi.current;return zi.current=Bi,e===null?Bi:e}function Fl(){(ie===0||ie===3||ie===2)&&(ie=4),le===null||!(Qt&268435455)&&!(lr&268435455)||vt(le,ce)}function Wi(e,t){var n=q;q|=2;var o=Vf();(le!==e||ce!==t)&&(tt=null,$t(e,t));do try{Gh();break}catch(i){Ff(e,i)}while(1);if(vl(),q=n,zi.current=o,ne!==null)throw Error(A(261));return le=null,ce=0,ie}function Gh(){for(;ne!==null;)Gf(ne)}function qh(){for(;ne!==null&&!cm();)Gf(ne)}function Gf(e){var t=Hf(e.alternate,e,Ie);e.memoizedProps=e.pendingProps,t===null?qf(e):ne=t,Rl.current=null}function qf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Mh(n,t),n!==null){n.flags&=32767,ne=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ie=6,ne=null;return}}else if(n=Rh(n,t,Ie),n!==null){ne=n;return}if(t=t.sibling,t!==null){ne=t;return}ne=t=e}while(t!==null);ie===0&&(ie=5)}function Ht(e,t,n){var o=B,i=Ge.transition;try{Ge.transition=null,B=1,bh(e,t,n,o)}finally{Ge.transition=i,B=o}return null}function bh(e,t,n,o){do wn();while(Ct!==null);if(q&6)throw Error(A(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(Cm(e,r),e===le&&(ne=le=null,ce=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||si||(si=!0,Bf(Ai,function(){return wn(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=Ge.transition,Ge.transition=null;var s=B;B=1;var u=q;q|=4,Rl.current=null,Lh(e,n),Df(n,e),sh(hs),ki=!!ms,hs=ms=null,e.current=n,Uh(n),dm(),q=u,B=s,Ge.transition=r}else e.current=n;if(si&&(si=!1,Ct=e,$i=i),r=e.pendingLanes,r===0&&(Nt=null),mm(n.stateNode),Ne(e,te()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],o(i.value,{componentStack:i.stack,digest:i.digest});if(Ji)throw Ji=!1,e=Us,Us=null,e;return $i&1&&e.tag!==0&&wn(),r=e.pendingLanes,r&1?e===Fs?po++:(po=0,Fs=e):po=0,Dt(),null}function wn(){if(Ct!==null){var e=vd($i),t=Ge.transition,n=B;try{if(Ge.transition=null,B=16>e?16:e,Ct===null)var o=!1;else{if(e=Ct,Ct=null,$i=0,q&6)throw Error(A(331));var i=q;for(q|=4,P=e.current;P!==null;){var r=P,s=r.child;if(P.flags&16){var u=r.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(P=d;P!==null;){var p=P;switch(p.tag){case 0:case 11:case 15:co(8,p,r)}var m=p.child;if(m!==null)m.return=p,P=m;else for(;P!==null;){p=P;var h=p.sibling,x=p.return;if(Pf(p),p===d){P=null;break}if(h!==null){h.return=x,P=h;break}P=x}}}var C=r.alternate;if(C!==null){var T=C.child;if(T!==null){C.child=null;do{var N=T.sibling;T.sibling=null,T=N}while(T!==null)}}P=r}}if(r.subtreeFlags&2064&&s!==null)s.return=r,P=s;else e:for(;P!==null;){if(r=P,r.flags&2048)switch(r.tag){case 0:case 11:case 15:co(9,r,r.return)}var y=r.sibling;if(y!==null){y.return=r.return,P=y;break e}P=r.return}}var g=e.current;for(P=g;P!==null;){s=P;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,P=v;else e:for(s=g;P!==null;){if(u=P,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:sr(9,u)}}catch(_){Z(u,u.return,_)}if(u===s){P=null;break e}var w=u.sibling;if(w!==null){w.return=u.return,P=w;break e}P=u.return}}if(q=i,Dt(),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(Xi,e)}catch{}o=!0}return o}finally{B=n,Ge.transition=t}}return!1}function ou(e,t,n){t=Mn(n,t),t=xf(e,t,1),e=Et(e,t,1),t=xe(),e!==null&&(Lo(e,1,t),Ne(e,t))}function Z(e,t,n){if(e.tag===3)ou(e,e,n);else for(;t!==null;){if(t.tag===3){ou(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Nt===null||!Nt.has(o))){e=Mn(n,e),e=Cf(t,e,1),t=Et(t,e,1),e=xe(),t!==null&&(Lo(t,1,e),Ne(t,e));break}}t=t.return}}function Hh(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=xe(),e.pingedLanes|=e.suspendedLanes&n,le===e&&(ce&n)===n&&(ie===4||ie===3&&(ce&130023424)===ce&&500>te()-Dl?$t(e,0):Ml|=n),Ne(e,t)}function bf(e,t){t===0&&(e.mode&1?(t=Qo,Qo<<=1,!(Qo&130023424)&&(Qo=4194304)):t=1);var n=xe();e=ut(e,t),e!==null&&(Lo(e,t,n),Ne(e,n))}function Bh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bf(e,n)}function zh(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(A(314))}o!==null&&o.delete(t),bf(e,n)}var Hf;Hf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_e.current)Se=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Se=!1,Ph(e,t,n);Se=!!(e.flags&131072)}else Se=!1,K&&t.flags&1048576&&Jd(t,Fi,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;vi(e,t),e=t.pendingProps;var i=In(t,ye.current);Tn(t,n),i=Nl(null,t,o,e,i,n);var r=Al();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ee(o)?(r=!0,Li(t)):r=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Tl(t),i.updater=rr,t.stateNode=i,i._reactInternals=t,_s(t,o,e,n),t=As(null,t,o,!0,r,n)):(t.tag=0,K&&r&&ml(t),ve(null,t,i,n),t=t.child),t;case 16:o=t.elementType;e:{switch(vi(e,t),e=t.pendingProps,i=o._init,o=i(o._payload),t.type=o,i=t.tag=$h(o),e=ze(o,e),i){case 0:t=Ns(null,t,o,e,n);break e;case 1:t=Oa(null,t,o,e,n);break e;case 11:t=$a(null,t,o,e,n);break e;case 14:t=Wa(null,t,o,ze(o.type,e),n);break e}throw Error(A(306,o,""))}return t;case 0:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:ze(o,i),Ns(e,t,o,i,n);case 1:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:ze(o,i),Oa(e,t,o,i,n);case 3:e:{if(_f(t),e===null)throw Error(A(387));o=t.pendingProps,r=t.memoizedState,i=r.element,Qd(e,t),qi(t,o,null,n);var s=t.memoizedState;if(o=s.element,r.isDehydrated)if(r={element:o,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){i=Mn(Error(A(423)),t),t=Ya(e,t,o,n,i);break e}else if(o!==i){i=Mn(Error(A(424)),t),t=Ya(e,t,o,n,i);break e}else for(Pe=_t(t.stateNode.containerInfo.firstChild),Re=t,K=!0,$e=null,n=Yd(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kn(),o===i){t=ct(e,t,n);break e}ve(e,t,o,n)}t=t.child}return t;case 5:return jd(t),e===null&&Ts(t),o=t.type,i=t.pendingProps,r=e!==null?e.memoizedProps:null,s=i.children,gs(o,i)?s=null:r!==null&&gs(o,r)&&(t.flags|=32),Sf(e,t),ve(e,t,s,n),t.child;case 6:return e===null&&Ts(t),null;case 13:return Ef(e,t,n);case 4:return wl(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Pn(t,null,o,n):ve(e,t,o,n),t.child;case 11:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:ze(o,i),$a(e,t,o,i,n);case 7:return ve(e,t,t.pendingProps,n),t.child;case 8:return ve(e,t,t.pendingProps.children,n),t.child;case 12:return ve(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,i=t.pendingProps,r=t.memoizedProps,s=i.value,$(Vi,o._currentValue),o._currentValue=s,r!==null)if(Ye(r.value,s)){if(r.children===i.children&&!_e.current){t=ct(e,t,n);break e}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var u=r.dependencies;if(u!==null){s=r.child;for(var c=u.firstContext;c!==null;){if(c.context===o){if(r.tag===1){c=st(-1,n&-n),c.tag=2;var d=r.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}r.lanes|=n,c=r.alternate,c!==null&&(c.lanes|=n),ws(r.return,n,t),u.lanes|=n;break}c=c.next}}else if(r.tag===10)s=r.type===t.type?null:r.child;else if(r.tag===18){if(s=r.return,s===null)throw Error(A(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),ws(s,n,t),s=r.sibling}else s=r.child;if(s!==null)s.return=r;else for(s=r;s!==null;){if(s===t){s=null;break}if(r=s.sibling,r!==null){r.return=s.return,s=r;break}s=s.return}r=s}ve(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,o=t.pendingProps.children,Tn(t,n),i=be(i),o=o(i),t.flags|=1,ve(e,t,o,n),t.child;case 14:return o=t.type,i=ze(o,t.pendingProps),i=ze(o.type,i),Wa(e,t,o,i,n);case 15:return Tf(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:ze(o,i),vi(e,t),t.tag=1,Ee(o)?(e=!0,Li(t)):e=!1,Tn(t,n),vf(t,o,i),_s(t,o,i,n),As(null,t,o,!0,e,n);case 19:return Nf(e,t,n);case 22:return wf(e,t,n)}throw Error(A(156,t.tag))};function Bf(e,t){return md(e,t)}function Jh(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ve(e,t,n,o){return new Jh(e,t,n,o)}function Vl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $h(e){if(typeof e=="function")return Vl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===nl)return 11;if(e===ol)return 14}return 2}function It(e,t){var n=e.alternate;return n===null?(n=Ve(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ti(e,t,n,o,i,r){var s=2;if(o=e,typeof e=="function")Vl(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case rn:return Wt(n.children,i,r,t);case tl:s=8,i|=8;break;case Yr:return e=Ve(12,n,t,i|2),e.elementType=Yr,e.lanes=r,e;case Kr:return e=Ve(13,n,t,i),e.elementType=Kr,e.lanes=r,e;case Qr:return e=Ve(19,n,t,i),e.elementType=Qr,e.lanes=r,e;case jc:return ar(n,i,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Kc:s=10;break e;case Qc:s=9;break e;case nl:s=11;break e;case ol:s=14;break e;case ht:s=16,o=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=Ve(s,n,t,i),t.elementType=e,t.type=o,t.lanes=r,t}function Wt(e,t,n,o){return e=Ve(7,e,o,t),e.lanes=n,e}function ar(e,t,n,o){return e=Ve(22,e,o,t),e.elementType=jc,e.lanes=n,e.stateNode={isHidden:!1},e}function zr(e,t,n){return e=Ve(6,e,null,t),e.lanes=n,e}function Jr(e,t,n){return t=Ve(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wh(e,t,n,o,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_r(0),this.expirationTimes=_r(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_r(0),this.identifierPrefix=o,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gl(e,t,n,o,i,r,s,u,c){return e=new Wh(e,t,n,u,c),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Ve(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tl(r),e}function Oh(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:on,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function zf(e){if(!e)return Pt;e=e._reactInternals;e:{if(en(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ee(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var n=e.type;if(Ee(n))return Bd(e,n,t)}return t}function Jf(e,t,n,o,i,r,s,u,c){return e=Gl(n,o,!0,e,i,r,s,u,c),e.context=zf(null),n=e.current,o=xe(),i=At(n),r=st(o,i),r.callback=t??null,Et(n,r,i),e.current.lanes=i,Lo(e,i,o),Ne(e,o),e}function ur(e,t,n,o){var i=t.current,r=xe(),s=At(i);return n=zf(n),t.context===null?t.context=n:t.pendingContext=n,t=st(r,s),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=Et(i,t,s),e!==null&&(Oe(e,i,s,r),hi(e,i,s)),s}function Oi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function iu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ql(e,t){iu(e,t),(e=e.alternate)&&iu(e,t)}function Yh(){return null}var $f=typeof reportError=="function"?reportError:function(e){console.error(e)};function bl(e){this._internalRoot=e}cr.prototype.render=bl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));ur(e,t,null,null)};cr.prototype.unmount=bl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jt(function(){ur(null,e,null,null)}),t[at]=null}};function cr(e){this._internalRoot=e}cr.prototype.unstable_scheduleHydration=function(e){if(e){var t=Td();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yt.length&&t!==0&&t<yt[n].priority;n++);yt.splice(n,0,e),n===0&&Sd(e)}};function Hl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dr(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ru(){}function Kh(e,t,n,o,i){if(i){if(typeof o=="function"){var r=o;o=function(){var d=Oi(s);r.call(d)}}var s=Jf(t,o,e,0,null,!1,!1,"",ru);return e._reactRootContainer=s,e[at]=s.current,So(e.nodeType===8?e.parentNode:e),jt(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof o=="function"){var u=o;o=function(){var d=Oi(c);u.call(d)}}var c=Gl(e,0,!1,null,null,!1,!1,"",ru);return e._reactRootContainer=c,e[at]=c.current,So(e.nodeType===8?e.parentNode:e),jt(function(){ur(t,c,n,o)}),c}function fr(e,t,n,o,i){var r=n._reactRootContainer;if(r){var s=r;if(typeof i=="function"){var u=i;i=function(){var c=Oi(s);u.call(c)}}ur(t,s,e,i)}else s=Kh(n,t,e,i,o);return Oi(s)}xd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=to(t.pendingLanes);n!==0&&(sl(t,n|1),Ne(t,te()),!(q&6)&&(Dn=te()+500,Dt()))}break;case 13:jt(function(){var o=ut(e,1);if(o!==null){var i=xe();Oe(o,e,1,i)}}),ql(e,1)}};ll=function(e){if(e.tag===13){var t=ut(e,134217728);if(t!==null){var n=xe();Oe(t,e,134217728,n)}ql(e,134217728)}};Cd=function(e){if(e.tag===13){var t=At(e),n=ut(e,t);if(n!==null){var o=xe();Oe(n,e,t,o)}ql(e,t)}};Td=function(){return B};wd=function(e,t){var n=B;try{return B=e,t()}finally{B=n}};ss=function(e,t,n){switch(t){case"input":if(Zr(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var i=nr(o);if(!i)throw Error(A(90));Zc(o),Zr(o,i)}}}break;case"textarea":td(e,n);break;case"select":t=n.value,t!=null&&yn(e,!!n.multiple,t,!1)}};ad=Ll;ud=jt;var Qh={usingClientEntryPoint:!1,Events:[Fo,un,nr,sd,ld,Ll]},Kn={findFiberByHostInstance:Bt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jh={bundleType:Kn.bundleType,version:Kn.version,rendererPackageName:Kn.rendererPackageName,rendererConfig:Kn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fd(e),e===null?null:e.stateNode},findFiberByHostInstance:Kn.findFiberByHostInstance||Yh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var li=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!li.isDisabled&&li.supportsFiber)try{Xi=li.inject(jh),Ze=li}catch{}}De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qh;De.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hl(t))throw Error(A(200));return Oh(e,t,null,n)};De.createRoot=function(e,t){if(!Hl(e))throw Error(A(299));var n=!1,o="",i=$f;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Gl(e,1,!1,null,null,n,!1,o,i),e[at]=t.current,So(e.nodeType===8?e.parentNode:e),new bl(t)};De.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=fd(t),e=e===null?null:e.stateNode,e};De.flushSync=function(e){return jt(e)};De.hydrate=function(e,t,n){if(!dr(t))throw Error(A(200));return fr(null,e,t,!0,n)};De.hydrateRoot=function(e,t,n){if(!Hl(e))throw Error(A(405));var o=n!=null&&n.hydratedSources||null,i=!1,r="",s=$f;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=Jf(t,null,e,1,n??null,i,!1,r,s),e[at]=t.current,So(e),o)for(e=0;e<o.length;e++)n=o[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new cr(t)};De.render=function(e,t,n){if(!dr(t))throw Error(A(200));return fr(null,e,t,!1,n)};De.unmountComponentAtNode=function(e){if(!dr(e))throw Error(A(40));return e._reactRootContainer?(jt(function(){fr(null,null,e,!1,function(){e._reactRootContainer=null,e[at]=null})}),!0):!1};De.unstable_batchedUpdates=Ll;De.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!dr(n))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return fr(e,t,n,!1,o)};De.version="18.3.1-next-f1338f8080-20240426";function Wf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wf)}catch(e){console.error(e)}}Wf(),$c.exports=De;var Xh=$c.exports,su=Xh;Wr.createRoot=su.createRoot,Wr.hydrateRoot=su.hydrateRoot;var U=(e=>(e.HOME="Home",e.JOB_AID="Job Aid",e.CASE_STUDY="Case Study",e.VISUAL_CHALLENGE="Visual Challenge",e.DIAGNOSTIC_PATHWAY="Diagnostic Pathway",e.AI_CASE_GENERATOR="AI Case Generator",e.ANALYSIS="Analysis",e.DESIGN="Design",e.DEVELOPMENT="Development",e.EVALUATION="Evaluation",e.ASSESSMENT="Assessment",e.ADMIN="Admin View",e))(U||{});const Of="pathology_module_users",Go=()=>{const e=localStorage.getItem(Of);return e?JSON.parse(e):{}},pr=e=>{localStorage.setItem(Of,JSON.stringify(e))},Zh=(e,t,n)=>{if(e.toLowerCase()==="admin")throw new Error("This username is reserved.");const o=Go();if(o[e])throw new Error("Username is already taken.");if(Object.values(o).some(r=>r.email===n))throw new Error("Email is already in use.");const i={username:e,passwordHash:t,email:n};return o[e]=i,pr(o),{username:e,email:n}},eg=(e,t)=>{if(e.toLowerCase()==="admin"&&t==="admin")return{username:"admin",isAdmin:!0,email:"admin@system.local"};const o=Go()[e];if(!o)throw new Error("User not found.");if(o.passwordHash!==t)throw new Error("Incorrect password.");return{username:o.username,email:o.email}},tg=(e,t,n)=>{const o=Go(),i=o[e];if(!i)throw new Error("User not found.");if(i.passwordHash!==t)throw new Error("Incorrect current password.");if(t===n)throw new Error("New password cannot be the same as the old password.");i.passwordHash=n,pr(o)},ng=e=>{const t=Go(),n=t[e];if(!n)throw new Error("No account found with that username.");const o=`reset-${Math.random().toString(36).substring(2,11)}`,i=Date.now()+36e5;return n.resetToken=o,n.resetTokenExpires=i,pr(t),o},og=(e,t)=>{const n=Go(),o=Object.values(n).find(i=>i.resetToken===e&&i.resetTokenExpires&&i.resetTokenExpires>Date.now());if(!o)throw new Error("Invalid or expired reset token.");o.passwordHash=t,delete o.resetToken,delete o.resetTokenExpires,n[o.username]=o,pr(n)},Qn="pathology_module_currentUser",ig=()=>{const[e,t]=L.useState(null),[n,o]=L.useState(!0);L.useEffect(()=>{try{const u=localStorage.getItem(Qn);u&&t(JSON.parse(u))}catch(u){console.error("Failed to parse stored user:",u),localStorage.removeItem(Qn)}o(!1)},[]);const i=L.useCallback((u,c)=>{const d=eg(u,c);return localStorage.setItem(Qn,JSON.stringify(d)),t(d),d},[]),r=L.useCallback((u,c,d)=>{const p=Zh(u,c,d);return localStorage.setItem(Qn,JSON.stringify(p)),t(p),p},[]),s=L.useCallback(()=>{localStorage.removeItem(Qn),t(null)},[]);return{currentUser:e,login:i,signup:r,logout:s,isLoading:n,isAuthenticated:!!e}},rg=e=>{const[t,n]=L.useState(U.HOME),[o,i]=L.useState(!0),r=L.useCallback(()=>e?`pathology_module_progress_${e}`:null,[e]);L.useEffect(()=>{const u=r();if(u)try{const c=localStorage.getItem(u);c&&Object.values(U).includes(c)?n(c):n(U.HOME)}catch(c){console.error("Failed to load user progress:",c),n(U.HOME)}i(!1)},[e,r]);const s=L.useCallback(u=>{n(u);const c=r();if(c)try{localStorage.setItem(c,u)}catch(d){console.error("Failed to save user progress:",d)}window.scrollTo(0,0)},[r]);return{currentSection:t,handleSectionChange:s,isLoading:o}},sg=({className:e})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Bl=({className:e})=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 10l-3 3"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 3.5v3m0 9.5V19m-3.5-6H4m12 0h-2.5"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 15l2.5 2.5"})]}),qo=({className:e})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),bo=({className:e})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Mo=({className:e})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),lg=({className:e})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A5.975 5.975 0 0112 15a5.975 5.975 0 012.454-4.638M15 21a6 6 0 00-9-5.197"})}),ag=({className:e})=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),ug=({className:e})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),zl=({className:e})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Sn=({className:e})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),cg=({className:e})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),dg=({className:e})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Yf=({className:e})=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[f.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),f.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-5.998 12.078 12.078 0 01.665-6.479L12 14z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-5.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222 4 2.222V20"})]}),ot=({className:e})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),Kf=({className:e})=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547a2 2 0 00-.547 1.806l.443 2.216a2 2 0 001.022.547l2.387.477a6 6 0 003.86-.517l.318-.158a6 6 0 013.86-.517l2.387-.477a2 2 0 001.022-.547a2 2 0 00.547-1.806l-.443-2.216z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 01-6 0V6a3 3 0 016 0v6z"})]}),Qf=({className:e})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Jl=({className:e})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),jf=({className:e})=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),fg=({className:e})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M20 20v-5h-5M4 4l16 16"})}),pg=({className:e})=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),$l=({className:e})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})}),mg={success:{icon:f.jsx(qo,{className:"h-5 w-5"}),classes:"bg-green-50 border-green-400 text-green-800"},error:{icon:f.jsx(bo,{className:"h-5 w-5"}),classes:"bg-red-50 border-red-400 text-red-800"},info:{icon:f.jsx(Mo,{className:"h-5 w-5"}),classes:"bg-sky-50 border-sky-400 text-sky-800"}},ue=({type:e,title:t,children:n,className:o=""})=>{const i=mg[e];return f.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg flex items-start space-x-3 ${i.classes} ${o}`,children:[f.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i.icon}),f.jsxs("div",{children:[t&&f.jsx("h3",{className:"font-bold text-sm mb-1",children:t}),f.jsx("div",{className:"text-sm",children:n})]})]})},hg=({onSubmit:e,buttonText:t,isLoginView:n})=>{const[o,i]=L.useState(""),[r,s]=L.useState(""),[u,c]=L.useState(""),d=p=>{p.preventDefault(),n?e(o,r):e(o,r,u)};return f.jsxs("form",{onSubmit:d,className:"space-y-6",children:[f.jsxs("div",{className:"relative",children:[f.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),f.jsx(zl,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),f.jsx("input",{id:"username",name:"username",type:"text",value:o,onChange:p=>i(p.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 transition shadow-sm bg-white",placeholder:"Username",autoComplete:"username",required:!0})]}),!n&&f.jsxs("div",{className:"relative",children:[f.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),f.jsx(cg,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),f.jsx("input",{id:"email",name:"email",type:"email",value:u,onChange:p=>c(p.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 transition shadow-sm bg-white",placeholder:"Email Address",autoComplete:"email",required:!0})]}),f.jsxs("div",{className:"relative",children:[f.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),f.jsx(Sn,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),f.jsx("input",{id:"password",name:"password",type:"password",value:r,onChange:p=>s(p.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 transition shadow-sm bg-white",placeholder:"Password",autoComplete:n?"current-password":"new-password",required:!0})]}),f.jsx("button",{type:"submit",className:"w-full bg-primary-600 text-white font-semibold py-3 px-5 rounded-lg hover:bg-primary-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 transition-all duration-200 shadow-sm hover:shadow-md",children:t})]})},gg=({onLogin:e,onSignup:t})=>{const[n,o]=L.useState("login_signup"),[i,r]=L.useState(!0),[s,u]=L.useState(null),[c,d]=L.useState(null),[p,m]=L.useState(""),[h,x]=L.useState(""),[C,T]=L.useState(""),[N,y]=L.useState(""),g=(S,E,I)=>{if(u(null),d(null),!S||!E){u("Username and password are required.");return}try{if(i)e(S,E);else{if(!I){u("Email is required for signup.");return}t(S,E,I)}}catch(k){u(k.message)}},v=S=>{S.preventDefault(),u(null),d(null);try{const E=ng(p);d(`A password reset code has been generated. In a real application, this would be sent to your email. For this simulation, your code is: ${E}`),o("reset")}catch(E){u(E.message)}},w=S=>{if(S.preventDefault(),u(null),d(null),C!==N){u("Passwords do not match.");return}try{og(h,C),d("Password has been reset successfully. Please log in with your new password."),o("login_signup"),r(!0),m(""),x(""),T(""),y("")}catch(E){u(E.message)}},_=()=>{switch(n){case"forgot":return f.jsxs(f.Fragment,{children:[f.jsxs("header",{className:"text-left mb-10",children:[f.jsx("h1",{className:"text-3xl font-bold font-serif text-slate-900",children:"Forgot Password"}),f.jsx("p",{className:"mt-2 text-slate-600",children:"Enter your username to begin the reset process."})]}),f.jsxs("form",{onSubmit:v,className:"space-y-6",children:[f.jsxs("div",{className:"relative",children:[f.jsx("label",{htmlFor:"reset-username",className:"sr-only",children:"Username"}),f.jsx(zl,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),f.jsx("input",{id:"reset-username",type:"text",value:p,onChange:S=>m(S.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 transition shadow-sm bg-white",placeholder:"Username",required:!0})]}),f.jsx("button",{type:"submit",className:"w-full bg-primary-600 text-white font-semibold py-3 px-5 rounded-lg hover:bg-primary-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 transition-all duration-200 shadow-sm hover:shadow-md",children:"Get Reset Code"})]}),f.jsx("p",{className:"text-center mt-6",children:f.jsx("button",{onClick:()=>{o("login_signup"),u(null)},className:"text-sm text-primary-600 hover:underline",children:"Back to Login"})})]});case"reset":return f.jsxs(f.Fragment,{children:[f.jsxs("header",{className:"text-left mb-10",children:[f.jsx("h1",{className:"text-3xl font-bold font-serif text-slate-900",children:"Reset Your Password"}),f.jsx("p",{className:"mt-2 text-slate-600",children:"Enter the reset code and your new password."})]}),f.jsxs("form",{onSubmit:w,className:"space-y-6",children:[f.jsxs("div",{className:"relative",children:[f.jsx("label",{htmlFor:"reset-token",className:"sr-only",children:"Reset Code"}),f.jsx($l,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),f.jsx("input",{id:"reset-token",type:"text",value:h,onChange:S=>x(S.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Reset Code",required:!0})]}),f.jsxs("div",{className:"relative",children:[f.jsx("label",{htmlFor:"new-password",className:"sr-only",children:"New Password"}),f.jsx(Sn,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),f.jsx("input",{id:"new-password",type:"password",value:C,onChange:S=>T(S.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"New Password",required:!0})]}),f.jsxs("div",{className:"relative",children:[f.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm New Password"}),f.jsx(Sn,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),f.jsx("input",{id:"confirm-password",type:"password",value:N,onChange:S=>y(S.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Confirm New Password",required:!0})]}),f.jsx("button",{type:"submit",className:"w-full bg-primary-600 text-white font-semibold py-3 px-5 rounded-lg hover:bg-primary-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 transition-all duration-200 shadow-sm hover:shadow-md",children:"Reset Password"})]})]});case"login_signup":default:return f.jsxs(f.Fragment,{children:[f.jsxs("header",{className:"text-left mb-10",children:[f.jsx("h1",{className:"text-3xl font-bold font-serif text-slate-900",children:i?"Welcome Back, Resident":"Create Your Account"}),f.jsx("p",{className:"mt-2 text-slate-600",children:i?"Login to continue your progress.":"Sign up to begin your learning journey."})]}),f.jsx("div",{className:"mb-8",children:f.jsxs("div",{className:"flex border-b border-slate-200",children:[f.jsx("button",{onClick:()=>{r(!0),u(null)},className:`flex-1 py-3 text-sm text-center transition-colors focus:outline-none ${i?"font-semibold text-primary-600 border-b-2 border-primary-600":"text-slate-500 hover:text-slate-700"}`,children:"LOGIN"}),f.jsx("button",{onClick:()=>{r(!1),u(null)},className:`flex-1 py-3 text-sm text-center transition-colors focus:outline-none ${i?"text-slate-500 hover:text-slate-700":"font-semibold text-primary-600 border-b-2 border-primary-600"}`,children:"SIGN UP"})]})}),f.jsx(hg,{onSubmit:g,isLoginView:i,buttonText:i?"Login to Your Session":"Create Account & Start Learning"},i?"login":"signup"),i&&f.jsx("p",{className:"text-center mt-6",children:f.jsx("button",{onClick:()=>{o("forgot"),u(null),d(null)},className:"text-sm text-primary-600 hover:underline",children:"Forgot Password?"})}),f.jsx("p",{className:"text-center text-xs text-slate-500 mt-8",children:"Your progress is saved locally in your browser, linked to your username."})]})}};return f.jsx("div",{className:"min-h-screen bg-white",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 min-h-screen",children:[f.jsxs("div",{className:"hidden lg:block relative",children:[f.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1579154204601-01588f351e67?q=80&w=3439&auto=format&fit=crop')"},children:f.jsx("div",{className:"absolute inset-0 bg-slate-900 opacity-60"})}),f.jsxs("div",{className:"relative z-10 flex flex-col justify-center h-full px-12 text-white",children:[f.jsx(Yf,{className:"h-12 w-12 text-primary-400 mb-4"}),f.jsx("h1",{className:"text-4xl font-bold font-serif leading-tight",children:"Unlock Your Diagnostic Potential."}),f.jsx("p",{className:"mt-4 text-lg text-slate-300",children:"An interactive learning module designed to elevate your diagnostic skills in granulomatous diseases of the lung."})]})]}),f.jsx("div",{className:"flex flex-col justify-center items-center p-8 sm:p-12 bg-slate-50",children:f.jsxs("div",{className:"w-full max-w-md",children:[s&&f.jsx("div",{className:"mb-4",children:f.jsx(ue,{type:"error",children:s})}),c&&f.jsx("div",{className:"mb-4",children:f.jsx(ue,{type:"info",children:c})}),_()]})})]})})},ai=({section:e,currentSection:t,onClick:n,icon:o})=>{const i=e===t;return f.jsxs("button",{onClick:()=>n(e),className:`w-full flex items-center px-4 py-2.5 text-sm font-medium rounded-lg transition-all duration-200 text-left ${i?"bg-primary-600 text-white font-semibold shadow-md shadow-primary-500/20":"text-slate-700 hover:bg-slate-200/70 hover:text-slate-900"}`,children:[f.jsx("div",{className:"mr-3 flex-shrink-0",children:o}),f.jsx("span",{children:e})]})},lu=({currentSection:e,onSectionChange:t,user:n,onLogout:o,onChangePasswordClick:i,className:r})=>{const s=[{section:U.JOB_AID,icon:f.jsx(Qf,{className:"h-5 w-5"})},{section:U.CASE_STUDY,icon:f.jsx(Bl,{className:"h-5 w-5"})},{section:U.VISUAL_CHALLENGE,icon:f.jsx(jf,{className:"h-5 w-5"})},{section:U.DIAGNOSTIC_PATHWAY,icon:f.jsx(Kf,{className:"h-5 w-5"})},{section:U.AI_CASE_GENERATOR,icon:f.jsx(Jl,{className:"h-5 w-5"})}],u=[{section:U.ANALYSIS,icon:f.jsx(ot,{className:"h-5 w-5"})},{section:U.DESIGN,icon:f.jsx(ot,{className:"h-5 w-5"})},{section:U.DEVELOPMENT,icon:f.jsx(ot,{className:"h-5 w-5"})},{section:U.EVALUATION,icon:f.jsx(ot,{className:"h-5 w-5"})},{section:U.ASSESSMENT,icon:f.jsx(ot,{className:"h-5 w-5"})}];return f.jsxs("aside",{className:`bg-white border-r border-slate-200/80 p-4 flex flex-col ${r}`,children:[f.jsxs("div",{className:"flex items-center mb-6 px-2 flex-shrink-0",children:[f.jsx(Yf,{className:"h-8 w-8 text-primary-600"}),f.jsx("h1",{className:"ml-3 text-lg font-bold font-serif text-slate-800",children:"Pathology Module"})]}),f.jsxs("nav",{className:"flex-1 space-y-4 overflow-y-auto",children:[f.jsx("div",{children:f.jsx(ai,{section:U.HOME,currentSection:e,onClick:t,icon:f.jsx(sg,{className:"h-5 w-5"})})}),f.jsxs("div",{children:[f.jsx("h2",{className:"px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2 mt-4",children:"Learning Sections"}),f.jsx("div",{className:"space-y-1",children:s.map(({section:c,icon:d})=>f.jsx(ai,{section:c,currentSection:e,onClick:t,icon:d},c))})]}),f.jsxs("div",{children:[f.jsx("h2",{className:"px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2 mt-4",children:"Instructional Design"}),f.jsx("div",{className:"space-y-1",children:u.map(({section:c,icon:d})=>f.jsx(ai,{section:c,currentSection:e,onClick:t,icon:d},c))})]}),n.isAdmin&&f.jsxs("div",{children:[f.jsx("h2",{className:"px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2 mt-4",children:"Admin"}),f.jsx("div",{className:"space-y-1",children:f.jsx(ai,{section:U.ADMIN,currentSection:e,onClick:t,icon:f.jsx(pg,{className:"h-5 w-5"})})})]})]}),f.jsx("div",{className:"mt-auto pt-4 border-t border-slate-200",children:f.jsxs("div",{className:"px-4 py-2",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(zl,{className:"h-8 w-8 text-slate-400 flex-shrink-0"}),f.jsxs("div",{className:"ml-3 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-slate-700 truncate",children:n.username}),f.jsx("p",{className:"text-xs text-slate-500 truncate",children:n.email})]})]}),f.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[f.jsxs("button",{onClick:i,title:"Change Password",className:"w-full flex items-center justify-center text-xs px-2 py-1.5 bg-slate-100 text-slate-700 hover:bg-slate-200 hover:text-slate-900 rounded-md font-medium transition-colors",children:[f.jsx($l,{className:"h-4 w-4 mr-1.5"})," Change Password"]}),f.jsx("button",{onClick:o,title:"Logout",className:"flex-shrink-0 p-2 text-slate-600 hover:bg-slate-200/70 hover:text-slate-900 rounded-md transition-colors",children:f.jsx(ug,{className:"h-5 w-5"})})]})]})})]})},yg=({onMenuClick:e,currentSection:t})=>f.jsxs("header",{className:"md:hidden bg-white shadow-sm sticky top-0 z-20 flex items-center justify-between p-4 border-b border-slate-200",children:[f.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 p-2 -ml-2","aria-label":"Open navigation menu",children:f.jsx(dg,{className:"h-6 w-6"})}),f.jsx("h1",{className:"text-lg font-semibold text-slate-800 truncate",children:t}),f.jsx("div",{className:"w-6"})," "]}),H=zc.forwardRef(({children:e,className:t="",interactive:n=!1,...o},i)=>{const r="bg-white rounded-xl shadow-sm border border-slate-200/80 p-6 md:p-8 mb-8 transition-all duration-300",s=n?"hover:shadow-md hover:border-slate-300/80 hover:-translate-y-0.5 cursor-pointer":"";return f.jsx("div",{ref:i,className:`${r} ${s} ${t}`,...o,children:e})});H.displayName="Card";const au=({section:e,description:t,icon:n,onClick:o})=>f.jsx("li",{className:"list-none",children:f.jsx(H,{interactive:!0,className:"!mb-0 h-full",onClick:()=>o(e),children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-lg bg-primary-100 flex items-center justify-center mr-4",children:f.jsx("div",{className:"text-primary-600",children:n})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold font-serif text-slate-800",children:e}),f.jsx("p",{className:"mt-1 text-sm text-slate-500",children:t})]})]})})}),uu=({onSectionChange:e})=>{const t=[{section:U.JOB_AID,description:"A quick-reference table comparing high-yield features of Sarcoidosis and Tuberculosis.",icon:f.jsx(Qf,{className:"h-5 w-5"})},{section:U.CASE_STUDY,description:"Work through a classic case of Hypersensitivity Pneumonitis with an interactive whole-slide image viewer.",icon:f.jsx(Bl,{className:"h-5 w-5"})},{section:U.VISUAL_CHALLENGE,description:"Sharpen your morphologic eye by comparing Sarcoidosis and HP side-by-side on digital slides.",icon:f.jsx(jf,{className:"h-5 w-5"})},{section:U.DIAGNOSTIC_PATHWAY,description:"A comprehensive, multi-step quiz that guides you through the differential diagnosis of a wide range of granulomatous diseases.",icon:f.jsx(Kf,{className:"h-5 w-5"})},{section:U.AI_CASE_GENERATOR,description:"Leverage Gemini AI to generate unique, board-style cases and receive instant feedback on your diagnostic skills.",icon:f.jsx(Jl,{className:"h-5 w-5"})}],n=[{section:U.ANALYSIS,description:"Defining the learner, their knowledge gaps, and the context for learning.",icon:f.jsx(ot,{className:"h-5 w-5"})},{section:U.DESIGN,description:"Creating specific, measurable learning objectives based on the analysis.",icon:f.jsx(ot,{className:"h-5 w-5"})},{section:U.DEVELOPMENT,description:"Creating the instructional content, media, and activities.",icon:f.jsx(ot,{className:"h-5 w-5"})},{section:U.EVALUATION,description:"Measuring your ability to integrate findings and form a diagnosis.",icon:f.jsx(ot,{className:"h-5 w-5"})}];return f.jsxs("div",{className:"space-y-12 animate-fade-in",children:[f.jsxs("header",{className:"text-center",children:[f.jsx("h1",{className:"text-4xl sm:text-5xl font-bold font-serif text-slate-900 tracking-tight",children:"Granulomatous Diseases of the Lung"}),f.jsx("p",{className:"mt-4 text-lg text-slate-600 max-w-3xl mx-auto",children:"An Interactive Learning Module for Pathology Residents"})]}),f.jsxs(H,{children:[f.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-4",children:"Welcome, Resident!"}),f.jsx("p",{className:"text-slate-600 leading-relaxed",children:"This module is designed to elevate your diagnostic skills in evaluating granulomatous diseases of the lung. The primary challenge in this area is not just identifying a granuloma, but navigating the significant morphologic overlap between different etiologies. Our goal is to move you from simple identification to integrated diagnostic reasoning—a crucial skill for both daily sign-out and board examinations."})]}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-6 text-center",children:"The Learning Module"}),f.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(o=>f.jsx(au,{...o,onClick:e},o.section))})]}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-6 text-center",children:"About This Project (Instructional Design)"}),f.jsx("p",{className:"text-slate-600 mb-6 text-center max-w-3xl mx-auto",children:"This module was built using the ADDIE model of instructional design. The sections below provide a meta-narrative on how this learning experience was constructed, from initial analysis to final evaluation."}),f.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(o=>f.jsx(au,{...o,onClick:e},o.section))})]})]})},ft=({title:e,subtitle:t,icon:n})=>f.jsx("header",{className:"mb-8 md:mb-12 animate-fade-in",children:f.jsxs("div",{className:"flex items-center",children:[n&&f.jsx("div",{className:"mr-4 text-primary-600",children:n}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl sm:text-4xl font-bold font-serif text-slate-900",children:e}),f.jsx("p",{className:"mt-2 text-md text-slate-500",children:t})]})]})}),vg=()=>f.jsxs("div",{className:"animate-fade-in",children:[f.jsx(ft,{title:"Comparative Table",subtitle:"Distinguishing Sarcoidosis vs. Tuberculosis"}),f.jsxs(H,{children:[f.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-4",children:"High-Yield Distinctions"}),f.jsx("p",{className:"text-slate-600 mb-6",children:"This table highlights key distinguishing features between two common entities. Use it as a quick reference at the microscope."}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm text-left text-slate-500",children:[f.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-100",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold rounded-l-lg",children:"Feature"}),f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:"Classic Finding in Sarcoidosis"}),f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold rounded-r-lg",children:"Classic Finding in Tuberculosis"})]})}),f.jsxs("tbody",{className:"divide-y divide-slate-200",children:[f.jsxs("tr",{className:"bg-white",children:[f.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Granuloma Type"}),f.jsx("td",{className:"px-6 py-4",children:'Tightly formed, well-circumscribed, "naked" (scant lymphocytes).'}),f.jsx("td",{className:"px-6 py-4",children:"Can be well-formed or poorly-formed, often confluent, prominent rim of lymphocytes."})]}),f.jsxs("tr",{className:"bg-white",children:[f.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Necrosis"}),f.jsxs("td",{className:"px-6 py-4",children:[f.jsx("strong",{children:"Non-necrotizing"}),' ("non-caseating").']}),f.jsxs("td",{className:"px-6 py-4",children:[f.jsx("strong",{children:"Caseating necrosis"})," (eosinophilic, granular, acellular debris)."]})]}),f.jsxs("tr",{className:"bg-white",children:[f.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Distribution"}),f.jsxs("td",{className:"px-6 py-4",children:[f.jsx("strong",{children:"Lymphangitic"})," (along bronchovascular bundles, septa, pleura)."]}),f.jsxs("td",{className:"px-6 py-4",children:[f.jsx("strong",{children:"Apical and cavitary"})," (typically upper lobes)."]})]}),f.jsxs("tr",{className:"bg-white",children:[f.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Associated Findings"}),f.jsx("td",{className:"px-6 py-4",children:"Schaumann bodies, Asteroid bodies."}),f.jsx("td",{className:"px-6 py-4",children:"Acid-fast bacilli (AFB) visible with special stain."})]})]})]})})]})]}),oo=({dziUrl:e})=>{const t=L.useRef(null);return L.useEffect(()=>{let n=null;return t.current&&e&&(n=OpenSeadragon({element:t.current,prefixUrl:"https://cdnjs.cloudflare.com/ajax/libs/openseadragon/4.1.1/images/",tileSources:e,animationTime:.5,blendTime:.1,constrainDuringPan:!0,maxZoomPixelRatio:2,minZoomLevel:1,visibilityRatio:1,zoomPerScroll:2,showNavigator:!0,navigatorPosition:"BOTTOM_RIGHT",navigatorHeight:120,navigatorWidth:150})),()=>{n&&n.destroy()}},[e]),f.jsx("div",{ref:t,className:"w-full h-64 sm:h-96 bg-black rounded-lg shadow-md openseadragon-container","aria-label":"Interactive whole slide image viewer"})},xg=()=>{const[e,t]=L.useState(!1),n="https://openseadragon.github.io/example-images/aperio/aperio.dzi";return f.jsxs("div",{className:"animate-fade-in",children:[f.jsxs("header",{className:"mb-8",children:[f.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:"Interactive Case Study"}),f.jsx("p",{className:"mt-2 text-md text-slate-600",children:"Applying knowledge to a clinical scenario."})]}),f.jsxs(H,{children:[f.jsx("h2",{className:"text-2xl font-semibold text-slate-800 mb-4",children:`Case: "The Bird Fancier's Cough"`}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-2",children:"Part 1: Clinical & Radiologic Data"}),f.jsx("p",{className:"text-slate-600",children:"You receive a lung wedge biopsy from a 55-year-old man with a 6-month history of progressive shortness of breath and a dry cough. He is a non-smoker but has kept pigeons in his attic for over 20 years. A chest CT shows diffuse, bilateral ground-glass opacities with centrilobular nodules."})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-2",children:"Part 2: Histologic Findings"}),f.jsxs("div",{className:"space-y-3",children:[f.jsx(oo,{dziUrl:n}),f.jsxs("div",{className:"bg-sky-50 p-4 rounded-md border border-sky-200 text-sm text-sky-800",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"How to Add Your Own Slides:"})," To display a slide, the viewer needs a direct link to the image's tile source, not a link to a webpage that contains a viewer."]}),f.jsxs("ul",{className:"list-disc list-inside mt-2 pl-2",children:[f.jsxs("li",{children:[f.jsx("strong",{children:"Correct Format:"})," A URL ending in ",f.jsx("strong",{children:"`.dzi`"})," (like the example used here) or a link to an IIIF manifest."]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Incorrect Format:"})," A webpage URL like `https://pathpresenter.net/display/...`."]})]}),f.jsx("p",{className:"mt-2",children:"To use slides from a service like PathPresenter, you must check if they provide an API or an export option that gives you a direct tile source URL."})]}),f.jsx("p",{className:"text-slate-600 flex-1 pt-2",children:"The biopsy shows a cellular interstitial pneumonia. There are numerous small, poorly-formed granulomas centered on the bronchioles (bronchiolocentric). The granulomas are composed of loose collections of epithelioid histiocytes and multinucleated giant cells. There is no necrosis. The surrounding interstitium is expanded by a dense lymphoplasmacytic infiltrate, and scattered eosinophils are present. You also note foci of organizing pneumonia."})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-2",children:"Part 3: The Diagnostic Task"}),f.jsx("p",{className:"text-slate-600 mb-4",children:"Given the integrated clinical, radiologic, and histologic findings, construct a ranked differential diagnosis. Justify your top two choices."}),f.jsx("button",{onClick:()=>t(!e),className:"bg-primary-600 text-white font-medium py-2 px-5 rounded-lg hover:bg-primary-700 transition-colors shadow-sm",children:e?"Hide Expert Answer":"Reveal Expert Answer"}),e&&f.jsxs("div",{className:"mt-4 p-4 bg-slate-50 border border-slate-200 rounded-lg animate-fade-in",children:[f.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Expert's Answer:"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-green-700",children:"1. Hypersensitivity Pneumonitis (Subacute/Chronic)"}),f.jsxs("p",{className:"text-slate-600 text-sm",children:[f.jsx("strong",{children:"Justification:"})," This is the leading diagnosis. The clinical history (pigeon keeping), radiology (ground-glass, centrilobular nodules), and histology (cellular interstitial pneumonia, bronchiolocentric distribution, poorly-formed non-necrotizing granulomas) align perfectly."]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-orange-700",children:"2. Sarcoidosis"}),f.jsxs("p",{className:"text-slate-600 text-sm",children:[f.jsx("strong",{children:"Justification:"})," This is on the differential but less likely. In sarcoidosis, granulomas are typically well-formed and tight with a lymphangitic distribution, which is discordant with this case."]})]})]})]})]})]})]})]})},Xf="pathology_module_user_data",Zf=()=>{const e=localStorage.getItem(Xf);return e?JSON.parse(e):{}},Cg=e=>{localStorage.setItem(Xf,JSON.stringify(e))},Ln=(e,t,n,o)=>{if(e==="admin")return;const i=Zf(),r=i[e]||{},s=t.replace(/\s+/g,"");t===U.AI_CASE_GENERATOR?(r.AICaseGenerator||(r.AICaseGenerator=[]),r.AICaseGenerator.push(o)):t===U.ASSESSMENT?r.AssessmentPhase=o:(r[s]||(r[s]={}),r[s][n]=o),i[e]=r,Cg(i)},Tg=()=>Zf(),wg=({user:e})=>{const[t,n]=L.useState(null),[o,i]=L.useState(null),r=m=>{t||(n(m),Ln(e.username,U.VISUAL_CHALLENGE,"challenge1",{question:"Which slide shows the 'tightly-formed, well-circumscribed' granuloma typical of Sarcoidosis?",selectedAnswer:`Slide ${m}`,isCorrect:m==="B",timestamp:Date.now()}))},s=m=>{o||(i(m),Ln(e.username,U.VISUAL_CHALLENGE,"challenge2",{question:"Which slide shows the 'lymphangitic distribution' typical of Sarcoidosis?",selectedAnswer:`Slide ${m}`,isCorrect:m==="B",timestamp:Date.now()}))},u="https://openslide.cs.cmu.edu/download/openslide-testdata/Aperio/CMU-1.svs.dzi",c="https://openseadragon.github.io/example-images/aperio/aperio.dzi",d="https://openslide.cs.cmu.edu/download/openslide-testdata/Aperio/CMU-1.svs.dzi",p="https://openseadragon.github.io/example-images/aperio/aperio.dzi";return f.jsxs("div",{className:"animate-fade-in",children:[f.jsx(ft,{title:"Visual Discrimination Challenge",subtitle:"Sharpening your eye for Sarcoidosis vs. Hypersensitivity Pneumonitis."}),f.jsxs(H,{children:[f.jsx("p",{className:"text-slate-600 mb-8 text-center max-w-2xl mx-auto",children:"This activity forces a direct, side-by-side comparison of key visual features. Pan and zoom on each digital slide to find the key features, then make your choice."}),f.jsxs("div",{className:"space-y-12",children:[f.jsxs("div",{className:"pb-8 border-b border-slate-200",children:[f.jsxs("div",{className:"text-center mb-6",children:[f.jsx("h3",{className:"font-semibold font-serif text-xl text-slate-800",children:"Challenge 1: Granuloma Quality"}),f.jsxs("p",{className:"text-slate-500 mt-1",children:["Which slide shows the ",f.jsx("strong",{children:"'tightly-formed, well-circumscribed'"})," granuloma typical of Sarcoidosis?"]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-center mb-2 text-slate-700",children:"Slide A"}),f.jsx(oo,{dziUrl:u})]}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-center mb-2 text-slate-700",children:"Slide B"}),f.jsx(oo,{dziUrl:c})]})]}),f.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-center gap-4",children:[f.jsx("button",{onClick:()=>r("A"),disabled:!!t,className:"px-6 py-2 bg-white border border-slate-300 rounded-lg font-semibold text-slate-700 hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Select Slide A"}),f.jsx("button",{onClick:()=>r("B"),disabled:!!t,className:"px-6 py-2 bg-white border border-slate-300 rounded-lg font-semibold text-slate-700 hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Select Slide B"})]}),t&&f.jsxs("div",{className:"mt-6 max-w-xl mx-auto",children:[t==="A"&&f.jsx(ue,{type:"error",title:"Slide A (Incorrect)",children:"This slide represents a 'poorly-formed' granuloma typical of HP. Notice how the cells are loosely aggregated and blend into the surrounding inflammation."}),t==="B"&&f.jsx(ue,{type:"success",title:"Slide B (Correct)",children:"Notice the sharp borders and how the epithelioid histiocytes are tightly packed together. This is a classic 'sarcoidal' granuloma."})]})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"text-center mb-6",children:[f.jsx("h3",{className:"font-semibold font-serif text-xl text-slate-800",children:"Challenge 2: Architectural Distribution"}),f.jsxs("p",{className:"text-slate-500 mt-1",children:["Which slide shows the ",f.jsx("strong",{children:"'lymphangitic distribution'"})," typical of Sarcoidosis?"]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-center mb-2 text-slate-700",children:"Slide A"}),f.jsx(oo,{dziUrl:d})]}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-center mb-2 text-slate-700",children:"Slide B"}),f.jsx(oo,{dziUrl:p})]})]}),f.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-center gap-4",children:[f.jsx("button",{onClick:()=>s("A"),disabled:!!o,className:"px-6 py-2 bg-white border border-slate-300 rounded-lg font-semibold text-slate-700 hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Select Slide A"}),f.jsx("button",{onClick:()=>s("B"),disabled:!!o,className:"px-6 py-2 bg-white border border-slate-300 rounded-lg font-semibold text-slate-700 hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Select Slide B"})]}),o&&f.jsxs("div",{className:"mt-6 max-w-xl mx-auto",children:[o==="A"&&f.jsx(ue,{type:"error",title:"Slide A (Incorrect)",children:"This represents a 'bronchiolocentric' pattern, a key feature of HP. The inflammation is centered on the small airways."}),o==="B"&&f.jsx(ue,{type:"success",title:"Slide B (Correct)",children:"This represents a lymphangitic distribution. The granulomas are following the lung's lymphatic drainage routes along the bronchovascular bundles and septa."})]})]})]})]}),f.jsxs(H,{children:[f.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-4 text-center",children:"High-Yield Summary"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm text-left text-slate-500",children:[f.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-100",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold rounded-l-lg",children:"Feature"}),f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:"Sarcoidosis"}),f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold rounded-r-lg",children:"Hypersensitivity Pneumonitis"})]})}),f.jsxs("tbody",{className:"divide-y divide-slate-200",children:[f.jsxs("tr",{className:"bg-white",children:[f.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Quality"}),f.jsx("td",{className:"px-6 py-4",children:'Tight, Well-Formed, "Naked"'}),f.jsx("td",{className:"px-6 py-4",children:"Loose, Poorly-Formed, Cellular"})]}),f.jsxs("tr",{className:"bg-white",children:[f.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Location"}),f.jsx("td",{className:"px-6 py-4",children:"Lymphangitic (along bundles)"}),f.jsx("td",{className:"px-6 py-4",children:"Bronchiolocentric (around airways)"})]})]})]})})]})]})},Sg={q1_sarc_dist:{id:"q1_sarc_dist",title:"Question 1: Sarcoidosis Distribution",question:"The distribution of well-formed, non-necrotizing granulomas in classic pulmonary sarcoidosis is typically described as following the lymphatic routes of the lung parenchyma, a pattern referred to as:",options:[{id:"a",text:"Bronchiolocentric",nextStep:"q2_hp_features",isCorrect:!1,feedback:"Incorrect. A bronchiolocentric pattern is centered on small airways and is a key feature of Hypersensitivity Pneumonitis, not Sarcoidosis."},{id:"b",text:"Air-space centered",nextStep:"q2_hp_features",isCorrect:!1,feedback:'Incorrect. An "air-space centered" distribution describes pathology filling the alveolar air spaces, like in bronchopneumonia. Sarcoidosis is an interstitial disease.'},{id:"c",text:"Lymphangitic",nextStep:"q2_hp_features",isCorrect:!0,feedback:'Correct. Sarcoidosis is a disease where the granulomas are confined to the interstitium. The granulomas follow the lymphatic routes along the visceral pleura, interlobular septa, and bronchovascular bundles, which is defined as a "lymphangitic distribution".'},{id:"d",text:"Panacinar",nextStep:"q2_hp_features",isCorrect:!1,feedback:"Incorrect. Panacinar describes a pattern of emphysema affecting the entire acinus, not a distribution pattern for granulomas."}]},q2_hp_features:{id:"q2_hp_features",title:"Question 2: Hypersensitivity Pneumonitis Features",question:"Histologic confirmation of classic, chronic hypersensitivity pneumonia (HP) relies on identifying which combination of features?",options:[{id:"a",text:"Well-formed, tightly clustered, non-necrotizing granulomas in a lymphangitic distribution.",nextStep:"q3_necrotizing_infections",isCorrect:!1,feedback:"Incorrect. This describes the classic findings of Sarcoidosis."},{id:"b",text:"Necrotizing granulomas with central bland necrosis and scarce organisms.",nextStep:"q3_necrotizing_infections",isCorrect:!1,feedback:"Incorrect. This pattern is characteristic of infectious granulomas, like Tuberculosis or Histoplasmosis."},{id:"c",text:"Loose, poorly formed non-necrotizing granulomas centered on the peribronchiolar interstitium.",nextStep:"q3_necrotizing_infections",isCorrect:!0,feedback:"Correct. HP is characterized by a lymphocyte-rich interstitial infiltrate in a distinctly bronchiolocentric fashion, with associated loosely formed granulomas."},{id:"d",text:"Granulomas predominantly situated within the lumens of distal airways.",nextStep:"q3_necrotizing_infections",isCorrect:!1,feedback:'Incorrect. This unusual air-space centered granuloma location is a key feature of the MAC infection variant known as "hot-tub lung".'}]},q3_necrotizing_infections:{id:"q3_necrotizing_infections",title:"Question 3: Necrotizing Granulomas",question:"Necrotizing granulomatous inflammation involving central bland (caseating) necrosis is characteristic of which major group of infectious diseases?",options:[{id:"a",text:"Tuberculosis and Endemic Fungal Infections (e.g., Histoplasmosis).",nextStep:"q4_blastomycosis",isCorrect:!0,feedback:"Correct. Tuberculosis is the classic example of caseating necrosis. Many endemic fungi, like Histoplasmosis, also produce necrotizing granulomas with central bland necrosis."},{id:"b",text:"Classic Granulomatosis with Polyangiitis (GPA).",nextStep:"q4_blastomycosis",isCorrect:!1,feedback:'Incorrect. The necrosis in GPA is typically "dirty" or suppurative, with neutrophilic debris, not bland.'},{id:"c",text:"MAC infection (hot-tub lung variant).",nextStep:"q4_blastomycosis",isCorrect:!1,feedback:"Incorrect. Hot-tub lung typically features non-necrotizing granulomas within the airways."},{id:"d",text:"Foreign body reaction (Aspiration pneumonia).",nextStep:"q4_blastomycosis",isCorrect:!1,feedback:"Incorrect. Aspiration can cause granulomas, but caseating necrosis is not a feature."}]},q4_blastomycosis:{id:"q4_blastomycosis",title:"Question 4: Suppurative Granulomas",question:"A lung biopsy reveals necrotizing granulomatous inflammation with a prominent component of necrotic neutrophils (suppuration). Which endemic fungal organism is classically associated with this histological pattern?",options:[{id:"a",text:"Histoplasma capsulatum",nextStep:"q5_crypto_op",isCorrect:!1,feedback:"Incorrect. Histoplasmosis typically causes bland, caseous-type necrosis, not suppurative inflammation."},{id:"b",text:"Blastomyces dermatitidis",nextStep:"q5_crypto_op",isCorrect:!0,feedback:"Correct. Blastomycosis is frequently characterized by suppurative granulomatous inflammation, where the central necrosis is rich in neutrophils."},{id:"c",text:"Coccidioides immitis",nextStep:"q5_crypto_op",isCorrect:!1,feedback:"Incorrect. Coccidioidomycosis causes necrotizing granulomas, but prominent suppuration is the classic feature of Blastomycosis."},{id:"d",text:"Cryptococcus neoformans",nextStep:"q5_crypto_op",isCorrect:!1,feedback:"Incorrect. Cryptococcus typically forms poorly-formed granulomas and is not associated with a prominent suppurative response."}]},q5_crypto_op:{id:"q5_crypto_op",title:"Question 5: Cryptococcus & Organizing Pneumonia",question:"A common manifestation of pulmonary cryptococcosis is organizing pneumonia (OP). This secondary OP is histologically distinguished from cryptogenic organizing pneumonia (COP) by the presence of:",options:[{id:"a",text:"Prominent foamy macrophages.",nextStep:"q6_ntm_hot_tub",isCorrect:!1,feedback:"Incorrect. Foamy macrophages are more characteristic of Pneumocystis Pneumonia."},{id:"b",text:"Diffuse alveolar damage (DAD).",nextStep:"q6_ntm_hot_tub",isCorrect:!1,feedback:"Incorrect. DAD is a pattern of acute lung injury, not typically seen with OP."},{id:"c",text:"Fibrin thrombi in small arteries.",nextStep:"q6_ntm_hot_tub",isCorrect:!1,feedback:"Incorrect. This would suggest a vasculitic or thrombotic process."},{id:"d",text:"Associated granulomatous inflammation including loose clusters of epithelioid cells and giant cells.",nextStep:"q6_ntm_hot_tub",isCorrect:!0,feedback:"Correct. Organizing pneumonia caused by Cryptococcus is distinguished by the presence of associated granulomatous inflammation. The yeast forms can often be found within the inflammatory infiltrate."}]},q6_ntm_hot_tub:{id:"q6_ntm_hot_tub",title:'Question 6: NTM "Hot-Tub Lung"',question:'The MAC infection variant known as "hot-tub lung" is notable because the non-necrotizing and focally necrotizing granulomas are situated predominantly within which location?',options:[{id:"a",text:"Bronchial wall interstitium (like middle lobe syndrome).",nextStep:"q7_gpa_microabscess",isCorrect:!1,feedback:"Incorrect. This describes a different pattern of NTM infection."},{id:"b",text:"Visceral pleura (lymphangitic pattern).",nextStep:"q7_gpa_microabscess",isCorrect:!1,feedback:"Incorrect. This is the pattern for Sarcoidosis."},{id:"c",text:"Lumens of distal airways.",nextStep:"q7_gpa_microabscess",isCorrect:!0,feedback:'Correct. In "hot-tub lung", the granulomas are uniquely situated within the lumens of distal airways, an unusual air-space centered location distinct from the interstitial location seen in Sarcoidosis or classic HP.'},{id:"d",text:"Alveolar septa (interstitial pneumonia).",nextStep:"q7_gpa_microabscess",isCorrect:!1,feedback:"Incorrect. While there is interstitial inflammation, the defining feature is the intraluminal location of the granulomas."}]},q7_gpa_microabscess:{id:"q7_gpa_microabscess",title:"Question 7: Granulomatosis with Polyangiitis (GPA)",question:"Which microscopic feature, characterized by a small focus of necrotic neutrophils surrounded by epithelioid histiocytes and giant cells, is considered an extremely helpful finding in the histologic diagnosis of classic GPA?",options:[{id:"a",text:"Central coagulative necrosis surrounded by palisading histiocytes.",nextStep:"q8_berylliosis_mimic",isCorrect:!1,feedback:"Incorrect. This describes a Rheumatoid Nodule."},{id:"b",text:"Geographic zones of bland necrosis.",nextStep:"q8_berylliosis_mimic",isCorrect:!1,feedback:"Incorrect. This is more typical for infectious granulomas like TB or Fungi."},{id:"c",text:"Granulomatous microabscess.",nextStep:"q8_berylliosis_mimic",isCorrect:!0,feedback:"Correct. The granulomatous microabscess is a highly characteristic, though not always present, finding in GPA that helps distinguish it from other necrotizing granulomatous diseases."},{id:"d",text:"Lymphoid aggregates with germinal centers.",nextStep:"q8_berylliosis_mimic",isCorrect:!1,feedback:"Incorrect. This is a non-specific finding of chronic inflammation."}]},q8_berylliosis_mimic:{id:"q8_berylliosis_mimic",title:"Question 8: Berylliosis Mimicry",question:"Chronic beryllium exposure can lead to pulmonary interstitial fibrosis and non-necrotizing granulomas. Histologically, this pneumoconiosis is indistinguishable from which noninfectious diffuse granulomatous lung disease?",options:[{id:"a",text:"Hypersensitivity Pneumonitis",nextStep:"q9_rheumatoid_nodule",isCorrect:!1,feedback:"Incorrect. HP granulomas are typically loose and poorly-formed, unlike the well-formed granulomas of Berylliosis."},{id:"b",text:"Hard Metal Pneumoconiosis",nextStep:"q9_rheumatoid_nodule",isCorrect:!1,feedback:"Incorrect. Hard metal disease (giant cell interstitial pneumonia) has a different histologic appearance."},{id:"c",text:"Pulmonary Sarcoidosis",nextStep:"q9_rheumatoid_nodule",isCorrect:!0,feedback:"Correct. Chronic Berylliosis causes well-formed, non-necrotizing granulomas that are histologically identical to those of Sarcoidosis. The distinction depends on clinical history of exposure and specialized testing."},{id:"d",text:"Silicosis",nextStep:"q9_rheumatoid_nodule",isCorrect:!1,feedback:"Incorrect. Silicotic nodules have a characteristic whorled, hyalinized collagen appearance."}]},q9_rheumatoid_nodule:{id:"q9_rheumatoid_nodule",title:"Question 9: Rheumatoid Nodule",question:"In lung pathology, the irregularly shaped granuloma known as the Rheumatoid Nodule is defined by a large geographic area of central coagulative necrosis surrounded by a peripheral layer of:",options:[{id:"a",text:"Prominent plasma cells.",nextStep:"q10_pjp_granuloma",isCorrect:!1,feedback:"Incorrect. While plasma cells may be in the surrounding inflammation, they do not define the border of the necrosis."},{id:"b",text:"Polymorphic lymphocytes.",nextStep:"q10_pjp_granuloma",isCorrect:!1,feedback:"Incorrect. This is non-specific."},{id:"c",text:"Palisading histiocytes.",nextStep:"q10_pjp_granuloma",isCorrect:!0,feedback:"Correct. The Rheumatoid Nodule is characterized by central coagulative necrosis surrounded by a distinctive fence-like arrangement of elongated histiocytes, known as palisading."},{id:"d",text:"Eosinophil-rich infiltrate.",nextStep:"q10_pjp_granuloma",isCorrect:!1,feedback:"Incorrect. A prominent eosinophilic infiltrate would suggest a different diagnosis, such as EGPA."}]},q10_pjp_granuloma:{id:"q10_pjp_granuloma",title:"Question 10: Pneumocystis Pneumonia (PJP) Granulomas",question:"While typically presenting with frothy intra-alveolar exudate, Pneumocystis pneumonia may rarely present with granulomatous inflammation. When granulomas are present in PJP, their characteristic location is:",options:[{id:"a",text:"Confined to the interlobular septa.",nextStep:"compendium",isCorrect:!1,feedback:"Incorrect. This describes a lymphangitic pattern."},{id:"b",text:"Centered around the vessel walls (vasculitis).",nextStep:"compendium",isCorrect:!1,feedback:"Incorrect. This would suggest a primary vasculitis."},{id:"c",text:"In the peribronchiolar interstitium.",nextStep:"compendium",isCorrect:!1,feedback:"Incorrect. This is the location for HP."},{id:"d",text:"Within the air space.",nextStep:"compendium",isCorrect:!0,feedback:"Correct. Granulomatous inflammation in PJP, when it occurs, involves poorly formed granulomas located within the air space, accompanying the characteristic frothy exudates."}]},compendium:{id:"compendium",title:"Diagnostic Compendium: Granulomatous Diseases",question:"",conclusion:"You have completed the diagnostic pathway. Below is a comprehensive summary table of key granulomatous diseases for your reference. This table integrates clinical, radiologic, and histopathologic features to aid in differential diagnosis."}},cu={headers:["Disease Entity","Clinical/Radiology (HRCT)","Histopathology (Granuloma Characteristics)","Distribution Pattern","Serology/Special Tests","Differential Diagnosis Key Features"],rows:[["Sarcoidosis","Young/middle-aged adults. Exquisitely lymphangitic distribution (nodular/linear bands).","Well-formed, tightly clustered, non-necrotizing granulomas. Often dense collagen fibrosis. Non-necrotizing granulomatous vasculitis common.","Lymphangitic: Interstitium (septa, bronchovascular bundles, pleura).","Nonspecific inclusions (Schaumann bodies). Diagnosis of exclusion.","Must exclude granulomatous infections. Berylliosis is histologically indistinguishable."],["Hypersensitivity Pneumonia (HP)","Reaction to inhaled antigens. Ground-glass opacities, centrilobular nodules (early); honeycomb (late).","Loosely formed granulomas. Associated chronic bronchiolitis and lymphoplasmacytic infiltrate.","Bronchiolocentric: Centered on the peribronchiolar interstitium.","Identification of causative antigen is key.",'Fibrotic HP can mimic UIP. Classic HP differs from "hot-tub lung" (MAC).'],["Tuberculosis (TB)","Reactivation disease. Solitary nodule or miliary lesions.","Necrotizing (caseating) granuloma with central bland necrosis. Organisms are scarce.","N/A","Acid-fast stain shows scarce organisms. Culture or molecular required.","Histology shared with NTM; molecular testing required. Exclude endemic fungi."],["NTM / MAC Infections","Resembles TB. May involve localized bronchiectasis or hot-tub lung syndrome.","Varies: Necrotizing granulomas (like TB); Loose, non-necrotizing (airway wall); Non-necrotizing in distal airway lumens (Hot-tub lung).","N/A","Culture and molecular techniques.","Hot-tub lung variant has unique luminal granuloma location."],["Histoplasmosis","Endemic in Mississippi/Ohio River valleys. Persistent lung nodule.","Necrotizing granulomatous inflammation; central necrosis may be concentric/calcified. Acute form may resemble GPA.","N/A","GMS stain reveals small, uniform, oval-shaped yeasts.","Acute form may mimic Lymphomatoid Granulomatosis or GPA."],["Blastomycosis","Endemic in south/central US.","Necrotizing and non-necrotizing granulomas. Characteristically suppurative granulomatous inflammation.","N/A","Large, rounded yeasts with thick, doubly refractile cell walls and broad-based budding.","Distinguished from Cryptococcus (smaller) and Coccidioides."],["Cryptococcosis","Worldwide distribution. Isolated lung nodules.","Poorly formed, loose non-necrotizing and often coexisting necrotizing granulomas. Yeast in giant cells.","N/A","Yeast has clear halo (capsule). Mucicarmine stain is positive.","May present as secondary organizing pneumonia."],["Coccidioidomycosis","Endemic in southwestern US. Localized lung nodules. Tissue eosinophilia common.","Necrotizing granulomatous inflammation is most common.","N/A","Key feature: Large spherules containing multiple small endospores.","N/A"],["GPA (Classic Type)","Systemic vasculitis (upper respiratory, lung, kidney).","Necrotizing granulomatous inflammation (geographic dirty necrosis). Granulomatous microabscesses. Necrotizing vasculitis.","N/A","C-ANCA/PR3 positive (highly specific).","Histology may overlap with necrotizing infections. Requires clinical context."],["EGPA","Occurs in patients with asthma and blood eosinophilia.","Necrotizing granulomatous inflammation, eosinophilic pneumonia, and necrotizing vasculitis. Eosinophil-rich.","N/A","P-ANCA/MPO positive in a minority.","Distinguished from GPA by overwhelming eosinophilia."],["Rheumatoid Nodule","Associated with Rheumatoid Arthritis.","Irregularly shaped granuloma with large central coagulative necrosis. Surrounded by peripheral palisading histiocytes.","N/A","Diagnosis hinges on underlying CTD.","Distinguish from infections (no organisms) and vasculitides."],["Berylliosis","Requires history of beryllium exposure.","Interstitial fibrosis with non-necrotizing granulomas. May contain Schaumann bodies.","N/A","Beryllium Lymphocyte Proliferation Test.","Histologically indistinguishable from sarcoidosis."],["Langerhans Cell Histiocytosis (LCH)","Almost exclusively in smokers. Cysts and nodules, upper lobe predominant.","Bronchiolocentric nodules of Langerhans cells, eosinophils, and macrophages; vaguely granulomatous.","Bronchiolocentric","CD1a+, S-100+. Birbeck granules on EM.","N/A"],["Aspiration Pneumonia","Chronic presentation may mimic infection or tumor.","Chronic/necrotizing granulomatous inflammation (foreign body reaction) surrounding aspirated material.","Bronchiolocentric","Identification of foreign material (e.g., vegetable matter).","Must find foreign material to distinguish from infection."]]},_g=({user:e})=>{const[t,n]=L.useState("q1_sarc_dist"),[o,i]=L.useState([]),r=L.useRef(null),s=Sg[t];L.useEffect(()=>{r.current&&r.current.scrollIntoView({behavior:"smooth",block:"end"})},[t]);const u=p=>{i([...o,{step:s,answerId:p.id}]),Ln(e.username,U.DIAGNOSTIC_PATHWAY,s.id,{question:s.question,selectedAnswer:p.text,isCorrect:p.isCorrect,timestamp:Date.now()}),n(p.nextStep)},c=()=>{n("q1_sarc_dist"),i([])},d=(p,m,h)=>{var T;const x=((T=o.find(N=>N.step.id===m.id))==null?void 0:T.answerId)===p.id;let C="bg-white border-slate-300 hover:bg-slate-50 hover:border-slate-400";return h&&(x?C=p.isCorrect?"bg-green-50 border-green-500":"bg-red-50 border-red-500":C="bg-slate-50 border-slate-300 text-slate-500 cursor-default"),f.jsxs("div",{children:[f.jsxs("button",{disabled:h,onClick:()=>u(p),className:`w-full text-left p-4 border rounded-lg transition-all duration-200 flex items-center justify-between ${C} ${h?"cursor-default":"cursor-pointer"}`,children:[f.jsx("span",{className:"flex-1",children:p.text}),h&&x&&p.isCorrect&&f.jsx(qo,{className:"h-6 w-6 text-green-600"}),h&&x&&!p.isCorrect&&f.jsx(bo,{className:"h-6 w-6 text-red-600"})]}),h&&x&&f.jsx("div",{className:"mt-3",children:f.jsx(ue,{type:p.isCorrect?"success":"error",children:p.feedback})})]},p.id)};return f.jsxs("div",{className:"animate-fade-in",children:[f.jsx(ft,{title:"Comprehensive Diagnostic Pathway",subtitle:"Simulating a multi-stage diagnostic workflow for granulomatous diseases."}),o.map(({step:p},m)=>{var h;return f.jsxs(H,{className:"opacity-70 !shadow-md border-slate-200/60 bg-slate-50",children:[f.jsx("h2",{className:"text-xl font-semibold font-serif text-slate-700 mb-2",children:p.title}),p.information&&f.jsx("p",{className:"bg-slate-100 p-3 rounded-lg border border-slate-200 text-slate-600 mb-4",children:p.information}),f.jsx("p",{className:"font-semibold text-slate-600 mb-4",children:p.question}),f.jsx("div",{className:"space-y-3",children:(h=p.options)==null?void 0:h.map(x=>d(x,p,!0))})]},m)}),f.jsxs(H,{ref:r,children:[f.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-4",children:s.title}),s.information&&f.jsx(ue,{type:"info",className:"mb-6",children:s.information}),s.question&&f.jsx("p",{className:"font-semibold text-slate-700 mb-4",children:s.question}),s.options&&f.jsx("div",{className:"space-y-3",children:s.options.map(p=>d(p,s,!1))}),s.id==="compendium"&&f.jsxs("div",{className:"mt-4 p-4 bg-slate-50 border border-slate-200 rounded-lg animate-fade-in",children:[f.jsxs("div",{className:"flex items-center text-lg font-semibold font-serif text-slate-800 mb-3",children:[f.jsx(Mo,{className:"h-6 w-6 text-primary-600 mr-3"}),f.jsx("h3",{children:s.conclusion})]}),f.jsx("div",{className:"overflow-x-auto mt-4",children:f.jsxs("table",{className:"w-full text-xs text-left text-slate-600 border-collapse",children:[f.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-100",children:f.jsx("tr",{children:cu.headers.map(p=>f.jsx("th",{scope:"col",className:"px-4 py-3 border border-slate-200 font-semibold",children:p},p))})}),f.jsx("tbody",{className:"bg-white",children:cu.rows.map((p,m)=>f.jsx("tr",{className:"even:bg-slate-50 border-b border-slate-200",children:p.map((h,x)=>f.jsx("td",{className:"px-4 py-3 border border-slate-200",children:h},x))},m))})]})}),f.jsx("div",{className:"mt-8 text-center",children:f.jsxs("button",{onClick:c,className:"bg-primary-600 text-white font-semibold py-2.5 px-6 rounded-lg hover:bg-primary-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 transition-colors flex items-center justify-center mx-auto shadow-sm",children:[f.jsx(fg,{className:"h-5 w-5 mr-2"}),"Restart Pathway"]})})]})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Eg,Ng;function Ag(){return{geminiUrl:Eg,vertexUrl:Ng}}function Ig(e,t,n,o){var i,r;if(!(e!=null&&e.baseUrl)){const s=Ag();return t?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(r=s.geminiUrl)!==null&&r!==void 0?r:o}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tn{}function D(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(o,i)=>{if(Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];return r!=null?String(r):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function a(e,t,n){for(let r=0;r<t.length-1;r++){const s=t[r];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in e))if(Array.isArray(n))e[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(e[u])){const c=e[u];if(Array.isArray(n))for(let d=0;d<c.length;d++){const p=c[d];a(p,t.slice(r+1),n[d])}else for(const d of c)a(d,t.slice(r+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in e||(e[u]=[{}]);const c=e[u];a(c[0],t.slice(r+1),n);return}(!e[s]||typeof e[s]!="object")&&(e[s]={}),e=e[s]}const o=t[t.length-1],i=e[o];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[o]=n}function l(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let o=0;o<t.length;o++){if(typeof e!="object"||e===null)return n;const i=t[o];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in e){const s=e[r];return Array.isArray(s)?s.map(u=>l(u,t.slice(o+1),n)):n}else return n}else e=e[i]}return e}catch(o){if(o instanceof TypeError)return n;throw o}}function kg(e,t){for(const[n,o]of Object.entries(t)){const i=n.split("."),r=o.split("."),s=new Set;let u=-1;for(let c=0;c<i.length;c++)if(i[c]==="*"){u=c;break}if(u!==-1&&r.length>u)for(let c=u;c<r.length;c++){const d=r[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}qs(e,i,r,0,s)}}function qs(e,t,n,o,i){if(o>=t.length||typeof e!="object"||e===null)return;const r=t[o];if(r.endsWith("[]")){const s=r.slice(0,-2),u=e;if(s in u&&Array.isArray(u[s]))for(const c of u[s])qs(c,t,n,o+1,i)}else if(r==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const s=e,u=Object.keys(s).filter(d=>!d.startsWith("_")&&!i.has(d)),c={};for(const d of u)c[d]=s[d];for(const[d,p]of Object.entries(c)){const m=[];for(const h of n.slice(o))h==="*"?m.push(d):m.push(h);a(s,m,p)}for(const d of u)delete s[d]}}else{const s=e;r in s&&qs(s[r],t,n,o+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wl(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pg(e){const t={},n=l(e,["operationName"]);n!=null&&a(t,["operationName"],n);const o=l(e,["resourceName"]);return o!=null&&a(t,["_url","resourceName"],o),t}function Rg(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const o=l(e,["metadata"]);o!=null&&a(t,["metadata"],o);const i=l(e,["done"]);i!=null&&a(t,["done"],i);const r=l(e,["error"]);r!=null&&a(t,["error"],r);const s=l(e,["response","generateVideoResponse"]);return s!=null&&a(t,["response"],Dg(s)),t}function Mg(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const o=l(e,["metadata"]);o!=null&&a(t,["metadata"],o);const i=l(e,["done"]);i!=null&&a(t,["done"],i);const r=l(e,["error"]);r!=null&&a(t,["error"],r);const s=l(e,["response"]);return s!=null&&a(t,["response"],Lg(s)),t}function Dg(e){const t={},n=l(e,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Ug(s))),a(t,["generatedVideos"],r)}const o=l(e,["raiMediaFilteredCount"]);o!=null&&a(t,["raiMediaFilteredCount"],o);const i=l(e,["raiMediaFilteredReasons"]);return i!=null&&a(t,["raiMediaFilteredReasons"],i),t}function Lg(e){const t={},n=l(e,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Fg(s))),a(t,["generatedVideos"],r)}const o=l(e,["raiMediaFilteredCount"]);o!=null&&a(t,["raiMediaFilteredCount"],o);const i=l(e,["raiMediaFilteredReasons"]);return i!=null&&a(t,["raiMediaFilteredReasons"],i),t}function Ug(e){const t={},n=l(e,["video"]);return n!=null&&a(t,["video"],qg(n)),t}function Fg(e){const t={},n=l(e,["_self"]);return n!=null&&a(t,["video"],bg(n)),t}function Vg(e){const t={},n=l(e,["operationName"]);return n!=null&&a(t,["_url","operationName"],n),t}function Gg(e){const t={},n=l(e,["operationName"]);return n!=null&&a(t,["_url","operationName"],n),t}function qg(e){const t={},n=l(e,["uri"]);n!=null&&a(t,["uri"],n);const o=l(e,["encodedVideo"]);o!=null&&a(t,["videoBytes"],Wl(o));const i=l(e,["encoding"]);return i!=null&&a(t,["mimeType"],i),t}function bg(e){const t={},n=l(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const o=l(e,["bytesBase64Encoded"]);o!=null&&a(t,["videoBytes"],Wl(o));const i=l(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var du;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(du||(du={}));var fu;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(fu||(fu={}));var pu;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(pu||(pu={}));var ke;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(ke||(ke={}));var mu;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(mu||(mu={}));var hu;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(hu||(hu={}));var gu;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(gu||(gu={}));var yu;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(yu||(yu={}));var vu;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(vu||(vu={}));var xu;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(xu||(xu={}));var Cu;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Cu||(Cu={}));var Tu;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"})(Tu||(Tu={}));var wu;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(wu||(wu={}));var Su;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Su||(Su={}));var _u;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(_u||(_u={}));var Eu;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Eu||(Eu={}));var Yi;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Yi||(Yi={}));var Nu;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Nu||(Nu={}));var bs;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(bs||(bs={}));var Au;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Au||(Au={}));var Iu;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Iu||(Iu={}));var ku;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V"})(ku||(ku={}));var Pu;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Pu||(Pu={}));var Ru;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Ru||(Ru={}));var Mu;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Mu||(Mu={}));var Du;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Du||(Du={}));var Lu;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Lu||(Lu={}));var Uu;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Uu||(Uu={}));var Fu;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Fu||(Fu={}));var Vu;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Vu||(Vu={}));var Gu;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Gu||(Gu={}));var qu;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(qu||(qu={}));var bu;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(bu||(bu={}));var Hu;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Hu||(Hu={}));var Bu;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Bu||(Bu={}));var zu;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(zu||(zu={}));var Ju;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Ju||(Ju={}));var $u;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})($u||($u={}));var Wu;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(Wu||(Wu={}));var Ou;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(Ou||(Ou={}));var Yu;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Yu||(Yu={}));var Ku;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(Ku||(Ku={}));var Qu;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Qu||(Qu={}));var ju;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ju||(ju={}));var Xu;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(Xu||(Xu={}));var Zu;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Zu||(Zu={}));var ec;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ec||(ec={}));var tc;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(tc||(tc={}));var gn;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(gn||(gn={}));class Hs{constructor(t){const n={};for(const o of t.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class jn{get text(){var t,n,o,i,r,s,u,c;if(((i=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",p=!1;const m=[];for(const h of(c=(u=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[x,C]of Object.entries(h))x!=="text"&&x!=="thought"&&(C!==null||C!==void 0)&&m.push(x);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;p=!0,d+=h.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?d:void 0}get data(){var t,n,o,i,r,s,u,c;if(((i=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const p=[];for(const m of(c=(u=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[h,x]of Object.entries(m))h!=="inlineData"&&(x!==null||x!==void 0)&&p.push(h);m.inlineData&&typeof m.inlineData.data=="string"&&(d+=atob(m.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var t,n,o,i,r,s,u,c;if(((i=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var t,n,o,i,r,s,u,c,d;if(((i=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(c=(u=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var t,n,o,i,r,s,u,c,d;if(((i=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(c=(u=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.output}}class nc{}class oc{}class Hg{}class Bg{}class zg{}class Jg{}class ic{}class rc{}class sc{}class $g{}class Ki{_fromAPIResponse({apiResponse:t,isVertexAI:n}){const o=new Ki;let i;const r=t;return n?i=Mg(r):i=Rg(r),Object.assign(o,i),o}}class lc{}class ac{}class uc{}class Wg{}class Og{}class Yg{}class cc{}class Kg{get text(){var t,n,o;let i="",r=!1;const s=[];for(const u of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;r=!0,i+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?i:void 0}get data(){var t,n,o;let i="";const r=[];for(const s of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,c]of Object.entries(s))u!=="inlineData"&&c!==null&&r.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Qg{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function ep(e,t){const n=b(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function tp(e){return Array.isArray(e)?e.map(t=>Qi(t)):[Qi(e)]}function Qi(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function np(e){const t=Qi(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function op(e){const t=Qi(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function dc(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function ip(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>dc(t)):[dc(e)]}function Bs(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function fc(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function pc(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function ge(e){if(e==null)throw new Error("ContentUnion is required");return Bs(e)?e:{role:"user",parts:ip(e)}}function Ol(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const o=ge(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(e.isVertexAI()){const n=ge(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>ge(n)):[ge(t)]}function qe(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(fc(e)||pc(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ge(e)]}const t=[],n=[],o=Bs(e[0]);for(const i of e){const r=Bs(i);if(r!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)t.push(i);else{if(fc(i)||pc(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return o||t.push({role:"user",parts:ip(n)}),t}function jg(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(o=>o!=="null");if(n.length===1)t.type=Object.values(ke).includes(n[0].toUpperCase())?n[0].toUpperCase():ke.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const o of n)t.anyOf.push({type:Object.values(ke).includes(o.toUpperCase())?o.toUpperCase():ke.TYPE_UNSPECIFIED})}}function _n(e){const t={},n=["items"],o=["anyOf"],i=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=e.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(t.nullable=!0,e=r[1]):r[1].type==="null"&&(t.nullable=!0,e=r[0])),e.type instanceof Array&&jg(e.type,t);for(const[s,u]of Object.entries(e))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(ke).includes(u.toUpperCase())?u.toUpperCase():ke.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=_n(u);else if(o.includes(s)){const c=[];for(const d of u){if(d.type=="null"){t.nullable=!0;continue}c.push(_n(d))}t[s]=c}else if(i.includes(s)){const c={};for(const[d,p]of Object.entries(u))c[d]=_n(p);t[s]=c}else{if(s==="additionalProperties")continue;t[s]=u}return t}function Yl(e){return _n(e)}function Kl(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Ql(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Gn(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=_n(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=_n(t.response));return e}function qn(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function Xg(e,t,n,o=1){const i=!t.startsWith(`${n}/`)&&t.split("/").length===o;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:i?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:i?`${n}/${t}`:t}function pt(e,t){if(typeof t!="string")throw new Error("name must be a string");return Xg(e,t,"cachedContents")}function rp(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Lt(e){return Wl(e)}function Zg(e){return e!=null&&typeof e=="object"&&"name"in e}function ey(e){return e!=null&&typeof e=="object"&&"video"in e}function ty(e){return e!=null&&typeof e=="object"&&"uri"in e}function sp(e){var t;let n;if(Zg(e)&&(n=e.name),!(ty(e)&&(n=e.uri,n===void 0))&&!(ey(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function lp(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function ap(e){for(const t of["models","tunedModels","publisherModels"])if(ny(e,t))return e[t];return[]}function ny(e,t){return e!==null&&typeof e=="object"&&t in e}function oy(e,t={}){const n=e,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),t.behavior&&(o.behavior=t.behavior),{functionDeclarations:[o]}}function iy(e,t={}){const n=[],o=new Set;for(const i of e){const r=i.name;if(o.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);o.add(r);const s=oy(i,t);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function up(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(i>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function ry(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function cp(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return e;let r=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){r=!0;break}}return r&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function bn(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function dp(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sy(e){const t={},n=l(e,["responsesFile"]);n!=null&&a(t,["fileName"],n);const o=l(e,["inlinedResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Vy(s))),a(t,["inlinedResponses"],r)}const i=l(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),a(t,["inlinedEmbedContentResponses"],r)}return t}function ly(e){const t={},n=l(e,["predictionsFormat"]);n!=null&&a(t,["format"],n);const o=l(e,["gcsDestination","outputUriPrefix"]);o!=null&&a(t,["gcsUri"],o);const i=l(e,["bigqueryDestination","outputUri"]);return i!=null&&a(t,["bigqueryUri"],i),t}function ay(e){const t={},n=l(e,["format"]);n!=null&&a(t,["predictionsFormat"],n);const o=l(e,["gcsUri"]);o!=null&&a(t,["gcsDestination","outputUriPrefix"],o);const i=l(e,["bigqueryUri"]);if(i!=null&&a(t,["bigqueryDestination","outputUri"],i),l(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function wi(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const o=l(e,["metadata","displayName"]);o!=null&&a(t,["displayName"],o);const i=l(e,["metadata","state"]);i!=null&&a(t,["state"],dp(i));const r=l(e,["metadata","createTime"]);r!=null&&a(t,["createTime"],r);const s=l(e,["metadata","endTime"]);s!=null&&a(t,["endTime"],s);const u=l(e,["metadata","updateTime"]);u!=null&&a(t,["updateTime"],u);const c=l(e,["metadata","model"]);c!=null&&a(t,["model"],c);const d=l(e,["metadata","output"]);return d!=null&&a(t,["dest"],sy(cp(d))),t}function zs(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const o=l(e,["displayName"]);o!=null&&a(t,["displayName"],o);const i=l(e,["state"]);i!=null&&a(t,["state"],dp(i));const r=l(e,["error"]);r!=null&&a(t,["error"],r);const s=l(e,["createTime"]);s!=null&&a(t,["createTime"],s);const u=l(e,["startTime"]);u!=null&&a(t,["startTime"],u);const c=l(e,["endTime"]);c!=null&&a(t,["endTime"],c);const d=l(e,["updateTime"]);d!=null&&a(t,["updateTime"],d);const p=l(e,["model"]);p!=null&&a(t,["model"],p);const m=l(e,["inputConfig"]);m!=null&&a(t,["src"],uy(m));const h=l(e,["outputConfig"]);return h!=null&&a(t,["dest"],ly(cp(h))),t}function uy(e){const t={},n=l(e,["instancesFormat"]);n!=null&&a(t,["format"],n);const o=l(e,["gcsSource","uris"]);o!=null&&a(t,["gcsUri"],o);const i=l(e,["bigquerySource","inputUri"]);return i!=null&&a(t,["bigqueryUri"],i),t}function cy(e,t){const n={};if(l(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=l(t,["fileName"]);o!=null&&a(n,["fileName"],o);const i=l(t,["inlinedRequests"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Fy(e,s))),a(n,["requests","requests"],r)}return n}function dy(e){const t={},n=l(e,["format"]);n!=null&&a(t,["instancesFormat"],n);const o=l(e,["gcsUri"]);o!=null&&a(t,["gcsSource","uris"],o);const i=l(e,["bigqueryUri"]);if(i!=null&&a(t,["bigquerySource","inputUri"],i),l(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function fy(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["data"]);n!=null&&a(t,["data"],n);const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function py(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],bn(e,o)),n}function my(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],bn(e,o)),n}function hy(e){const t={},n=l(e,["content"]);n!=null&&a(t,["content"],n);const o=l(e,["citationMetadata"]);o!=null&&a(t,["citationMetadata"],gy(o));const i=l(e,["tokenCount"]);i!=null&&a(t,["tokenCount"],i);const r=l(e,["finishReason"]);r!=null&&a(t,["finishReason"],r);const s=l(e,["urlContextMetadata"]);s!=null&&a(t,["urlContextMetadata"],s);const u=l(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);const c=l(e,["groundingMetadata"]);c!=null&&a(t,["groundingMetadata"],c);const d=l(e,["index"]);d!=null&&a(t,["index"],d);const p=l(e,["logprobsResult"]);p!=null&&a(t,["logprobsResult"],p);const m=l(e,["safetyRatings"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(x=>x)),a(t,["safetyRatings"],h)}return t}function gy(e){const t={},n=l(e,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),a(t,["citations"],o)}return t}function fp(e){const t={},n=l(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Jy(r))),a(t,["parts"],i)}const o=l(e,["role"]);return o!=null&&a(t,["role"],o),t}function yy(e,t){const n={},o=l(e,["displayName"]);if(t!==void 0&&o!=null&&a(t,["batch","displayName"],o),l(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function vy(e,t){const n={},o=l(e,["displayName"]);t!==void 0&&o!=null&&a(t,["displayName"],o);const i=l(e,["dest"]);return t!==void 0&&i!=null&&a(t,["outputConfig"],ay(ry(i))),n}function mc(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["src"]);i!=null&&a(n,["batch","inputConfig"],cy(e,up(e,i)));const r=l(t,["config"]);return r!=null&&yy(r,n),n}function xy(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["model"],b(e,o));const i=l(t,["src"]);i!=null&&a(n,["inputConfig"],dy(up(e,i)));const r=l(t,["config"]);return r!=null&&vy(r,n),n}function Cy(e,t){const n={},o=l(e,["displayName"]);return t!==void 0&&o!=null&&a(t,["batch","displayName"],o),n}function Ty(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["src"]);i!=null&&a(n,["batch","inputConfig"],Iy(e,i));const r=l(t,["config"]);return r!=null&&Cy(r,n),n}function wy(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],bn(e,o)),n}function Sy(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],bn(e,o)),n}function _y(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["name"]);o!=null&&a(t,["name"],o);const i=l(e,["done"]);i!=null&&a(t,["done"],i);const r=l(e,["error"]);return r!=null&&a(t,["error"],r),t}function Ey(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["name"]);o!=null&&a(t,["name"],o);const i=l(e,["done"]);i!=null&&a(t,["done"],i);const r=l(e,["error"]);return r!=null&&a(t,["error"],r),t}function Ny(e,t){const n={},o=l(t,["contents"]);if(o!=null){let r=Ol(e,o);Array.isArray(r)&&(r=r.map(s=>s)),a(n,["requests[]","request","content"],r)}const i=l(t,["config"]);return i!=null&&(a(n,["_self"],Ay(i,n)),kg(n,{"requests[].*":"requests[].request.*"})),n}function Ay(e,t){const n={},o=l(e,["taskType"]);t!==void 0&&o!=null&&a(t,["requests[]","taskType"],o);const i=l(e,["title"]);t!==void 0&&i!=null&&a(t,["requests[]","title"],i);const r=l(e,["outputDimensionality"]);if(t!==void 0&&r!=null&&a(t,["requests[]","outputDimensionality"],r),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Iy(e,t){const n={},o=l(t,["fileName"]);o!=null&&a(n,["file_name"],o);const i=l(t,["inlinedRequests"]);return i!=null&&a(n,["requests"],Ny(e,i)),n}function ky(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Py(e,t,n){const o={},i=l(t,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],fp(ge(i)));const r=l(t,["temperature"]);r!=null&&a(o,["temperature"],r);const s=l(t,["topP"]);s!=null&&a(o,["topP"],s);const u=l(t,["topK"]);u!=null&&a(o,["topK"],u);const c=l(t,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(t,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const p=l(t,["stopSequences"]);p!=null&&a(o,["stopSequences"],p);const m=l(t,["responseLogprobs"]);m!=null&&a(o,["responseLogprobs"],m);const h=l(t,["logprobs"]);h!=null&&a(o,["logprobs"],h);const x=l(t,["presencePenalty"]);x!=null&&a(o,["presencePenalty"],x);const C=l(t,["frequencyPenalty"]);C!=null&&a(o,["frequencyPenalty"],C);const T=l(t,["seed"]);T!=null&&a(o,["seed"],T);const N=l(t,["responseMimeType"]);N!=null&&a(o,["responseMimeType"],N);const y=l(t,["responseSchema"]);y!=null&&a(o,["responseSchema"],Yl(y));const g=l(t,["responseJsonSchema"]);if(g!=null&&a(o,["responseJsonSchema"],g),l(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=l(t,["safetySettings"]);if(n!==void 0&&v!=null){let z=v;Array.isArray(z)&&(z=z.map(fe=>$y(fe))),a(n,["safetySettings"],z)}const w=l(t,["tools"]);if(n!==void 0&&w!=null){let z=qn(w);Array.isArray(z)&&(z=z.map(fe=>Wy(Gn(fe)))),a(n,["tools"],z)}const _=l(t,["toolConfig"]);if(n!==void 0&&_!=null&&a(n,["toolConfig"],_),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=l(t,["cachedContent"]);n!==void 0&&S!=null&&a(n,["cachedContent"],pt(e,S));const E=l(t,["responseModalities"]);E!=null&&a(o,["responseModalities"],E);const I=l(t,["mediaResolution"]);I!=null&&a(o,["mediaResolution"],I);const k=l(t,["speechConfig"]);if(k!=null&&a(o,["speechConfig"],Kl(k)),l(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=l(t,["thinkingConfig"]);R!=null&&a(o,["thinkingConfig"],R);const J=l(t,["imageConfig"]);return J!=null&&a(o,["imageConfig"],J),o}function Ry(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>hy(d))),a(t,["candidates"],c)}const i=l(e,["modelVersion"]);i!=null&&a(t,["modelVersion"],i);const r=l(e,["promptFeedback"]);r!=null&&a(t,["promptFeedback"],r);const s=l(e,["responseId"]);s!=null&&a(t,["responseId"],s);const u=l(e,["usageMetadata"]);return u!=null&&a(t,["usageMetadata"],u),t}function My(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],bn(e,o)),n}function Dy(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],bn(e,o)),n}function Ly(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&a(t,["enableWidget"],n),t}function Uy(e){const t={},n=l(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],n),l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function Fy(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["request","model"],b(e,o));const i=l(t,["contents"]);if(i!=null){let u=qe(i);Array.isArray(u)&&(u=u.map(c=>fp(c))),a(n,["request","contents"],u)}const r=l(t,["metadata"]);r!=null&&a(n,["metadata"],r);const s=l(t,["config"]);return s!=null&&a(n,["request","generationConfig"],Py(e,s,l(n,["request"],{}))),n}function Vy(e){const t={},n=l(e,["response"]);n!=null&&a(t,["response"],Ry(n));const o=l(e,["error"]);return o!=null&&a(t,["error"],o),t}function Gy(e,t){const n={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const i=l(e,["pageToken"]);if(t!==void 0&&i!=null&&a(t,["_query","pageToken"],i),l(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function qy(e,t){const n={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const i=l(e,["pageToken"]);t!==void 0&&i!=null&&a(t,["_query","pageToken"],i);const r=l(e,["filter"]);return t!==void 0&&r!=null&&a(t,["_query","filter"],r),n}function by(e){const t={},n=l(e,["config"]);return n!=null&&Gy(n,t),t}function Hy(e){const t={},n=l(e,["config"]);return n!=null&&qy(n,t),t}function By(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const i=l(e,["operations"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>wi(s))),a(t,["batchJobs"],r)}return t}function zy(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const i=l(e,["batchPredictionJobs"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>zs(s))),a(t,["batchJobs"],r)}return t}function Jy(e){const t={},n=l(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],n);const o=l(e,["thought"]);o!=null&&a(t,["thought"],o);const i=l(e,["inlineData"]);i!=null&&a(t,["inlineData"],fy(i));const r=l(e,["fileData"]);r!=null&&a(t,["fileData"],ky(r));const s=l(e,["thoughtSignature"]);s!=null&&a(t,["thoughtSignature"],s);const u=l(e,["functionCall"]);u!=null&&a(t,["functionCall"],u);const c=l(e,["codeExecutionResult"]);c!=null&&a(t,["codeExecutionResult"],c);const d=l(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const p=l(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const m=l(e,["text"]);return m!=null&&a(t,["text"],m),t}function $y(e){const t={};if(l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(e,["category"]);n!=null&&a(t,["category"],n);const o=l(e,["threshold"]);return o!=null&&a(t,["threshold"],o),t}function Wy(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),a(t,["functionDeclarations"],d)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],Uy(o));const i=l(e,["googleSearchRetrieval"]);if(i!=null&&a(t,["googleSearchRetrieval"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=l(e,["googleMaps"]);r!=null&&a(t,["googleMaps"],Ly(r));const s=l(e,["urlContext"]);s!=null&&a(t,["urlContext"],s);const u=l(e,["computerUse"]);u!=null&&a(t,["computerUse"],u);const c=l(e,["codeExecution"]);return c!=null&&a(t,["codeExecution"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xt;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Xt||(Xt={}));class Ho{constructor(t,n,o,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,o,i)}init(t,n,o){var i,r;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!o||Object.keys(o).length===0?s={config:{}}:typeof o=="object"?s=Object.assign({},o):s=o,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(r=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oy extends tn{constructor(t){super(),this.apiClient=t,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Ho(Xt.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n)}createInlinedGenerateContentRequest(t){const n=mc(this.apiClient,t),o=n._url,i=D("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,c=u.requests,d=[];for(const p of c){const m=Object.assign({},p);if(m.systemInstruction){const h=m.systemInstruction;delete m.systemInstruction;const x=m.request;x.systemInstruction=h,m.request=x}d.push(m)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const o=n?Object.assign({},n):{},i=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${i}`),o.dest===void 0){const r=this.getGcsUri(t),s=this.getBigqueryUri(t);if(r)r.endsWith(".jsonl")?o.dest=`${r.slice(0,-6)}/dest`:o.dest=`${r}_dest_${i}`;else if(s)o.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=xy(this.apiClient,t);return u=D("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>zs(p))}else{const d=mc(this.apiClient,t);return u=D("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>wi(p))}}async createEmbeddingsInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ty(this.apiClient,t);return r=D("{model}:asyncBatchEmbedContent",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),i.then(c=>wi(c))}}async get(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Dy(this.apiClient,t);return u=D("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>zs(p))}else{const d=My(this.apiClient,t);return u=D("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>wi(p))}}async cancel(t){var n,o,i,r;let s="",u={};if(this.apiClient.isVertexAI()){const c=my(this.apiClient,t);s=D("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const c=py(this.apiClient,t);s=D("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Hy(t);return u=D("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=zy(p),h=new cc;return Object.assign(h,m),h})}else{const d=by(t);return u=D("batches",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=By(p),h=new cc;return Object.assign(h,m),h})}}async delete(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Sy(this.apiClient,t);return u=D("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>Ey(p))}else{const d=wy(this.apiClient,t);return u=D("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>_y(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yy(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["data"]);n!=null&&a(t,["data"],n);const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function hc(e){const t={},n=l(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>h0(r))),a(t,["parts"],i)}const o=l(e,["role"]);return o!=null&&a(t,["role"],o),t}function Ky(e,t){const n={},o=l(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const i=l(e,["expireTime"]);t!==void 0&&i!=null&&a(t,["expireTime"],i);const r=l(e,["displayName"]);t!==void 0&&r!=null&&a(t,["displayName"],r);const s=l(e,["contents"]);if(t!==void 0&&s!=null){let p=qe(s);Array.isArray(p)&&(p=p.map(m=>hc(m))),a(t,["contents"],p)}const u=l(e,["systemInstruction"]);t!==void 0&&u!=null&&a(t,["systemInstruction"],hc(ge(u)));const c=l(e,["tools"]);if(t!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>g0(m))),a(t,["tools"],p)}const d=l(e,["toolConfig"]);if(t!==void 0&&d!=null&&a(t,["toolConfig"],d),l(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Qy(e,t){const n={},o=l(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const i=l(e,["expireTime"]);t!==void 0&&i!=null&&a(t,["expireTime"],i);const r=l(e,["displayName"]);t!==void 0&&r!=null&&a(t,["displayName"],r);const s=l(e,["contents"]);if(t!==void 0&&s!=null){let m=qe(s);Array.isArray(m)&&(m=m.map(h=>h)),a(t,["contents"],m)}const u=l(e,["systemInstruction"]);t!==void 0&&u!=null&&a(t,["systemInstruction"],ge(u));const c=l(e,["tools"]);if(t!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(h=>y0(h))),a(t,["tools"],m)}const d=l(e,["toolConfig"]);t!==void 0&&d!=null&&a(t,["toolConfig"],d);const p=l(e,["kmsKeyName"]);return t!==void 0&&p!=null&&a(t,["encryption_spec","kmsKeyName"],p),n}function jy(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["model"],ep(e,o));const i=l(t,["config"]);return i!=null&&Ky(i,n),n}function Xy(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["model"],ep(e,o));const i=l(t,["config"]);return i!=null&&Qy(i,n),n}function Zy(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],pt(e,o)),n}function e0(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],pt(e,o)),n}function t0(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function n0(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function o0(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function i0(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&a(t,["description"],n);const o=l(e,["name"]);o!=null&&a(t,["name"],o);const i=l(e,["parameters"]);i!=null&&a(t,["parameters"],i);const r=l(e,["parametersJsonSchema"]);r!=null&&a(t,["parametersJsonSchema"],r);const s=l(e,["response"]);s!=null&&a(t,["response"],s);const u=l(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function r0(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],pt(e,o)),n}function s0(e,t){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],pt(e,o)),n}function l0(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&a(t,["enableWidget"],n),t}function a0(e){const t={},n=l(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],n),l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function u0(e,t){const n={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const i=l(e,["pageToken"]);return t!==void 0&&i!=null&&a(t,["_query","pageToken"],i),n}function c0(e,t){const n={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const i=l(e,["pageToken"]);return t!==void 0&&i!=null&&a(t,["_query","pageToken"],i),n}function d0(e){const t={},n=l(e,["config"]);return n!=null&&u0(n,t),t}function f0(e){const t={},n=l(e,["config"]);return n!=null&&c0(n,t),t}function p0(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const i=l(e,["cachedContents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),a(t,["cachedContents"],r)}return t}function m0(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const i=l(e,["cachedContents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),a(t,["cachedContents"],r)}return t}function h0(e){const t={},n=l(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],n);const o=l(e,["thought"]);o!=null&&a(t,["thought"],o);const i=l(e,["inlineData"]);i!=null&&a(t,["inlineData"],Yy(i));const r=l(e,["fileData"]);r!=null&&a(t,["fileData"],o0(r));const s=l(e,["thoughtSignature"]);s!=null&&a(t,["thoughtSignature"],s);const u=l(e,["functionCall"]);u!=null&&a(t,["functionCall"],u);const c=l(e,["codeExecutionResult"]);c!=null&&a(t,["codeExecutionResult"],c);const d=l(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const p=l(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const m=l(e,["text"]);return m!=null&&a(t,["text"],m),t}function g0(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),a(t,["functionDeclarations"],d)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],a0(o));const i=l(e,["googleSearchRetrieval"]);if(i!=null&&a(t,["googleSearchRetrieval"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=l(e,["googleMaps"]);r!=null&&a(t,["googleMaps"],l0(r));const s=l(e,["urlContext"]);s!=null&&a(t,["urlContext"],s);const u=l(e,["computerUse"]);u!=null&&a(t,["computerUse"],u);const c=l(e,["codeExecution"]);return c!=null&&a(t,["codeExecution"],c),t}function y0(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>i0(h))),a(t,["functionDeclarations"],m)}const o=l(e,["retrieval"]);o!=null&&a(t,["retrieval"],o);const i=l(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],i);const r=l(e,["googleSearchRetrieval"]);r!=null&&a(t,["googleSearchRetrieval"],r);const s=l(e,["enterpriseWebSearch"]);s!=null&&a(t,["enterpriseWebSearch"],s);const u=l(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],u);const c=l(e,["urlContext"]);c!=null&&a(t,["urlContext"],c);const d=l(e,["computerUse"]);d!=null&&a(t,["computerUse"],d);const p=l(e,["codeExecution"]);return p!=null&&a(t,["codeExecution"],p),t}function v0(e,t){const n={},o=l(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const i=l(e,["expireTime"]);return t!==void 0&&i!=null&&a(t,["expireTime"],i),n}function x0(e,t){const n={},o=l(e,["ttl"]);t!==void 0&&o!=null&&a(t,["ttl"],o);const i=l(e,["expireTime"]);return t!==void 0&&i!=null&&a(t,["expireTime"],i),n}function C0(e,t){const n={},o=l(t,["name"]);o!=null&&a(n,["_url","name"],pt(e,o));const i=l(t,["config"]);return i!=null&&v0(i,n),n}function T0(e,t){const n={},o=l(t,["name"]);o!=null&&a(n,["_url","name"],pt(e,o));const i=l(t,["config"]);return i!=null&&x0(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w0 extends tn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ho(Xt.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Xy(this.apiClient,t);return u=D("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}else{const d=jy(this.apiClient,t);return u=D("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async get(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=s0(this.apiClient,t);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}else{const d=r0(this.apiClient,t);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=e0(this.apiClient,t);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=n0(p),h=new ac;return Object.assign(h,m),h})}else{const d=Zy(this.apiClient,t);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=t0(p),h=new ac;return Object.assign(h,m),h})}}async update(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=T0(this.apiClient,t);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}else{const d=C0(this.apiClient,t);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async listInternal(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=f0(t);return u=D("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=m0(p),h=new uc;return Object.assign(h,m),h})}else{const d=d0(t);return u=D("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=p0(p),h=new uc;return Object.assign(h,m),h})}}}function gc(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function O(e){return this instanceof O?(this.v=e,this):new O(e)}function En(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),i,r=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(x){return function(C){return Promise.resolve(C).then(x,m)}}function u(x,C){o[x]&&(i[x]=function(T){return new Promise(function(N,y){r.push([x,T,N,y])>1||c(x,T)})},C&&(i[x]=C(i[x])))}function c(x,C){try{d(o[x](C))}catch(T){h(r[0][3],T)}}function d(x){x.value instanceof O?Promise.resolve(x.value.v).then(p,m):h(r[0][2],x)}function p(x){c("next",x)}function m(x){c("throw",x)}function h(x,C){x(C),r.shift(),r.length&&c(r[0][0],r[0][1])}}function mo(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof gc=="function"?gc(e):e[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(r){n[r]=e[r]&&function(s){return new Promise(function(u,c){s=e[r](s),i(u,c,s.done,s.value)})}}function i(r,s,u,c){Promise.resolve(c).then(function(d){r({value:d,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S0(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:pp(n)}function pp(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function _0(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function yc(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let o=0;for(;o<n;)if(e[o].role==="user")t.push(e[o]),o++;else{const i=[];let r=!0;for(;o<n&&e[o].role==="model";)i.push(e[o]),r&&!pp(e[o])&&(r=!1),o++;r?t.push(...i):t.pop()}return t}class E0{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new N0(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class N0{constructor(t,n,o,i={},r=[]){this.apiClient=t,this.modelsModule=n,this.model=o,this.config=i,this.history=r,this.sendPromise=Promise.resolve(),_0(r)}async sendMessage(t){var n;await this.sendPromise;const o=ge(t.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,s,u;const c=await i,d=(s=(r=c.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content,p=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let h=[];p!=null&&(h=(u=p.slice(m))!==null&&u!==void 0?u:[]);const x=d?[d]:[];this.recordHistory(o,x,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(t){var n;await this.sendPromise;const o=ge(t.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const r=await i;return this.processStreamResponse(r,o)}getHistory(t=!1){const n=t?yc(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var o,i;return En(this,arguments,function*(){var s,u,c,d;const p=[];try{for(var m=!0,h=mo(t),x;x=yield O(h.next()),s=x.done,!s;m=!0){d=x.value,m=!1;const C=d;if(S0(C)){const T=(i=(o=C.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content;T!==void 0&&p.push(T)}yield yield O(C)}}catch(C){u={error:C}}finally{try{!m&&!s&&(c=h.return)&&(yield O(c.call(h)))}finally{if(u)throw u.error}}this.recordHistory(n,p)})}recordHistory(t,n,o){let i=[];n.length>0&&n.every(r=>r.role!==void 0)?i=n:i.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...yc(o)):this.history.push(t),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mr extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,mr.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A0(e){const t={},n=l(e,["file"]);return n!=null&&a(t,["file"],n),t}function I0(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function k0(e){const t={},n=l(e,["name"]);return n!=null&&a(t,["_url","file"],sp(n)),t}function P0(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function R0(e){const t={},n=l(e,["name"]);return n!=null&&a(t,["_url","file"],sp(n)),t}function M0(e,t){const n={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const i=l(e,["pageToken"]);return t!==void 0&&i!=null&&a(t,["_query","pageToken"],i),n}function D0(e){const t={},n=l(e,["config"]);return n!=null&&M0(n,t),t}function L0(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const i=l(e,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),a(t,["files"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U0 extends tn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ho(Xt.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=D0(t);return r=D("files",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>{const d=L0(c),p=new Wg;return Object.assign(p,d),p})}}async createInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=A0(t);return r=D("upload/v1beta/files",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),i.then(c=>{const d=I0(c),p=new Og;return Object.assign(p,d),p})}}async get(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=R0(t);return r=D("files/{file}",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=k0(t);return r=D("files/{file}",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>{const d=P0(c),p=new Yg;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Si(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["data"]);n!=null&&a(t,["data"],n);const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function F0(e){const t={},n=l(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>j0(r))),a(t,["parts"],i)}const o=l(e,["role"]);return o!=null&&a(t,["role"],o),t}function V0(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function G0(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&a(t,["description"],n);const o=l(e,["name"]);o!=null&&a(t,["name"],o);const i=l(e,["parameters"]);i!=null&&a(t,["parameters"],i);const r=l(e,["parametersJsonSchema"]);r!=null&&a(t,["parametersJsonSchema"],r);const s=l(e,["response"]);s!=null&&a(t,["response"],s);const u=l(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function q0(e){const t={},n=l(e,["modelSelectionConfig"]);n!=null&&a(t,["modelConfig"],n);const o=l(e,["audioTimestamp"]);o!=null&&a(t,["audioTimestamp"],o);const i=l(e,["candidateCount"]);i!=null&&a(t,["candidateCount"],i);const r=l(e,["enableAffectiveDialog"]);r!=null&&a(t,["enableAffectiveDialog"],r);const s=l(e,["frequencyPenalty"]);s!=null&&a(t,["frequencyPenalty"],s);const u=l(e,["logprobs"]);u!=null&&a(t,["logprobs"],u);const c=l(e,["maxOutputTokens"]);c!=null&&a(t,["maxOutputTokens"],c);const d=l(e,["mediaResolution"]);d!=null&&a(t,["mediaResolution"],d);const p=l(e,["presencePenalty"]);p!=null&&a(t,["presencePenalty"],p);const m=l(e,["responseJsonSchema"]);m!=null&&a(t,["responseJsonSchema"],m);const h=l(e,["responseLogprobs"]);h!=null&&a(t,["responseLogprobs"],h);const x=l(e,["responseMimeType"]);x!=null&&a(t,["responseMimeType"],x);const C=l(e,["responseModalities"]);C!=null&&a(t,["responseModalities"],C);const T=l(e,["responseSchema"]);T!=null&&a(t,["responseSchema"],T);const N=l(e,["routingConfig"]);N!=null&&a(t,["routingConfig"],N);const y=l(e,["seed"]);y!=null&&a(t,["seed"],y);const g=l(e,["speechConfig"]);g!=null&&a(t,["speechConfig"],mp(g));const v=l(e,["stopSequences"]);v!=null&&a(t,["stopSequences"],v);const w=l(e,["temperature"]);w!=null&&a(t,["temperature"],w);const _=l(e,["thinkingConfig"]);_!=null&&a(t,["thinkingConfig"],_);const S=l(e,["topK"]);S!=null&&a(t,["topK"],S);const E=l(e,["topP"]);if(E!=null&&a(t,["topP"],E),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function b0(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&a(t,["enableWidget"],n),t}function H0(e){const t={},n=l(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],n),l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function B0(e,t){const n={},o=l(e,["generationConfig"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig"],o);const i=l(e,["responseModalities"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig","responseModalities"],i);const r=l(e,["temperature"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig","temperature"],r);const s=l(e,["topP"]);t!==void 0&&s!=null&&a(t,["setup","generationConfig","topP"],s);const u=l(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const c=l(e,["maxOutputTokens"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","maxOutputTokens"],c);const d=l(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const p=l(e,["seed"]);t!==void 0&&p!=null&&a(t,["setup","generationConfig","seed"],p);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","speechConfig"],Ql(m));const h=l(e,["thinkingConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","thinkingConfig"],h);const x=l(e,["enableAffectiveDialog"]);t!==void 0&&x!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],x);const C=l(e,["systemInstruction"]);t!==void 0&&C!=null&&a(t,["setup","systemInstruction"],F0(ge(C)));const T=l(e,["tools"]);if(t!==void 0&&T!=null){let S=qn(T);Array.isArray(S)&&(S=S.map(E=>Z0(Gn(E)))),a(t,["setup","tools"],S)}const N=l(e,["sessionResumption"]);t!==void 0&&N!=null&&a(t,["setup","sessionResumption"],X0(N));const y=l(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&a(t,["setup","inputAudioTranscription"],y);const g=l(e,["outputAudioTranscription"]);t!==void 0&&g!=null&&a(t,["setup","outputAudioTranscription"],g);const v=l(e,["realtimeInputConfig"]);t!==void 0&&v!=null&&a(t,["setup","realtimeInputConfig"],v);const w=l(e,["contextWindowCompression"]);t!==void 0&&w!=null&&a(t,["setup","contextWindowCompression"],w);const _=l(e,["proactivity"]);return t!==void 0&&_!=null&&a(t,["setup","proactivity"],_),n}function z0(e,t){const n={},o=l(e,["generationConfig"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig"],q0(o));const i=l(e,["responseModalities"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig","responseModalities"],i);const r=l(e,["temperature"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig","temperature"],r);const s=l(e,["topP"]);t!==void 0&&s!=null&&a(t,["setup","generationConfig","topP"],s);const u=l(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const c=l(e,["maxOutputTokens"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","maxOutputTokens"],c);const d=l(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const p=l(e,["seed"]);t!==void 0&&p!=null&&a(t,["setup","generationConfig","seed"],p);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","speechConfig"],mp(Ql(m)));const h=l(e,["thinkingConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","thinkingConfig"],h);const x=l(e,["enableAffectiveDialog"]);t!==void 0&&x!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],x);const C=l(e,["systemInstruction"]);t!==void 0&&C!=null&&a(t,["setup","systemInstruction"],ge(C));const T=l(e,["tools"]);if(t!==void 0&&T!=null){let S=qn(T);Array.isArray(S)&&(S=S.map(E=>ev(Gn(E)))),a(t,["setup","tools"],S)}const N=l(e,["sessionResumption"]);t!==void 0&&N!=null&&a(t,["setup","sessionResumption"],N);const y=l(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&a(t,["setup","inputAudioTranscription"],y);const g=l(e,["outputAudioTranscription"]);t!==void 0&&g!=null&&a(t,["setup","outputAudioTranscription"],g);const v=l(e,["realtimeInputConfig"]);t!==void 0&&v!=null&&a(t,["setup","realtimeInputConfig"],v);const w=l(e,["contextWindowCompression"]);t!==void 0&&w!=null&&a(t,["setup","contextWindowCompression"],w);const _=l(e,["proactivity"]);return t!==void 0&&_!=null&&a(t,["setup","proactivity"],_),n}function J0(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["setup","model"],b(e,o));const i=l(t,["config"]);return i!=null&&a(n,["config"],B0(i,n)),n}function $0(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["setup","model"],b(e,o));const i=l(t,["config"]);return i!=null&&a(n,["config"],z0(i,n)),n}function W0(e){const t={},n=l(e,["musicGenerationConfig"]);return n!=null&&a(t,["musicGenerationConfig"],n),t}function O0(e){const t={},n=l(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),a(t,["weightedPrompts"],o)}return t}function Y0(e){const t={},n=l(e,["media"]);if(n!=null){let d=tp(n);Array.isArray(d)&&(d=d.map(p=>Si(p))),a(t,["mediaChunks"],d)}const o=l(e,["audio"]);o!=null&&a(t,["audio"],Si(op(o)));const i=l(e,["audioStreamEnd"]);i!=null&&a(t,["audioStreamEnd"],i);const r=l(e,["video"]);r!=null&&a(t,["video"],Si(np(r)));const s=l(e,["text"]);s!=null&&a(t,["text"],s);const u=l(e,["activityStart"]);u!=null&&a(t,["activityStart"],u);const c=l(e,["activityEnd"]);return c!=null&&a(t,["activityEnd"],c),t}function K0(e){const t={},n=l(e,["media"]);if(n!=null){let d=tp(n);Array.isArray(d)&&(d=d.map(p=>p)),a(t,["mediaChunks"],d)}const o=l(e,["audio"]);o!=null&&a(t,["audio"],op(o));const i=l(e,["audioStreamEnd"]);i!=null&&a(t,["audioStreamEnd"],i);const r=l(e,["video"]);r!=null&&a(t,["video"],np(r));const s=l(e,["text"]);s!=null&&a(t,["text"],s);const u=l(e,["activityStart"]);u!=null&&a(t,["activityStart"],u);const c=l(e,["activityEnd"]);return c!=null&&a(t,["activityEnd"],c),t}function Q0(e){const t={},n=l(e,["setupComplete"]);n!=null&&a(t,["setupComplete"],n);const o=l(e,["serverContent"]);o!=null&&a(t,["serverContent"],o);const i=l(e,["toolCall"]);i!=null&&a(t,["toolCall"],i);const r=l(e,["toolCallCancellation"]);r!=null&&a(t,["toolCallCancellation"],r);const s=l(e,["usageMetadata"]);s!=null&&a(t,["usageMetadata"],tv(s));const u=l(e,["goAway"]);u!=null&&a(t,["goAway"],u);const c=l(e,["sessionResumptionUpdate"]);return c!=null&&a(t,["sessionResumptionUpdate"],c),t}function j0(e){const t={},n=l(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],n);const o=l(e,["thought"]);o!=null&&a(t,["thought"],o);const i=l(e,["inlineData"]);i!=null&&a(t,["inlineData"],Si(i));const r=l(e,["fileData"]);r!=null&&a(t,["fileData"],V0(r));const s=l(e,["thoughtSignature"]);s!=null&&a(t,["thoughtSignature"],s);const u=l(e,["functionCall"]);u!=null&&a(t,["functionCall"],u);const c=l(e,["codeExecutionResult"]);c!=null&&a(t,["codeExecutionResult"],c);const d=l(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const p=l(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const m=l(e,["text"]);return m!=null&&a(t,["text"],m),t}function X0(e){const t={},n=l(e,["handle"]);if(n!=null&&a(t,["handle"],n),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function mp(e){const t={},n=l(e,["voiceConfig"]);if(n!=null&&a(t,["voiceConfig"],n),l(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=l(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function Z0(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),a(t,["functionDeclarations"],d)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],H0(o));const i=l(e,["googleSearchRetrieval"]);if(i!=null&&a(t,["googleSearchRetrieval"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=l(e,["googleMaps"]);r!=null&&a(t,["googleMaps"],b0(r));const s=l(e,["urlContext"]);s!=null&&a(t,["urlContext"],s);const u=l(e,["computerUse"]);u!=null&&a(t,["computerUse"],u);const c=l(e,["codeExecution"]);return c!=null&&a(t,["codeExecution"],c),t}function ev(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>G0(h))),a(t,["functionDeclarations"],m)}const o=l(e,["retrieval"]);o!=null&&a(t,["retrieval"],o);const i=l(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],i);const r=l(e,["googleSearchRetrieval"]);r!=null&&a(t,["googleSearchRetrieval"],r);const s=l(e,["enterpriseWebSearch"]);s!=null&&a(t,["enterpriseWebSearch"],s);const u=l(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],u);const c=l(e,["urlContext"]);c!=null&&a(t,["urlContext"],c);const d=l(e,["computerUse"]);d!=null&&a(t,["computerUse"],d);const p=l(e,["codeExecution"]);return p!=null&&a(t,["codeExecution"],p),t}function tv(e){const t={},n=l(e,["promptTokenCount"]);n!=null&&a(t,["promptTokenCount"],n);const o=l(e,["cachedContentTokenCount"]);o!=null&&a(t,["cachedContentTokenCount"],o);const i=l(e,["candidatesTokenCount"]);i!=null&&a(t,["responseTokenCount"],i);const r=l(e,["toolUsePromptTokenCount"]);r!=null&&a(t,["toolUsePromptTokenCount"],r);const s=l(e,["thoughtsTokenCount"]);s!=null&&a(t,["thoughtsTokenCount"],s);const u=l(e,["totalTokenCount"]);u!=null&&a(t,["totalTokenCount"],u);const c=l(e,["promptTokensDetails"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(C=>C)),a(t,["promptTokensDetails"],x)}const d=l(e,["cacheTokensDetails"]);if(d!=null){let x=d;Array.isArray(x)&&(x=x.map(C=>C)),a(t,["cacheTokensDetails"],x)}const p=l(e,["candidatesTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(C=>C)),a(t,["responseTokensDetails"],x)}const m=l(e,["toolUsePromptTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(C=>C)),a(t,["toolUsePromptTokensDetails"],x)}const h=l(e,["trafficType"]);return h!=null&&a(t,["trafficType"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nv(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["data"]);n!=null&&a(t,["data"],n);const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function ov(e){const t={},n=l(e,["content"]);n!=null&&a(t,["content"],n);const o=l(e,["citationMetadata"]);o!=null&&a(t,["citationMetadata"],iv(o));const i=l(e,["tokenCount"]);i!=null&&a(t,["tokenCount"],i);const r=l(e,["finishReason"]);r!=null&&a(t,["finishReason"],r);const s=l(e,["urlContextMetadata"]);s!=null&&a(t,["urlContextMetadata"],s);const u=l(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);const c=l(e,["groundingMetadata"]);c!=null&&a(t,["groundingMetadata"],c);const d=l(e,["index"]);d!=null&&a(t,["index"],d);const p=l(e,["logprobsResult"]);p!=null&&a(t,["logprobsResult"],p);const m=l(e,["safetyRatings"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(x=>x)),a(t,["safetyRatings"],h)}return t}function iv(e){const t={},n=l(e,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),a(t,["citations"],o)}return t}function rv(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["contents"]);if(i!=null){let r=qe(i);Array.isArray(r)&&(r=r.map(s=>s)),a(n,["contents"],r)}return n}function sv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["tokensInfo"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(r=>r)),a(t,["tokensInfo"],i)}return t}function lv(e){const t={},n=l(e,["values"]);n!=null&&a(t,["values"],n);const o=l(e,["statistics"]);return o!=null&&a(t,["statistics"],av(o)),t}function av(e){const t={},n=l(e,["truncated"]);n!=null&&a(t,["truncated"],n);const o=l(e,["token_count"]);return o!=null&&a(t,["tokenCount"],o),t}function hr(e){const t={},n=l(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>px(r))),a(t,["parts"],i)}const o=l(e,["role"]);return o!=null&&a(t,["role"],o),t}function uv(e){const t={},n=l(e,["controlType"]);n!=null&&a(t,["controlType"],n);const o=l(e,["enableControlImageComputation"]);return o!=null&&a(t,["computeControl"],o),t}function cv(e){const t={};if(l(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function dv(e,t){const n={},o=l(e,["systemInstruction"]);t!==void 0&&o!=null&&a(t,["systemInstruction"],ge(o));const i=l(e,["tools"]);if(t!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>xp(u))),a(t,["tools"],s)}const r=l(e,["generationConfig"]);return t!==void 0&&r!=null&&a(t,["generationConfig"],ex(r)),n}function fv(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["contents"]);if(i!=null){let s=qe(i);Array.isArray(s)&&(s=s.map(u=>hr(u))),a(n,["contents"],s)}const r=l(t,["config"]);return r!=null&&cv(r),n}function pv(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["contents"]);if(i!=null){let s=qe(i);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const r=l(t,["config"]);return r!=null&&dv(r,n),n}function mv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["totalTokens"]);o!=null&&a(t,["totalTokens"],o);const i=l(e,["cachedContentTokenCount"]);return i!=null&&a(t,["cachedContentTokenCount"],i),t}function hv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["totalTokens"]);return o!=null&&a(t,["totalTokens"],o),t}function gv(e,t){const n={},o=l(t,["model"]);return o!=null&&a(n,["_url","name"],b(e,o)),n}function yv(e,t){const n={},o=l(t,["model"]);return o!=null&&a(n,["_url","name"],b(e,o)),n}function vv(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function xv(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function Cv(e,t){const n={},o=l(e,["outputGcsUri"]);t!==void 0&&o!=null&&a(t,["parameters","storageUri"],o);const i=l(e,["negativePrompt"]);t!==void 0&&i!=null&&a(t,["parameters","negativePrompt"],i);const r=l(e,["numberOfImages"]);t!==void 0&&r!=null&&a(t,["parameters","sampleCount"],r);const s=l(e,["aspectRatio"]);t!==void 0&&s!=null&&a(t,["parameters","aspectRatio"],s);const u=l(e,["guidanceScale"]);t!==void 0&&u!=null&&a(t,["parameters","guidanceScale"],u);const c=l(e,["seed"]);t!==void 0&&c!=null&&a(t,["parameters","seed"],c);const d=l(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&a(t,["parameters","safetySetting"],d);const p=l(e,["personGeneration"]);t!==void 0&&p!=null&&a(t,["parameters","personGeneration"],p);const m=l(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&a(t,["parameters","includeSafetyAttributes"],m);const h=l(e,["includeRaiReason"]);t!==void 0&&h!=null&&a(t,["parameters","includeRaiReason"],h);const x=l(e,["language"]);t!==void 0&&x!=null&&a(t,["parameters","language"],x);const C=l(e,["outputMimeType"]);t!==void 0&&C!=null&&a(t,["parameters","outputOptions","mimeType"],C);const T=l(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&a(t,["parameters","outputOptions","compressionQuality"],T);const N=l(e,["addWatermark"]);t!==void 0&&N!=null&&a(t,["parameters","addWatermark"],N);const y=l(e,["labels"]);t!==void 0&&y!=null&&a(t,["labels"],y);const g=l(e,["editMode"]);t!==void 0&&g!=null&&a(t,["parameters","editMode"],g);const v=l(e,["baseSteps"]);return t!==void 0&&v!=null&&a(t,["parameters","editConfig","baseSteps"],v),n}function Tv(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const r=l(t,["referenceImages"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>xx(c))),a(n,["instances[0]","referenceImages"],u)}const s=l(t,["config"]);return s!=null&&Cv(s,n),n}function wv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(r=>gr(r))),a(t,["generatedImages"],i)}return t}function Sv(e,t){const n={},o=l(e,["taskType"]);t!==void 0&&o!=null&&a(t,["requests[]","taskType"],o);const i=l(e,["title"]);t!==void 0&&i!=null&&a(t,["requests[]","title"],i);const r=l(e,["outputDimensionality"]);if(t!==void 0&&r!=null&&a(t,["requests[]","outputDimensionality"],r),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function _v(e,t){const n={},o=l(e,["taskType"]);t!==void 0&&o!=null&&a(t,["instances[]","task_type"],o);const i=l(e,["title"]);t!==void 0&&i!=null&&a(t,["instances[]","title"],i);const r=l(e,["outputDimensionality"]);t!==void 0&&r!=null&&a(t,["parameters","outputDimensionality"],r);const s=l(e,["mimeType"]);t!==void 0&&s!=null&&a(t,["instances[]","mimeType"],s);const u=l(e,["autoTruncate"]);return t!==void 0&&u!=null&&a(t,["parameters","autoTruncate"],u),n}function Ev(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["contents"]);if(i!=null){let u=Ol(e,i);Array.isArray(u)&&(u=u.map(c=>c)),a(n,["requests[]","content"],u)}const r=l(t,["config"]);r!=null&&Sv(r,n);const s=l(t,["model"]);return s!==void 0&&a(n,["requests[]","model"],b(e,s)),n}function Nv(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["contents"]);if(i!=null){let s=Ol(e,i);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["instances[]","content"],s)}const r=l(t,["config"]);return r!=null&&_v(r,n),n}function Av(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["embeddings"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),a(t,["embeddings"],r)}const i=l(e,["metadata"]);return i!=null&&a(t,["metadata"],i),t}function Iv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["predictions[]","embeddings"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>lv(s))),a(t,["embeddings"],r)}const i=l(e,["metadata"]);return i!=null&&a(t,["metadata"],i),t}function kv(e){const t={},n=l(e,["endpoint"]);n!=null&&a(t,["name"],n);const o=l(e,["deployedModelId"]);return o!=null&&a(t,["deployedModelId"],o),t}function Pv(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Rv(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&a(t,["description"],n);const o=l(e,["name"]);o!=null&&a(t,["name"],o);const i=l(e,["parameters"]);i!=null&&a(t,["parameters"],i);const r=l(e,["parametersJsonSchema"]);r!=null&&a(t,["parametersJsonSchema"],r);const s=l(e,["response"]);s!=null&&a(t,["response"],s);const u=l(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function Mv(e,t,n){const o={},i=l(t,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],hr(ge(i)));const r=l(t,["temperature"]);r!=null&&a(o,["temperature"],r);const s=l(t,["topP"]);s!=null&&a(o,["topP"],s);const u=l(t,["topK"]);u!=null&&a(o,["topK"],u);const c=l(t,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(t,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const p=l(t,["stopSequences"]);p!=null&&a(o,["stopSequences"],p);const m=l(t,["responseLogprobs"]);m!=null&&a(o,["responseLogprobs"],m);const h=l(t,["logprobs"]);h!=null&&a(o,["logprobs"],h);const x=l(t,["presencePenalty"]);x!=null&&a(o,["presencePenalty"],x);const C=l(t,["frequencyPenalty"]);C!=null&&a(o,["frequencyPenalty"],C);const T=l(t,["seed"]);T!=null&&a(o,["seed"],T);const N=l(t,["responseMimeType"]);N!=null&&a(o,["responseMimeType"],N);const y=l(t,["responseSchema"]);y!=null&&a(o,["responseSchema"],Yl(y));const g=l(t,["responseJsonSchema"]);if(g!=null&&a(o,["responseJsonSchema"],g),l(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=l(t,["safetySettings"]);if(n!==void 0&&v!=null){let z=v;Array.isArray(z)&&(z=z.map(fe=>Cx(fe))),a(n,["safetySettings"],z)}const w=l(t,["tools"]);if(n!==void 0&&w!=null){let z=qn(w);Array.isArray(z)&&(z=z.map(fe=>Nx(Gn(fe)))),a(n,["tools"],z)}const _=l(t,["toolConfig"]);if(n!==void 0&&_!=null&&a(n,["toolConfig"],_),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=l(t,["cachedContent"]);n!==void 0&&S!=null&&a(n,["cachedContent"],pt(e,S));const E=l(t,["responseModalities"]);E!=null&&a(o,["responseModalities"],E);const I=l(t,["mediaResolution"]);I!=null&&a(o,["mediaResolution"],I);const k=l(t,["speechConfig"]);if(k!=null&&a(o,["speechConfig"],Kl(k)),l(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=l(t,["thinkingConfig"]);R!=null&&a(o,["thinkingConfig"],R);const J=l(t,["imageConfig"]);return J!=null&&a(o,["imageConfig"],J),o}function Dv(e,t,n){const o={},i=l(t,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],ge(i));const r=l(t,["temperature"]);r!=null&&a(o,["temperature"],r);const s=l(t,["topP"]);s!=null&&a(o,["topP"],s);const u=l(t,["topK"]);u!=null&&a(o,["topK"],u);const c=l(t,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(t,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const p=l(t,["stopSequences"]);p!=null&&a(o,["stopSequences"],p);const m=l(t,["responseLogprobs"]);m!=null&&a(o,["responseLogprobs"],m);const h=l(t,["logprobs"]);h!=null&&a(o,["logprobs"],h);const x=l(t,["presencePenalty"]);x!=null&&a(o,["presencePenalty"],x);const C=l(t,["frequencyPenalty"]);C!=null&&a(o,["frequencyPenalty"],C);const T=l(t,["seed"]);T!=null&&a(o,["seed"],T);const N=l(t,["responseMimeType"]);N!=null&&a(o,["responseMimeType"],N);const y=l(t,["responseSchema"]);y!=null&&a(o,["responseSchema"],Yl(y));const g=l(t,["responseJsonSchema"]);g!=null&&a(o,["responseJsonSchema"],g);const v=l(t,["routingConfig"]);v!=null&&a(o,["routingConfig"],v);const w=l(t,["modelSelectionConfig"]);w!=null&&a(o,["modelConfig"],w);const _=l(t,["safetySettings"]);if(n!==void 0&&_!=null){let Ae=_;Array.isArray(Ae)&&(Ae=Ae.map(Ut=>Ut)),a(n,["safetySettings"],Ae)}const S=l(t,["tools"]);if(n!==void 0&&S!=null){let Ae=qn(S);Array.isArray(Ae)&&(Ae=Ae.map(Ut=>xp(Gn(Ut)))),a(n,["tools"],Ae)}const E=l(t,["toolConfig"]);n!==void 0&&E!=null&&a(n,["toolConfig"],E);const I=l(t,["labels"]);n!==void 0&&I!=null&&a(n,["labels"],I);const k=l(t,["cachedContent"]);n!==void 0&&k!=null&&a(n,["cachedContent"],pt(e,k));const R=l(t,["responseModalities"]);R!=null&&a(o,["responseModalities"],R);const J=l(t,["mediaResolution"]);J!=null&&a(o,["mediaResolution"],J);const z=l(t,["speechConfig"]);z!=null&&a(o,["speechConfig"],vp(Kl(z)));const fe=l(t,["audioTimestamp"]);fe!=null&&a(o,["audioTimestamp"],fe);const Hn=l(t,["thinkingConfig"]);Hn!=null&&a(o,["thinkingConfig"],Hn);const Bo=l(t,["imageConfig"]);return Bo!=null&&a(o,["imageConfig"],Bo),o}function vc(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["contents"]);if(i!=null){let s=qe(i);Array.isArray(s)&&(s=s.map(u=>hr(u))),a(n,["contents"],s)}const r=l(t,["config"]);return r!=null&&a(n,["generationConfig"],Mv(e,r,n)),n}function xc(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["contents"]);if(i!=null){let s=qe(i);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const r=l(t,["config"]);return r!=null&&a(n,["generationConfig"],Dv(e,r,n)),n}function Cc(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>ov(d))),a(t,["candidates"],c)}const i=l(e,["modelVersion"]);i!=null&&a(t,["modelVersion"],i);const r=l(e,["promptFeedback"]);r!=null&&a(t,["promptFeedback"],r);const s=l(e,["responseId"]);s!=null&&a(t,["responseId"],s);const u=l(e,["usageMetadata"]);return u!=null&&a(t,["usageMetadata"],u),t}function Tc(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(p=>p)),a(t,["candidates"],d)}const i=l(e,["createTime"]);i!=null&&a(t,["createTime"],i);const r=l(e,["modelVersion"]);r!=null&&a(t,["modelVersion"],r);const s=l(e,["promptFeedback"]);s!=null&&a(t,["promptFeedback"],s);const u=l(e,["responseId"]);u!=null&&a(t,["responseId"],u);const c=l(e,["usageMetadata"]);return c!=null&&a(t,["usageMetadata"],c),t}function Lv(e,t){const n={};if(l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=l(e,["numberOfImages"]);t!==void 0&&o!=null&&a(t,["parameters","sampleCount"],o);const i=l(e,["aspectRatio"]);t!==void 0&&i!=null&&a(t,["parameters","aspectRatio"],i);const r=l(e,["guidanceScale"]);if(t!==void 0&&r!=null&&a(t,["parameters","guidanceScale"],r),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&a(t,["parameters","safetySetting"],s);const u=l(e,["personGeneration"]);t!==void 0&&u!=null&&a(t,["parameters","personGeneration"],u);const c=l(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&a(t,["parameters","includeSafetyAttributes"],c);const d=l(e,["includeRaiReason"]);t!==void 0&&d!=null&&a(t,["parameters","includeRaiReason"],d);const p=l(e,["language"]);t!==void 0&&p!=null&&a(t,["parameters","language"],p);const m=l(e,["outputMimeType"]);t!==void 0&&m!=null&&a(t,["parameters","outputOptions","mimeType"],m);const h=l(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&a(t,["parameters","outputOptions","compressionQuality"],h),l(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=l(e,["imageSize"]);if(t!==void 0&&x!=null&&a(t,["parameters","sampleImageSize"],x),l(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Uv(e,t){const n={},o=l(e,["outputGcsUri"]);t!==void 0&&o!=null&&a(t,["parameters","storageUri"],o);const i=l(e,["negativePrompt"]);t!==void 0&&i!=null&&a(t,["parameters","negativePrompt"],i);const r=l(e,["numberOfImages"]);t!==void 0&&r!=null&&a(t,["parameters","sampleCount"],r);const s=l(e,["aspectRatio"]);t!==void 0&&s!=null&&a(t,["parameters","aspectRatio"],s);const u=l(e,["guidanceScale"]);t!==void 0&&u!=null&&a(t,["parameters","guidanceScale"],u);const c=l(e,["seed"]);t!==void 0&&c!=null&&a(t,["parameters","seed"],c);const d=l(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&a(t,["parameters","safetySetting"],d);const p=l(e,["personGeneration"]);t!==void 0&&p!=null&&a(t,["parameters","personGeneration"],p);const m=l(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&a(t,["parameters","includeSafetyAttributes"],m);const h=l(e,["includeRaiReason"]);t!==void 0&&h!=null&&a(t,["parameters","includeRaiReason"],h);const x=l(e,["language"]);t!==void 0&&x!=null&&a(t,["parameters","language"],x);const C=l(e,["outputMimeType"]);t!==void 0&&C!=null&&a(t,["parameters","outputOptions","mimeType"],C);const T=l(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&a(t,["parameters","outputOptions","compressionQuality"],T);const N=l(e,["addWatermark"]);t!==void 0&&N!=null&&a(t,["parameters","addWatermark"],N);const y=l(e,["labels"]);t!==void 0&&y!=null&&a(t,["labels"],y);const g=l(e,["imageSize"]);t!==void 0&&g!=null&&a(t,["parameters","sampleImageSize"],g);const v=l(e,["enhancePrompt"]);return t!==void 0&&v!=null&&a(t,["parameters","enhancePrompt"],v),n}function Fv(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const r=l(t,["config"]);return r!=null&&Lv(r,n),n}function Vv(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const r=l(t,["config"]);return r!=null&&Uv(r,n),n}function Gv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Qv(s))),a(t,["generatedImages"],r)}const i=l(e,["positivePromptSafetyAttributes"]);return i!=null&&a(t,["positivePromptSafetyAttributes"],gp(i)),t}function qv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>gr(s))),a(t,["generatedImages"],r)}const i=l(e,["positivePromptSafetyAttributes"]);return i!=null&&a(t,["positivePromptSafetyAttributes"],yp(i)),t}function bv(e,t){const n={},o=l(e,["numberOfVideos"]);if(t!==void 0&&o!=null&&a(t,["parameters","sampleCount"],o),l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=l(e,["durationSeconds"]);if(t!==void 0&&i!=null&&a(t,["parameters","durationSeconds"],i),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=l(e,["aspectRatio"]);t!==void 0&&r!=null&&a(t,["parameters","aspectRatio"],r);const s=l(e,["resolution"]);t!==void 0&&s!=null&&a(t,["parameters","resolution"],s);const u=l(e,["personGeneration"]);if(t!==void 0&&u!=null&&a(t,["parameters","personGeneration"],u),l(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=l(e,["negativePrompt"]);t!==void 0&&c!=null&&a(t,["parameters","negativePrompt"],c);const d=l(e,["enhancePrompt"]);if(t!==void 0&&d!=null&&a(t,["parameters","enhancePrompt"],d),l(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=l(e,["lastFrame"]);t!==void 0&&p!=null&&a(t,["instances[0]","lastFrame"],yr(p));const m=l(e,["referenceImages"]);if(t!==void 0&&m!=null){let h=m;Array.isArray(h)&&(h=h.map(x=>qx(x))),a(t,["instances[0]","referenceImages"],h)}if(l(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Hv(e,t){const n={},o=l(e,["numberOfVideos"]);t!==void 0&&o!=null&&a(t,["parameters","sampleCount"],o);const i=l(e,["outputGcsUri"]);t!==void 0&&i!=null&&a(t,["parameters","storageUri"],i);const r=l(e,["fps"]);t!==void 0&&r!=null&&a(t,["parameters","fps"],r);const s=l(e,["durationSeconds"]);t!==void 0&&s!=null&&a(t,["parameters","durationSeconds"],s);const u=l(e,["seed"]);t!==void 0&&u!=null&&a(t,["parameters","seed"],u);const c=l(e,["aspectRatio"]);t!==void 0&&c!=null&&a(t,["parameters","aspectRatio"],c);const d=l(e,["resolution"]);t!==void 0&&d!=null&&a(t,["parameters","resolution"],d);const p=l(e,["personGeneration"]);t!==void 0&&p!=null&&a(t,["parameters","personGeneration"],p);const m=l(e,["pubsubTopic"]);t!==void 0&&m!=null&&a(t,["parameters","pubsubTopic"],m);const h=l(e,["negativePrompt"]);t!==void 0&&h!=null&&a(t,["parameters","negativePrompt"],h);const x=l(e,["enhancePrompt"]);t!==void 0&&x!=null&&a(t,["parameters","enhancePrompt"],x);const C=l(e,["generateAudio"]);t!==void 0&&C!=null&&a(t,["parameters","generateAudio"],C);const T=l(e,["lastFrame"]);t!==void 0&&T!=null&&a(t,["instances[0]","lastFrame"],Ke(T));const N=l(e,["referenceImages"]);if(t!==void 0&&N!=null){let v=N;Array.isArray(v)&&(v=v.map(w=>bx(w))),a(t,["instances[0]","referenceImages"],v)}const y=l(e,["mask"]);t!==void 0&&y!=null&&a(t,["instances[0]","mask"],Gx(y));const g=l(e,["compressionQuality"]);return t!==void 0&&g!=null&&a(t,["parameters","compressionQuality"],g),n}function Bv(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const o=l(e,["metadata"]);o!=null&&a(t,["metadata"],o);const i=l(e,["done"]);i!=null&&a(t,["done"],i);const r=l(e,["error"]);r!=null&&a(t,["error"],r);const s=l(e,["response","generateVideoResponse"]);return s!=null&&a(t,["response"],Wv(s)),t}function zv(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const o=l(e,["metadata"]);o!=null&&a(t,["metadata"],o);const i=l(e,["done"]);i!=null&&a(t,["done"],i);const r=l(e,["error"]);r!=null&&a(t,["error"],r);const s=l(e,["response"]);return s!=null&&a(t,["response"],Ov(s)),t}function Jv(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const r=l(t,["image"]);r!=null&&a(n,["instances[0]","image"],yr(r));const s=l(t,["video"]);s!=null&&a(n,["instances[0]","video"],Cp(s));const u=l(t,["source"]);u!=null&&Yv(u,n);const c=l(t,["config"]);return c!=null&&bv(c,n),n}function $v(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const r=l(t,["image"]);r!=null&&a(n,["instances[0]","image"],Ke(r));const s=l(t,["video"]);s!=null&&a(n,["instances[0]","video"],Tp(s));const u=l(t,["source"]);u!=null&&Kv(u,n);const c=l(t,["config"]);return c!=null&&Hv(c,n),n}function Wv(e){const t={},n=l(e,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Xv(s))),a(t,["generatedVideos"],r)}const o=l(e,["raiMediaFilteredCount"]);o!=null&&a(t,["raiMediaFilteredCount"],o);const i=l(e,["raiMediaFilteredReasons"]);return i!=null&&a(t,["raiMediaFilteredReasons"],i),t}function Ov(e){const t={},n=l(e,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Zv(s))),a(t,["generatedVideos"],r)}const o=l(e,["raiMediaFilteredCount"]);o!=null&&a(t,["raiMediaFilteredCount"],o);const i=l(e,["raiMediaFilteredReasons"]);return i!=null&&a(t,["raiMediaFilteredReasons"],i),t}function Yv(e,t){const n={},o=l(e,["prompt"]);t!==void 0&&o!=null&&a(t,["instances[0]","prompt"],o);const i=l(e,["image"]);t!==void 0&&i!=null&&a(t,["instances[0]","image"],yr(i));const r=l(e,["video"]);return t!==void 0&&r!=null&&a(t,["instances[0]","video"],Cp(r)),n}function Kv(e,t){const n={},o=l(e,["prompt"]);t!==void 0&&o!=null&&a(t,["instances[0]","prompt"],o);const i=l(e,["image"]);t!==void 0&&i!=null&&a(t,["instances[0]","image"],Ke(i));const r=l(e,["video"]);return t!==void 0&&r!=null&&a(t,["instances[0]","video"],Tp(r)),n}function Qv(e){const t={},n=l(e,["_self"]);n!=null&&a(t,["image"],rx(n));const o=l(e,["raiFilteredReason"]);o!=null&&a(t,["raiFilteredReason"],o);const i=l(e,["_self"]);return i!=null&&a(t,["safetyAttributes"],gp(i)),t}function gr(e){const t={},n=l(e,["_self"]);n!=null&&a(t,["image"],hp(n));const o=l(e,["raiFilteredReason"]);o!=null&&a(t,["raiFilteredReason"],o);const i=l(e,["_self"]);i!=null&&a(t,["safetyAttributes"],yp(i));const r=l(e,["prompt"]);return r!=null&&a(t,["enhancedPrompt"],r),t}function jv(e){const t={},n=l(e,["_self"]);n!=null&&a(t,["mask"],hp(n));const o=l(e,["labels"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(r=>r)),a(t,["labels"],i)}return t}function Xv(e){const t={},n=l(e,["video"]);return n!=null&&a(t,["video"],Fx(n)),t}function Zv(e){const t={},n=l(e,["_self"]);return n!=null&&a(t,["video"],Vx(n)),t}function ex(e){const t={},n=l(e,["modelSelectionConfig"]);n!=null&&a(t,["modelConfig"],n);const o=l(e,["audioTimestamp"]);o!=null&&a(t,["audioTimestamp"],o);const i=l(e,["candidateCount"]);i!=null&&a(t,["candidateCount"],i);const r=l(e,["enableAffectiveDialog"]);r!=null&&a(t,["enableAffectiveDialog"],r);const s=l(e,["frequencyPenalty"]);s!=null&&a(t,["frequencyPenalty"],s);const u=l(e,["logprobs"]);u!=null&&a(t,["logprobs"],u);const c=l(e,["maxOutputTokens"]);c!=null&&a(t,["maxOutputTokens"],c);const d=l(e,["mediaResolution"]);d!=null&&a(t,["mediaResolution"],d);const p=l(e,["presencePenalty"]);p!=null&&a(t,["presencePenalty"],p);const m=l(e,["responseJsonSchema"]);m!=null&&a(t,["responseJsonSchema"],m);const h=l(e,["responseLogprobs"]);h!=null&&a(t,["responseLogprobs"],h);const x=l(e,["responseMimeType"]);x!=null&&a(t,["responseMimeType"],x);const C=l(e,["responseModalities"]);C!=null&&a(t,["responseModalities"],C);const T=l(e,["responseSchema"]);T!=null&&a(t,["responseSchema"],T);const N=l(e,["routingConfig"]);N!=null&&a(t,["routingConfig"],N);const y=l(e,["seed"]);y!=null&&a(t,["seed"],y);const g=l(e,["speechConfig"]);g!=null&&a(t,["speechConfig"],vp(g));const v=l(e,["stopSequences"]);v!=null&&a(t,["stopSequences"],v);const w=l(e,["temperature"]);w!=null&&a(t,["temperature"],w);const _=l(e,["thinkingConfig"]);_!=null&&a(t,["thinkingConfig"],_);const S=l(e,["topK"]);S!=null&&a(t,["topK"],S);const E=l(e,["topP"]);if(E!=null&&a(t,["topP"],E),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function tx(e,t){const n={},o=l(t,["model"]);return o!=null&&a(n,["_url","name"],b(e,o)),n}function nx(e,t){const n={},o=l(t,["model"]);return o!=null&&a(n,["_url","name"],b(e,o)),n}function ox(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&a(t,["enableWidget"],n),t}function ix(e){const t={},n=l(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],n),l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function rx(e){const t={},n=l(e,["bytesBase64Encoded"]);n!=null&&a(t,["imageBytes"],Lt(n));const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function hp(e){const t={},n=l(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const o=l(e,["bytesBase64Encoded"]);o!=null&&a(t,["imageBytes"],Lt(o));const i=l(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function yr(e){const t={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(e,["imageBytes"]);n!=null&&a(t,["bytesBase64Encoded"],Lt(n));const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Ke(e){const t={},n=l(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const o=l(e,["imageBytes"]);o!=null&&a(t,["bytesBase64Encoded"],Lt(o));const i=l(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function sx(e,t,n){const o={},i=l(t,["pageSize"]);n!==void 0&&i!=null&&a(n,["_query","pageSize"],i);const r=l(t,["pageToken"]);n!==void 0&&r!=null&&a(n,["_query","pageToken"],r);const s=l(t,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(t,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],lp(e,u)),o}function lx(e,t,n){const o={},i=l(t,["pageSize"]);n!==void 0&&i!=null&&a(n,["_query","pageSize"],i);const r=l(t,["pageToken"]);n!==void 0&&r!=null&&a(n,["_query","pageToken"],r);const s=l(t,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(t,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],lp(e,u)),o}function ax(e,t){const n={},o=l(t,["config"]);return o!=null&&sx(e,o,n),n}function ux(e,t){const n={},o=l(t,["config"]);return o!=null&&lx(e,o,n),n}function cx(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const i=l(e,["_self"]);if(i!=null){let r=ap(i);Array.isArray(r)&&(r=r.map(s=>Js(s))),a(t,["models"],r)}return t}function dx(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["nextPageToken"]);o!=null&&a(t,["nextPageToken"],o);const i=l(e,["_self"]);if(i!=null){let r=ap(i);Array.isArray(r)&&(r=r.map(s=>$s(s))),a(t,["models"],r)}return t}function fx(e){const t={},n=l(e,["maskMode"]);n!=null&&a(t,["maskMode"],n);const o=l(e,["segmentationClasses"]);o!=null&&a(t,["maskClasses"],o);const i=l(e,["maskDilation"]);return i!=null&&a(t,["dilation"],i),t}function Js(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const o=l(e,["displayName"]);o!=null&&a(t,["displayName"],o);const i=l(e,["description"]);i!=null&&a(t,["description"],i);const r=l(e,["version"]);r!=null&&a(t,["version"],r);const s=l(e,["_self"]);s!=null&&a(t,["tunedModelInfo"],Ax(s));const u=l(e,["inputTokenLimit"]);u!=null&&a(t,["inputTokenLimit"],u);const c=l(e,["outputTokenLimit"]);c!=null&&a(t,["outputTokenLimit"],c);const d=l(e,["supportedGenerationMethods"]);return d!=null&&a(t,["supportedActions"],d),t}function $s(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const o=l(e,["displayName"]);o!=null&&a(t,["displayName"],o);const i=l(e,["description"]);i!=null&&a(t,["description"],i);const r=l(e,["versionId"]);r!=null&&a(t,["version"],r);const s=l(e,["deployedModels"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(h=>kv(h))),a(t,["endpoints"],m)}const u=l(e,["labels"]);u!=null&&a(t,["labels"],u);const c=l(e,["_self"]);c!=null&&a(t,["tunedModelInfo"],Ix(c));const d=l(e,["defaultCheckpointId"]);d!=null&&a(t,["defaultCheckpointId"],d);const p=l(e,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>h)),a(t,["checkpoints"],m)}return t}function px(e){const t={},n=l(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],n);const o=l(e,["thought"]);o!=null&&a(t,["thought"],o);const i=l(e,["inlineData"]);i!=null&&a(t,["inlineData"],nv(i));const r=l(e,["fileData"]);r!=null&&a(t,["fileData"],Pv(r));const s=l(e,["thoughtSignature"]);s!=null&&a(t,["thoughtSignature"],s);const u=l(e,["functionCall"]);u!=null&&a(t,["functionCall"],u);const c=l(e,["codeExecutionResult"]);c!=null&&a(t,["codeExecutionResult"],c);const d=l(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const p=l(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const m=l(e,["text"]);return m!=null&&a(t,["text"],m),t}function mx(e){const t={},n=l(e,["productImage"]);return n!=null&&a(t,["image"],Ke(n)),t}function hx(e,t){const n={},o=l(e,["numberOfImages"]);t!==void 0&&o!=null&&a(t,["parameters","sampleCount"],o);const i=l(e,["baseSteps"]);t!==void 0&&i!=null&&a(t,["parameters","editConfig","baseSteps"],i);const r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&a(t,["parameters","storageUri"],r);const s=l(e,["seed"]);t!==void 0&&s!=null&&a(t,["parameters","seed"],s);const u=l(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&a(t,["parameters","safetySetting"],u);const c=l(e,["personGeneration"]);t!==void 0&&c!=null&&a(t,["parameters","personGeneration"],c);const d=l(e,["addWatermark"]);t!==void 0&&d!=null&&a(t,["parameters","addWatermark"],d);const p=l(e,["outputMimeType"]);t!==void 0&&p!=null&&a(t,["parameters","outputOptions","mimeType"],p);const m=l(e,["outputCompressionQuality"]);t!==void 0&&m!=null&&a(t,["parameters","outputOptions","compressionQuality"],m);const h=l(e,["enhancePrompt"]);t!==void 0&&h!=null&&a(t,["parameters","enhancePrompt"],h);const x=l(e,["labels"]);return t!==void 0&&x!=null&&a(t,["labels"],x),n}function gx(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["source"]);i!=null&&vx(i,n);const r=l(t,["config"]);return r!=null&&hx(r,n),n}function yx(e){const t={},n=l(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>gr(i))),a(t,["generatedImages"],o)}return t}function vx(e,t){const n={},o=l(e,["prompt"]);t!==void 0&&o!=null&&a(t,["instances[0]","prompt"],o);const i=l(e,["personImage"]);t!==void 0&&i!=null&&a(t,["instances[0]","personImage","image"],Ke(i));const r=l(e,["productImages"]);if(t!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>mx(u))),a(t,["instances[0]","productImages"],s)}return n}function xx(e){const t={},n=l(e,["referenceImage"]);n!=null&&a(t,["referenceImage"],Ke(n));const o=l(e,["referenceId"]);o!=null&&a(t,["referenceId"],o);const i=l(e,["referenceType"]);i!=null&&a(t,["referenceType"],i);const r=l(e,["maskImageConfig"]);r!=null&&a(t,["maskImageConfig"],fx(r));const s=l(e,["controlImageConfig"]);s!=null&&a(t,["controlImageConfig"],uv(s));const u=l(e,["styleImageConfig"]);u!=null&&a(t,["styleImageConfig"],u);const c=l(e,["subjectImageConfig"]);return c!=null&&a(t,["subjectImageConfig"],c),t}function gp(e){const t={},n=l(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const o=l(e,["safetyAttributes","scores"]);o!=null&&a(t,["scores"],o);const i=l(e,["contentType"]);return i!=null&&a(t,["contentType"],i),t}function yp(e){const t={},n=l(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const o=l(e,["safetyAttributes","scores"]);o!=null&&a(t,["scores"],o);const i=l(e,["contentType"]);return i!=null&&a(t,["contentType"],i),t}function Cx(e){const t={};if(l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(e,["category"]);n!=null&&a(t,["category"],n);const o=l(e,["threshold"]);return o!=null&&a(t,["threshold"],o),t}function Tx(e){const t={},n=l(e,["image"]);return n!=null&&a(t,["image"],Ke(n)),t}function wx(e,t){const n={},o=l(e,["mode"]);t!==void 0&&o!=null&&a(t,["parameters","mode"],o);const i=l(e,["maxPredictions"]);t!==void 0&&i!=null&&a(t,["parameters","maxPredictions"],i);const r=l(e,["confidenceThreshold"]);t!==void 0&&r!=null&&a(t,["parameters","confidenceThreshold"],r);const s=l(e,["maskDilation"]);t!==void 0&&s!=null&&a(t,["parameters","maskDilation"],s);const u=l(e,["binaryColorThreshold"]);t!==void 0&&u!=null&&a(t,["parameters","binaryColorThreshold"],u);const c=l(e,["labels"]);return t!==void 0&&c!=null&&a(t,["labels"],c),n}function Sx(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["source"]);i!=null&&Ex(i,n);const r=l(t,["config"]);return r!=null&&wx(r,n),n}function _x(e){const t={},n=l(e,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>jv(i))),a(t,["generatedMasks"],o)}return t}function Ex(e,t){const n={},o=l(e,["prompt"]);t!==void 0&&o!=null&&a(t,["instances[0]","prompt"],o);const i=l(e,["image"]);t!==void 0&&i!=null&&a(t,["instances[0]","image"],Ke(i));const r=l(e,["scribbleImage"]);return t!==void 0&&r!=null&&a(t,["instances[0]","scribble"],Tx(r)),n}function vp(e){const t={},n=l(e,["voiceConfig"]);if(n!=null&&a(t,["voiceConfig"],n),l(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=l(e,["languageCode"]);return o!=null&&a(t,["languageCode"],o),t}function Nx(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),a(t,["functionDeclarations"],d)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],ix(o));const i=l(e,["googleSearchRetrieval"]);if(i!=null&&a(t,["googleSearchRetrieval"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=l(e,["googleMaps"]);r!=null&&a(t,["googleMaps"],ox(r));const s=l(e,["urlContext"]);s!=null&&a(t,["urlContext"],s);const u=l(e,["computerUse"]);u!=null&&a(t,["computerUse"],u);const c=l(e,["codeExecution"]);return c!=null&&a(t,["codeExecution"],c),t}function xp(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>Rv(h))),a(t,["functionDeclarations"],m)}const o=l(e,["retrieval"]);o!=null&&a(t,["retrieval"],o);const i=l(e,["googleSearch"]);i!=null&&a(t,["googleSearch"],i);const r=l(e,["googleSearchRetrieval"]);r!=null&&a(t,["googleSearchRetrieval"],r);const s=l(e,["enterpriseWebSearch"]);s!=null&&a(t,["enterpriseWebSearch"],s);const u=l(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],u);const c=l(e,["urlContext"]);c!=null&&a(t,["urlContext"],c);const d=l(e,["computerUse"]);d!=null&&a(t,["computerUse"],d);const p=l(e,["codeExecution"]);return p!=null&&a(t,["codeExecution"],p),t}function Ax(e){const t={},n=l(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const o=l(e,["createTime"]);o!=null&&a(t,["createTime"],o);const i=l(e,["updateTime"]);return i!=null&&a(t,["updateTime"],i),t}function Ix(e){const t={},n=l(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(t,["baseModel"],n);const o=l(e,["createTime"]);o!=null&&a(t,["createTime"],o);const i=l(e,["updateTime"]);return i!=null&&a(t,["updateTime"],i),t}function kx(e,t){const n={},o=l(e,["displayName"]);t!==void 0&&o!=null&&a(t,["displayName"],o);const i=l(e,["description"]);t!==void 0&&i!=null&&a(t,["description"],i);const r=l(e,["defaultCheckpointId"]);return t!==void 0&&r!=null&&a(t,["defaultCheckpointId"],r),n}function Px(e,t){const n={},o=l(e,["displayName"]);t!==void 0&&o!=null&&a(t,["displayName"],o);const i=l(e,["description"]);t!==void 0&&i!=null&&a(t,["description"],i);const r=l(e,["defaultCheckpointId"]);return t!==void 0&&r!=null&&a(t,["defaultCheckpointId"],r),n}function Rx(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","name"],b(e,o));const i=l(t,["config"]);return i!=null&&kx(i,n),n}function Mx(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["config"]);return i!=null&&Px(i,n),n}function Dx(e,t){const n={},o=l(e,["outputGcsUri"]);t!==void 0&&o!=null&&a(t,["parameters","storageUri"],o);const i=l(e,["includeRaiReason"]);t!==void 0&&i!=null&&a(t,["parameters","includeRaiReason"],i);const r=l(e,["outputMimeType"]);t!==void 0&&r!=null&&a(t,["parameters","outputOptions","mimeType"],r);const s=l(e,["outputCompressionQuality"]);t!==void 0&&s!=null&&a(t,["parameters","outputOptions","compressionQuality"],s);const u=l(e,["enhanceInputImage"]);t!==void 0&&u!=null&&a(t,["parameters","upscaleConfig","enhanceInputImage"],u);const c=l(e,["imagePreservationFactor"]);t!==void 0&&c!=null&&a(t,["parameters","upscaleConfig","imagePreservationFactor"],c);const d=l(e,["labels"]);t!==void 0&&d!=null&&a(t,["labels"],d);const p=l(e,["numberOfImages"]);t!==void 0&&p!=null&&a(t,["parameters","sampleCount"],p);const m=l(e,["mode"]);return t!==void 0&&m!=null&&a(t,["parameters","mode"],m),n}function Lx(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["_url","model"],b(e,o));const i=l(t,["image"]);i!=null&&a(n,["instances[0]","image"],Ke(i));const r=l(t,["upscaleFactor"]);r!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],r);const s=l(t,["config"]);return s!=null&&Dx(s,n),n}function Ux(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const o=l(e,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(r=>gr(r))),a(t,["generatedImages"],i)}return t}function Fx(e){const t={},n=l(e,["uri"]);n!=null&&a(t,["uri"],n);const o=l(e,["encodedVideo"]);o!=null&&a(t,["videoBytes"],Lt(o));const i=l(e,["encoding"]);return i!=null&&a(t,["mimeType"],i),t}function Vx(e){const t={},n=l(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const o=l(e,["bytesBase64Encoded"]);o!=null&&a(t,["videoBytes"],Lt(o));const i=l(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}function Gx(e){const t={},n=l(e,["image"]);n!=null&&a(t,["_self"],Ke(n));const o=l(e,["maskMode"]);return o!=null&&a(t,["maskMode"],o),t}function qx(e){const t={},n=l(e,["image"]);n!=null&&a(t,["image"],yr(n));const o=l(e,["referenceType"]);return o!=null&&a(t,["referenceType"],o),t}function bx(e){const t={},n=l(e,["image"]);n!=null&&a(t,["image"],Ke(n));const o=l(e,["referenceType"]);return o!=null&&a(t,["referenceType"],o),t}function Cp(e){const t={},n=l(e,["uri"]);n!=null&&a(t,["uri"],n);const o=l(e,["videoBytes"]);o!=null&&a(t,["encodedVideo"],Lt(o));const i=l(e,["mimeType"]);return i!=null&&a(t,["encoding"],i),t}function Tp(e){const t={},n=l(e,["uri"]);n!=null&&a(t,["gcsUri"],n);const o=l(e,["videoBytes"]);o!=null&&a(t,["bytesBase64Encoded"],Lt(o));const i=l(e,["mimeType"]);return i!=null&&a(t,["mimeType"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hx="Content-Type",Bx="X-Server-Timeout",zx="User-Agent",Ws="x-goog-api-client",Jx="1.27.0",$x=`google-genai-sdk/${Jx}`,Wx="v1beta1",Ox="v1beta",wc=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Yx{constructor(t){var n,o;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Wx,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Ox,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&o.push(t.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,o){const i=[this.getRequestUrlInternal(n)];return o&&i.push(this.getBaseResourcePath()),t!==""&&i.push(t),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,n,o);if(t.queryParams)for(const[s,u]of Object.entries(t.queryParams))i.searchParams.append(s,String(u));let r={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=t.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,i.toString(),t.abortSignal),this.unaryApiCall(i,r,t.httpMethod)}patchHttpOptions(t,n){const o=JSON.parse(JSON.stringify(t));for(const[i,r]of Object.entries(n))typeof r=="object"?o[i]=Object.assign(Object.assign({},o[i]),r):r!==void 0&&(o[i]=r);return o}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,n,o);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let r={};return r.body=t.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,i.toString(),t.abortSignal),this.streamApiCall(i,r,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,o,i){if(n&&n.timeout||i){const r=new AbortController,s=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>r.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}i&&i.addEventListener("abort",()=>{r.abort()}),t.signal=s}return n&&n.extraBody!==null&&Kx(t,n.extraBody),t.headers=await this.getHeadersInternal(n,o),t}async unaryApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async i=>(await Sc(i),new Hs(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async i=>(await Sc(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(t){var n;return En(this,arguments,function*(){const i=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),r=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:u,value:c}=yield O(i.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=r.decode(c,{stream:!0});try{const m=JSON.parse(d);if("error"in m){const h=JSON.parse(JSON.stringify(m.error)),x=h.status,C=h.code,T=`got status: ${x}. ${JSON.stringify(m)}`;if(C>=400&&C<600)throw new mr({message:T,status:C})}}catch(m){if(m.name==="ApiError")throw m}s+=d;let p=s.match(wc);for(;p;){const m=p[1];try{const h=new Response(m,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield O(new Hs(h)),s=s.slice(p[0].length),p=s.match(wc)}catch(h){throw new Error(`exception parsing stream chunk ${m}. ${h}`)}}}}finally{i.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const t={},n=$x+" "+this.clientOptions.userAgentExtra;return t[zx]=n,t[Ws]=n,t[Hx]="application/json",t}async getHeadersInternal(t,n){const o=new Headers;if(t&&t.headers){for(const[i,r]of Object.entries(t.headers))o.append(i,r);t.timeout&&t.timeout>0&&o.append(Bx,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}async uploadFile(t,n){var o;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const r=this.clientOptions.uploader,s=await r.stat(t);i.sizeBytes=String(s.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const c=await this.fetchUploadUrl(i,n);return r.upload(t,c,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n){var o;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const r={file:t},s=await this.request({path:D("upload/v1beta/files",r._url),body:JSON.stringify(r),httpMethod:"POST",httpOptions:i});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(o=s==null?void 0:s.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Sc(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let o;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?o=await e.json():o={error:{message:await e.text(),code:e.status,status:e.statusText}};const i=JSON.stringify(o);throw n>=400&&n<600?new mr({message:i,status:n}):new Error(i)}}function Kx(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const r=JSON.parse(e.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(r,s){const u=Object.assign({},r);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],p=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&p&&typeof p=="object"&&!Array.isArray(p)?u[c]=o(p,d):(p&&d&&typeof p!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof p}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const i=o(n,t);e.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qx="mcp_used/unknown";let jx=!1;function wp(e){for(const t of e)if(Xx(t)||typeof t=="object"&&"inputSchema"in t)return!0;return jx}function Sp(e){var t;const n=(t=e[Ws])!==null&&t!==void 0?t:"";e[Ws]=(n+` ${Qx}`).trimStart()}function Xx(e){return e!==null&&typeof e=="object"&&e instanceof jl}function Zx(e,t=100){return En(this,arguments,function*(){let o,i=0;for(;i<t;){const r=yield O(e.listTools({cursor:o}));for(const s of r.tools)yield yield O(s),i++;if(!r.nextCursor)break;o=r.nextCursor}})}class jl{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new jl(t,n)}async initialize(){var t,n,o,i;if(this.mcpTools.length>0)return;const r={},s=[];for(const p of this.mcpClients)try{for(var u=!0,c=(n=void 0,mo(Zx(p))),d;d=await c.next(),t=d.done,!t;u=!0){i=d.value,u=!1;const m=i;s.push(m);const h=m.name;if(r[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);r[h]=p}}catch(m){n={error:m}}finally{try{!u&&!t&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),iy(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const o of t)if(o.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[o.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const s=await i.callTool({name:o.name,arguments:o.args},void 0,r);n.push({functionResponse:{name:o.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function eC(e,t,n){const o=new Qg;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(o,i),t(o)}class tC{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o}async connect(t){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),s=iC(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const p=new Promise(v=>{d=v}),m=t.callbacks,h=function(){d({})},x=this.apiClient,C={onopen:h,onmessage:v=>{eC(x,m.onmessage,v)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(v){},onclose:(o=m==null?void 0:m.onclose)!==null&&o!==void 0?o:function(v){}},T=this.webSocketFactory.create(c,oC(s),C);T.connect(),await p;const g={setup:{model:b(this.apiClient,t.model)}};return T.send(JSON.stringify(g)),new nC(T,this.apiClient)}}class nC{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=O0(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=W0(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(gn.PLAY)}pause(){this.sendPlaybackControl(gn.PAUSE)}stop(){this.sendPlaybackControl(gn.STOP)}resetContext(){this.sendPlaybackControl(gn.RESET_CONTEXT)}close(){this.conn.close()}}function oC(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function iC(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function sC(e,t,n){const o=new Kg;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const r=JSON.parse(i);if(e.isVertexAI()){const s=Q0(r);Object.assign(o,s)}else Object.assign(o,r);t(o)}class lC{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o,this.music=new tC(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,o,i,r,s,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let p;const m=this.apiClient.getHeaders();t.config&&t.config.tools&&wp(t.config.tools)&&Sp(m);const h=dC(m);if(this.apiClient.isVertexAI())p=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,p);else{const k=this.apiClient.getApiKey();let R="BidiGenerateContent",J="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",J="access_token"),p=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${R}?${J}=${k}`}let x=()=>{};const C=new Promise(k=>{x=k}),T=t.callbacks,N=function(){var k;(k=T==null?void 0:T.onopen)===null||k===void 0||k.call(T),x({})},y=this.apiClient,g={onopen:N,onmessage:k=>{sC(y,T.onmessage,k)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(k){},onclose:(o=T==null?void 0:T.onclose)!==null&&o!==void 0?o:function(k){}},v=this.webSocketFactory.create(p,cC(h),g);v.connect(),await C;let w=b(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&w.startsWith("publishers/")){const k=this.apiClient.getProject(),R=this.apiClient.getLocation();w=`projects/${k}/locations/${R}/`+w}let _={};this.apiClient.isVertexAI()&&((i=t.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Yi.AUDIO]}:t.config.responseModalities=[Yi.AUDIO]),!((r=t.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const S=(u=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],E=[];for(const k of S)if(this.isCallableTool(k)){const R=k;E.push(await R.tool())}else E.push(k);E.length>0&&(t.config.tools=E);const I={model:w,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?_=$0(this.apiClient,I):_=J0(this.apiClient,I),delete _.config,v.send(JSON.stringify(_)),new uC(v,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const aC={turnComplete:!0};class uC{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=qe(n.turns),t.isVertexAI()||(o=o.map(i=>hr(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const r of o){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!t.isVertexAI()&&!("id"in r))throw new Error(rC)}return{toolResponse:{functionResponses:o}}}sendClientContent(t){t=Object.assign(Object.assign({},aC),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:K0(t)}:n={realtimeInput:Y0(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function cC(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function dC(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _c=10;function Ec(e){var t,n,o;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let i=!1;for(const s of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(Nn(s)){i=!0;break}if(!i)return!0;const r=(o=e==null?void 0:e.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Nn(e){return"callTool"in e&&typeof e.callTool=="function"}function fC(e){var t,n,o;return(o=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(i=>Nn(i)))!==null&&o!==void 0?o:!1}function pC(e){var t,n,o;return(o=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(i=>!Nn(i)))!==null&&o!==void 0?o:!1}function Nc(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mC extends tn{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var o,i,r,s,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!fC(n)||Ec(n.config))return await this.generateContentInternal(c);if(pC(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,p;const m=qe(c.contents),h=(r=(i=(o=c.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:_c;let x=0;for(;x<h&&(d=await this.generateContentInternal(c),!(!d.functionCalls||d.functionCalls.length===0));){const C=d.candidates[0].content,T=[];for(const N of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(Nn(N)){const g=await N.callTool(d.functionCalls);T.push(...g)}x++,p={role:"user",parts:T},c.contents=qe(c.contents),c.contents.push(C),c.contents.push(p),Nc(c.config)&&(m.push(C),m.push(p))}return Nc(c.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Ec(n.config)){const o=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var i;let r;const s=[];if(o!=null&&o.generatedImages)for(const c of o.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?r=c==null?void 0:c.safetyAttributes:s.push(c);let u;return r?u={generatedImages:s,positivePromptSafetyAttributes:r,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((o=s.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Ho(Xt.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var o,i,r,s,u,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(r=n.source)===null||r===void 0?void 0:r.video)===null||s===void 0)&&s.uri&&(!((c=(u=n.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,o,i;const r=(n=t.config)===null||n===void 0?void 0:n.tools;if(!r)return t;const s=await Promise.all(r.map(async c=>Nn(c)?await c.tool():c)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:s})};if(u.config.tools=s,t.config&&t.config.tools&&wp(t.config.tools)){const c=(i=(o=t.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Sp(d),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(t){var n,o,i;const r=new Map;for(const s of(o=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Nn(s)){const u=s,c=await u.tool();for(const d of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(r.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);r.set(d.name,u)}}return r}async processAfcStream(t){var n,o,i;const r=(i=(o=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:_c;let s=!1,u=0;const c=await this.initAfcToolsMap(t);return function(d,p,m){var h,x;return En(this,arguments,function*(){for(var C,T,N,y;u<r;){s&&(u++,s=!1);const _=yield O(d.processParamsMaybeAddMcpUsage(m)),S=yield O(d.generateContentStreamInternal(_)),E=[],I=[];try{for(var g=!0,v=(T=void 0,mo(S)),w;w=yield O(v.next()),C=w.done,!C;g=!0){y=w.value,g=!1;const k=y;if(yield yield O(k),k.candidates&&(!((h=k.candidates[0])===null||h===void 0)&&h.content)){I.push(k.candidates[0].content);for(const R of(x=k.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(u<r&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(R.functionCall.name)){const J=yield O(p.get(R.functionCall.name).callTool([R.functionCall]));E.push(...J)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(k){T={error:k}}finally{try{!g&&!C&&(N=v.return)&&(yield O(N.call(v)))}finally{if(T)throw T.error}}if(E.length>0){s=!0;const k=new jn;k.candidates=[{content:{role:"user",parts:E}}],yield yield O(k);const R=[];R.push(...I),R.push({role:"user",parts:E});const J=qe(m.contents).concat(R);m.contents=J}else break}})}(this,c,t)}async generateContentInternal(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=xc(this.apiClient,t);return u=D("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=Tc(p),h=new jn;return Object.assign(h,m),h})}else{const d=vc(this.apiClient,t);return u=D("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=Cc(p),h=new jn;return Object.assign(h,m),h})}}async generateContentStreamInternal(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=xc(this.apiClient,t);return u=D("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(m){return En(this,arguments,function*(){var h,x,C,T;try{for(var N=!0,y=mo(m),g;g=yield O(y.next()),h=g.done,!h;N=!0){T=g.value,N=!1;const v=T,w=Tc(yield O(v.json()));w.sdkHttpResponse={headers:v.headers};const _=new jn;Object.assign(_,w),yield yield O(_)}}catch(v){x={error:v}}finally{try{!N&&!h&&(C=y.return)&&(yield O(C.call(y)))}finally{if(x)throw x.error}}})})}else{const d=vc(this.apiClient,t);return u=D("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(m){return En(this,arguments,function*(){var h,x,C,T;try{for(var N=!0,y=mo(m),g;g=yield O(y.next()),h=g.done,!h;N=!0){T=g.value,N=!1;const v=T,w=Cc(yield O(v.json()));w.sdkHttpResponse={headers:v.headers};const _=new jn;Object.assign(_,w),yield yield O(_)}}catch(v){x={error:v}}finally{try{!N&&!h&&(C=y.return)&&(yield O(C.call(y)))}finally{if(x)throw x.error}}})})}}async embedContent(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Nv(this.apiClient,t);return u=D("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=Iv(p),h=new nc;return Object.assign(h,m),h})}else{const d=Ev(this.apiClient,t);return u=D("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=Av(p),h=new nc;return Object.assign(h,m),h})}}async generateImagesInternal(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Vv(this.apiClient,t);return u=D("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=qv(p),h=new oc;return Object.assign(h,m),h})}else{const d=Fv(this.apiClient,t);return u=D("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=Gv(p),h=new oc;return Object.assign(h,m),h})}}async editImageInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){const u=Tv(this.apiClient,t);return r=D("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>{const d=wv(c),p=new Hg;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){const u=Lx(this.apiClient,t);return r=D("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>{const d=Ux(c),p=new Bg;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){const u=gx(this.apiClient,t);return r=D("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),i.then(c=>{const d=yx(c),p=new zg;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){const u=Sx(this.apiClient,t);return r=D("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),i.then(c=>{const d=_x(c),p=new Jg;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=nx(this.apiClient,t);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>$s(p))}else{const d=tx(this.apiClient,t);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>Js(p))}}async listInternal(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=ux(this.apiClient,t);return u=D("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=dx(p),h=new ic;return Object.assign(h,m),h})}else{const d=ax(this.apiClient,t);return u=D("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=cx(p),h=new ic;return Object.assign(h,m),h})}}async update(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Mx(this.apiClient,t);return u=D("{model}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>$s(p))}else{const d=Rx(this.apiClient,t);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>Js(p))}}async delete(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=yv(this.apiClient,t);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=xv(p),h=new rc;return Object.assign(h,m),h})}else{const d=gv(this.apiClient,t);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=vv(p),h=new rc;return Object.assign(h,m),h})}}async countTokens(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=pv(this.apiClient,t);return u=D("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=hv(p),h=new sc;return Object.assign(h,m),h})}else{const d=fv(this.apiClient,t);return u=D("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=mv(p),h=new sc;return Object.assign(h,m),h})}}async computeTokens(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){const u=rv(this.apiClient,t);return r=D("{model}:computeTokens",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>{const d=sv(c),p=new $g;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=$v(this.apiClient,t);return u=D("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=zv(p),h=new Ki;return Object.assign(h,m),h})}else{const d=Jv(this.apiClient,t);return u=D("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>{const m=Bv(p),h=new Ki;return Object.assign(h,m),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hC extends tn{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let r;o&&"httpOptions"in o&&(r=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let r;o&&"httpOptions"in o&&(r=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Gg(t);return u=D("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s}else{const d=Vg(t);return u=D("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s}}async fetchPredictVideosOperationInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){const u=Pg(t);return r=D("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gC(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["data"]);n!=null&&a(t,["data"],n);const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function yC(e){const t={},n=l(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>EC(r))),a(t,["parts"],i)}const o=l(e,["role"]);return o!=null&&a(t,["role"],o),t}function vC(e,t,n){const o={},i=l(t,["expireTime"]);n!==void 0&&i!=null&&a(n,["expireTime"],i);const r=l(t,["newSessionExpireTime"]);n!==void 0&&r!=null&&a(n,["newSessionExpireTime"],r);const s=l(t,["uses"]);n!==void 0&&s!=null&&a(n,["uses"],s);const u=l(t,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],_C(e,u));const c=l(t,["lockAdditionalFields"]);return n!==void 0&&c!=null&&a(n,["fieldMask"],c),o}function xC(e,t){const n={},o=l(t,["config"]);return o!=null&&a(n,["config"],vC(e,o,n)),n}function CC(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function TC(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&a(t,["enableWidget"],n),t}function wC(e){const t={},n=l(e,["timeRangeFilter"]);if(n!=null&&a(t,["timeRangeFilter"],n),l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function SC(e,t){const n={},o=l(e,["generationConfig"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig"],o);const i=l(e,["responseModalities"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig","responseModalities"],i);const r=l(e,["temperature"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig","temperature"],r);const s=l(e,["topP"]);t!==void 0&&s!=null&&a(t,["setup","generationConfig","topP"],s);const u=l(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const c=l(e,["maxOutputTokens"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","maxOutputTokens"],c);const d=l(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);const p=l(e,["seed"]);t!==void 0&&p!=null&&a(t,["setup","generationConfig","seed"],p);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","speechConfig"],Ql(m));const h=l(e,["thinkingConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","thinkingConfig"],h);const x=l(e,["enableAffectiveDialog"]);t!==void 0&&x!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],x);const C=l(e,["systemInstruction"]);t!==void 0&&C!=null&&a(t,["setup","systemInstruction"],yC(ge(C)));const T=l(e,["tools"]);if(t!==void 0&&T!=null){let S=qn(T);Array.isArray(S)&&(S=S.map(E=>AC(Gn(E)))),a(t,["setup","tools"],S)}const N=l(e,["sessionResumption"]);t!==void 0&&N!=null&&a(t,["setup","sessionResumption"],NC(N));const y=l(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&a(t,["setup","inputAudioTranscription"],y);const g=l(e,["outputAudioTranscription"]);t!==void 0&&g!=null&&a(t,["setup","outputAudioTranscription"],g);const v=l(e,["realtimeInputConfig"]);t!==void 0&&v!=null&&a(t,["setup","realtimeInputConfig"],v);const w=l(e,["contextWindowCompression"]);t!==void 0&&w!=null&&a(t,["setup","contextWindowCompression"],w);const _=l(e,["proactivity"]);return t!==void 0&&_!=null&&a(t,["setup","proactivity"],_),n}function _C(e,t){const n={},o=l(t,["model"]);o!=null&&a(n,["setup","model"],b(e,o));const i=l(t,["config"]);return i!=null&&a(n,["config"],SC(i,n)),n}function EC(e){const t={},n=l(e,["videoMetadata"]);n!=null&&a(t,["videoMetadata"],n);const o=l(e,["thought"]);o!=null&&a(t,["thought"],o);const i=l(e,["inlineData"]);i!=null&&a(t,["inlineData"],gC(i));const r=l(e,["fileData"]);r!=null&&a(t,["fileData"],CC(r));const s=l(e,["thoughtSignature"]);s!=null&&a(t,["thoughtSignature"],s);const u=l(e,["functionCall"]);u!=null&&a(t,["functionCall"],u);const c=l(e,["codeExecutionResult"]);c!=null&&a(t,["codeExecutionResult"],c);const d=l(e,["executableCode"]);d!=null&&a(t,["executableCode"],d);const p=l(e,["functionResponse"]);p!=null&&a(t,["functionResponse"],p);const m=l(e,["text"]);return m!=null&&a(t,["text"],m),t}function NC(e){const t={},n=l(e,["handle"]);if(n!=null&&a(t,["handle"],n),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function AC(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),a(t,["functionDeclarations"],d)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(e,["googleSearch"]);o!=null&&a(t,["googleSearch"],wC(o));const i=l(e,["googleSearchRetrieval"]);if(i!=null&&a(t,["googleSearchRetrieval"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=l(e,["googleMaps"]);r!=null&&a(t,["googleMaps"],TC(r));const s=l(e,["urlContext"]);s!=null&&a(t,["urlContext"],s);const u=l(e,["computerUse"]);u!=null&&a(t,["computerUse"],u);const c=l(e,["codeExecution"]);return c!=null&&a(t,["codeExecution"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IC(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const i=Object.keys(o).map(r=>`${n}.${r}`);t.push(...i)}else t.push(n)}return t.join(",")}function kC(e,t){let n=null;const o=e.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const r=o.setup;typeof r=="object"&&r!==null?(e.bidiGenerateContentSetup=r,n=r):delete e.bidiGenerateContentSetup}else o!==void 0&&delete e.bidiGenerateContentSetup;const i=e.fieldMask;if(n){const r=IC(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)r?e.fieldMask=r:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];r&&c.push(r),u.length>0&&c.push(...u),c.length>0?e.fieldMask=c.join(","):delete e.fieldMask}else delete e.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?e.fieldMask=i.join(","):delete e.fieldMask;return e}class PC extends tn{constructor(t){super(),this.apiClient=t}async create(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=xC(this.apiClient,t);r=D("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const c=kC(u,t.config);return i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RC(e,t){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],o),n}function MC(e,t){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],o),n}function DC(e,t,n){const o={};if(l(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=l(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&a(t,["displayName"],i),l(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=l(e,["epochCount"]);t!==void 0&&r!=null&&a(t,["tuningTask","hyperparameters","epochCount"],r);const s=l(e,["learningRateMultiplier"]);if(s!=null&&a(o,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=l(e,["batchSize"]);t!==void 0&&u!=null&&a(t,["tuningTask","hyperparameters","batchSize"],u);const c=l(e,["learningRate"]);if(t!==void 0&&c!=null&&a(t,["tuningTask","hyperparameters","learningRate"],c),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return o}function LC(e,t,n){const o={},i=l(e,["validationDataset"]);t!==void 0&&i!=null&&a(t,["supervisedTuningSpec"],KC(i));const r=l(e,["tunedModelDisplayName"]);t!==void 0&&r!=null&&a(t,["tunedModelDisplayName"],r);const s=l(e,["description"]);t!==void 0&&s!=null&&a(t,["description"],s);const u=l(e,["epochCount"]);t!==void 0&&u!=null&&a(t,["supervisedTuningSpec","hyperParameters","epochCount"],u);const c=l(e,["learningRateMultiplier"]);t!==void 0&&c!=null&&a(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const d=l(e,["exportLastCheckpointOnly"]);t!==void 0&&d!=null&&a(t,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const p=l(e,["adapterSize"]);if(t!==void 0&&p!=null&&a(t,["supervisedTuningSpec","hyperParameters","adapterSize"],p),l(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=l(e,["labels"]);return t!==void 0&&m!=null&&a(t,["labels"],m),o}function UC(e,t){const n={},o=l(e,["baseModel"]);o!=null&&a(n,["baseModel"],o);const i=l(e,["preTunedModel"]);i!=null&&a(n,["preTunedModel"],i);const r=l(e,["trainingDataset"]);r!=null&&a(n,["tuningTask","trainingData"],WC(r));const s=l(e,["config"]);return s!=null&&DC(s,n),n}function FC(e,t){const n={},o=l(e,["baseModel"]);o!=null&&a(n,["baseModel"],o);const i=l(e,["preTunedModel"]);i!=null&&a(n,["preTunedModel"],i);const r=l(e,["trainingDataset"]);r!=null&&OC(r,n);const s=l(e,["config"]);return s!=null&&LC(s,n),n}function VC(e,t){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],o),n}function GC(e,t){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],o),n}function qC(e,t,n){const o={},i=l(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const r=l(e,["pageToken"]);t!==void 0&&r!=null&&a(t,["_query","pageToken"],r);const s=l(e,["filter"]);return t!==void 0&&s!=null&&a(t,["_query","filter"],s),o}function bC(e,t,n){const o={},i=l(e,["pageSize"]);t!==void 0&&i!=null&&a(t,["_query","pageSize"],i);const r=l(e,["pageToken"]);t!==void 0&&r!=null&&a(t,["_query","pageToken"],r);const s=l(e,["filter"]);return t!==void 0&&s!=null&&a(t,["_query","filter"],s),o}function HC(e,t){const n={},o=l(e,["config"]);return o!=null&&qC(o,n),n}function BC(e,t){const n={},o=l(e,["config"]);return o!=null&&bC(o,n),n}function zC(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const i=l(e,["nextPageToken"]);i!=null&&a(n,["nextPageToken"],i);const r=l(e,["tunedModels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>_p(u))),a(n,["tuningJobs"],s)}return n}function JC(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const i=l(e,["nextPageToken"]);i!=null&&a(n,["nextPageToken"],i);const r=l(e,["tuningJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>Os(u))),a(n,["tuningJobs"],s)}return n}function $C(e,t){const n={},o=l(e,["name"]);o!=null&&a(n,["model"],o);const i=l(e,["name"]);return i!=null&&a(n,["endpoint"],i),n}function WC(e,t){const n={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=l(e,["examples"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(r=>r)),a(n,["examples","examples"],i)}return n}function OC(e,t,n){const o={},i=l(e,["gcsUri"]);t!==void 0&&i!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],i);const r=l(e,["vertexDatasetResource"]);if(t!==void 0&&r!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],r),l(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function _p(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const i=l(e,["name"]);i!=null&&a(n,["name"],i);const r=l(e,["state"]);r!=null&&a(n,["state"],rp(r));const s=l(e,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(e,["tuningTask","startTime"]);u!=null&&a(n,["startTime"],u);const c=l(e,["tuningTask","completeTime"]);c!=null&&a(n,["endTime"],c);const d=l(e,["updateTime"]);d!=null&&a(n,["updateTime"],d);const p=l(e,["description"]);p!=null&&a(n,["description"],p);const m=l(e,["baseModel"]);m!=null&&a(n,["baseModel"],m);const h=l(e,["_self"]);return h!=null&&a(n,["tunedModel"],$C(h)),n}function Os(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const i=l(e,["name"]);i!=null&&a(n,["name"],i);const r=l(e,["state"]);r!=null&&a(n,["state"],rp(r));const s=l(e,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(e,["startTime"]);u!=null&&a(n,["startTime"],u);const c=l(e,["endTime"]);c!=null&&a(n,["endTime"],c);const d=l(e,["updateTime"]);d!=null&&a(n,["updateTime"],d);const p=l(e,["error"]);p!=null&&a(n,["error"],p);const m=l(e,["description"]);m!=null&&a(n,["description"],m);const h=l(e,["baseModel"]);h!=null&&a(n,["baseModel"],h);const x=l(e,["tunedModel"]);x!=null&&a(n,["tunedModel"],x);const C=l(e,["preTunedModel"]);C!=null&&a(n,["preTunedModel"],C);const T=l(e,["supervisedTuningSpec"]);T!=null&&a(n,["supervisedTuningSpec"],T);const N=l(e,["tuningDataStats"]);N!=null&&a(n,["tuningDataStats"],N);const y=l(e,["encryptionSpec"]);y!=null&&a(n,["encryptionSpec"],y);const g=l(e,["partnerModelTuningSpec"]);g!=null&&a(n,["partnerModelTuningSpec"],g);const v=l(e,["customBaseModel"]);v!=null&&a(n,["customBaseModel"],v);const w=l(e,["experiment"]);w!=null&&a(n,["experiment"],w);const _=l(e,["labels"]);_!=null&&a(n,["labels"],_);const S=l(e,["outputUri"]);S!=null&&a(n,["outputUri"],S);const E=l(e,["pipelineJob"]);E!=null&&a(n,["pipelineJob"],E);const I=l(e,["serviceAccount"]);I!=null&&a(n,["serviceAccount"],I);const k=l(e,["tunedModelDisplayName"]);k!=null&&a(n,["tunedModelDisplayName"],k);const R=l(e,["veoTuningSpec"]);return R!=null&&a(n,["veoTuningSpec"],R),n}function YC(e,t){const n={},o=l(e,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const i=l(e,["name"]);i!=null&&a(n,["name"],i);const r=l(e,["metadata"]);r!=null&&a(n,["metadata"],r);const s=l(e,["done"]);s!=null&&a(n,["done"],s);const u=l(e,["error"]);return u!=null&&a(n,["error"],u),n}function KC(e,t){const n={},o=l(e,["gcsUri"]);o!=null&&a(n,["validationDatasetUri"],o);const i=l(e,["vertexDatasetResource"]);return i!=null&&a(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QC extends tn{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Ho(Xt.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},n),{preTunedModel:i});return r.baseModel=void 0,await this.tuneInternal(r)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),r=await this.tuneMldevInternal(i);let s="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?s=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(s=r.name.split("/operations/")[0]),{name:s,state:bs.JOB_STATE_QUEUED}}}}async getInternal(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=GC(t);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>Os(p))}else{const d=VC(t);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>_p(p))}}async listInternal(t){var n,o,i,r;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=BC(t);return u=D("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=JC(p),h=new lc;return Object.assign(h,m),h})}else{const d=HC(t);return u=D("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),s.then(p=>{const m=zC(p),h=new lc;return Object.assign(h,m),h})}}async cancel(t){var n,o,i,r;let s="",u={};if(this.apiClient.isVertexAI()){const c=MC(t);s=D("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const c=RC(t);s=D("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async tuneInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){const u=FC(t);return r=D("tuningJobs",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>Os(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=UC(t);return r=D("tunedModels",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>YC(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jC{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const XC=1024*1024*8,ZC=3,eT=1e3,tT=2,$r="x-goog-upload-status";async function nT(e,t,n){var o,i,r;let s=0,u=0,c=new Hs(new Response),d="upload";for(s=e.size;u<s;){const m=Math.min(XC,s-u),h=e.slice(u,u+m);u+m>=s&&(d+=", finalize");let x=0,C=eT;for(;x<ZC&&(c=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((o=c==null?void 0:c.headers)===null||o===void 0)&&o[$r]));)x++,await iT(C),C=C*tT;if(u+=m,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[$r])!=="active")break;if(s<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const p=await(c==null?void 0:c.json());if(((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[$r])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return p.file}async function oT(e){return{size:e.size,type:e.type}}function iT(e){return new Promise(t=>setTimeout(t,e))}class rT{async upload(t,n,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await nT(t,n,o)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await oT(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sT{create(t,n,o){return new lT(t,n,o)}}class lT{constructor(t,n,o){this.url=t,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ac="x-goog-api-key";class aT{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(Ac)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Ac,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uT="gl-node/";class Ic{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const o=Ig(t.httpOptions,t.vertexai,void 0,void 0);o&&(t.httpOptions?t.httpOptions.baseUrl=o:t.httpOptions={baseUrl:o}),this.apiVersion=t.apiVersion;const i=new aT(this.apiKey);this.apiClient=new Yx({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:uT+"web",uploader:new rT,downloader:new jC}),this.models=new mC(this.apiClient),this.live=new lC(this.apiClient,i,new sT),this.batches=new Oy(this.apiClient),this.chats=new E0(this.models,this.apiClient),this.caches=new w0(this.apiClient),this.files=new U0(this.apiClient),this.operations=new hC(this.apiClient),this.authTokens=new PC(this.apiClient),this.tunings=new QC(this.apiClient)}}const kc=()=>f.jsxs("div",{className:"flex items-center justify-center",children:[f.jsxs("svg",{className:"animate-spin h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),f.jsx("span",{className:"ml-3 text-slate-600",children:"Generating..."})]}),cT=({user:e})=>{const[t,n]=L.useState(null),[o,i]=L.useState(""),[r,s]=L.useState(null),[u,c]=L.useState(!1),[d,p]=L.useState(!1),[m,h]=L.useState(null),x=async()=>{c(!0),h(null),n(null),s(null),i("");try{const N=new Ic({apiKey:void 0}),y=`
                You are a pathology professor creating a board-style case study for a resident.
                Generate a unique, realistic case of a granulomatous disease of the lung.
                Do NOT use Sarcoidosis, Tuberculosis, or Hypersensitivity Pneumonitis as the final diagnosis. Pick a less common but important entity.
                Provide a clinical history, radiologic findings, and a detailed histologic description.
                Return the output as a single, minified JSON object with no markdown formatting.
            `,g=await N.models.generateContent({model:"gemini-2.5-pro",contents:y,config:{responseMimeType:"application/json",responseSchema:{type:ke.OBJECT,properties:{clinicalHistory:{type:ke.STRING},radiologicFindings:{type:ke.STRING},histologicDescription:{type:ke.STRING},diagnosis:{type:ke.STRING}},required:["clinicalHistory","radiologicFindings","histologicDescription","diagnosis"]}}}),v=JSON.parse(g.text.trim());n(v)}catch(N){console.error(N),h("Failed to generate a case. Please try again.")}finally{c(!1)}},C=async()=>{if(!(!t||!o)){p(!0),h(null),s(null);try{const N=new Ic({apiKey:void 0}),y=`
                You are a senior pathology attending providing feedback to a resident.
                The case is as follows:
                - Clinical History: ${t.clinicalHistory}
                - Radiologic Findings: ${t.radiologicFindings}
                - Histologic Description: ${t.histologicDescription}
                The final diagnosis is: ${t.diagnosis}.

                The resident's submitted differential diagnosis and justification is: "${o}"

                Your task is to:
                1. First, clearly state the correct final diagnosis.
                2. Evaluate the resident's answer. If they were correct, praise them and highlight why their reasoning was good.
                3. If they were incorrect, gently correct them. Explain why their answer is less likely and what key features from the case they might have missed.
                4. Provide a brief, high-yield summary of the key diagnostic features of the correct entity.
                Keep your tone supportive and educational. Format the response using markdown for clarity (bolding with **text** and newlines).
            `,v=(await N.models.generateContent({model:"gemini-2.5-flash",contents:y})).text.trim();s(v),Ln(e.username,U.AI_CASE_GENERATOR,`case_${Date.now()}`,{caseData:t,userDx:o,feedback:v,timestamp:Date.now()})}catch(N){console.error(N),h("Failed to get feedback. Please try again.")}finally{p(!1)}}},T=N=>{const y=N.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br />");return f.jsx("div",{className:"prose prose-sm max-w-none prose-slate",dangerouslySetInnerHTML:{__html:y}})};return f.jsxs("div",{className:"animate-fade-in space-y-8",children:[f.jsx(ft,{title:"AI-Powered Case Generator",subtitle:"Generate unique cases and get instant feedback from a virtual attending."}),f.jsxs(H,{children:[f.jsxs("div",{className:"flex flex-col items-center text-center",children:[f.jsx("p",{className:"text-slate-600 mb-4 max-w-lg",children:"Challenge yourself with novel cases on less common entities to broaden your differential diagnosis and sharpen your skills."}),f.jsxs("button",{onClick:x,disabled:u,className:"bg-primary-600 text-white font-semibold py-2.5 px-6 rounded-lg hover:bg-primary-700 transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center shadow-sm",children:[f.jsx(Jl,{className:"h-5 w-5 mr-2"}),u?"Generating...":"Generate New Case Study"]})]}),u&&f.jsx("div",{className:"mt-4",children:f.jsx(kc,{})})]}),m&&f.jsx(ue,{type:"error",children:m}),t&&f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs(H,{children:[f.jsx("h2",{className:"text-xl font-semibold font-serif text-slate-800 mb-3",children:"Clinical History"}),f.jsx("p",{className:"text-slate-600 leading-relaxed",children:t.clinicalHistory})]}),f.jsxs(H,{children:[f.jsx("h2",{className:"text-xl font-semibold font-serif text-slate-800 mb-3",children:"Radiologic Findings"}),f.jsx("p",{className:"text-slate-600 leading-relaxed",children:t.radiologicFindings})]}),f.jsxs(H,{children:[f.jsx("h2",{className:"text-xl font-semibold font-serif text-slate-800 mb-3",children:"Histologic Description"}),f.jsx("p",{className:"text-slate-600 leading-relaxed",children:t.histologicDescription})]}),f.jsxs(H,{children:[f.jsx("h2",{id:"user-dx-heading",className:"text-xl font-semibold font-serif text-slate-800 mb-3",children:"Your Diagnosis"}),f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Provide a ranked differential diagnosis and a brief justification."}),f.jsx("label",{htmlFor:"user-dx-textarea",className:"sr-only",children:"Your Diagnosis and Justification"}),f.jsx("textarea",{id:"user-dx-textarea",name:"userDiagnosis",value:o,onChange:N=>i(N.target.value),rows:5,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 transition shadow-sm",placeholder:`e.g., 1. Diagnosis A - because of feature X.
2. Diagnosis B - less likely due to feature Y.`,"aria-labelledby":"user-dx-heading"}),f.jsx("div",{className:"mt-6 text-center",children:f.jsx("button",{onClick:C,disabled:d||!o,className:"bg-green-600 text-white font-semibold py-2.5 px-6 rounded-lg hover:bg-green-700 transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed shadow-sm",children:d?"Getting Feedback...":"Submit for Feedback"})}),d&&f.jsx("div",{className:"mt-4",children:f.jsx(kc,{})})]})]}),r&&f.jsx(H,{className:"bg-slate-50 border-slate-200 animate-fade-in",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center mr-4",children:f.jsx(Mo,{className:"h-6 w-6 text-primary-600"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold font-serif text-slate-800 mb-3",children:"Virtual Attending Feedback"}),f.jsx("div",{className:"text-slate-700 leading-relaxed",children:T(r)})]})]})})]})},Xn=({icon:e,title:t})=>f.jsxs("div",{className:"flex items-center mb-4",children:[f.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center mr-4",children:f.jsx("div",{className:"text-primary-600",children:e})}),f.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800",children:t})]}),Pc=[{question:"Based on the learner profile, what is the primary motivation for a pathology resident using this module?",options:[{id:"a",text:"General interest in lung diseases."},{id:"b",text:"A requirement for their academic curriculum."},{id:"c",text:"Achieving diagnostic competence for daily work and board exams."},{id:"d",text:"Learning basic histology from scratch."}],correctAnswer:"c",feedback:{a:"While interest is a factor, their primary driver is more practical and goal-oriented.",b:"This might be true, but their personal motivation is tied to professional competence.",c:"Correct. Residents are goal-oriented and focused on practical skills for their job and high-stakes exams.",d:"Incorrect. The analysis shows they already have a strong foundation in basic histology."}},{question:"What is the core diagnostic challenge this module aims to address?",options:[{id:"a",text:"The inability to identify a granuloma on a slide."},{id:"b",text:"The significant morphologic overlap between different causes of granulomas."},{id:"c",text:"A lack of knowledge about special stains."},{id:"d",text:"Difficulty in using a microscope."}],correctAnswer:"b",feedback:{a:"Incorrect. The analysis specifies that residents can already identify a granuloma; the problem is differentiating them.",b:"Correct. The key difficulty is that many different diseases can produce very similar-looking granulomas, requiring integrated reasoning.",c:"While important, knowing which stain to order is secondary to first understanding the differential diagnosis based on morphology.",d:"This is a basic skill assumed to be competent in pathology residents."}}],dT=({user:e})=>{const[t,n]=L.useState([null,null]),o=(i,r)=>{if(t[i]===null){const s=[...t];s[i]=r,n(s);const u=Pc[i],c=u.options.find(d=>d.id===r);Ln(e.username,U.ANALYSIS,`q${i+1}`,{question:u.question,selectedAnswer:(c==null?void 0:c.text)||"N/A",isCorrect:r===u.correctAnswer,timestamp:Date.now()})}};return f.jsxs("div",{className:"animate-fade-in",children:[f.jsx(ft,{title:"Phase 1: Analysis",subtitle:"Defining the learner, their knowledge gaps, and the context for learning."}),f.jsxs(H,{children:[f.jsx(Xn,{icon:f.jsx(lg,{className:"h-6 w-6"}),title:"1. Identify the Learner"}),f.jsxs("ul",{className:"space-y-4 text-slate-600 list-disc list-inside",children:[f.jsxs("li",{children:[f.jsx("strong",{children:"Who are they?"})," Pathology residents (PGY 1-3) with foundational medical knowledge."]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Background Knowledge:"})," Strong understanding of general medicine, basic pathophysiology, and histology. They can define and identify a granuloma."]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Experience Level:"})," Novice-to-Intermediate diagnosticians transitioning from theory to practice."]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Motivations:"})," Goal-oriented, seeking diagnostic competence for daily work and board certification. They are practical, time-constrained, and highly visual learners."]})]})]}),f.jsxs(H,{children:[f.jsx(Xn,{icon:f.jsx(Bl,{className:"h-6 w-6"}),title:"2. Analyze the Topic"}),f.jsxs("p",{className:"text-slate-600 mb-4",children:["The core difficulty is not identifying a granuloma, but differentiating between causes due to ",f.jsx("strong",{children:"significant morphologic overlap"}),"."]}),f.jsxs("ul",{className:"space-y-4 text-slate-600 list-disc list-inside",children:[f.jsxs("li",{children:[f.jsx("strong",{children:"Vast Differential Diagnosis:"})," Spans infectious, autoimmune, environmental, and drug-induced categories."]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Non-Specific Histology:"})," Histologic patterns alone are often insufficient for a definitive diagnosis."]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Necessity of Clinical Correlation:"})," Diagnosis requires skillful integration of clinical history, radiology, and microbiology with histology."]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Use of Ancillary Studies:"})," A critical skill is knowing which special stains to order and how to interpret them."]})]})]}),f.jsxs(H,{children:[f.jsx(Xn,{icon:f.jsx(ag,{className:"h-6 w-6"}),title:"3. Define the Knowledge Gap"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-slate-700 mb-2",children:"Current State (What they can do)"}),f.jsxs("ul",{className:"space-y-2 text-slate-600 list-disc list-inside",children:[f.jsx("li",{children:"Define a granuloma."}),f.jsx("li",{children:"Identify a granuloma on a slide."}),f.jsx("li",{children:'Broadly classify as "necrotizing" or "non-necrotizing."'}),f.jsx("li",{children:"List a few classic causes."})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-slate-700 mb-2",children:"Desired State (What they need to do)"}),f.jsxs("ul",{className:"space-y-2 text-slate-600 list-disc list-inside",children:[f.jsx("li",{children:"Systematically evaluate morphology (quality, distribution)."}),f.jsx("li",{children:"Formulate a pattern-based differential diagnosis."}),f.jsx("li",{children:"Integrate multi-modal data (clinical, radiologic)."}),f.jsx("li",{children:"Guide the clinical workup with appropriate recommendations."})]})]})]}),f.jsx("div",{className:"mt-8",children:f.jsxs(ue,{type:"info",title:"The Core Challenge",children:["The fundamental gap is the transition from ",f.jsx("span",{className:"font-bold",children:"simple identification"})," to ",f.jsx("span",{className:"font-bold",children:"integrated diagnostic reasoning"}),"."]})})]}),f.jsxs(H,{children:[f.jsx(Xn,{icon:f.jsx(Mo,{className:"h-6 w-6"}),title:"Output of this Phase: The Recipe"}),f.jsxs("ul",{className:"space-y-3 text-slate-600 list-disc list-inside",children:[f.jsxs("li",{children:[f.jsx("strong",{className:"text-slate-700",children:"Instructional Goal:"})," Advance from simple identification to clinically-integrated differential diagnosis."]}),f.jsxs("li",{children:[f.jsx("strong",{className:"text-slate-700",children:"Core Problem to Solve:"})," The vast and histologically overlapping differential diagnosis."]}),f.jsxs("li",{children:[f.jsx("strong",{className:"text-slate-700",children:"Instructional Approach:"})," Must be case-based and highly visual, structured by histologic pattern to mimic the actual diagnostic process."]})]})]}),f.jsxs(H,{children:[f.jsx(Xn,{icon:f.jsx(Mo,{className:"h-6 w-6"}),title:"Knowledge Check"}),f.jsx("div",{className:"space-y-8",children:Pc.map((i,r)=>f.jsxs("div",{children:[f.jsxs("p",{className:"font-semibold text-slate-700 mb-4",children:[r+1,". ",i.question]}),f.jsx("div",{className:"space-y-3",children:i.options.map(s=>{const u=t[r]!==null,c=t[r]===s.id,d=s.id===i.correctAnswer;let p="bg-white border-slate-300 hover:bg-slate-50 hover:border-slate-400 focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500";return u&&(d?p="bg-green-50 border-green-500 text-green-900":c?p="bg-red-50 border-red-500 text-red-900":p="bg-slate-50 border-slate-300 text-slate-500 cursor-default"),f.jsxs("button",{onClick:()=>o(r,s.id),disabled:u,className:`w-full text-left p-4 border rounded-lg transition-all duration-200 flex items-center justify-between ${p} ${u?"cursor-default":"cursor-pointer"}`,children:[f.jsx("span",{children:s.text}),u&&d&&c&&f.jsx(qo,{className:"h-5 w-5 text-green-600"}),u&&c&&!d&&f.jsx(bo,{className:"h-5 w-5 text-red-600"})]},s.id)})}),t[r]&&f.jsx("div",{className:"mt-4",children:f.jsx(ue,{type:t[r]===i.correctAnswer?"success":"error",children:i.feedback[t[r]]})})]},r))})]})]})},fT=()=>f.jsxs("div",{className:"animate-fade-in",children:[f.jsx(ft,{title:"Phase 2: Design",subtitle:"Creating specific, measurable learning objectives based on the analysis."}),f.jsxs(H,{children:[f.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-4",children:"Selecting Bloom's Taxonomy Levels"}),f.jsx("p",{className:"text-slate-600 leading-relaxed mb-4",children:"The analysis revealed that the core problem is not a lack of foundational knowledge, but the inability to apply and synthesize it. Therefore, this module targets higher-order thinking skills."}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx("span",{className:"bg-slate-100 text-slate-700 text-sm font-medium px-3 py-1 rounded-full",children:"Remember"}),f.jsx("span",{className:"bg-slate-100 text-slate-700 text-sm font-medium px-3 py-1 rounded-full",children:"Understand"}),f.jsx("span",{className:"bg-primary-100 text-primary-800 text-sm font-bold px-3 py-1 rounded-full",children:"Apply"}),f.jsx("span",{className:"bg-primary-100 text-primary-800 text-sm font-bold px-3 py-1 rounded-full",children:"Analyze"}),f.jsx("span",{className:"bg-primary-100 text-primary-800 text-sm font-bold px-3 py-1 rounded-full",children:"Evaluate"}),f.jsx("span",{className:"bg-primary-100 text-primary-800 text-sm font-bold px-3 py-1 rounded-full",children:"Create"})]}),f.jsxs("p",{className:"mt-4 text-slate-600 leading-relaxed",children:["Instruction will operate primarily at the ",f.jsx("strong",{children:"Apply, Analyze, and Evaluate"})," levels, culminating in a ",f.jsx("strong",{children:"Create"})," task (formulating a diagnostic report)."]})]}),f.jsxs("div",{className:"mt-12",children:[f.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-2 text-center",children:"Learning Objectives"}),f.jsx("p",{className:"text-slate-600 leading-relaxed mb-8 text-center",children:"Upon completion of this module, the learner will be able to:"}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs(H,{className:"!mb-0 border-l-4 border-primary-500 bg-slate-50",children:[f.jsx("h3",{className:"font-bold text-lg font-serif text-slate-800 mb-2",children:"Objective 1: Analyze"}),f.jsxs("p",{className:"text-slate-600",children:["Given a high-resolution digital image of a lung biopsy containing granulomas, the pathology resident will ",f.jsx("strong",{className:"text-slate-800",children:"differentiate"})," the key morphologic features by correctly identifying the type of granuloma, its architectural distribution, and any associated findings."]})]}),f.jsxs(H,{className:"!mb-0 border-l-4 border-green-500 bg-slate-50",children:[f.jsx("h3",{className:"font-bold text-lg font-serif text-slate-800 mb-2",children:"Objective 2: Evaluate & Create"}),f.jsxs("p",{className:"text-slate-600",children:["Given a case study that includes a histologic pattern, a brief clinical history, and radiologic findings, the resident will ",f.jsx("strong",{className:"text-slate-800",children:"synthesize"})," the information to construct a clinically relevant, ranked differential diagnosis, justifying the top two diagnoses with specific evidence."]})]}),f.jsxs(H,{className:"!mb-0 border-l-4 border-purple-500 bg-slate-50",children:[f.jsx("h3",{className:"font-bold text-lg font-serif text-slate-800 mb-2",children:"Objective 3: Apply & Evaluate"}),f.jsxs("p",{className:"text-slate-600",children:["Based on a formulated differential diagnosis for a case, the resident will ",f.jsx("strong",{className:"text-slate-800",children:"propose"})," the most appropriate ancillary studies and correctly interpret the diagnostic implications of both a positive and a negative result, including limitations."]})]})]})]})]}),pT=()=>{const[e,t]=L.useState(!1);return f.jsxs("div",{className:"animate-fade-in",children:[f.jsx(ft,{title:"Phase 3: Development",subtitle:"Creating the instructional content, media, and activities."}),f.jsxs(H,{children:[f.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-4",children:"Comparative Job Aid: Sarcoidosis vs. Tuberculosis"}),f.jsx("p",{className:"text-slate-600 mb-6",children:"This table highlights key distinguishing features between two common entities. Use it as a quick reference at the microscope."}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm text-left text-slate-500",children:[f.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-100",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold rounded-l-lg",children:"Feature"}),f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:"Classic Finding in Sarcoidosis"}),f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold rounded-r-lg",children:"Classic Finding in Tuberculosis"})]})}),f.jsxs("tbody",{className:"divide-y divide-slate-200",children:[f.jsxs("tr",{className:"bg-white",children:[f.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Granuloma Type"}),f.jsx("td",{className:"px-6 py-4",children:'Tightly formed, well-circumscribed, "naked" (scant lymphocytes).'}),f.jsx("td",{className:"px-6 py-4",children:"Can be well-formed or poorly-formed, often confluent, prominent rim of lymphocytes."})]}),f.jsxs("tr",{className:"bg-white",children:[f.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Necrosis"}),f.jsxs("td",{className:"px-6 py-4",children:[f.jsx("strong",{children:"Non-necrotizing"}),' ("non-caseating").']}),f.jsxs("td",{className:"px-6 py-4",children:[f.jsx("strong",{children:"Caseating necrosis"})," (eosinophilic, granular, acellular debris)."]})]}),f.jsxs("tr",{className:"bg-white",children:[f.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Distribution"}),f.jsxs("td",{className:"px-6 py-4",children:[f.jsx("strong",{children:"Lymphangitic"})," (along bronchovascular bundles, septa, pleura)."]}),f.jsxs("td",{className:"px-6 py-4",children:[f.jsx("strong",{children:"Apical and cavitary"})," (typically upper lobes)."]})]}),f.jsxs("tr",{className:"bg-white",children:[f.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-slate-900 whitespace-nowrap",children:"Associated Findings"}),f.jsx("td",{className:"px-6 py-4",children:"Schaumann bodies, Asteroid bodies."}),f.jsx("td",{className:"px-6 py-4",children:"Acid-fast bacilli (AFB) visible with special stain."})]})]})]})})]}),f.jsxs(H,{children:[f.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-4",children:`Interactive Case Study: "The Bird Fancier's Cough"`}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-lg font-serif text-slate-800 mb-2",children:"Part 1: Clinical & Radiologic Data"}),f.jsx("p",{className:"text-slate-600",children:"You receive a lung wedge biopsy from a 55-year-old man with a 6-month history of progressive shortness of breath and a dry cough. He is a non-smoker but has kept pigeons in his attic for over 20 years. A chest CT shows diffuse, bilateral ground-glass opacities with centrilobular nodules."})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-lg font-serif text-slate-800 mb-2",children:"Part 2: Histologic Findings"}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-6",children:[f.jsx("img",{src:"https://picsum.photos/seed/pathology1/400/300",alt:"Histology slide of hypersensitivity pneumonitis",className:"rounded-lg shadow-md mt-1 w-full sm:w-48"}),f.jsx("p",{className:"text-slate-600 flex-1",children:"The biopsy shows a cellular interstitial pneumonia. There are numerous small, poorly-formed granulomas centered on the bronchioles (bronchiolocentric). The granulomas are composed of loose collections of epithelioid histiocytes and multinucleated giant cells. There is no necrosis. The surrounding interstitium is expanded by a dense lymphoplasmacytic infiltrate, and scattered eosinophils are present. You also note foci of organizing pneumonia."})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-lg font-serif text-slate-800 mb-2",children:"Part 3: The Diagnostic Task"}),f.jsx("p",{className:"text-slate-600 mb-4",children:"Given the integrated clinical, radiologic, and histologic findings, construct a ranked differential diagnosis. Justify your top two choices."}),f.jsx("button",{onClick:()=>t(!e),className:"bg-primary-600 text-white font-medium py-2 px-5 rounded-lg hover:bg-primary-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 transition-colors shadow-sm",children:e?"Hide Expert Answer":"Reveal Expert Answer"}),e&&f.jsxs("div",{className:"mt-6 space-y-4 animate-fade-in",children:[f.jsxs(ue,{type:"success",title:"1. Hypersensitivity Pneumonitis (Subacute/Chronic)",children:[f.jsx("strong",{children:"Justification:"})," This is the leading diagnosis. The clinical history (pigeon keeping), radiology (ground-glass, centrilobular nodules), and histology (cellular interstitial pneumonia, bronchiolocentric distribution, poorly-formed non-necrotizing granulomas) align perfectly."]}),f.jsxs(ue,{type:"info",title:"2. Sarcoidosis",children:[f.jsx("strong",{children:"Justification:"})," This is on the differential but less likely. In sarcoidosis, granulomas are typically well-formed and tight with a lymphangitic distribution, which is discordant with this case."]})]})]})]})]})]})},Rc=[{id:"A",text:"Sarcoidosis"},{id:"B",text:"Hypersensitivity Pneumonitis"},{id:"C",text:"Tuberculosis"},{id:"D",text:"Berylliosis"}],Gt="A",qt={A:{title:"Sarcoidosis",rationale:"This is the classic presentation. The combination of bilateral hilar lymphadenopathy in an asymptomatic young adult with well-formed, non-necrotizing granulomas in a lymphangitic distribution is pathognomonic.",isCorrect:!0},B:{title:"Hypersensitivity Pneumonitis",rationale:"Incorrect. The granulomas in HP are typically poorly-formed and bronchiolocentric, not well-formed and lymphangitic. The clinical picture is also not typical for HP.",isCorrect:!1},C:{title:"Tuberculosis",rationale:'Incorrect. The stem explicitly states the granulomas are "non-necrotizing." Classic post-primary tuberculosis is characterized by caseating necrotizing granulomas.',isCorrect:!1},D:{title:"Berylliosis",rationale:"Incorrect. While histologically indistinguishable from sarcoidosis, berylliosis requires a specific clinical history of exposure to beryllium, which is absent here. Sarcoidosis is far more common.",isCorrect:!1}},Mc=({user:e})=>{const[t,n]=L.useState(null),[o,i]=L.useState(!1),r=c=>{o||n(c)},s=()=>{if(t){i(!0);const c=Rc.find(d=>d.id===t);Ln(e.username,U.ASSESSMENT,"finalQuestion",{question:"Based on the integration of all findings, what is the most likely diagnosis?",selectedAnswer:(c==null?void 0:c.text)||"N/A",isCorrect:t===Gt,timestamp:Date.now()})}},u=c=>o?c===Gt?"bg-green-50 border-green-500 text-green-900":c===t?"bg-red-50 border-red-500 text-red-900":"bg-slate-100 border-slate-300 text-slate-500 cursor-default":t===c?"bg-primary-100 border-primary-400 ring-2 ring-primary-300":"bg-white border-slate-300 hover:bg-slate-50 hover:border-slate-400";return f.jsxs("div",{className:"animate-fade-in",children:[f.jsx(ft,{title:"Board-Style Question",subtitle:"Measuring your ability to integrate findings and form a diagnosis."}),f.jsxs(H,{children:[f.jsx("h2",{className:"text-2xl font-semibold font-serif text-slate-800 mb-2",children:"Question: Integrate and Diagnose"}),f.jsxs("div",{className:"bg-slate-50 p-6 rounded-lg border border-slate-200 text-slate-600 space-y-4 mb-6",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"Stem:"})," A 35-year-old woman presents for a pre-employment physical. She is asymptomatic. A routine chest X-ray reveals an abnormality, prompting a CT scan and subsequent transbronchial biopsy. The chest CT demonstrates bilateral hilar lymphadenopathy and subtle perilymphatic nodularity."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Microscopic Findings:"})," Examination shows numerous, discrete, and well-formed non-necrotizing granulomas. They are composed of tight clusters of epithelioid histiocytes with scattered multinucleated giant cells and a minimal lymphocytic cuff. They are observed in the submucosa of a bronchiole and expanding the interstitium of adjacent alveolar septa, consistent with a lymphangitic distribution."]})]}),f.jsx("p",{className:"font-semibold text-slate-700 mb-4",children:"Based on the integration of all findings, what is the most likely diagnosis?"}),f.jsx("div",{className:"space-y-3",children:Rc.map(c=>f.jsxs("button",{onClick:()=>r(c.id),disabled:o,className:`w-full text-left p-4 border rounded-lg transition-all duration-200 flex items-center ${u(c.id)} ${o?"cursor-default":"cursor-pointer"}`,children:[f.jsxs("span",{className:"font-bold mr-4 text-slate-500",children:[c.id,"."]}),f.jsx("span",{className:"flex-1",children:c.text}),o&&c.id===Gt&&f.jsx(qo,{className:"h-6 w-6 text-green-600"}),o&&c.id===t&&c.id!==Gt&&f.jsx(bo,{className:"h-6 w-6 text-red-600"})]},c.id))}),f.jsx("div",{className:"mt-8 border-t border-slate-200 pt-6 text-center",children:f.jsx("button",{onClick:s,disabled:!t||o,className:"bg-primary-600 text-white font-semibold py-2.5 px-8 rounded-lg hover:bg-primary-700 transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 shadow-sm",children:"Submit Answer"})}),o&&f.jsxs("div",{className:"mt-8 space-y-4 animate-fade-in",children:[t&&f.jsx(ue,{type:qt[t].isCorrect?"success":"error",title:qt[t].isCorrect?`Correct: ${qt[t].title}`:`Incorrect: ${qt[t].title}`,children:qt[t].rationale}),t!==Gt&&f.jsx(ue,{type:"info",title:`The Correct Answer was: ${qt[Gt].title}`,children:qt[Gt].rationale})]})]})]})},mT=()=>{const[e,t]=L.useState({}),[n,o]=L.useState(null);L.useEffect(()=>{t(Tg())},[]);const i=s=>{o(n===s?null:s)},r=Object.keys(e);return f.jsxs("div",{className:"animate-fade-in",children:[f.jsx(ft,{title:"Admin Dashboard",subtitle:`Tracking responses from ${r.length} user(s).`}),r.length===0?f.jsx(H,{children:f.jsx("p",{className:"text-slate-500 text-center",children:"No user data has been recorded yet."})}):f.jsx("div",{className:"space-y-4",children:r.map(s=>f.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>i(s),className:"w-full text-left p-4 bg-slate-50 hover:bg-slate-100 transition-colors flex justify-between items-center focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500","aria-expanded":n===s,"aria-controls":`user-data-${s}`,children:[f.jsx("span",{className:"font-semibold text-slate-800",children:s}),f.jsx("span",{className:`transform transition-transform duration-200 ${n===s?"rotate-180":""}`,children:f.jsx("svg",{className:"h-5 w-5 text-slate-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),n===s&&f.jsxs("div",{id:`user-data-${s}`,className:"p-4 sm:p-6 bg-white space-y-6",children:[Object.keys(e[s]).length===0&&f.jsx("p",{children:"No activity recorded for this user."}),e[s].AnalysisPhase&&f.jsx(ui,{title:"Analysis Phase Quiz",data:e[s].AnalysisPhase}),e[s].AssessmentPhase&&f.jsx(ui,{title:"Assessment Phase Quiz",data:{"Final Question":e[s].AssessmentPhase}}),e[s].VisualChallenge&&f.jsx(ui,{title:"Visual Challenge",data:e[s].VisualChallenge}),e[s].DiagnosticPathway&&f.jsx(ui,{title:"Diagnostic Pathway",data:e[s].DiagnosticPathway}),e[s].AICaseGenerator&&f.jsx(hT,{title:"AI Case Generator",data:e[s].AICaseGenerator})]})]},s))})]})},ui=({title:e,data:t})=>f.jsxs(H,{className:"!shadow-md !mb-0 border border-slate-200 bg-slate-50/50",children:[f.jsx("h3",{className:"text-lg font-semibold font-serif text-slate-800 mb-4",children:e}),f.jsx("ul",{className:"space-y-4",children:Object.entries(t).map(([n,o])=>f.jsxs("li",{className:"p-3 bg-white rounded-md border border-slate-200",children:[f.jsx("p",{className:"font-semibold text-sm text-slate-700",children:o.question}),f.jsxs("div",{className:"flex items-center mt-2",children:[o.isCorrect?f.jsx(qo,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0"}):f.jsx(bo,{className:"h-5 w-5 text-red-500 mr-2 flex-shrink-0"}),f.jsxs("p",{className:"text-sm text-slate-600",children:["Answered: ",f.jsx("span",{className:"font-medium",children:o.selectedAnswer})]})]})]},n))})]}),hT=({title:e,data:t})=>f.jsxs(H,{className:"!shadow-md !mb-0 border border-slate-200 bg-slate-50/50",children:[f.jsx("h3",{className:"text-lg font-semibold font-serif text-slate-800 mb-4",children:e}),f.jsx("div",{className:"space-y-6",children:t.map((n,o)=>f.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[f.jsxs("h4",{className:"font-semibold text-md text-slate-700 mb-3 pb-2 border-b",children:["Case #",o+1," - Diagnosis: ",f.jsx("span",{className:"font-bold",children:n.caseData.diagnosis})]}),f.jsxs("div",{className:"space-y-3 text-sm",children:[f.jsxs("div",{children:[f.jsx("strong",{className:"text-slate-600",children:"Clinical:"})," ",f.jsx("p",{className:"text-slate-500 italic mt-1",children:n.caseData.clinicalHistory})]}),f.jsxs("div",{children:[f.jsx("strong",{className:"text-slate-600",children:"User's Diagnosis:"})," ",f.jsx("p",{className:"text-slate-500 italic mt-1",children:n.userDx})]}),f.jsxs("div",{children:[f.jsx("strong",{className:"text-slate-600",children:"AI Feedback:"})," ",f.jsx("p",{className:"text-slate-500 italic mt-1",children:n.feedback})]})]})]},o))})]}),gT=({isOpen:e,onClose:t,user:n})=>{const[o,i]=L.useState(""),[r,s]=L.useState(""),[u,c]=L.useState(""),[d,p]=L.useState(null),[m,h]=L.useState(null),x=C=>{if(C.preventDefault(),p(null),h(null),r!==u){p("New passwords do not match.");return}if(r.length<6){p("New password must be at least 6 characters long.");return}try{tg(n.username,o,r),h("Password changed successfully!"),i(""),s(""),c(""),setTimeout(()=>{t(),h(null)},2e3)}catch(T){p(T.message)}};return e?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 animate-fade-in","aria-labelledby":"change-password-title",role:"dialog","aria-modal":"true",children:f.jsxs("div",{className:"relative bg-white w-full max-w-md m-4 p-8 rounded-2xl shadow-2xl",role:"document",children:[f.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-slate-500 hover:text-slate-800","aria-label":"Close modal",children:f.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),f.jsxs("div",{className:"flex items-center mb-6",children:[f.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center mr-4",children:f.jsx($l,{className:"h-6 w-6 text-primary-600"})}),f.jsx("h2",{id:"change-password-title",className:"text-2xl font-bold font-serif text-slate-800",children:"Change Password"})]}),d&&f.jsx("div",{className:"mb-4",children:f.jsx(ue,{type:"error",children:d})}),m&&f.jsx("div",{className:"mb-4",children:f.jsx(ue,{type:"success",children:m})}),f.jsxs("form",{onSubmit:x,className:"space-y-5",children:[f.jsxs("div",{className:"relative",children:[f.jsx("label",{htmlFor:"current-password",className:"sr-only",children:"Current Password"}),f.jsx(Sn,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),f.jsx("input",{id:"current-password",type:"password",value:o,onChange:C=>i(C.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Current Password",required:!0})]}),f.jsxs("div",{className:"relative",children:[f.jsx("label",{htmlFor:"new-password",className:"sr-only",children:"New Password"}),f.jsx(Sn,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),f.jsx("input",{id:"new-password",type:"password",value:r,onChange:C=>s(C.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"New Password",required:!0})]}),f.jsxs("div",{className:"relative",children:[f.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm New Password"}),f.jsx(Sn,{className:"pointer-events-none w-5 h-5 absolute top-1/2 transform -translate-y-1/2 left-4 text-slate-400"}),f.jsx("input",{id:"confirm-password",type:"password",value:u,onChange:C=>c(C.target.value),className:"w-full py-3 pl-12 pr-4 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"Confirm New Password",required:!0})]}),f.jsx("button",{type:"submit",className:"w-full bg-primary-600 text-white font-semibold py-2.5 px-5 rounded-lg hover:bg-primary-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500 transition-all duration-200 shadow-sm hover:shadow-md",children:"Update Password"})]})]})}):null},yT=({user:e,onLogout:t})=>{const{currentSection:n,handleSectionChange:o}=rg(e.username),[i,r]=L.useState(!1),[s,u]=L.useState(!1),c=p=>{o(p),r(!1)},d=()=>{switch(n){case U.HOME:return f.jsx(uu,{onSectionChange:c});case U.JOB_AID:return f.jsx(vg,{});case U.CASE_STUDY:return f.jsx(xg,{});case U.VISUAL_CHALLENGE:return f.jsx(wg,{user:e});case U.DIAGNOSTIC_PATHWAY:return f.jsx(_g,{user:e});case U.AI_CASE_GENERATOR:return f.jsx(cT,{user:e});case U.ANALYSIS:return f.jsx(dT,{user:e});case U.DESIGN:return f.jsx(fT,{});case U.DEVELOPMENT:return f.jsx(pT,{});case U.EVALUATION:return f.jsx(Mc,{user:e});case U.ASSESSMENT:return f.jsx(Mc,{user:e});case U.ADMIN:return f.jsx(mT,{});default:return f.jsx(uu,{onSectionChange:c})}};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex",children:[f.jsxs("div",{className:`fixed inset-0 z-30 transition-transform transform ${i?"translate-x-0":"-translate-x-full"} md:hidden`,children:[f.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>r(!1)}),f.jsx("div",{className:"relative w-72 h-full",children:f.jsx(lu,{user:e,onLogout:t,currentSection:n,onSectionChange:c,onChangePasswordClick:()=>u(!0),className:"h-full"})})]}),f.jsx(lu,{user:e,onLogout:t,currentSection:n,onSectionChange:c,onChangePasswordClick:()=>u(!0),className:"hidden md:block w-72 flex-shrink-0"}),f.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[f.jsx(yg,{currentSection:n,onMenuClick:()=>r(!0)}),f.jsx("main",{className:"p-4 sm:p-6 md:p-8 lg:p-12 flex-1",children:d()})]})]}),f.jsx(gT,{user:e,isOpen:s,onClose:()=>u(!1)})]})},vT=()=>{const{currentUser:e,login:t,signup:n,logout:o,isLoading:i}=ig();return i?f.jsx("div",{className:"min-h-screen bg-slate-100"}):f.jsx("div",{className:"min-h-screen bg-slate-50 text-slate-800",children:e?f.jsx(yT,{user:e,onLogout:o}):f.jsx(gg,{onLogin:t,onSignup:n})})},Ep=document.getElementById("root");if(!Ep)throw new Error("Could not find root element to mount to");const xT=Wr.createRoot(Ep);xT.render(f.jsx(zc.StrictMode,{children:f.jsx(vT,{})}));
